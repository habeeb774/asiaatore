import{r as n,j as e}from"./vendor.react-BIXKTxlu.js";import{e as P,u as O,S as L,P as b,I as m,B as N,D as x,g as k}from"./index-B9WgXUd4.js";import"./vendor-CKneRQof.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-Dl6I9sMh.js";/* empty css                     */const z=()=>{const{user:r,logout:w}=P()||{},{locale:a}=O(),[S,u]=n.useState(!0),[h,g]=n.useState(!1),[p,o]=n.useState(""),[f,j]=n.useState(""),[l,y]=n.useState({name:"",email:"",phone:""});n.useEffect(()=>{let s=!0;return u(!0),(async()=>{try{const i=await k.me(),d=i?.user||i||{};s&&y({name:d.name||r?.name||"",email:d.email||r?.email||"",phone:d.phone||""})}catch(i){s&&o(i.message||"فشل تحميل البيانات")}finally{s&&u(!1)}})(),()=>{s=!1}},[r]);const v=s=>{const{name:t,value:i}=s.target;y(d=>({...d,[t]:i}))},E=async s=>{s.preventDefault(),g(!0),o(""),j("");try{const t={name:l.name,phone:l.phone};await k.meUpdate(t),j(a==="ar"?"تم حفظ البيانات بنجاح":"Saved successfully")}catch(t){o(t.message||(a==="ar"?"فشل الحفظ":"Save failed"))}finally{g(!1)}},c=a==="ar"?"ملفي الشخصي":"My Profile";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50/60 via-white to-white dark:from-gray-900 dark:via-gray-900 dark:to-gray-900",children:[e.jsx(L,{title:c,description:c}),e.jsx("div",{className:"container-custom px-4 pt-8",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-emerald-500 to-sky-500 text-white shadow-lg",children:[e.jsx("div",{className:"absolute -top-12 -right-12 h-40 w-40 rounded-full bg-white/15 blur-2xl"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 h-48 w-48 rounded-full bg-black/10 blur-2xl"}),e.jsx("div",{className:"relative z-10 p-6 md:p-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-sky-500/30 text-white backdrop-blur flex items-center justify-center font-bold",children:(l.name||r?.name||"U").slice(0,1)}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-extrabold tracking-tight",children:c}),e.jsxs("p",{className:"text-black/85 text-sm",children:[a==="ar"?"مرحبًا":"Welcome",","," ",e.jsx("span",{className:"text-sky-200 font-semibold",children:l.name||r?.name||(a==="ar"?"ضيف":"Guest")})]})]}),e.jsx("div",{className:"ms-auto flex items-center gap-2 text-sm",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-3 py-1",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-lime-300 animate-pulse"}),a==="ar"?"متصل":"Online"]})})]})})]})}),e.jsx("div",{className:"container-custom px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,1fr),360px] gap-6",children:[e.jsx(b,{as:"section",children:S?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,t)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200/80 dark:bg-gray-700 rounded w-1/4 mb-3"}),e.jsx("div",{className:"h-11 bg-gray-200/60 dark:bg-gray-700/80 rounded-xl"})]},t))}):e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[p&&e.jsx("div",{className:"text-sm rounded-xl border border-red-200 bg-red-50 text-red-700 px-4 py-3",children:p}),f&&e.jsx("div",{className:"text-sm rounded-xl border border-emerald-200 bg-emerald-50 text-emerald-800 px-4 py-3",children:f}),e.jsx(m,{name:"name",label:a==="ar"?"الاسم":"Name",value:l.name,onChange:v,required:!0}),e.jsx(m,{name:"email",label:a==="ar"?"البريد الإلكتروني":"Email",value:l.email,readOnly:!0,className:"bg-gray-50 dark:bg-gray-900/50 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a==="ar"?"البريد غير قابل للتعديل":"Email is not editable"}),e.jsx(m,{name:"phone",label:a==="ar"?"رقم الجوال":"Phone",value:l.phone,onChange:v,placeholder:"05xxxxxxxx"}),e.jsxs("div",{className:"flex gap-3 pt-3",children:[e.jsx(N,{type:"submit",disabled:h,children:h?a==="ar"?"جارِ الحفظ...":"Saving...":a==="ar"?"حفظ":"Save"}),e.jsx(x,{to:"/account/security",variant:"outline",children:a==="ar"?"الأمان وكلمة المرور":"Security & Password"})]})]})}),e.jsxs(b,{as:"aside",className:"h-fit lg:sticky lg:top-6",children:[e.jsx("h3",{className:"font-bold mb-4 text-gray-900 dark:text-gray-100",children:a==="ar"?"روابط سريعة":"Quick links"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(x,{to:"/my-orders",variant:"outline",children:a==="ar"?"طلباتي":"My Orders"}),e.jsx(x,{to:"/offers",variant:"outline",children:a==="ar"?"العروض":"Offers"}),e.jsx(N,{onClick:w,variant:"destructive",children:a==="ar"?"تسجيل الخروج":"Logout"})]}),r?.role&&e.jsx("div",{className:"mt-5 text-xs text-gray-600 dark:text-gray-300",children:e.jsxs("div",{children:[a==="ar"?"الدور:":"Role:"," ",e.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:r.role})]})})]})]})})]})};export{z as default};
