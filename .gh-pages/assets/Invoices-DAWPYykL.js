import{r as s,j as t}from"./vendor.react-BIXKTxlu.js";import{v as b}from"./index-B9WgXUd4.js";import{D as j}from"./DataTable-CmXR19l9.js";import{l as S,a as A}from"./invoiceService-DtD4X6Tr.js";import"./vendor-CKneRQof.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-Dl6I9sMh.js";/* empty css                     */function R(){const[r,n]=s.useState(!1),[i,l]=s.useState(null),[a,c]=s.useState(1),[o,m]=s.useState(25),[u,p]=s.useState(0),[x,h]=s.useState([]);async function d(){n(!0),l(null);try{const e=await S({page:a,pageSize:o});h(Array.isArray(e)?e:e.items||[]),p(e.total??(Array.isArray(e)?e.length:0))}catch(e){l(e.message)}finally{n(!1)}}s.useEffect(()=>{d()},[a,o]);const g=[{header:"ID",accessorKey:"id"},{header:"Order",cell:e=>e.orderId},{header:"Amount",cell:e=>`${Number(e.total||0).toFixed(2)} SAR`},{header:"Created",cell:e=>new Date(e.createdAt).toLocaleString()},{header:"Actions",cell:e=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"btn-outline btn-xs",onClick:()=>A(e.id).catch(f=>alert(f.message)),children:"PDF"}),t.jsx("a",{className:"btn-outline btn-xs",href:`/api/invoices/${encodeURIComponent(e.id)}`,target:"_blank",rel:"noopener",children:"HTML"})]})}];return t.jsx(b,{title:"الفواتير",topbar:t.jsxs("div",{className:"flex items-center gap-2",children:[i&&t.jsx("span",{className:"text-red-600 text-sm",children:i}),t.jsx("button",{className:"btn-outline",onClick:d,disabled:r,children:"تحديث"})]}),children:r?t.jsx("div",{className:"skeleton h-20"}):t.jsx(j,{columns:g,data:x,serverMode:!0,page:a,pageSize:o,total:u,onPageChange:c,onPageSizeChange:e=>{m(e),c(1)}})})}export{R as default};
