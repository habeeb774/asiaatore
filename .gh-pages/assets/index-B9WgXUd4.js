const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor.motion-CEYbfUzq.js","assets/vendor.react-BIXKTxlu.js","assets/vendor-CKneRQof.js","assets/vendor.router-BdFOcp8q.js","assets/vendor.i18next-COqwnjR1.js","assets/vendor.zustand-BuMo4m-J.js","assets/vendor.tanstack-K6OTystZ.js","assets/vendor.leaflet-Dl6I9sMh.js","assets/Home-nlMLq94n.js","assets/ProductCard-CBwehriS.js","assets/LazyImage-Dc5lMgrN.js","assets/Home-Dam-pyhB.css","assets/Cart-CORDAYbD.js","assets/vendor-B1-rhOTE.css","assets/CheckoutPage-CbmVguQj.js","assets/reactLeafletCompat-CJfjRSDT.js","assets/paymentService-CJCDmSv0.js","assets/index-mnDEV8hL.js","assets/ResetPasswordPage-CeM0P5HY.js","assets/VerifyEmailPage-C6sCrmjt.js","assets/Orders-BhFyM1P7.js","assets/invoiceService-DtD4X6Tr.js","assets/MyOrders-qCLt5BE6.js","assets/OrderDetails-p19YF5XO.js","assets/AdminDashboard-B4pJiWHe.js","assets/AdminPage-ZStTfICb.css","assets/ProductInventory-DvjXzqyj.js","assets/Orders-CqybTGLt.js","assets/DataTable-CmXR19l9.js","assets/ConfirmModal-CBQLnJ0u.js","assets/Products-Bq5UUnqZ.js","assets/products-CwuqQWxp.js","assets/Invoices-DAWPYykL.js","assets/Marketing-C8BG_mkS.js","assets/Apps-BOfN4-gV.js","assets/Integrations-BNhkdVri.js","assets/SellerDashboard-BQhfUlMl.js","assets/StoreContext-DUYNBm8M.js","assets/DeliveryDashboard-BlPc4GSC.js","assets/Badge-BxiMcqhp.js","assets/RoutePlanner-BZRRew1u.js","assets/ProductDetailPage-JoAJqUa0.js","assets/ProductDetailPage-B1oiAMKh.css","assets/StoresPage-nu3K0b3W.js","assets/OffersPage-CWyUkeZ4.js","assets/ProductGridSkeleton-CFLjTsey.js","assets/InvoiceViewer-CdiFRrOi.js","assets/CatalogPage-DMStKmTa.js","assets/Legal-SYChWhwc.js","assets/Products-mZWTKzTS.js","assets/Chat-DunndQGL.js","assets/StyleGuide-BJuEy92p.js","assets/Profile-DDPZcQ2F.js","assets/ProductManager-CuVg5OhD.js","assets/OrderTracker-uDpEp1ra.js","assets/Addresses-CX7OBO7y.js","assets/SellerKyc-DI42CqiI.js","assets/AdminKycReview-D1PKaHh5.js","assets/Map-BzGZLzSH.js","assets/History-C4AugFeN.js","assets/Availability-DNB9X7WU.js","assets/DeliverySummary-D0pbpNgJ.js","assets/UIPreview-B_hhICA2.js","assets/Chip-DBCBBoVO.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,R as E,u as ue,b as Le,c as Ks,L as de,H as bs,P as De,B as js,d as Kt,S as Jt,C as Zt,e as Ie,X as Ue,M as vs,f as Js,h as Gs,i as Xs,k as Qs,l as Vt,U as Oe,m as Ys,n as Zs,o as er,T as ws,p as $e,q as es,t as ts,v as ss,w as rs,x as tr,y as sr,z as rr,A as ar,D as nr,G as ir,N as le,E as Me,F as or,I as lr,J as cr,K as dr,O as ur,Q as mr,V as pr,W as as,Y as hr,Z as gr,_ as xr,$ as fr,a0 as yr,a1 as br,a2 as jr,a3 as vr,a4 as wr,a5 as Sr,a6 as kr,a7 as Nr,a8 as S,a9 as Ar,aa as Cr,ab as Er,ac as Rr,ad as Tr,ae as _r,af as Pr,ag as Ir}from"./vendor.react-BIXKTxlu.js";import{_ as J,b as Or}from"./vendor.tanstack-K6OTystZ.js";import{b_ as Gt,b$ as Ss,c0 as ks,c1 as Lr}from"./vendor-CKneRQof.js";import{p as Dr}from"./vendor.zustand-BuMo4m-J.js";/* empty css                     */import{i as Ns}from"./vendor.i18next-COqwnjR1.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.leaflet-Dl6I9sMh.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const ns="https://my-store-backend-production.up.railway.app/api";let Ae="/api";if(ns.trim()){const t=ns.replace(/\/$/,"");if(t.startsWith("/"))Ae=t;else try{const s=new URL(t),r=s.pathname&&s.pathname!=="/"?s.pathname.replace(/\/$/,""):"";Ae=s.origin+r}catch{Ae=t}}const Ur=(()=>{const s=Number("6000");return Number.isFinite(s)&&s>0?s:12e3})();async function I(t,s={}){const r=Ae+t;let n,o=null;try{o=localStorage.getItem("my_store_token")}catch{}const d={...s.body instanceof FormData?{}:{"Content-Type":"application/json"},...s.headers||{}};o&&(d.Authorization=`Bearer ${o}`);const l=new AbortController,f=l.signal,v=t.startsWith("/auth"),b=t==="/events"||t==="/api/events"||r.endsWith("/api/events"),y=typeof s.timeout=="number"?s.timeout:Ur;let x=null;!b&&y>0&&(x=setTimeout(()=>{try{l.abort("timeout")}catch{}},y));try{n=await fetch(r,{headers:d,signal:f,...s,...v?{credentials:"include"}:{}})}catch(p){const u=p&&(p.name==="AbortError"||p==="timeout")?`Timeout after ${y}ms`:p?.message||"Unknown error";throw Object.assign(new Error("Network error: "+u),{code:"NETWORK",reason:u})}finally{x&&clearTimeout(x)}if(n.status===401&&!s._retry)try{const p=await fetch(Ae+"/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(p.ok){const u=await p.json();if(u?.accessToken){try{localStorage.setItem("my_store_token",u.accessToken)}catch{}const w={...d,Authorization:`Bearer ${u.accessToken}`},O=await fetch(r,{headers:w,...s,_retry:!0});if(!O.ok)throw new Error(`API Error ${O.status} after refresh`);return O.json()}}}catch{}if(!n.ok){let p="",u;try{p=await n.text()}catch{}if(p)try{u=JSON.parse(p)}catch{}const w=(s.method||"GET").toUpperCase(),O=`API Error ${n.status} ${n.statusText} (${w} ${t})`+(u?.error?` code=${u.error}`:"");if(s&&s.suppressLog,u&&typeof u=="object")return Promise.reject(Object.assign(new Error(O),{code:u.error,data:u,status:n.status}));throw new Error(O)}return n.json()}const X={request:I,listProducts:()=>I("/products"),getProduct:t=>I(`/products/${t}`),searchProducts:t=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,n)}),I("/products"+(s.toString()?`?${s.toString()}`:""))},createProduct:t=>I("/products",{method:"POST",body:JSON.stringify(t)}),updateProduct:(t,s)=>I(`/products/${t}`,{method:"PUT",body:JSON.stringify(s)}),deleteProduct:t=>I(`/products/${t}`,{method:"DELETE"}),listOffers:()=>I("/products/offers"),createProductForm:t=>I("/products",{method:"POST",body:t}),updateProductForm:(t,s)=>I(`/products/${encodeURIComponent(t)}`,{method:"PUT",body:s}),listOrders:t=>I("/orders"+(t?`?userId=${encodeURIComponent(t)}`:"")),getOrder:t=>I(`/orders/${t}`),createOrder:t=>I("/orders",{method:"POST",body:JSON.stringify(t)}),updateOrder:(t,s)=>I(`/orders/${t}`,{method:"PATCH",body:JSON.stringify(s||{})}),authLogin:(t,s)=>I("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s}),credentials:"include"}),authRegister:(t,s,r)=>I("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:s,name:r}),credentials:"include"}),authLogout:()=>I("/auth/logout",{method:"POST",credentials:"include"}),me:()=>I("/auth/me"),meUpdate:t=>I("/auth/me",{method:"PATCH",body:JSON.stringify(t||{})}),wishlistList:()=>I("/wishlist"),wishlistAdd:t=>I("/wishlist",{method:"POST",body:JSON.stringify({productId:t})}),wishlistRemove:t=>I(`/wishlist/${t}`,{method:"DELETE"}),reviewsModerationList:()=>I("/reviews/moderation"),reviewModerate:(t,s)=>I(`/reviews/${encodeURIComponent(t)}/moderate`,{method:"POST",body:JSON.stringify({action:s})}),reviewsListForProduct:t=>I(`/reviews?productId=${encodeURIComponent(t)}`),cartList:()=>I("/cart"),cartSet:(t,s)=>I("/cart/set",{method:"POST",body:JSON.stringify({productId:t,quantity:s})}),cartRemoveItem:t=>I(`/cart/item/${encodeURIComponent(t)}`,{method:"DELETE"}),cartMerge:t=>I("/cart/merge",{method:"POST",body:JSON.stringify({items:t})}),cartClear:()=>I("/cart",{method:"DELETE"}),bankConfirm:(t,s)=>I("/pay/bank/confirm",{method:"POST",body:JSON.stringify({orderId:t,reference:s})}),bankReject:(t,s)=>I("/pay/bank/reject",{method:"POST",body:JSON.stringify({orderId:t,reason:s})}),listCategories:(t,s)=>{const r=new URLSearchParams,n=t||{};return n.withCounts&&r.append("withCounts",String(n.withCounts)),I("/categories"+(r.toString()?`?${r.toString()}`:""),s||{})},getCategoryBySlug:t=>I(`/categories/slug/${encodeURIComponent(t)}`),categoryCreate:t=>t instanceof FormData?I("/categories",{method:"POST",body:t}):I("/categories",{method:"POST",body:JSON.stringify(t)}),categoryUpdate:(t,s)=>s instanceof FormData?I(`/categories/${encodeURIComponent(t)}`,{method:"PUT",body:s}):I(`/categories/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(s)}),categoryDelete:t=>I(`/categories/${encodeURIComponent(t)}`,{method:"DELETE"}),createCategory:function(t){return this.categoryCreate(t)},createCategoryForm:function(t){return this.categoryCreate(t)},updateCategory:function(t,s){return this.categoryUpdate(t,s)},updateCategoryForm:function(t,s){return this.categoryUpdate(t,s)},deleteCategory:function(t){return this.categoryDelete(t)},settingsGet:()=>I("/settings"),settingsUpdate:t=>I("/settings",{method:"PATCH",body:JSON.stringify(t||{})}),settingsUploadLogo:t=>{const s=new FormData;return s.append("logo",t),I("/settings/logo",{method:"POST",body:s})},whatsappHealth:(t={})=>I("/invoices/_whatsapp",t||{}),whatsappSendInvoiceByOrder:t=>I(`/invoices/by-order/${encodeURIComponent(t)}/whatsapp`,{method:"POST"}),envGet:()=>I("/env"),envUpdate:(t,s)=>I("/env",{method:"PATCH",body:JSON.stringify({scope:t,entries:s})}),envDbTest:t=>I("/env/db/test",{method:"POST",body:JSON.stringify(t||{})}),brandsList:()=>I("/brands"),marketingFeatures:()=>I("/marketing/features"),marketingBanners:()=>I("/marketing/banners"),marketingAppLinks:()=>I("/marketing/app-links"),marketingTrack:t=>I("/marketing/track",{method:"POST",body:JSON.stringify(t||{})}),marketingMetrics:(t=30)=>I(`/marketing/metrics?days=${encodeURIComponent(t)}`),marketingFeatureCreate:t=>I("/marketing/features",{method:"POST",body:JSON.stringify(t||{})}),marketingFeatureUpdate:(t,s)=>I(`/marketing/features/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingFeatureDelete:t=>I(`/marketing/features/${encodeURIComponent(t)}`,{method:"DELETE"}),marketingBannerCreate:t=>I("/marketing/banners",{method:"POST",body:JSON.stringify(t||{})}),marketingBannerUpdate:(t,s)=>I(`/marketing/banners/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingBannerDelete:t=>I(`/marketing/banners/${encodeURIComponent(t)}`,{method:"DELETE"}),marketingAppLinkCreate:t=>I("/marketing/app-links",{method:"POST",body:JSON.stringify(t||{})}),marketingAppLinkUpdate:(t,s)=>I(`/marketing/app-links/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingAppLinkDelete:t=>I(`/marketing/app-links/${encodeURIComponent(t)}`,{method:"DELETE"}),listAds:()=>I("/ads"),createAd:t=>I("/ads",{method:"POST",body:JSON.stringify(t)}),updateAd:(t,s)=>I(`/ads/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s)}),deleteAd:t=>I(`/ads/${encodeURIComponent(t)}`,{method:"DELETE"}),searchTypeahead:t=>I(`/search/typeahead?q=${encodeURIComponent(t||"")}`),catalogSummary:()=>I("/products/catalog/summary"),tierList:t=>I(`/tier-prices/products/${encodeURIComponent(t)}/tier-prices`),tierCreate:(t,s)=>I(`/tier-prices/products/${encodeURIComponent(t)}/tier-prices`,{method:"POST",body:JSON.stringify(s||{})}),tierUpdate:(t,s)=>I(`/tier-prices/tier-prices/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),tierDelete:t=>I(`/tier-prices/tier-prices/${encodeURIComponent(t)}`,{method:"DELETE"}),deliveryList:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,String(n))}),I("/delivery/orders"+(s.toString()?`?${s.toString()}`:""))},deliveryAccept:t=>I(`/delivery/orders/${encodeURIComponent(t)}/accept`,{method:"POST"}),deliveryReject:t=>I(`/delivery/orders/${encodeURIComponent(t)}/reject`,{method:"POST"}),deliveryStart:t=>I(`/delivery/orders/${encodeURIComponent(t)}/start`,{method:"POST"}),deliveryComplete:(t,s)=>s instanceof FormData?I(`/delivery/orders/${encodeURIComponent(t)}/complete`,{method:"POST",body:s}):I(`/delivery/orders/${encodeURIComponent(t)}/complete`,{method:"POST",body:JSON.stringify(s||{})}),deliveryFail:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/fail`,{method:"POST",body:JSON.stringify({reason:s})}),deliveryLocation:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/location`,{method:"POST",body:JSON.stringify(s||{})}),deliveryStatusPatch:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/status`,{method:"PATCH",body:JSON.stringify({status:s})}),deliveryOtpGenerate:t=>I(`/delivery/orders/${encodeURIComponent(t)}/otp/generate`,{method:"POST"}),deliveryOtpConfirm:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/otp/confirm`,{method:"POST",body:JSON.stringify({code:s})}),deliverySignature:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/signature`,{method:"POST",body:s}),deliveryProfileGet:()=>I("/delivery/me/profile"),deliveryProfileUpdate:t=>I("/delivery/me/profile",{method:"PATCH",body:JSON.stringify(t||{})}),deliveryHistory:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,String(n))}),I("/delivery/orders/history"+(s.toString()?`?${s.toString()}`:""))},shippingQuote:t=>I("/shipping/quote",{method:"POST",body:JSON.stringify({address:t||{}})}),orderShipments:(t,s={})=>I(`/orders/${encodeURIComponent(t)}/ship`+(s.refresh?"?refresh=1":"")),setupStatus:()=>I("/setup/status"),setupAdmin:t=>I("/setup/admin",{method:"POST",body:JSON.stringify(t||{})}),inventoryList:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,String(n))}),I("/inventory"+(s.toString()?`?${s.toString()}`:""))},inventoryByProduct:t=>I(`/inventory/${encodeURIComponent(t)}`),inventoryLowStock:()=>I("/inventory/low-stock"),inventoryAdjust:(t,s)=>I(`/inventory/${encodeURIComponent(t)}/update`,{method:"POST",body:JSON.stringify(s||{})}),inventoryReserve:(t,s,r=null)=>I("/inventory/reserve",{method:"POST",body:JSON.stringify({order_id:t,items:s,warehouse_id:r})}),inventoryRelease:t=>I("/inventory/release",{method:"POST",body:JSON.stringify({order_id:t})}),reportInventoryMovement:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,String(n))}),I("/reports/inventory-movement"+(s.toString()?`?${s.toString()}`:""))},reportTopSelling:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,String(n))}),I("/reports/top-selling"+(s.toString()?`?${s.toString()}`:""))},reportStockValuation:()=>I("/reports/stock-valuation")},Ht=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"})),We={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_TIMEOUT_MS:"6000",VITE_API_URL:"https://my-store-backend-production.up.railway.app/api",VITE_PROXY_TARGET:"https://my-store-backend-production.up.railway.app"},As=i.createContext(null),zr=({children:t})=>{const[s,r]=i.useState(null),[n,o]=i.useState(!0),[a,d]=i.useState(null);i.useEffect(()=>{let b=!0;return(async()=>{try{const y=await X.settingsGet();if(!b)return;let x=y.setting||null;if(x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/api/uploads")&&(x.logo=x.logo.replace(/^\/api/,"")),x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/")){const p=x.logo.startsWith("/uploads"),u=We&&"https://my-store-backend-production.up.railway.app/api";let w=window.location.origin;if(p){if(u&&typeof u=="string"&&u.trim()&&!u.startsWith("/"))try{w=new URL(u).origin}catch{}else w.includes(":517")&&(w=w.replace(/:\d+$/,":4000"));x.logoUrl=w+x.logo}else x.logoUrl=x.logo}r(x)}catch(y){d(y.message)}finally{o(!1)}})(),()=>{b=!1}},[]),i.useEffect(()=>{if(!s)return;const b=document.documentElement,y=(p,u)=>{try{if(!u)return;let w=document.head.querySelector(`link[rel="${p}"]`);w||(w=document.createElement("link"),w.setAttribute("rel",p),document.head.appendChild(w)),w.setAttribute("href",u)}catch{}};s.logo&&(y("icon",s.logo),y("shortcut icon",s.logo),y("apple-touch-icon",s.logo));const x=(p,u)=>{if(u){if(p==="colorPrimary"){b.style.setProperty("--color-primary",u);const w=is(u);w&&b.style.setProperty("--color-primary-rgb",w)}if(p==="colorSecondary"&&(b.style.setProperty("--color-primary-alt",u),b.style.setProperty("--color-secondary",u)),p==="colorAccent"){b.style.setProperty("--color-accent",u);const w=is(u);w&&b.style.setProperty("--color-accent-rgb",w)}}};x("colorPrimary",s.colorPrimary),x("colorSecondary",s.colorSecondary),x("colorAccent",s.colorAccent),s.colorPrimary&&s.colorSecondary&&b.style.setProperty("--grad-primary",`linear-gradient(90deg, ${s.colorPrimary}, ${s.colorSecondary})`);try{const p=s.siteNameAr||s.siteNameEn;if(p){let u=document.head.querySelector('meta[property="og:site_name"]');u||(u=document.createElement("meta"),u.setAttribute("property","og:site_name"),document.head.appendChild(u)),u.setAttribute("content",p)}}catch{}},[s]);const l=async b=>{let x=(await X.settingsUpdate(b)).setting;if(x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/api/uploads")&&(x.logo=x.logo.replace(/^\/api/,"")),x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/")){const p=x.logo.startsWith("/uploads"),u=We&&"https://my-store-backend-production.up.railway.app/api";if(p){let w=window.location.origin;if(u&&typeof u=="string"&&u.trim()&&!u.startsWith("/"))try{w=new URL(u).origin}catch{}else w.includes(":517")&&(w=w.replace(/:\d+$/,":4000"));x.logoUrl=w+x.logo}else x.logoUrl=x.logo}return r(x),x},f=async b=>{let x=(await X.settingsUploadLogo(b)).setting;if(x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/api/uploads")&&(x.logo=x.logo.replace(/^\/api/,"")),x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/")){const p=x.logo.startsWith("/uploads"),u=We&&"https://my-store-backend-production.up.railway.app/api";if(p){let w=window.location.origin;if(u&&typeof u=="string"&&u.trim()&&!u.startsWith("/"))try{w=new URL(u).origin}catch{}else w.includes(":517")&&(w=w.replace(/:\d+$/,":4000"));x.logoUrl=w+x.logo}else x.logoUrl=x.logo}return x&&r(x),x||null},v=i.useMemo(()=>({setting:s,loading:n,error:a,update:l,uploadLogo:f}),[s,n,a]);return e.jsx(As.Provider,{value:v,children:t})},ke=()=>i.useContext(As);function is(t){try{const s=t.replace("#",""),r=parseInt(s.length===3?s.split("").map(d=>d+d).join(""):s,16),n=r>>16&255,o=r>>8&255,a=r&255;return`${n},${o},${a}`}catch{return null}}let Fe=null;function Cs(){return Fe||(Fe=J(()=>import("./vendor.motion-CEYbfUzq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(t=>t).catch(()=>null)),Fe}function $r(t){return function(r){const[n,o]=E.useState(()=>null);if(E.useEffect(()=>{let d=!0;return Cs().then(l=>{if(!d)return;if(!l)return o(()=>null);const f=l[t];o(()=>f||null)}),()=>{d=!1}},[]),!n)return r.fallback||null;const a=n;return e.jsx(a,{...r})}}const xe=new Proxy({},{get(t,s){const r=String(s),n=function(a){const[d,l]=E.useState(null);if(E.useEffect(()=>{let v=!0;return Cs().then(b=>{if(!v)return;if(!b)return l(()=>null);const y=b.motion||b,x=y&&y[r];l(()=>x||null)}),()=>{v=!1}},[]),!d)return a.fallback||null;const f=d;return e.jsx(f,{...a})};return n.displayName=`LazyMotion.${r}`,n}}),ze=$r("AnimatePresence"),Es=i.createContext(),Mr=({children:t,initialLocale:s})=>{ue?.();const r=Le?.(),{i18n:n,t:o}=Ks(),a=typeof window<"u"?window.location.pathname.split("/").filter(Boolean)[0]:null,d=a&&["ar","en","fr"].includes(a)?a:s||n?.language||"ar",[l,f]=i.useState(d),v=i.useCallback(x=>{f(x);try{n?.changeLanguage(x)}catch{}try{localStorage.setItem("lang",x)}catch{}if(typeof window>"u"||!r)return;const p=window.location.pathname.split("/").filter(Boolean);p[0]&&["ar","en","fr"].includes(p[0])&&p.shift(),x!=="ar"&&p.unshift(x);const u="/"+p.join("/");r(u+window.location.search,{replace:!0})},[r,n]),b=i.useCallback(x=>o(x),[o]),y=i.useMemo(()=>({locale:l,setLocale:v,t:b,available:["ar","en","fr"]}),[l,b,v]);return i.useEffect(()=>{try{typeof document<"u"&&(document.documentElement.lang=l||"ar",document.documentElement.dir=l==="ar"?"rtl":"ltr",l==="ar"?document.documentElement.classList.add("is-rtl"):document.documentElement.classList.remove("is-rtl"))}catch{}},[l]),e.jsx(Es.Provider,{value:y,children:t})},pe=()=>{const t=i.useContext(Es);return t||{t:s=>s,locale:"ar",setLocale:()=>{},available:["ar","en","fr"]}},Rs=i.createContext({theme:"system",setTheme:()=>{}}),Wr=t=>{if(t==="dark")return"dark";if(t==="light")return"light";try{return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}},Be=t=>{if(typeof document>"u")return;const s=document.documentElement,r=Wr(t);s.classList.remove("theme-light","theme-dark"),r==="light"&&t!=="system"&&s.classList.add("theme-light"),r==="dark"&&t!=="system"&&s.classList.add("theme-dark");try{s.setAttribute("data-theme",r)}catch{}},Fr=()=>{try{const t=localStorage.getItem("theme");if(t&&["light","dark","system"].includes(t))return t}catch{}return"system"},Br=({children:t})=>{const[s,r]=i.useState(Fr),n=i.useRef(null);i.useEffect(()=>{Be(s)},[s]),i.useEffect(()=>{try{localStorage.setItem("theme",s)}catch{}},[s]),i.useEffect(()=>{Be(s)},[]),i.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;if(n.current&&n.current.removeEventListener)try{n.current.removeEventListener("change",l)}catch{}const d=window.matchMedia("(prefers-color-scheme: dark)");n.current=d;function l(){s==="system"&&Be("system")}try{d.addEventListener("change",l)}catch{}return()=>{try{d.removeEventListener("change",l)}catch{}}},[s]);const o=i.useCallback(d=>{["light","dark","system"].includes(d)&&r(d)},[]),a=i.useMemo(()=>({theme:s,setTheme:o}),[s,o]);return e.jsx(Rs.Provider,{value:a,children:t})},Xt=()=>i.useContext(Rs),Ts=i.createContext(null);let qr=1;const Vr=({children:t})=>{const[s,r]=i.useState([]),n=i.useCallback(d=>{r(l=>l.filter(f=>f.id!==d))},[]),o=i.useCallback(d=>{const l=qr++,{type:f="info",title:v,description:b,duration:y=3500,action:x}=d||{},p={id:l,type:f,title:v,description:b,action:x,createdAt:Date.now()};return r(u=>[...u,p]),y>0&&setTimeout(()=>n(l),y),l},[n]),a=i.useMemo(()=>({show:o,success:(d,l,f,v={})=>o({type:"success",title:d,description:l,duration:f,...v}),error:(d,l,f,v={})=>o({type:"error",title:d,description:l,duration:f,...v}),info:(d,l,f,v={})=>o({type:"info",title:d,description:l,duration:f,...v}),warn:(d,l,f,v={})=>o({type:"warn",title:d,description:l,duration:f,...v})}),[o]);return e.jsxs(Ts.Provider,{value:a,children:[t,e.jsx("div",{className:"toaster","aria-live":"polite","aria-atomic":"true",children:s.map(d=>e.jsxs("div",{className:`toast toast-${d.type}`,role:"status",onClick:()=>n(d.id),children:[d.title&&e.jsx("div",{className:"toast-title",children:d.title}),d.description&&e.jsx("div",{className:"toast-desc",children:d.description}),d.action&&d.action.label?e.jsx("button",{type:"button",className:"toast-action",onClick:l=>{l.stopPropagation();try{d.action.onClick?.()}catch{}d.action.autoClose!==!1&&n(d.id)},children:d.action.label}):null]},d.id))})]})},Ne=()=>i.useContext(Ts),_s=i.createContext(null),Hr=({children:t})=>{const s=Ne?.(),[r,n]=i.useState(()=>{try{const l=localStorage.getItem("my_store_user");return l?JSON.parse(l):null}catch{return null}});i.useEffect(()=>{try{r?localStorage.setItem("my_store_user",JSON.stringify(r)):localStorage.removeItem("my_store_user")}catch{}},[r]),i.useEffect(()=>{try{!localStorage.getItem("my_store_token")&&r&&n(null)}catch{}},[]);const o=async(l,f)=>{try{const v=await X.authLogin(l,f);if(v.ok&&(v.accessToken||v.token)){const y=v.accessToken||v.token;try{localStorage.setItem("my_store_token",y)}catch{}n(v.user);try{s?.success?.("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",v.user?.email||"")}catch{}return{ok:!0}}const b=v?.error;return b==="USER_NOT_FOUND"?s?.warn?.("Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯","ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ù‚Ù… Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„"):b==="WRONG_PASSWORD"?s?.error?.("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©","Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø®ÙŠØ§Ø± Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"):b==="DB_UNAVAILABLE"?s?.error?.("Ø®Ø¯Ù…Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± Ù…ØªØ§Ø­Ø©","Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹ØŒ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ Ø¥Ù† ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹"):b==="MISSING_CREDENTIALS"?s?.warn?.("Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©","ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"):s?.error?.("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",b||"ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"),{ok:!1,error:b||"LOGIN_FAILED"}}catch(v){const b=v?.message?.includes("Network error")?"ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…":"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹";return s?.error?.("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",b),{ok:!1,error:"NETWORK_OR_UNKNOWN"}}},a=(l="user")=>{const v={id:{seller:"seller-1",admin:"admin-1",user:"user-1",delivery:"delivery-1"}[l]||l+"-mock",role:l,name:l};n(v)},d=async()=>{try{await X.request("/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})}catch{}n(null);try{localStorage.removeItem("my_store_token")}catch{}try{s?.info?.("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬")}catch{}};return e.jsx(_s.Provider,{value:{user:r,login:o,logout:d,devLoginAs:a},children:t})},fe=()=>i.useContext(_s);function Kr(t,s,r=typeof window<"u"?window:null){const n=i.useRef();i.useEffect(()=>{n.current=s},[s]),i.useEffect(()=>{if(!r||!r.addEventListener)return;const o=a=>n.current&&n.current(a);return r.addEventListener(t,o),()=>r.removeEventListener(t,o)},[t,r])}const Ps=i.createContext({open:!1,setOpen:()=>{},toggle:()=>{}}),Jr=({children:t,defaultOpen:s=!1})=>{const[r,n]=i.useState(!!s),o=i.useCallback(d=>n(!!d),[]),a=i.useCallback(()=>n(d=>!d),[]);return e.jsx(Ps.Provider,{value:{open:r,setOpen:o,toggle:a},children:t})},Is=()=>i.useContext(Ps),Gr=[{to:"/",labelAr:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",labelEn:"Home",navKey:"home",icon:bs},{to:"/products",labelAr:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",labelEn:"Products",navKey:"products",icon:De},{to:"/catalog",labelAr:"Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",labelEn:"Catalog",navKey:"catalog",icon:js},{to:"/offers",labelAr:"Ø§Ù„Ø¹Ø±ÙˆØ¶",labelEn:"Offers",navKey:"offers",icon:Kt},{to:"/cart",labelAr:"Ø§Ù„Ø³Ù„Ø©",labelEn:"Cart",navKey:"cart",icon:Jt}],Xr=[{to:"/admin",labelAr:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",labelEn:"Dashboard",icon:Xs},{to:"/admin/settings",labelAr:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",labelEn:"Settings",icon:Ie}],Qr=()=>{const{pathname:t}=ue(),{locale:s,t:r,setLocale:n}=pe(),{theme:o,setTheme:a}=Xt(),{user:d}=fe()||{},{setting:l}=ke()||{},f=d?.role==="admin";function v(){try{return Is()}catch{return{}}}const{open:b,toggle:y,setOpen:x}=v(),[p,u]=i.useState(!1),[w,O]=i.useState(!!b),[g,D]=i.useState(!1),P=i.useRef(null),h=i.useRef(null),L=i.useRef(0);i.useEffect(()=>{try{const c=window.matchMedia("(prefers-reduced-motion: reduce)");D(!!c.matches);const j=R=>D(!!R.matches);return c.addEventListener?c.addEventListener("change",j):c.addListener&&c.addListener(j),()=>{c.removeEventListener?c.removeEventListener("change",j):c.removeListener&&c.removeListener(j)}}catch{}},[]),i.useEffect(()=>{if(!C())return;let c=!1;const j=()=>{w&&(O(!1),x&&x(!1))};if(w){try{window.history.pushState({sidebar:!0},""),c=!0}catch{}window.addEventListener("popstate",j)}return()=>{if(c)try{window.removeEventListener("popstate",j)}catch{}}},[w,x]);const C=()=>typeof window<"u"&&window.innerWidth<=980;i.useEffect(()=>{try{const c=localStorage.getItem("sb_collapsed");c!=null&&!C()&&u(c==="1")}catch{}O(!1)},[]),i.useEffect(()=>{if(!C())try{localStorage.setItem("sb_collapsed",p?"1":"0")}catch{}},[p]),i.useEffect(()=>{try{document.body.style.overflow=w?"hidden":""}catch{}try{const j=document.getElementById("main");j&&(w?j.setAttribute("aria-hidden","true"):j.removeAttribute("aria-hidden"))}catch{}const c=j=>{j.key==="Escape"&&w&&O(!1)};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c);try{document.body.style.overflow=""}catch{}try{const j=document.getElementById("main");j&&j.removeAttribute("aria-hidden")}catch{}}},[w]),i.useEffect(()=>{if(!w)return;const c=P.current;if(!c)return;const j=c.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'),R=j[0],k=j[j.length-1];try{R&&R.focus()}catch{}const U=q=>{q.key==="Tab"&&j.length!==0&&(q.shiftKey?document.activeElement===R&&(q.preventDefault(),k&&k.focus()):document.activeElement===k&&(q.preventDefault(),R&&R.focus()))};return c.addEventListener("keydown",U),()=>c.removeEventListener("keydown",U)},[w]),i.useEffect(()=>{if(!w)return;const c=P.current;if(!c)return;const j=U=>{const q=U.touches?.[0];q&&(h.current=q.clientX,L.current=0)},R=U=>{if(h.current==null)return;const q=U.touches?.[0];if(!q)return;const z=q.clientX-h.current;if(L.current=z,z<0){const N=Math.max(z,-120);c.style.transform=`translate3d(${N}px,0,0)`,c.style.transition=g?"none":"transform 0s"}},k=()=>{const U=L.current||0;c.style.transition="",c.style.transform="",h.current=null,L.current=0,U<-60&&O(!1)};return c.addEventListener("touchstart",j,{passive:!0}),c.addEventListener("touchmove",R,{passive:!0}),c.addEventListener("touchend",k),c.addEventListener("touchcancel",k),()=>{c.removeEventListener("touchstart",j),c.removeEventListener("touchmove",R),c.removeEventListener("touchend",k),c.removeEventListener("touchcancel",k),c.style.transition="",c.style.transform=""}},[w]),i.useEffect(()=>{O(!1)},[t]),i.useEffect(()=>{typeof b=="boolean"&&O(!!b)},[b]),Kr("sidebar:toggle",c=>{if(x||y)return;const j=c&&c.detail!=null&&typeof c.detail=="object"&&"cmd"in c.detail?c.detail.cmd:c?.detail;j==="toggle"?O(R=>!R):j==="open"?O(!0):j==="close"&&O(!1)}),i.useEffect(()=>{x&&x(w);try{window.dispatchEvent(new CustomEvent("sidebar:state",{detail:{open:w}}))}catch{}},[w,x]);const _=i.useCallback(c=>{const R=[c.to,`/en${c.to}`,`/fr${c.to}`].some(z=>t===z||t.startsWith(`${z}/`));let k;try{const z=c.navKey?`nav.${c.navKey}`:null;if(z){const N=r(z);N&&N!==z&&(k=N)}}catch{}k||(k=s==="ar"?c.labelAr:c.labelEn);const U=c.icon,q=typeof U=="string"?e.jsx("span",{style:{fontSize:"1.7rem"},children:U}):U?e.jsx(U,{size:28,style:{filter:R?"drop-shadow(0 2px 8px #f6ad55)":"none",marginBottom:"2px"}}):null;return e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsxs(de,{to:c.to,className:"nav-link","data-active":R,"aria-current":R?"page":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",minHeight:"64px",borderRadius:"14px",margin:"0 auto",background:R?"rgba(255,255,255,0.12)":"transparent",border:R?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:R?"0 2px 8px -2px #f6ad55":"none",color:R?"#f6ad55":"#fff",fontSize:"1.08rem",transition:"all 0.18s",cursor:"pointer",outline:"none",padding:"0 8px",gap:"2px"},onMouseEnter:z=>z.currentTarget.style.background="rgba(255,255,255,0.18)",onMouseLeave:z=>z.currentTarget.style.background=R?"rgba(255,255,255,0.12)":"transparent",onKeyDown:z=>{try{if(z.key==="ArrowDown"||z.key==="ArrowRight"){z.preventDefault();const N=z.currentTarget.parentElement.nextElementSibling;N&&N.querySelector(".nav-link")?.focus()}else if(z.key==="ArrowUp"||z.key==="ArrowLeft"){z.preventDefault();const N=z.currentTarget.parentElement.previousElementSibling;N&&N.querySelector(".nav-link")?.focus()}else z.key==="Home"?(z.preventDefault(),z.currentTarget.closest(".sidebar-modern__nav")?.firstElementChild?.querySelector(".nav-link")?.focus()):z.key==="End"&&(z.preventDefault(),z.currentTarget.closest(".sidebar-modern__nav")?.lastElementChild?.querySelector(".nav-link")?.focus())}catch{}},onClick:()=>{C()&&(O(!1),x&&x(!1))},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:q}),e.jsx("span",{className:"nav-label",style:{fontSize:".5rem",fontWeight:R?700:500,opacity:R?1:.88,whiteSpace:"nowrap",marginTop:"2px",textAlign:"center",lineHeight:"1.15"},children:k})]})},c.to)},[t,s,p]),$=E.useMemo(()=>{const c=[...Gr];return d&&(c.push({to:"/my-orders",labelAr:"Ø·Ù„Ø¨Ø§ØªÙŠ",labelEn:"My Orders",navKey:"myOrders",icon:Zt}),d.role==="seller"&&c.push({to:"/seller/kyc",labelAr:"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹",labelEn:"Seller KYC",navKey:"sellerKyc",icon:Ie}),d.role==="delivery"&&(c.push({to:"/delivery",labelAr:"Ø§Ù„ØªÙˆØµÙŠÙ„",labelEn:"Delivery",icon:Zt}),c.push({to:"/delivery/map",labelAr:"Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªØªØ¨Ø¹",labelEn:"Delivery Map",icon:"ðŸ—ºï¸"}),c.push({to:"/delivery/history",labelAr:"Ø³Ø¬Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„",labelEn:"History",icon:"ðŸ•˜"}),c.push({to:"/delivery/availability",labelAr:"Ø§Ù„ØªÙˆÙØ±",labelEn:"Availability",icon:"âœ…"}))),c},[d]),B=()=>{C()?O(c=>{const j=!c;return x&&x(j),j}):u(c=>!c)},F=C()?w:!p,W=i.useRef(null);return e.jsxs(e.Fragment,{children:[null,C()&&!w&&e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",top:0,bottom:0,left:0,width:14,zIndex:1020,touchAction:"pan-y",pointerEvents:"auto",userSelect:"none",background:"transparent"},onTouchStart:c=>{const j=c.touches?.[0];j&&j.clientX<=14&&(O(!0),x&&x(!0))}}),e.jsx(ze,{children:(!C()||w)&&e.jsx(xe.aside,{initial:C()?{x:"-100%"}:!1,animate:C()?{x:0}:!1,exit:C()?{x:"-100%"}:!1,transition:{type:"spring",stiffness:400,damping:38},className:`sidebar-modern ${f?"has-admin":""}`,id:"app-sidebar","data-collapsed":p,"data-open":w,role:C()?"dialog":void 0,"aria-modal":C()?"true":void 0,tabIndex:C()?-1:void 0,ref:P,"aria-label":"Main sidebar navigation",style:{background:"linear-gradient(180deg,#178a3d 0%,#0f3c1e 100%)",minHeight:"100vh",boxShadow:"2px 0 16px -8px rgba(0,0,0,0.10)",borderRadius:"0 18px 18px 0",width:p?"68px":"88px",transition:g?"none":"width 0.18s",zIndex:1301,position:C()?"fixed":void 0,top:0,left:0},children:e.jsxs("div",{className:"sidebar-modern__inner",ref:W,style:{paddingBottom:"calc(12px + env(safe-area-inset-bottom))"},children:[e.jsxs("div",{className:"sidebar-modern__head",children:[e.jsx("span",{className:"sidebar-modern__brand",style:{fontWeight:700,fontSize:".95rem",color:"#fff",letterSpacing:".5px"},children:s==="ar"?l?.siteNameAr||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":l?.siteNameEn||"My Store"}),e.jsxs("button",{type:"button",className:"sidebar-modern__toggle",onClick:B,"aria-expanded":F,"aria-controls":"app-sidebar","aria-label":C()?w?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":p?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar",title:C()?w?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":p?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar",style:{background:"rgba(255,255,255,0.08)",border:"none",borderRadius:"8px",padding:"6px",color:"#fff",marginTop:"6px",cursor:"pointer"},children:[C()?w?e.jsx(Ue,{size:18,"aria-hidden":"true"}):e.jsx(vs,{size:18,"aria-hidden":"true"}):p?e.jsx(Js,{size:18,"aria-hidden":"true"}):e.jsx(Gs,{size:18,"aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:C()?w?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":p?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar"})]})]}),e.jsxs("ul",{className:"sidebar-modern__nav",role:"list","aria-label":"Main navigation",style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"18px"},children:[e.jsx("li",{className:"nav-section-label",style:{color:"#f6ad55",fontWeight:700,fontSize:".75rem",marginBottom:"2px"},children:s==="ar"?"Ø§Ù„ØªØµÙØ­":"Browse"}),$.map(_),f&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"nav-section-label",style:{color:"#f6ad55",fontWeight:700,fontSize:".75rem",marginTop:"12px"},children:r("nav.admin")!=="nav.admin"?r("nav.admin"):s==="ar"?"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©":"Admin"}),e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsxs(de,{to:"/orders",className:"nav-link","data-active":["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`)),"aria-current":["/orders","/en/orders","/fr/orders"].some(c=>t===c)?"page":void 0,"data-tip":p?s==="ar"?"ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª":"All Orders":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",borderRadius:"14px",margin:"0 auto",background:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"rgba(255,255,255,0.12)":"transparent",border:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"0 2px 8px -2px #f6ad55":"none",color:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"#f6ad55":"#fff",fontSize:"1.7rem",transition:"all 0.18s",cursor:"pointer",outline:"none"},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:e.jsx(Qs,{size:28})}),e.jsx("span",{className:"nav-label",style:{fontSize:".72rem",marginTop:"2px",fontWeight:700,opacity:1},children:r("nav.orders")!=="nav.orders"?r("nav.orders"):s==="ar"?"Ø§Ù„Ø·Ù„Ø¨Ø§Øª":"Orders"})]})}),e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsxs(de,{to:"/admin/sellers/kyc",className:"nav-link","data-active":["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c),"aria-current":["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"page":void 0,"data-tip":p?s==="ar"?"Ù…Ø±Ø§Ø¬Ø¹Ø© KYC":"KYC Review":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",borderRadius:"14px",margin:"0 auto",background:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"rgba(255,255,255,0.12)":"transparent",border:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"0 2px 8px -2px #f6ad55":"none",color:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"#f6ad55":"#fff",fontSize:"1.7rem",transition:"all 0.18s",cursor:"pointer",outline:"none"},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:e.jsx(Ie,{size:28})}),e.jsx("span",{className:"nav-label",style:{fontSize:".72rem",marginTop:"2px",fontWeight:700,opacity:1},children:r("nav.sellerKyc")!=="nav.sellerKyc"?r("nav.sellerKyc"):s==="ar"?"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹":"Seller KYC"})]})}),Xr.map(_)]})]}),e.jsxs("div",{className:"sidebar-modern__footer",style:{marginTop:"auto",padding:"10px 0",textAlign:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"18px",marginBottom:"10px",marginTop:"2px"},children:e.jsx("button",{onClick:()=>{const c=["ar","en","fr"],j=c.indexOf(s);n(c[(j+1)%c.length])},"aria-label":s==="ar"?"ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©":"Change language",title:s==="ar"?"ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©":"Change language",style:{background:"#f6ad55",border:"none",borderRadius:"50%",padding:"9px",color:"#fff",fontWeight:700,cursor:"pointer",transition:"background 0.2s",width:"38px",height:"38px",fontSize:"1.1rem",boxShadow:"0 1px 8px 0 #f6ad55",display:"flex",alignItems:"center",justifyContent:"center"},children:s==="ar"?"Ø¹":s==="en"?"E":"F"})}),e.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:"10px",marginTop:"0",gap:"0"},children:e.jsx("button",{onClick:()=>a(o==="dark"?"light":o==="light"?"system":"dark"),"aria-label":o==="dark"?s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­":"Light mode":o==="light"?s==="ar"?"Ø§Ù„Ù†Ø¸Ø§Ù…":"System":s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†":"Dark mode",title:o==="dark"?s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­":"Light mode":o==="light"?s==="ar"?"Ø§Ù„Ù†Ø¸Ø§Ù…":"System":s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†":"Dark mode",style:{background:"#fff",border:"2px solid #f6ad55",borderRadius:"50%",padding:"7px",color:"#222",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px 0 rgba(0,0,0,0.18)",width:"34px",height:"34px",zIndex:99,position:"relative",marginInlineEnd:"2px",marginTop:"2px",marginBottom:"2px"},children:o==="dark"?e.jsxs("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-sun",children:[e.jsx("circle",{cx:"6.5",cy:"6.5",r:"3"}),e.jsx("path",{d:"M6.5 0v1.5m5 5H13m-1.5 5V13m-5-1.5H0m1.5-5H0m1.36-4.57l1.1 1.1m6.68 0l-1.1 1.1m1.1 6.68l-1.1-1.1m-6.68 0l1.1-1.1"})]}):o==="light"?e.jsxs("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-monitor",children:[e.jsx("rect",{x:"1",y:"2",width:"11",height:"8",rx:"2"}),e.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),e.jsx("line",{x1:"6.5",y1:"10",x2:"6.5",y2:"12"})]}):e.jsx("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-moon",children:e.jsx("path",{d:"M12 8.5A5.5 5.5 0 1 1 6.5 1a4.2 4.2 0 0 0 5.5 7.5Z"})})})}),e.jsx("span",{className:"sidebar-mini-badge",style:{background:"#f6ad55",color:"#fff",borderRadius:"8px",padding:"2px 10px",fontWeight:700,fontSize:".7rem"},children:"v1.0"}),d&&e.jsxs("span",{style:{fontSize:".55rem",fontWeight:600,opacity:.75,display:"block",marginTop:"4px",color:"#fff"},children:[s==="ar"?"Ø¯ÙˆØ±:":"Role:"," ",d.role]}),e.jsx("small",{style:{fontSize:".55rem",opacity:.55,display:"block",marginTop:"2px",color:"#fff"},children:s==="ar"?"ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ":"Preview mode"})]})]})})}),e.jsx("div",{className:"sidebar-modern__backdrop","data-open":w,role:"button",tabIndex:w?0:-1,"aria-label":"Close menu",onClick:()=>{O(!1),x&&x(!1)},onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),O(!1),x&&x(!1))}})]})},qe=(t,s="en")=>{try{return new Intl.NumberFormat(s,{style:"currency",currency:"SAR",maximumFractionDigits:2}).format(t||0)}catch{return(t||0).toFixed(2)+" SAR"}};function Os({onClose:t,items:s,total:r,locale:n,t:o,updateQuantity:a}){const l=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches?{initial:!1,animate:{},exit:{}}:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8}};return e.jsxs(xe.aside,{id:"cart-panel",...l,transition:{duration:.22},className:"fixed right-4 top-20 w-96 bg-white dark:bg-slate-900 border rounded-lg shadow-xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-slate-800 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:o("cartTitle")||"Cart"}),e.jsx("button",{onClick:t,className:"p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":o("close")||"Close",children:e.jsx(Ue,{size:16})})]}),e.jsx("div",{className:"p-4 max-h-64 overflow-auto",children:s&&s.length?e.jsx("ul",{className:"flex flex-col gap-3",children:s.map(f=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("img",{src:f.images?.[0]||f.image||"/images/hero-image.svg",alt:f.name||"",className:"w-14 h-14 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:f.name||f.title}),e.jsxs("div",{className:"text-xs text-slate-500",children:[qe(f.price||f.salePrice||0,n)," Ã— ",f.quantity||1]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:qe((f.price||f.salePrice||0)*(f.quantity||1),n)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>a&&a(f.id,Math.max(1,(f.quantity||1)-1)),className:"px-2 py-1 border rounded","aria-label":"Decrease quantity",children:"-"}),e.jsx("span",{className:"px-2 py-1 border rounded",children:f.quantity||1}),e.jsx("button",{onClick:()=>a&&a(f.id,(f.quantity||1)+1),className:"px-2 py-1 border rounded","aria-label":"Increase quantity",children:"+"})]})]})]},f.id))}):e.jsx("div",{className:"text-sm text-slate-500",children:o("emptyCart")||"Cart is empty"})}),e.jsxs("div",{className:"p-4 border-t dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm text-slate-600",children:o("totalLabel")||"Total"}),e.jsx("div",{className:"font-semibold",children:qe(r,n)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{to:"/cart",onClick:t,className:"w-1/2 text-center py-2 border rounded",children:o("cart")||"View cart"}),e.jsx(de,{to:"/checkout",onClick:t,className:"w-1/2 text-center py-2 bg-amber-500 text-white rounded",children:o("proceedCheckout")||"Checkout"})]})]})]})}const Yr=[{to:"/catalog",label:"catalog",icon:js},{to:"/products",label:"products",icon:De},{to:"/offers",label:"offers",icon:Kt},{to:"/stores",label:"stores",icon:Vt}];function Zr({t,isActive:s}){return e.jsx("div",{style:{width:"100vw",position:"relative",left:"50%",right:"50%",marginLeft:"-50vw",marginRight:"-50vw"},children:e.jsx("nav",{className:"top-nav flex items-center justify-center gap-2 sm:gap-4 md:gap-6 px-2 py-2 rounded-xl bg-white/80 dark:bg-slate-900/80 shadow-md border border-slate-200 dark:border-slate-800 transition-all duration-300",style:{width:"100%"},children:Yr.map(r=>e.jsxs(de,{to:r.to,className:`top-nav-link flex items-center gap-1 px-3 py-2 rounded-lg font-semibold text-slate-700 dark:text-slate-100 hover:bg-emerald-50 dark:hover:bg-emerald-900 transition-colors duration-200 ${s(r.to)?"bg-emerald-100 dark:bg-emerald-800 text-emerald-700 dark:text-emerald-200 shadow":""}`,children:[r.icon&&e.jsx(r.icon,{size:18,className:"mr-1"}),e.jsx("span",{children:t(r.label)})]},r.to))})})}function ea(){try{return Xt()}catch{return{theme:"system",setTheme:()=>{}}}}function ta({t,locale:s,setLocale:r,panel:n,setPanel:o,cartItems:a,cartTotal:d,updateQuantity:l,user:f}){const v=i.useRef(null),b=Array.isArray(a)?a.reduce((p,u)=>p+(u.quantity||1),0):0;i.useEffect(()=>{const p=v.current;if(!(!p||typeof p.animate!="function"))try{p.animate([{transform:"scale(1)"},{transform:"scale(1.08)"},{transform:"scale(1)"}],{duration:280,easing:"cubic-bezier(.2,.9,.3,1)"})}catch{}},[b]);const{theme:y,setTheme:x}=ea();return i.useMemo(()=>y==="system"?"light":y==="light"?"dark":"system",[y]),y==="dark"?t?.("themeDark"):y==="light"?t?.("themeLight"):t?.("themeSystemAuto"),e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 transition-colors duration-300",children:f?e.jsxs(de,{to:"/account/profile",className:"flex items-center gap-2 px-3 py-1 border rounded text-sm bg-white/90 dark:bg-slate-950/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 transition-colors duration-300",children:[e.jsx(Oe,{size:16}),e.jsx("span",{className:"hidden sm:inline-block",children:f.name||(f.email||"").split("@")[0]})]}):e.jsxs(de,{to:"/login",className:"border rounded bg-white/90 dark:bg-slate-950/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 transition-colors duration-300 flex items-center justify-center",style:{minWidth:0,minHeight:0,padding:0},children:[e.jsx(Oe,{size:18,className:"block sm:hidden"}),e.jsx("span",{className:"hidden sm:inline-block text-sm px-3 py-1",children:t("login")||"Login"})]})})}const sa=i.createContext(null),ra=()=>i.useContext(sa);function Qt({src:t,alt:s,className:r="",style:n={},loading:o="lazy",decoding:a="async",fetchPriority:d,fetchpriority:l,...f}){const v=g=>{if(!g||typeof g!="string")return"";let D=g.trim();return D.startsWith("/api/uploads")&&(D=D.replace(/^\/api/,"")),D.startsWith("uploads/")&&(D="/"+D),/^\d{2,4}x\d{2,4}(\?.*)?$/.test(D)&&(D=`https://via.placeholder.com/${D}`),D},b=v(t),[y,x]=i.useState(b||""),p=i.useRef(b||""),u=i.useRef(null);i.useEffect(()=>{if(!t)return;const g=v(t);if(g===y)return;u.current&&(u.current.onload=null,u.current.onerror=null,u.current=null);const D=new Image;return u.current=D,D.onload=()=>{p.current=g,x(g),u.current=null},D.onerror=()=>{u.current=null},D.src=g,()=>{u.current&&(u.current.onload=null,u.current.onerror=null,u.current=null)}},[t,y]);const w=y||v(t)||"",O=d??l??"low";return e.jsx("img",{src:w,alt:s,className:r,style:n,loading:o,decoding:a,fetchPriority:O,...f})}function aa(){const{byLocation:t}=ra()||{byLocation:{topStrip:[]}},{setting:s}=ke()||{},r=t&&t.topStrip||[],n=i.useRef(null);return i.useEffect(()=>{if(!n.current||!s?.topStripAutoscroll)return;const o=n.current;let a,d=0;const l=.4,f=()=>{o&&(d=(d+l)%o.scrollWidth,o.scrollLeft=d,a=requestAnimationFrame(f))};return a=requestAnimationFrame(f),()=>cancelAnimationFrame(a)},[s?.topStripAutoscroll,r.length]),!s?.topStripEnabled||!r||r.length===0?null:e.jsx("div",{className:"w-full bg-white/90 dark:bg-slate-900/90 border-b dark:border-slate-800",children:e.jsx("div",{className:"max-w-full sm:max-w-[1200px] mx-auto px-2 sm:px-6 md:px-10",children:e.jsx("div",{ref:n,className:"w-full flex gap-4 overflow-x-auto no-scrollbar py-2 items-center smooth-scroll",style:{scrollBehavior:"smooth"},"aria-label":"Top promotions",children:r.map(o=>e.jsxs("a",{href:o.linkUrl||"#",className:"flex-shrink-0 min-w-[220px] sm:min-w-[260px] bg-white/95 dark:bg-slate-800/80 rounded-lg p-2 shadow-sm hover:shadow-md transition-shadow flex items-center gap-3","aria-label":o.titleEn||o.titleAr,children:[o.image?e.jsx("div",{className:"w-14 h-10 rounded-md overflow-hidden flex-shrink-0",children:e.jsx(Qt,{src:o.image,alt:o.titleEn||o.titleAr,className:"w-full h-full object-cover"})}):null,e.jsxs("div",{className:"flex-1 text-sm leading-tight",children:[e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-100",children:o.titleAr||o.titleEn}),o.bodyAr||o.bodyEn?e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:o.bodyAr||o.bodyEn}):null]})]},o.id))})})})}function ie(t,s,r=["ar","en"]){if(t==null)return"";if(typeof t=="string"||typeof t=="number")return String(t);if(typeof t=="object"){if(t[s])return String(t[s]);for(const o of r)if(t[o])return String(t[o]);const n=Object.values(t).find(o=>typeof o=="string"||typeof o=="number");return n?String(n):""}return""}function cc(t,s,r="name"){return ie(t?.[r],s)}function dc(t,s,r,n){return ie(t?.[s],r,n)}const Ls=i.createContext(null),na=({children:t})=>{const{user:s}=fe()||{},n=pe()?.locale??"ar",[o,a]=i.useState(()=>{try{const h=localStorage.getItem("my_store_cart"),L=h?JSON.parse(h):[],C=10,_=new Map;for(const $ of Array.isArray(L)?L:[]){const B=$?.id||$?.productId;if(!B)continue;const F=_.get(B)||{...$,id:B,quantity:0},W=Math.min(C,(F.quantity||0)+(parseInt($.quantity||1,10)||1));_.set(B,{...F,quantity:W})}return Array.from(_.values())}catch{return[]}}),[d,l]=i.useState(!1),[f,v]=i.useState(null),b=i.useRef(!1),y=i.useRef(new Map);i.useEffect(()=>()=>{try{y.current.forEach(h=>clearTimeout(h)),y.current.clear()}catch{}},[]),i.useEffect(()=>{try{localStorage.setItem("my_store_cart",JSON.stringify(o))}catch{}},[o]);const x=10;function p(h,L){const C=h?.price||0;if(!Array.isArray(h?.tierPrices)||!h.tierPrices.length)return C;const _=[...h.tierPrices].sort((B,F)=>B.minQty-F.minQty);let $=C;for(const B of _)if(L>=B.minQty)$=B.price;else break;return $}const u=i.useCallback((h,L=1)=>{if(!h||!h.id)return{ok:!1,reason:"INVALID_PRODUCT"};if(!s){v("AUTH_REQUIRED");try{window.dispatchEvent(new CustomEvent("auth:required",{detail:{action:"add_to_cart",productId:h.id}})),window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"warn",title:"ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",description:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©"}}))}catch{}return{ok:!1,reason:"AUTH_REQUIRED"}}let C,_=L;a($=>{const B=$.findIndex(W=>W.id===h.id);if(B>-1){const W=[...$],c=W[B].quantity||1,j=Math.min(x,c+L);return _=j,W[B].quantity=j,W[B].price=p(h,j),C={type:"increment",quantity:j},W}const F=p(h,L);return C={type:"new",quantity:L},[...$,{...h,quantity:L,price:F}]});try{const $={productId:h.id,name:ie(h?.name??h?.title,n)||(typeof h?.name=="string"?h.name:h?.title)||"Ù…Ù†ØªØ¬",image:Array.isArray(h.images)&&h.images[0]||h.image||null,quantity:L};window.dispatchEvent(new CustomEvent("cart:add",{detail:$})),window.dispatchEvent(new Event("cart:icon-bump"));const B=C?.type==="increment";window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"success",title:B?"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ©":"ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",description:$.name}}))}catch{}return(async()=>{try{await X.cartSet(h.id,_)}catch($){if($?.code==="INSUFFICIENT_STOCK"||/INSUFFICIENT_STOCK/.test($?.message||"")){const B=Number($?.data?.available??0);a(F=>F.map(W=>{if(W.id!==h.id)return W;const c=Math.min(W.quantity||0,B),j=p(h,c);return{...W,quantity:c,price:j}}));try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"error",title:"Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©",description:`Ø§Ù„Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†: ${B}`}}))}catch{}}else v($.message)}})(),{ok:!0,...C}},[s,n]),w=h=>{a(L=>L.filter(C=>C.id!==h)),s&&(async()=>{try{await X.cartRemoveItem(h)}catch(L){v(L.message)}})()},O=(h,L)=>{let C=0;if(a(_=>_.map($=>{if($.id!==h)return $;C=$.quantity||0;const B=p($,L);return{...$,quantity:L,price:B}})),s)try{const _=y.current;_.has(h)&&clearTimeout(_.get(h));const $=setTimeout(async()=>{try{await X.cartSet(h,L)}catch(B){if(B?.code==="INSUFFICIENT_STOCK"||/INSUFFICIENT_STOCK/.test(B?.message||"")){const F=Number(B?.data?.available??0);a(W=>W.map(c=>{if(c.id!==h)return c;const j=Math.min(F,C),R=p(c,j);return{...c,quantity:j,price:R}}));try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"error",title:"Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©",description:`Ø§Ù„Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†: ${F}`}}))}catch{}}else v(B.message)}finally{try{_.delete(h)}catch{}}},300);_.set(h,$)}catch{}},g=()=>{a([]),s&&(async()=>{try{await X.cartClear()}catch(h){v(h.message)}})()};i.useEffect(()=>{(async()=>{let L=!1;try{L=!!localStorage.getItem("my_store_token")}catch{}if(!(!s||!L)&&!b.current){l(!0),v(null);try{const C=await X.cartList(),_=Array.isArray(C)?C:C.items||[],$=new Map;_.forEach(F=>{$.set(F.productId||F.id,{id:F.productId||F.id,quantity:F.quantity||1,price:F.price||F.salePrice||0,...F})}),o.forEach(F=>{if(!$.has(F.id))$.set(F.id,F);else{const W=$.get(F.id);W.quantity=Math.max(W.quantity||1,F.quantity||1),$.set(F.id,W)}});const B=Array.from($.values());if(a(B),o.length){try{const F=await X.cartMerge(B.map(c=>({productId:c.id,quantity:c.quantity}))),W=Array.isArray(F?.skipped)?F.skipped:[];if(W.length){const c=n==="ar"?`ØªØ¹Ø°Ø± Ø¥Ø¶Ø§ÙØ© ${W.length} Ø¹Ù†ØµØ± Ø¨Ø³Ø¨Ø¨ Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†`:`${W.length} items were skipped (out of stock)`;try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"warn",title:"Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",description:c}}))}catch{}}}catch{}try{const F=await X.cartList(),W=Array.isArray(F)?F:F.items||[];a(W.map(c=>({id:c.productId||c.id,quantity:c.quantity||1,price:c.price||c.salePrice||0,...c})))}catch{}}b.current=!0}catch(C){v(C.message)}finally{l(!1)}}})()},[s]);const D=o.reduce((h,L)=>h+Number(L.price||L.salePrice||0)*Number(L.quantity||1),0),P={cartItems:o,addToCart:u,removeFromCart:w,updateQuantity:O,clearCart:g,cartTotal:D,maxPerItem:x,loading:d,error:f};return e.jsx(Ls.Provider,{value:P,children:t})},Yt=()=>i.useContext(Ls),ia=({size:t=24,className:s=""})=>e.jsx("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),oa=({size:t=24,className:s=""})=>e.jsx("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),la=({size:t=20,className:s=""})=>e.jsxs("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("circle",{cx:"11",cy:"11",r:"6",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),ca=()=>({t:t=>t,locale:"en",setLocale:()=>{}}),da=()=>({user:null,logout:()=>{}}),ua=()=>({cartItems:[],updateQuantity:()=>{},removeFromCart:()=>{}}),Ve=(t,s)=>{try{const r=typeof window<"u"?window[t]:void 0;if(!r)return s();if(typeof r=="function")try{const n=r();if(n)return n}catch{}return typeof r=="object"?r:s()}catch{return s()}},ma=E.memo(function({className:s=""}){const r=ue(),n=pe()||Ve("__useLanguage__",ca),o=fe()||Ve("__useAuth__",da),a=Yt()||Ve("__useCart__",ua),d=Is(),{t:l,locale:f,setLocale:v}=n,{user:b}=o,{cartItems:y=[],updateQuantity:x}=a,{setting:p}=ke()||{},u=i.useMemo(()=>p?.logoUrl||p?.logo||"/images/site-logo.png",[p]),[w,O]=i.useState(null),[g,D]=i.useState(!1),[P,h]=i.useState(!1),[L,C]=i.useState("");i.useEffect(()=>{if(!L)return;h(!0);const z=setTimeout(()=>{h(!1)},600);return()=>clearTimeout(z)},[L]),i.useEffect(()=>{const z=localStorage.getItem("dark-mode")==="true";D(z),document.body.classList.toggle("dark-mode",z),document.body.classList.toggle("light-mode",!z)},[]),i.useEffect(()=>{localStorage.setItem("dark-mode",g),document.body.classList.toggle("dark-mode",g),document.body.classList.toggle("light-mode",!g)},[g]),i.useCallback(()=>D(z=>!z),[]),i.useRef(null),i.useMemo(()=>y.reduce((z,N)=>z+(N.quantity||1),0),[y]);const _=i.useMemo(()=>y.reduce((z,N)=>z+(N.price||N.salePrice||0)*(N.quantity||1),0),[y]);i.useCallback(()=>O("cart"),[]);const $=i.useCallback(()=>O(null),[]),[B,F]=i.useState(!1),W=i.useCallback(()=>{if(d&&typeof d.toggle=="function")d.toggle();else try{window.dispatchEvent(new CustomEvent("sidebar:toggle",{detail:{cmd:"toggle"}}))}catch{}},[d]);i.useEffect(()=>{if(d&&typeof d.open=="boolean"){F(!!d.open);return}const z=N=>{N?.detail&&typeof N.detail.open=="boolean"&&F(N.detail.open)};return window.addEventListener("sidebar:state",z),()=>window.removeEventListener("sidebar:state",z)},[d]);const[c,j]=i.useState(!1);i.useEffect(()=>{const z=()=>j(window.scrollY>6);return z(),window.addEventListener("scroll",z,{passive:!0}),()=>window.removeEventListener("scroll",z)},[]);const{pathname:R}=r,k=i.useCallback(z=>R===z||R.startsWith(z+"/"),[R]),q=["/","/en","/fr"].includes(R)?"h-14 md:h-16":"h-16";return e.jsxs(e.Fragment,{children:[e.jsx(aa,{}),e.jsxs("header",{className:`w-full sticky top-0 z-[1200] ${q} bg-gradient-to-b from-white/95 via-white/90 to-slate-100/80 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900/90 backdrop-blur border-b dark:border-slate-800 transition-shadow transition-colors duration-300 ${c?"shadow-2xl":"shadow"} ${s}`,dir:"rtl",children:[P&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 z-[1300]",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 via-emerald-600 to-emerald-400 animate-pulse rounded-b",style:{width:"100%"}})}),e.jsx("a",{href:"#main",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 px-3 py-1 rounded bg-amber-500 text-white",children:l("Skip to content")}),e.jsxs("div",{className:"relative max-w-full sm:max-w-[1200px] mx-auto w-full h-full px-2 sm:px-6 md:px-10 grid grid-cols-3 items-center gap-3 sm:gap-6 transition-colors duration-300",children:[e.jsxs("div",{className:"col-start-1 col-end-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-full max-w-[420px] flex items-center group relative",style:{background:"rgba(255,255,255,0.65)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:"2rem",boxShadow:"0 4px 24px 0 rgba(16,38,57,0.08)",border:"none",padding:"0.25rem 0.5rem",minHeight:"48px",transition:"box-shadow .25s cubic-bezier(.4,1.3,.5,1), background .25s"},children:e.jsxs("div",{className:"relative flex-1 flex items-center items-stretch gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("search:focus"))}catch{window.dispatchEvent(new Event("search:focus"))}},className:"flex items-center justify-center p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":l("ÙØªØ­ Ø§Ù„Ø¨Ø­Ø«")||"ÙØªØ­ Ø§Ù„Ø¨Ø­Ø«",children:e.jsx(la,{size:20,className:"text-slate-500"})}),e.jsx(de,{to:b?"/account/profile":"/login","aria-label":b?l("profile")||"Profile":l("login")||"Login",className:"flex items-center justify-center p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(Oe,{size:18,className:"text-sky-600 dark:text-sky-300"})})]})}),e.jsx("div",{className:"ml-3 hidden sm:flex",children:e.jsx(ta,{t:l,locale:f,setLocale:v,panel:w,setPanel:O,cartItems:y,cartTotal:_,updateQuantity:x,user:b})})]}),e.jsx("div",{className:"col-start-2 col-end-3 flex justify-center",children:e.jsx(de,{to:"/",className:"block","aria-label":p?.siteNameAr||p?.siteNameEn||"Home",children:e.jsx("div",{className:"w-[150px] h-[48px] flex items-center justify-center overflow-hidden",style:{minWidth:150},children:e.jsx(Qt,{src:u,alt:p?.siteNameAr||p?.siteNameEn||"Logo",className:"h-[40px] w-auto object-contain drop-shadow cursor-pointer"})})})}),e.jsx("div",{className:"col-start-2 col-end-3 hidden sm:flex justify-center mt-12",children:e.jsx("nav",{className:"w-full flex items-center justify-center",children:e.jsx(Zr,{t:l,isActive:k})})}),e.jsx("div",{className:"col-start-3 col-end-4 flex items-center justify-end gap-2 sm:gap-4",children:e.jsx("button",{onClick:W,"aria-expanded":B,"aria-label":l(B?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Ø§ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"),"aria-controls":"site-sidebar",className:"p-3 rounded-xl md:hidden bg-slate-50 dark:bg-slate-800 border shadow-sm hover:bg-emerald-50 dark:hover:bg-emerald-900 focus-visible:ring-2 focus-visible:ring-emerald-500 min-w-[44px] min-h-[44px] transition-all duration-300",children:B?e.jsx(oa,{size:22}):e.jsx(ia,{size:22})})})]}),typeof document<"u"&&Ys.createPortal(e.jsx(ze,{children:w==="cart"&&e.jsx(Os,{onClose:$,items:y,total:_,locale:f,t:l,updateQuantity:x})}),document.body)]})]})}),pa=()=>{const{locale:t}=pe(),s=t==="ar"?"Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ ÙˆØ®ÙŠØ§Ø±Ø§Øª Ø¯ÙØ¹ Ù…ØªØ¹Ø¯Ø¯Ø©":"Split your purchases via Tabby & Tamara â€“ Fast shipping & flexible payments";return e.jsx("div",{className:"announcement-bar-modern",role:"note",children:e.jsx("div",{className:"announcement-inner",children:e.jsx("span",{className:"announcement-text",children:s})})})},ha=()=>{const{locale:t}=pe(),{pathname:s,search:r}=ue(),n=Le(),[o,a]=i.useState([]),[d,l]=i.useState(!1),[f,v]=i.useState(null),b=i.useRef(null),[y,x]=i.useState(!1),p=12;i.useEffect(()=>{l(!0);try{const g=localStorage.getItem("cats_cache"),D=Number(localStorage.getItem("cats_cache_ts")||0),P=Date.now()-D<3600*1e3;if(g&&P){const h=JSON.parse(g);Array.isArray(h)&&a(h)}}catch{}X.listCategories({withCounts:1}).then(g=>{if(g?.categories){a(g.categories);try{localStorage.setItem("cats_cache",JSON.stringify(g.categories)),localStorage.setItem("cats_cache_ts",String(Date.now()))}catch{}}}).catch(g=>v(g.message)).finally(()=>l(!1))},[]);const u=i.useMemo(()=>{const g=new Map;for(const P of o){const h=P.slug||P.id||P.name?.ar||P.name?.en||JSON.stringify(P);g.has(h)||g.set(h,P)}const D=Array.from(g.values());return D.sort((P,h)=>(h.productCount||0)-(P.productCount||0)||(P.name?.ar||"").localeCompare(h.name?.ar||"","ar")),D},[o]),w=i.useMemo(()=>{const g=new URLSearchParams(r).get("category");if(g)return g;const D=s.split("/").filter(Boolean),P=D.findIndex(h=>h==="category");return P>=0?D[P+1]:null},[s,r]),O=g=>{const D=b.current;if(!D)return;const P=Math.round(D.clientWidth*.8)*(g==="left"?-1:1);D.scrollBy({left:P,behavior:"smooth"})};return e.jsxs("div",{className:"category-scroller",role:"navigation","aria-label":t==="ar"?"Ø§Ù„Ø£Ù‚Ø³Ø§Ù…":"Categories",children:[e.jsx("button",{type:"button","aria-label":"Scroll right",onClick:()=>O("right"),className:"absolute left-2 top-[calc(var(--header-height,72px)+10px)] z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden md:inline-flex",children:e.jsx(Zs,{size:18})}),e.jsx("button",{type:"button","aria-label":"Scroll left",onClick:()=>O("left"),className:"absolute right-2 top-[calc(var(--header-height,72px)+10px)] z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden md:inline-flex",children:e.jsx(er,{size:18})}),e.jsxs("div",{ref:b,className:"category-track",children:[d&&e.jsx("span",{className:"text-xs opacity-70 px-2",children:"â€¦"}),f&&e.jsx("span",{className:"text-xs text-red-600 px-2",children:"Ø®Ø·Ø£"}),!d&&(y?u:u.slice(0,p)).map(g=>{const D=w&&w===g.slug,P=(g?.name?.ar||g?.name?.en||g?.slug||"").toLowerCase(),L=(()=>{switch((g.icon||"").toLowerCase().trim()){case"cup-soda":case"soda":case"drink":case"drinks":return rs;case"coffee":case"tea":return ss;case"cookie":case"cookies":case"biscuit":case"biscuits":return ts;case"candy":case"sugar":return es;case"utensils":case"pasta":case"rice":return $e;case"store":case"supermarket":return Vt;case"tag":return ws}return/(Ù…Ø§Ø¡|Ù…Ø´Ø±ÙˆØ¨|Ù…Ø´Ø±ÙˆØ¨Ø§Øª|drinks?|beverages?|water)/.test(P)?rs:/(Ø´Ø§ÙŠ|Ù‚Ù‡ÙˆØ©|coffee|tea)/.test(P)?ss:/(Ø¨Ø³ÙƒÙˆÙŠØª|ÙƒÙˆÙƒÙŠ|ÙƒÙˆÙƒÙŠØ²|biscuits?|cookies?)/.test(P)?ts:/(Ø³ÙƒØ±|sugar)/.test(P)?es:/(Ù…ÙƒØ±ÙˆÙ†Ø©|Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©|Ø£Ø±Ø²|Ø§Ø±Ø²|pasta|rice)/.test(P)?$e:/(ØµÙ„ØµØ§Øª|Ù…Ø®Ù„Ù„Ø§Øª|sauces?|pickles?)/.test(P)?$e:/(Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª|supermarket)/.test(P)?Vt:null})(),C=_=>{const $=new URLSearchParams(r||"");$.set("category",_),$.set("page","1");const B=$.toString();n(`${s}${B?`?${B}`:""}`,{replace:!1})};return e.jsxs("button",{type:"button",onClick:()=>C(g.slug),className:`cat-pill ${D?"active":""}`,"aria-current":D?"page":void 0,children:[L&&e.jsx(L,{size:14,className:"opacity-70"}),e.jsx("span",{children:t==="ar"?g.name?.ar||g.slug:g.name?.en||g.slug}),typeof g.productCount=="number"&&g.productCount>0&&e.jsx("span",{className:"count",children:g.productCount})]},g.id||g.slug)}),u.length>p&&e.jsx("button",{type:"button",onClick:()=>x(g=>!g),className:"cat-pill",children:y?t==="ar"?"Ø¥Ø®ÙØ§Ø¡":"Hide":t==="ar"?"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯":"Show more"})]})]})},ga=()=>{},xa=i.createContext({push:()=>0,remove:ga});let fa=0;const ya=({children:t})=>{const[s,r]=i.useState([]),n=i.useCallback(a=>{r(d=>d.filter(l=>l.id!==a))},[]),o=i.useCallback((a,d={})=>{const l=++fa,f={id:l,msg:a,type:d.type||"info",ttl:d.ttl??3e3};return r(v=>[...v,f]),f.ttl>0&&setTimeout(()=>n(l),f.ttl),l},[n]);return i.useEffect(()=>{const a=d=>{const f=d?.detail||{},v=f.name||"Ù…Ù†ØªØ¬",b=o({title:"ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",name:v,image:f.image||null,action:{label:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡",href:"/checkout"}},{ttl:2600,type:"success"});try{window.dispatchEvent(new CustomEvent("cart:icon-bump"))}catch{}return b};return window.addEventListener("cart:add",a),()=>window.removeEventListener("cart:add",a)},[o]),i.useEffect(()=>{const a=()=>{o("Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",{type:"error",ttl:2500})};return window.addEventListener("auth:required",a),()=>window.removeEventListener("auth:required",a)},[o]),e.jsxs(xa.Provider,{value:{push:o,remove:n},children:[t,e.jsx("div",{className:"toast-region","aria-live":"polite","aria-atomic":"true",children:s.map(a=>{const l=typeof a.msg=="object"&&a.msg!==null?a.msg:{title:String(a.msg)},f=l&&l.name?typeof l.name=="object"?(()=>{try{return JSON.stringify(l.name)}catch{return String(l.name)}})():l.name:null;return e.jsxs("div",{className:`toast toast-${a.type}`,role:"status",children:[l.image&&e.jsx("div",{className:"toast-media",children:e.jsx("img",{src:l.image,alt:""})}),e.jsxs("div",{className:"toast-body",children:[e.jsx("div",{className:"toast-title",children:l.title}),f&&e.jsx("div",{className:"toast-sub",children:f})]}),l.action?.href&&e.jsx("a",{className:"toast-cta",href:l.action.href,children:l.action.label||"ÙØªØ­"}),e.jsx("button",{onClick:()=>n(a.id),"aria-label":"Ø¥ØºÙ„Ø§Ù‚",className:"toast-close",children:"Ã—"})]},a.id)})}),e.jsx("style",{children:`
        .toast-region { position: fixed; top: 1rem; inset-inline-end: 1rem; display: flex; flex-direction: column; gap: .5rem; z-index: 2000; }
        .toast { background: #111827; color:#fff; padding:.65rem .75rem; border-radius: 12px; box-shadow:0 10px 30px -10px rgba(9,9,11,.5); font-size:.85rem; display:flex; align-items:center; gap:.65rem; animation: toast-in .28s var(--ease-standard, ease); min-width: 240px; }
        .toast-success { background: linear-gradient(90deg, var(--color-primary), var(--color-primary-alt)); }
        .toast-error { background:#b91c1c; }
        .toast-media { width: 38px; height: 38px; border-radius: 8px; overflow: hidden; background: rgba(255,255,255,.15); flex-shrink:0; display:flex; align-items:center; justify-content:center; }
        .toast-media img { width:100%; height:100%; object-fit: cover; display:block; }
        .toast-body { display:flex; flex-direction:column; gap:2px; min-width:0; }
        .toast-title { font-weight: 700; font-size: .82rem; }
        .toast-sub { font-size: .72rem; opacity: .95; }
        .toast-cta { margin-inline-start: .35rem; font-weight:700; font-size:.72rem; background: #fff; color:#0f172a; text-decoration:none; padding:.4rem .6rem; border-radius: 8px; box-shadow:0 3px 8px rgba(0,0,0,.15); }
        .toast-close { background:transparent; border:0; color:#fff; cursor:pointer; font-size:1rem; line-height:1; padding: .1rem .2rem; }
        @keyframes toast-in { from { opacity:0; transform: translateY(-6px); } to { opacity:1; transform: translateY(0);} }
      `})]})};function ba({isAr:t,storeName:s,logo:r,aboutLines:n}){return e.jsxs("ul",{className:`footer-about text-slate-700 ${t?"text-right":"text-left"} flex-shrink-0 min-w-[280px] snap-start`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Qt,{src:r,alt:s,className:"h-10 w-auto"}),e.jsx("span",{className:"sr-only",children:s})]}),e.jsx("div",{className:"text-sm leading-7 space-y-1",children:n.map((o,a)=>e.jsx("p",{children:o},a))})]})}function ja({t,linkBlog:s,linkSocial:r,linkReturns:n,linkPrivacy:o}){return e.jsxs("ul",{className:"footer-links text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[220px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.links}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:s,className:"footer-link hover:text-slate-900",children:t.blog})}),e.jsx("li",{children:e.jsx("a",{href:r,className:"footer-link hover:text-slate-900",children:t.social})}),e.jsx("li",{children:e.jsx("a",{href:n,className:"footer-link hover:text-slate-900",children:t.returns})}),e.jsx("li",{children:e.jsx("a",{href:o,className:"footer-link hover:text-slate-900",children:t.privacy})})]})]})}function va({t,chatPath:s,supportMobile:r,supportPhone:n,supportEmail:o}){return e.jsxs("div",{className:"footer-support text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[220px] sm:min-w-[260px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.support}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 justify-items-center md:flex md:flex-wrap md:justify-center",children:[e.jsxs(de,{to:s,"aria-label":t.chat,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(tr,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.chat})]}),e.jsxs("a",{href:`tel:${r}`,"aria-label":t.mobile,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(sr,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.mobile})]}),e.jsxs("a",{href:`tel:${n}`,"aria-label":t.phone,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(rr,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.phone})]}),e.jsxs("a",{href:`mailto:${o}`,"aria-label":t.email,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(ar,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.email})]})]})]})}function wa({t,appStoreUrl:s,playStoreUrl:r,isRtl:n,taxNumber:o}){return e.jsxs("div",{className:"footer-app-badges text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[260px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.appTitle}),e.jsx(Sa,{appStoreUrl:s,playStoreUrl:r,playBadgeAlt:t.playBadgeAlt,appStoreBadgeAlt:t.appStoreBadgeAlt,isRtl:n}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-slate-700 mb-1",children:n?"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ":"Tax number"}),e.jsx("div",{className:"text-sm font-semibold tracking-wide",children:o})]})]})}function Sa({appStoreUrl:t,playStoreUrl:s,playBadgeAlt:r,appStoreBadgeAlt:n,isRtl:o}){const[a,d]=E.useState(!0),[l,f]=E.useState(!0);return e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-4",children:[e.jsx("a",{href:s,target:"_blank",rel:"noreferrer noopener",className:"group inline-flex items-center justify-center rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-md active:shadow","aria-label":r,children:a?e.jsx("img",{src:"/assets/badges/google-play-badge.svg",alt:r,className:"h-11 md:h-12 object-contain transition-transform duration-150 group-hover:-translate-y-0.5 group-active:translate-y-0 group-hover:brightness-110",loading:"lazy",onError:()=>d(!1)}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-black px-3 py-2 text-white transition-colors hover:border-slate-400",children:[e.jsx("span",{className:"text-[10px] leading-3 opacity-80",children:"GET IT ON"}),e.jsx("span",{className:"text-sm font-semibold",children:"Google Play"})]})}),e.jsx("a",{href:t,target:"_blank",rel:"noreferrer noopener",className:"group inline-flex items-center justify-center rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-md active:shadow","aria-label":n,children:l?e.jsx("img",{src:"/assets/badges/app-store-badge.svg",alt:n,className:"h-11 md:h-12 object-contain transition-transform duration-150 group-hover:-translate-y-0.5 group-active:translate-y-0 group-hover:brightness-110",loading:"lazy",onError:()=>f(!1)}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-black px-3 py-2 text-white transition-colors hover:border-slate-400",children:[e.jsx("span",{className:"text-[10px] leading-3 opacity-80",children:"Download on the"}),e.jsx("span",{className:"text-sm font-semibold",children:"App Store"})]})})]})}const ka=()=>{const{locale:t}=pe(),{setting:s}=ke()||{},r=t==="ar",n=ie(s?.siteName,t)||(r?s?.siteNameAr||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":s?.siteNameEn||"My Store"),o=s?.taxNumber||"311307460300003",a=(r?s?.addressAr:s?.addressEn)||"",d=s?.commercialRegNo||"",l=s?.supportPhone||"920000000",f=s?.supportMobile||"+966500000000";s?.supportWhatsapp;const v=s?.supportEmail||"support@example.com",b=s?.linkBlog||"#",y=s?.linkSocial||"#",x=s?.linkReturns||"#",p=s?.linkPrivacy||"#",u=s?.appStoreUrl||"#",w=s?.playStoreUrl||"#",O=r?"/chat":t==="en"?"/en/chat":"/fr/chat",g={appTitle:r?`ØªØ·Ø¨ÙŠÙ‚ ${n}`:`${n} App`,support:r?"Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡":"Customer Service",links:r?"Ø±ÙˆØ§Ø¨Ø· ØªÙ‡Ù…Ùƒ":"Useful Links",blog:r?"Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©":"Blog",social:r?"Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ":"Social Media",returns:r?"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø³ØªØ¨Ø¯Ø§Ù„ ÙˆØ§Ù„Ø¥Ø³ØªØ±Ø¬Ø§Ø¹":"Return & Exchange Policy",privacy:r?"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©":"Privacy & Terms",phone:r?"Ù‡Ø§ØªÙ":"Phone",mobile:r?"Ø¬ÙˆØ§Ù„":"Mobile",whatsapp:r?"ÙˆØ§ØªØ³Ø§Ø¨":"WhatsApp",chat:r?"Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©":"Chat",email:r?"Ø¥ÙŠÙ…ÙŠÙ„":"Email",playBadgeAlt:r?"Ø§Ø­ØµÙ„ Ø¹Ù„ÙŠÙ‡ Ù…Ù† Google Play":"Get it on Google Play",appStoreBadgeAlt:r?"Ø­Ù…Ù‘Ù„ Ù…Ù† App Store":"Download on the App Store"},D=s?.footerAbout??(r?s?.footerAboutAr:s?.footerAboutEn)??"",P=ie(D,t),h=P?.trim()?r?P.split(/\r?\n/).filter(Boolean):[P]:r?["Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¨Ø§Ù„Ø­Ø¨Ø©","ÙˆØ¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ Ù…Ù† Ù…Ù†Ø¸ÙØ§Øª Ùˆ ÙƒÙ…Ø§Ù„ÙŠØ§Øª","Ø£ÙŠØ¶Ù‹Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙ†Ø§ Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª ÙˆØ¬Ù…ÙŠØ¹","Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø±Ù†Ø§ Ø¬Ù…Ù„Ø© ÙˆØ¬ÙˆØ¯ØªÙ†Ø§","Ø£ØµÙ„ÙŠØ©"]:["We specialize in wholesale and retail food products and home essentials. We also have a supermarket section to cover family needs with genuine quality at great prices."];return e.jsx("footer",{className:"site-footer mt-12 bg-gradient-to-r from-white/90 via-[#F6FFF0] to-white/90 border-t border-slate-200",children:e.jsxs("div",{className:"container-custom px-4 py-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 items-start",children:[e.jsx("div",{className:"md:col-span-4",children:e.jsx(ba,{isAr:r,storeName:n,logo:s?.logoUrl||s?.logo||"/logo.svg",aboutLines:h})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(ja,{t:g,linkBlog:b,linkSocial:y,linkReturns:x,linkPrivacy:p})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(va,{t:g,chatPath:O,supportMobile:f,supportPhone:l,supportEmail:v})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(wa,{t:g,appStoreUrl:u,playStoreUrl:w,isRtl:r,taxNumber:o})})]}),e.jsx("div",{className:"mt-8 border-t border-slate-200 pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-700",children:[e.jsxs("span",{className:"block md:inline",children:["Â© ",new Date().getFullYear()," ",n,"."]}),e.jsxs("span",{className:"hidden md:inline",children:["Â ",r?"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©":"All rights reserved","."]}),(a||d)&&e.jsxs("span",{className:"block md:inline ms-2",children:[r?"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†":"Address",": ",a||"-",d?` Â· ${r?"Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ":"CR"}: ${d}`:""]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:y,className:"inline-flex items-center gap-2 text-sm text-slate-700 hover:text-primary focus:outline-none focus:ring-2 focus:ring-amber-500/40 rounded-md px-2 py-1",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"opacity-90",children:e.jsx("path",{d:"M22 5.924c-.68.302-1.412.505-2.183.597.786-.47 1.39-1.213 1.674-2.1-.734.435-1.549.75-2.415.921C18.5 4.17 17.45 3.7 16.273 3.7c-2.06 0-3.735 1.674-3.735 3.735 0 .293.034.578.096.85C9.69 7.947 7.12 6.53 5.07 4.368c-.321.55-.505 1.19-.505 1.87 0 1.29.656 2.427 1.654 3.092-.61-.02-1.188-.188-1.69-.47v.05c0 1.8 1.28 3.297 2.978 3.64-.312.084-.64.129-.978.129-.24 0-.474-.024-.699-.066.475 1.486 1.854 2.57 3.488 2.6-1.279 1.003-2.892 1.602-4.645 1.602-.302 0-.6-.018-.895-.053C6.467 21.04 8.244 21.7 10.17 21.7c6.444 0 9.968-5.34 9.968-9.97 0-.152-.004-.304-.01-.455.68-.49 1.27-1.1 1.74-1.8-.626.28-1.3.468-2 .573z"})}),e.jsx("span",{className:"sr-only",children:r?"Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„":"Social"})]}),e.jsx("a",{href:p,className:"text-sm text-slate-700 hover:text-slate-900 underline",children:r?"Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©":"Privacy & Terms"})]})]})})]})})},Ds=Gt("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-emerald-600 text-white hover:bg-emerald-700/90",destructive:"bg-red-500 text-destructive-foreground hover:bg-red-600/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-gray-200 text-secondary-foreground hover:bg-gray-300/80 dark:bg-gray-700 dark:hover:bg-gray-600",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"primary",size:"default"}}),Na=E.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...o},a)=>{const d=n?"span":"button";return e.jsx(d,{className:Ds({variant:s,size:r,className:t}),ref:a,...o})});Na.displayName="Button";const uc=({className:t,variant:s,size:r,...n})=>e.jsx(de,{className:Ds({variant:s,size:r,className:t}),...n}),Aa=E.forwardRef(({className:t,type:s,label:r,error:n,containerClassName:o,...a},d)=>{const l=a.id||a.name;return e.jsxs("div",{className:`w-full ${o||""}`,children:[r&&e.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r}),e.jsx("input",{id:l,type:s,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${n?"border-red-500":"border-gray-300 dark:border-gray-600"} ${t||""}`,ref:d,...a}),n&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n})]})});Aa.displayName="Input";function ye(...t){return Ss(ks(t))}const Ca=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));Ca.displayName="Card";const Ea=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:ye("flex flex-col space-y-1.5 p-6",t),...s}));Ea.displayName="CardHeader";const Ra=E.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:ye("text-2xl font-semibold leading-none tracking-tight",t),...s}));Ra.displayName="CardTitle";const Ta=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:ye("p-6 pt-0",t),...s}));Ta.displayName="CardContent";const _a=E.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:ye("text-sm text-muted-foreground",t),...s}));_a.displayName="CardDescription";const Pa=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:ye("flex items-center p-6 pt-0",t),...s}));Pa.displayName="CardFooter";const Ia=E.forwardRef(({className:t,...s},r)=>e.jsx("label",{ref:r,className:ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...s}));Ia.displayName="Label";function os({className:t,...s}){return e.jsx("div",{className:ye("animate-pulse rounded-md bg-muted",t),...s})}const Oa=nr(Dr((t,s)=>({items:[],addItem:(r,n=1)=>t(o=>o.items.find(d=>d.id===r.id)?{items:o.items.map(d=>d.id===r.id?{...d,quantity:d.quantity+n}:d)}:{items:[...o.items,{...r,quantity:n}]}),removeItem:r=>t(n=>({items:n.items.filter(o=>o.id!==r)})),updateQuantity:(r,n)=>t(o=>({items:o.items.map(a=>a.id===r?{...a,quantity:Math.max(0,n)}:a).filter(a=>a.quantity>0)})),clearCart:()=>t({items:[]}),getTotal:()=>s().items.reduce((r,n)=>r+n.price*n.quantity,0),getItemCount:()=>s().items.reduce((r,n)=>r+n.quantity,0)}),{name:"cart-storage"})),La=()=>{const t=Oa(s=>s.getItemCount());return t===0?null:e.jsxs(de,{to:"/cart",className:"fixed bottom-4 left-4 z-50 flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-white shadow-lg transition hover:bg-primary/90 md:bottom-6 md:left-6",children:[e.jsx(Jt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:t})]})},Da=E.forwardRef(({className:t,as:s="div",padded:r=!0,children:n,...o},a)=>{const d=s||"div";return e.jsx(d,{ref:a,className:ye("bg-white/90 dark:bg-gray-800/80 backdrop-blur rounded-2xl shadow-lg ring-1 ring-gray-200/60 dark:ring-gray-700",r?"p-6":"",t),...o,children:n})});Da.displayName="Panel";function Ua(){function t(){try{return pe()}catch{return{locale:"ar",t:W=>W}}}function s(){try{return fe()}catch{return{user:null}}}function r(){try{return Yt()}catch{return{cartItems:[]}}}function n(){try{return ue()}catch{return{pathname:"/"}}}function o(){try{return Le()}catch{return()=>{}}}const{panel:a,setPanel:d}=arguments[0]&&typeof arguments[0]=="object"?arguments[0]:{},{locale:l,t:f}=t(),{user:v}=s(),b=n(),y=o(),{cartItems:x=[]}=r(),[p,u]=i.useState(!1),[w,O]=i.useState(!1),g=i.useRef(0),[D,P]=i.useState(!1),h=l==="ar"?"":`/${l}`,L=b?.pathname||"/",C=i.useMemo(()=>Array.isArray(x)?x.reduce((W,c)=>W+(c.quantity||1),0):0,[x]),_=i.useCallback(W=>y(W),[y]),$=i.useCallback(()=>{typeof d=="function"&&(d(a==="cart"?null:"cart"),navigator?.vibrate&&navigator.vibrate(10))},[a,d]);i.useEffect(()=>{if(C>0){P(!0);const W=setTimeout(()=>P(!1),320);return()=>clearTimeout(W)}},[C]),i.useEffect(()=>{try{const R=window.matchMedia("(prefers-reduced-motion: reduce)");u(!!R.matches);const k=U=>u(!!U.matches);R.addEventListener?R.addEventListener("change",k):R.addListener(k)}catch{}const W=()=>{const R=window.scrollY||0;Math.abs(R-g.current)>8&&(O(R>g.current&&R>120),g.current=R)};window.addEventListener("scroll",W,{passive:!0});let c,j;try{if(c=window.visualViewport,c){const R=c.height;j=()=>O(R-c.height>120),c.addEventListener("resize",j)}}catch{}return()=>{window.removeEventListener("scroll",W);try{c&&c.removeEventListener&&j&&c.removeEventListener("resize",j)}catch{}}},[]);const B=i.useMemo(()=>[{key:"home",label:f?.("nav.home")||"Home",icon:bs,isActive:L==="/"||L==="/en"||L==="/fr",onClick:()=>_(h||"/")},{key:"categories",label:l==="ar"?"Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª":f?.("nav.catalog")||"Categories",icon:ir,isActive:L.startsWith(`${h}/catalog`),onClick:()=>_(`${h}/catalog`)},{key:"products",label:l==="ar"?"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª":f?.("nav.products")||"Products",icon:De,isActive:L.startsWith(`${h}/products`),onClick:()=>_(`${h}/products`)},{key:"offers",label:f?.("nav.offers")||"Offers",icon:Kt,isActive:L.startsWith(`${h}/offers`),onClick:()=>_(`${h}/offers`)},{key:"cart",label:f?.("cart")||"Cart",icon:Jt,isActive:!1,onClick:()=>$()},{key:"account",label:f?.("nav.account")||"Account",icon:Oe,isActive:L.startsWith(`${h}/account`)||L.startsWith(`${h}/login`),onClick:()=>_(v?`${h}/account/profile`:`${h}/login`)}],[f,h,L,_,v,$,l]),F=({item:W})=>{const{key:c,label:j,icon:R,isActive:k,onClick:U}=W,z=(T=>{if(typeof T=="string")return T;if(!T)return"";try{return typeof T=="object"?(T[l]||T.en||T.ar||Object.values(T)[0]||"")+"":String(T)}catch{return""+T}})(j),N=c==="account"?"text-sky-600":"text-amber-600";return e.jsxs(xe.button,{type:"button",whileTap:{scale:.92},"aria-label":z||c,"aria-current":k?"page":void 0,onClick:U,className:`flex-1 h-14 flex flex-col items-center justify-center gap-1 text-[11px] font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 ${k?N:"text-slate-700 dark:text-slate-300"}`,children:[e.jsx(R,{size:18}),e.jsx("span",{className:"leading-none",children:z})]})};return e.jsx(xe.nav,{dir:"rtl",role:"navigation","aria-label":f?.("mobileNavigation")||"Mobile navigation",initial:!1,animate:{y:w?84:0,opacity:1},transition:p?{duration:0}:{type:"spring",stiffness:260,damping:24},className:"md:hidden fixed bottom-0 left-0 right-0 w-full z-[1050] pointer-events-none",style:{paddingBottom:"max(0px, env(safe-area-inset-bottom))"},children:e.jsxs("div",{className:"relative w-full px-2",style:{pointerEvents:"auto"},children:[e.jsx("div",{className:"flex flex-row justify-between items-center gap-2 relative rounded-2xl shadow-2xl border border-white/60 dark:border-slate-800 bg-white/70 dark:bg-slate-900/80 backdrop-blur-xl w-full",children:B.filter(W=>W.key!=="cart").map(W=>e.jsx(F,{item:W},W.key))}),(()=>{const W=B.find(j=>j.key==="cart"),c=W.icon;return e.jsxs(xe.button,{type:"button",whileTap:{scale:.92},whileHover:{scale:1.08},"aria-label":(function(){try{return typeof W.label=="string"?W.label:W.label&&typeof W.label=="object"?W.label[l]||W.label.en||W.label.ar||"cart":String(W.label||"cart")}catch{return"cart"}})(),onClick:()=>{W.onClick(),P(!0),setTimeout(()=>P(!1),320)},animate:D?{boxShadow:"0 0 0 12px rgba(251, 191, 36, 0.4)"}:{boxShadow:"0 2px 16px rgba(0,0,0,0.18)"},transition:{duration:.32},className:"absolute md:hidden left-1/2 -translate-x-1/2 z-[1101] bg-emerald-500 text-white shadow-2xl rounded-full w-20 h-20 flex items-center justify-center border-4 border-emerald-500 dark:border-emerald-500 transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400 hover:shadow-2xl active:scale-95",style:{bottom:"calc(100% + 12px)",pointerEvents:"auto"},children:[e.jsx(c,{size:38,color:"#10b981"}),C>0&&e.jsx(xe.span,{className:"absolute -top-2 -right-2 min-w-7 h-7 px-2 rounded-full bg-amber-500 text-white text-[13px] font-bold shadow-lg border-2 border-white dark:border-slate-900",children:C})]})})()]})})}function za(){try{return pe()}catch{return{locale:"ar",t:s=>s,setLocale:()=>{}}}}function $a(){const{locale:t,t:s}=za(),[r,n]=i.useState(!1),[o,a]=i.useState(""),[d,l]=i.useState(!1),[f,v]=i.useState(null),[b,y]=i.useState({products:[],categories:[],brands:[]}),[x,p]=i.useState([]),[u,w]=i.useState(!1),[O,g]=i.useState(!1),[D,P]=i.useState(1),[h,L]=i.useState(0),[C,_]=i.useState([]),[$,B]=i.useState([]),[F,W]=i.useState(-1),[c,j]=i.useState(()=>{try{const A=localStorage.getItem("my_store_recent_searches");return A?JSON.parse(A):[]}catch{return[]}}),R=i.useRef(null),k=t==="ar",U=Le(),q=i.useRef(null),z=i.useCallback(()=>n(!0),[]),N=i.useCallback(()=>n(!1),[]);i.useEffect(()=>{const A=()=>z();return window.addEventListener("search:focus",A),()=>window.removeEventListener("search:focus",A)},[z]),i.useEffect(()=>{if(r){const A=setTimeout(()=>{try{R.current?.focus()}catch{}},60);return()=>clearTimeout(A)}},[r]),i.useEffect(()=>{const A=V=>{V.key==="Escape"&&N()};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[N]),i.useEffect(()=>{if(!r)return;let A=!1;return(async()=>{try{const V=await X.catalogSummary().catch(()=>({categories:[]}));A||_(Array.isArray(V?.categories)?V.categories.slice(0,6):[])}catch{}try{const V=await X.searchProducts({page:1,pageSize:8}).catch(()=>[]),re=Array.isArray(V)?V:Array.isArray(V?.items)?V.items:[];A||B(re.slice(0,8))}catch{}})(),()=>{A=!0}},[r]),i.useEffect(()=>{W(-1)},[b,r,o]);const T=i.useCallback(A=>{A&&j(V=>{const re=[A,...V.filter(m=>m!==A)].slice(0,8);try{localStorage.setItem("my_store_recent_searches",JSON.stringify(re))}catch{}return re})},[]),K=i.useCallback(async A=>{if(!A||A.trim().length<2){y({products:[],categories:[]});return}l(!0),v(null);try{const V=await X.searchTypeahead(A.trim());y({products:Array.isArray(V?.products)?V.products:[],categories:Array.isArray(V?.categories)?V.categories:[],brands:Array.isArray(V?.brands)?V.brands:[]})}catch(V){v(V?.message||"Error")}finally{l(!1)}},[]),Q=i.useCallback(async(A,V=1,re=24)=>{const m=(A||"").trim();if(m){w(!0),g(!0),v(null);try{const H=await X.searchProducts({q:m,page:V,pageSize:re}),G=Array.isArray(H)?H:Array.isArray(H?.items)?H.items:Array.isArray(H?.products)?H.products:[],oe=Number(H?.total||H?.count||(Array.isArray(G)?G.length:0));p(G),L(oe),P(Number(H?.page||V))}catch(H){v(H?.message||"Error")}finally{w(!1)}}},[]);i.useEffect(()=>{if(r)return q.current&&clearTimeout(q.current),q.current=setTimeout(()=>K(o),280),()=>clearTimeout(q.current)},[o,K,r]);const ee=(o||"").trim().length>=2,se=r&&!ee,ae=i.useMemo(()=>{const A=[];return ee&&((b.categories||[]).slice(0,6).forEach(V=>A.push({type:"category",data:V})),(b.brands||[]).slice(0,6).forEach(V=>A.push({type:"brand",data:V})),(b.products||[]).slice(0,8).forEach(V=>A.push({type:"product",data:V}))),A},[b,ee]),ve=A=>ae.length===0?-1:A<0?ae.length-1:A>=ae.length?0:A,te=i.useCallback(A=>{if(ee){if(A.key==="ArrowDown"||A.key==="ArrowUp")A.preventDefault(),W(V=>ve(V+(A.key==="ArrowDown"?1:-1)));else if(A.key==="Enter"&&F>=0&&ae[F]){A.preventDefault();const V=ae[F];V.type==="product"?(T(o.trim()),N(),U(`/products/${V.data.slug||V.data.id}`)):V.type==="category"?(T(o.trim()),N(),U(`/products?category=${encodeURIComponent(V.data.slug||V.data.id||"")}`)):V.type==="brand"&&(T(o.trim()),N(),U(`/products?brand=${encodeURIComponent(V.data.slug||V.data.id||"")}`))}}},[ee,F,ae,o,N,U,T]),ne=(A,V)=>{if(!V)return A;try{const re=String(A||"").toLowerCase().indexOf(V.toLowerCase());if(re===-1)return A;const m=A.slice(0,re),H=A.slice(re,re+V.length),G=A.slice(re+V.length);return e.jsxs("span",{children:[m,e.jsx("span",{className:"bg-amber-200/60 px-0.5",children:H}),G]})}catch{return A}},Y=i.useCallback(A=>{A?.preventDefault?.();const V=(o||"").trim();V&&(T(V),Q(V,1,24))},[o,N,U,T]),Z=i.useMemo(()=>k?"rtl":"ltr",[k]);return e.jsx(ze,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(xe.div,{initial:{opacity:0},animate:{opacity:.35},exit:{opacity:0},transition:{duration:.18},className:"fixed inset-0 bg-black z-[1200]",onClick:N},"search-overlay"),e.jsx(xe.div,{dir:k?"rtl":"ltr",initial:{opacity:0,scale:.98,y:-6},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:-6},transition:{duration:.18},className:"fixed inset-0 z-[1201] flex items-start justify-center pt-20 sm:pt-24","aria-modal":"true",role:"dialog","aria-label":s&&(s("search")||"Search"),children:e.jsx("div",{className:"relative w-full px-4 max-w-2xl z-[1202]",children:e.jsxs("div",{className:"bg-white/95 dark:bg-slate-900/90 rounded-xl shadow-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:s&&(s("search")||"Search")}),e.jsx("button",{onClick:N,className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500","aria-label":s?.("close")||"Close",children:e.jsx(Ue,{size:18})})]}),e.jsxs("form",{onSubmit:Y,className:"relative",children:[e.jsx("input",{ref:R,type:"search",value:o,onChange:A=>a(A.target.value),onKeyDown:A=>{if(te(A),A.key==="Enter"){const V=(o||"").trim();if(!V)return;F<0&&(A.preventDefault(),T(V),N(),U(`/search?q=${encodeURIComponent(V)}`))}},placeholder:s&&(s("searchPlaceholder")||"Search..."),className:"w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-800 border dark:border-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500"}),e.jsx("button",{type:"submit",className:"absolute end-2 top-1/2 -translate-y-1/2 text-sm font-semibold text-emerald-600 disabled:opacity-50",disabled:!o.trim(),children:t==="ar"?"Ø¨Ø­Ø«":"Search"})]}),O?e.jsxs("div",{className:"mt-4",children:[u&&e.jsx("div",{className:"text-sm text-slate-500",children:t==="ar"?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...":"Searching..."}),!u&&x&&x.length===0&&e.jsx("div",{className:"text-sm text-slate-500",children:t==="ar"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«":"No search results"}),!u&&x&&x.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:x.map(A=>e.jsx("button",{className:"text-start p-2 bg-transparent rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800",onClick:()=>{T(o.trim()),N(),U(`/products/${A.slug||A.id}`)},children:e.jsxs("div",{className:"w-full flex gap-3 items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded overflow-hidden bg-slate-100 dark:bg-slate-800 flex-shrink-0",children:e.jsx("img",{src:A.image,alt:ie(A.name,t)||A.name||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold truncate",children:ie(A.name,t)||A.name||A.title}),e.jsxs("div",{className:"text-xs text-slate-500",children:[Number(A.price||0).toFixed(2)," Ø±.Ø³"]})]})]})},A.id))}),h>x.length&&e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx("button",{disabled:D<=1||u,onClick:()=>{const A=Math.max(1,D-1);Q(o,A)},className:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-800",children:t==="ar"?"Ø§Ù„Ø³Ø§Ø¨Ù‚":"Prev"}),e.jsx("div",{className:"text-sm opacity-80",children:D}),e.jsx("button",{disabled:u,onClick:()=>{const A=D+1;Q(o,A)},className:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-800",children:t==="ar"?"Ø§Ù„ØªØ§Ù„ÙŠ":"Next"})]})]})]}):ee?e.jsxs("div",{className:"mt-3 space-y-2",children:[d&&e.jsx("div",{className:"text-xs text-slate-500",children:t==="ar"?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...":"Loading..."}),f&&e.jsx("div",{className:"text-xs text-red-600",children:f}),!d&&!f&&(b.products.length>0||b.categories.length>0)&&e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[b.categories.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø§Ù„ÙØ¦Ø§Øª":"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.categories.map((A,V)=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>{T(o.trim()),N(),U(`/products?category=${encodeURIComponent(A.slug||A.id||"")}`)},children:ne(ie(A.name,t)||A.nameAr||A.nameEn||A.slug,o)},A.slug||V))})]}),b.brands&&b.brands.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":"Brands"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.brands.slice(0,6).map((A,V)=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>{T(o.trim()),N(),U(`/products?brand=${encodeURIComponent(A.slug||A.id||"")}`)},children:ne(ie(A.name,t)||A.nameAr||A.nameEn||A.slug,o)},A.id||A.slug||V))})]}),b.products.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ù…Ù†ØªØ¬Ø§Øª":"Products"}),e.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800",children:b.products.slice(0,8).map(A=>e.jsxs("li",{className:`p-2 flex items-center gap-3 hover:bg-slate-50/60 dark:hover:bg-slate-800 cursor-pointer ${ae[F]?.type==="product"&&ae[F]?.data?.id===A.id?"bg-amber-50 dark:bg-amber-900/10":""}`,onClick:()=>{T(o.trim()),N(),U(`/products/${A.slug||A.id}`)},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:A.image&&e.jsx("img",{src:A.image,alt:ie(A.name,t)||A.nameAr||A.nameEn||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-[12px] font-semibold truncate",children:ne(ie(A.name,t)||A.nameAr||A.nameEn||"",o)}),e.jsxs("div",{className:"text-[11px] text-slate-500 flex gap-3",children:[e.jsxs("span",{children:[Number(A.price||0).toFixed(2)," Ø±.Ø³"]}),A.category&&e.jsx("span",{className:"opacity-70",children:ie(A.category,t)||A.category})]})]})]},A.id))})]})]}),!d&&!f&&b.products.length===0&&b.categories.length===0&&e.jsx("div",{className:"text-xs text-slate-500",children:t==="ar"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬":"No results"})]}):se?e.jsxs("div",{className:"mt-3 space-y-4",dir:Z,children:[c&&c.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø­Ø« Ø­Ø¯ÙŠØ«Ø©":"Recent Searches"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(A=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>a(A),children:A},A))})]}),C&&C.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"ØªØµÙ†ÙŠÙØ§Øª Ø´Ø§Ø¦Ø¹Ø©":"Popular Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(A=>e.jsxs("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/30",onClick:()=>{N(),U(`/products?category=${encodeURIComponent(A.category)}`)},children:[A.category," ",A.count!=null&&e.jsxs("span",{className:"opacity-60",children:["(",A.count,")"]})]},A.category))})]}),$&&$.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ù…Ù†ØªØ¬Ø§Øª Ø­Ø¯ÙŠØ«Ø©":"Recent Products"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:$.slice(0,6).map(A=>e.jsxs("button",{className:"text-start",onClick:()=>{N(),U(`/products/${A.slug||A.id}`)},children:[e.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800",children:A.image&&e.jsx("img",{src:A.image,alt:ie(A.name,t)||A.nameAr||A.nameEn||"",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"mt-1 text-[11px] font-medium truncate",children:ie(A.name,t)||A.nameAr||A.nameEn||""})]},A.id))})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:t==="ar"?"Ø§ÙƒØªØ¨ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª":"Type to search products"})]}):null]})})},"search-panel")]})})}function Ma({open:t,onClose:s,...r}){return i.useEffect(()=>{if(!t)return;const n=o=>{o.key==="Escape"&&s()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[t,s]),t?e.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-end justify-end",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30",onClick:s}),e.jsx(Os,{...r,onClose:s})]}):null}function Wa({timeout:t=1200}){const[s,r]=i.useState(!0);return i.useEffect(()=>{let n=null;function o(){r(!1),window.removeEventListener("load",o)}return document.readyState==="complete"?n=setTimeout(o,t):(window.addEventListener("load",o),n=setTimeout(o,t+800)),()=>{window.removeEventListener("load",o),n&&clearTimeout(n)}},[t]),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loader-init","aria-hidden":!s}),e.jsx("div",{className:"content-loading",role:"status","aria-hidden":!s,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"lds-spinner","aria-hidden":!0,children:Array.from({length:12}).map((n,o)=>e.jsx("div",{},o))})})})]}):null}function Fa(){const[t,s]=E.useState(!1),[r,n]=E.useState(!0),[o,a]=E.useState(!1),[d,l]=E.useState(null),[f,v]=E.useState("admin@example.com"),[b,y]=E.useState(""),[x,p]=E.useState(""),[u,w]=E.useState("System Admin"),[O,g]=E.useState(!1);E.useEffect(()=>{let P=!0;return(async()=>{try{const h=await X.request("/setup/status");P&&s(!!h?.needsSetup)}catch{P&&s(!1)}finally{P&&n(!1)}})(),()=>{P=!1}},[]);async function D(P){if(P?.preventDefault?.(),l(null),!f||!b){l("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");return}if(b.length<8){l("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}if(b!==x){l("ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†");return}a(!0);try{const h=await X.request("/setup/admin",{method:"POST",body:JSON.stringify({email:f,password:b,name:u})});h?.ok?(g(!0),setTimeout(()=>s(!1),1200)):l(h?.error||"ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…")}catch(h){const L=h?.data?.error||h?.message||"ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…";l(L)}finally{a(!1)}}return r||!t?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-5",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø¹Ø¯. Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©."}),e.jsxs("form",{onSubmit:D,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("input",{type:"email",className:"w-full px-3 py-2 border rounded",value:f,onChange:P=>v(P.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded",value:u,onChange:P=>w(P.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 border rounded",value:b,onChange:P=>y(P.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 border rounded",value:x,onChange:P=>p(P.target.value),required:!0})]}),d&&e.jsx("div",{className:"text-sm text-red-600",children:d}),O&&e.jsx("div",{className:"text-sm text-green-700",children:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­"}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",className:"btn-secondary px-3 py-2 text-sm",onClick:()=>s(!1),disabled:o,children:"Ø¥ØºÙ„Ø§Ù‚"}),e.jsx("button",{type:"submit",className:"btn-primary px-3 py-2 text-sm",disabled:o,children:o?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...":"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠØ±"})]})]})]})})}const Ba=({children:t})=>{E.useEffect(()=>{const p=()=>v("cart");return window.addEventListener("cart:open",p),()=>window.removeEventListener("cart:open",p)},[]);const{locale:s,setLocale:r,available:n}=pe(),{theme:o,setTheme:a}=Xt(),{pathname:d}=ue(),l=d==="/"||d==="/en",[f,v]=E.useState(null),{cartItems:b=[],updateQuantity:y}=Yt(),x=Array.isArray(b)?b.reduce((p,u)=>p+Number(u.price||u.salePrice||0)*Number(u.quantity||1),0):0;return e.jsx(ya,{children:e.jsx(Jr,{children:e.jsxs("div",{className:"app-layout professional-layout theme-minimal",children:[e.jsx(Wa,{}),e.jsx(Fa,{}),e.jsx(Qr,{}),e.jsxs("div",{className:"content-with-sidebar",children:[e.jsx(pa,{}),e.jsx(ma,{}),!l&&e.jsx(ha,{}),t,e.jsx("div",{className:"h-16 md:h-0"}),e.jsx(ka,{})]}),e.jsx(La,{}),e.jsx($a,{}),e.jsx(Ua,{panel:f,setPanel:v}),f==="cart"&&e.jsx(Ma,{open:!0,onClose:()=>v(null),items:b,total:x,locale:s,t:typeof window<"u"&&window.t?window.t:(p=>p),updateQuantity:y})]})})})},Us=i.createContext(null);function qa(t="my-store-chat"){try{return new BroadcastChannel(t)}catch{return null}}function Va({children:t}){const[s,r]=i.useState([]),[n,o]=i.useState(null),[a,d]=i.useState([]),[l,f]=i.useState({}),[v,b]=i.useState({}),y=i.useRef(null),x=i.useRef(null),p=(P,h={})=>{r(L=>L.find(_=>_.id===P)?L.map(_=>_.id===P?{..._,lastMessage:h.lastMessage||_.lastMessage,lastMessageAt:new Date().toISOString()}:_):[{id:P,title:h.title||"Ø§Ù„Ø¯Ø¹Ù…",lastMessage:h.lastMessage||"",lastMessageAt:new Date().toISOString()},...L])};i.useEffect(()=>{try{const P="/api/events",h=new EventSource(P,{withCredentials:!0}),L=C=>{try{const _=JSON.parse(C.data);if(C.type==="message"||C.type==="chat.message"){const $=_.threadId||"default";p($,{lastMessage:_.message?.content||_.text}),$===n?.id?d(B=>[...B,_.message||{id:_.id,from:_.from,text:_.text,ts:_.ts}]):f(B=>({...B,[$]:(B[$]||0)+1}))}}catch{}};return h.addEventListener("chat.message",L),h.addEventListener("message",L),y.current=h,()=>{try{h.close()}catch{}}}catch{}},[n?.id]),i.useEffect(()=>{const P=qa();x.current=P;const h=C=>{if(!C)return;const _=C.threadId||"default";C.type==="message"?(p(_,{lastMessage:C.text}),_===n?.id?d($=>[...$,{id:C.id,from:C.from,text:C.text,ts:C.ts}]):f($=>({...$,[_]:($[_]||0)+1}))):C.type==="typing"&&(b($=>{const B=new Set($[_]||[]);return B.add(C.from),{...$,[_]:Array.from(B)}}),setTimeout(()=>{b($=>{const B=new Set($[_]||[]);return B.delete(C.from),{...$,[_]:Array.from(B)}})},2500))};if(P){const C=_=>h(_.data);return P.addEventListener("message",C),()=>P.removeEventListener("message",C)}const L=C=>{try{if(!C.key||!C.key.startsWith("chat-msg:"))return;const _=JSON.parse(C.newValue);h(_)}catch{}};return window.addEventListener("storage",L),()=>window.removeEventListener("storage",L)},[n?.id]);const u=({text:P,from:h,threadId:L="default"})=>{const C={type:"message",id:Date.now()+"-"+Math.random().toString(36).slice(2,8),ts:new Date().toISOString(),from:h,text:P,threadId:L};try{if(x.current)x.current.postMessage(C);else{const _=`chat-msg:${Date.now()}`;localStorage.setItem(_,JSON.stringify(C)),setTimeout(()=>{try{localStorage.removeItem(_)}catch{}},15e3)}}catch{}return p(L,{lastMessage:C.text}),L===n?.id?d(_=>[..._,{id:C.id,from:C.from,text:C.text,ts:C.ts}]):f(_=>({..._,[L]:(_[L]||0)+1})),C},w=({from:P,threadId:h="default"})=>{const L={type:"typing",from:P,threadId:h,ts:new Date().toISOString()};try{if(x.current)x.current.postMessage(L);else{const C=`chat-typing:${Date.now()}`;localStorage.setItem(C,JSON.stringify(L)),setTimeout(()=>{try{localStorage.removeItem(C)}catch{}},2e3)}}catch{}b(C=>{const _=new Set(C[h]||[]);return _.add(P),{...C,[h]:Array.from(_)}}),setTimeout(()=>{b(C=>{const _=new Set(C[h]||[]);return _.delete(P),{...C,[h]:Array.from(_)}})},2500)},O=P=>{f(h=>({...h,[P]:0}))},g=Object.values(l).reduce((P,h)=>P+(h||0),0),D=i.useMemo(()=>({threads:s,setThreads:r,currentThread:n,setCurrentThread:o,messages:a,setMessages:d,unreadCounts:l,unreadTotal:g,typing:v,sendMessage:u,sendTyping:w,markThreadRead:O}),[s,n,a,l,v]);return e.jsx(Us.Provider,{value:D,children:t})}function mc(){const t=i.useContext(Us);if(!t)throw new Error("useChat must be used within ChatProvider");return t}class Ha extends E.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){window&&window.console&&console.error("Route boundary error",s,r)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{marginBottom:16},children:"âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",direction:"ltr",textAlign:"left",background:"#f8f8f8",padding:12,borderRadius:8,maxWidth:600,margin:"0 auto"},children:String(this.state.error)}),e.jsx("button",{style:{marginTop:20},onClick:()=>window.location.reload(),children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„"})]}):this.props.children}}const Ka=()=>e.jsxs("div",{style:{padding:"60px 24px",textAlign:"center"},children:[e.jsx("div",{className:"spinner",style:{width:42,height:42,border:"5px solid #eee",borderTop:"5px solid #69be3c",borderRadius:"50%",margin:"0 auto 24px",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{opacity:.7},children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©..."}),e.jsx("style",{children:"@keyframes spin {from{transform:rotate(0)} to{transform:rotate(360deg)}}"})]});function M({isAuthed:t,redirectTo:s="/login",element:r,children:n,userRole:o,requiredRoles:a,onDenied:d,mode:l="redirect",forbiddenMessage:f}){const v=r||n||null,y=!(Array.isArray(a)&&a.length>0)||o&&a.includes(o);return t?y?v:(d&&d({userRole:o,requiredRoles:a}),e.jsxs("div",{className:"forbidden-block",role:"alert",style:ls,children:[e.jsxs("h2",{style:Ja,children:["ðŸš« ",f||"ØµÙ„Ø§Ø­ÙŠØ§Øª ØºÙŠØ± ÙƒØ§ÙÙŠØ©"]}),e.jsx("p",{style:cs,children:o?`Ø¯ÙˆØ±Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${o}. Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡Ø§: ${a.join(", ")}`:"Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ¯ Ø¯ÙˆØ± Ø­Ø³Ø§Ø¨Ùƒ."}),e.jsx("a",{href:"/",style:Xa,children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})):l==="redirect"?e.jsx(le,{to:s,replace:!0}):e.jsxs("div",{className:"auth-block",role:"alert",style:ls,children:[e.jsx("p",{style:cs,children:f||"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("a",{href:s,className:"btn btn-primary",style:Ga,children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]})}const ls={maxWidth:560,margin:"3rem auto",background:"var(--color-surface, #fff)",border:"1px solid var(--color-border, #e4e7eb)",padding:"2rem 1.75rem",borderRadius:"18px",textAlign:"center",boxShadow:"0 8px 34px -12px rgba(0,0,0,.12)"},Ja={fontSize:"1.05rem",margin:"0 0 1rem",lineHeight:1.35},cs={fontSize:".8rem",margin:"0 0 1.25rem",lineHeight:1.6,color:"#475569"},Ga={display:"inline-flex",alignItems:"center",gap:".4rem",background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",padding:".65rem 1rem",borderRadius:10,textDecoration:"none",fontSize:".75rem",fontWeight:600},Xa={display:"inline-block",fontSize:".7rem",marginTop:".5rem",color:"#69be3c",textDecoration:"none",fontWeight:600};async function me(t,s={}){let r="/api";try{const l=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(l&&l.startsWith("/"))r=l;else if(typeof window<"u"&&/^https?:\/\//i.test(l)){const f=new URL(l);f.origin===window.location.origin&&(r=f.pathname||"/api")}}catch{}let n=null;try{n=localStorage.getItem("my_store_token")}catch{}const o={"Content-Type":"application/json",...s.headers||{}};n&&(o.Authorization=`Bearer ${n}`);const a=await fetch(r+t,{...s,headers:o});let d=null;try{d=await a.json()}catch{}if(!a.ok){const l=new Error(d?.error||a.statusText||"REQUEST_FAILED");throw l.status=a.status,l.body=d,l}return d}const we={listUsers:(t={})=>{const s=new URLSearchParams,r=t.page||1,n=t.pageSize||1e3;return s.set("page",r),s.set("pageSize",n),me("/admin/users"+(s.toString()?`?${s.toString()}`:""))},createUser:t=>me("/admin/users",{method:"POST",body:JSON.stringify(t)}),updateUser:(t,s)=>me("/admin/users/"+t,{method:"PATCH",body:JSON.stringify(s)}),deleteUser:t=>me("/admin/users/"+t,{method:"DELETE"}),activateUser:t=>me(`/admin/users/${t}/activate`,{method:"POST"}),deactivateUser:t=>me(`/admin/users/${t}/deactivate`,{method:"POST"}),listAudit:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,n)}),me("/admin/audit"+(s.toString()?`?${s.toString()}`:""))},listOrders:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,n)}),me("/orders"+(s.toString()?`?${s.toString()}`:""))},statsOverview:()=>me("/admin/stats/overview"),statsFinancials:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,n])=>{n!=null&&n!==""&&s.append(r,n)}),me("/admin/stats/financials"+(s.toString()?`?${s.toString()}`:""))},exportOrdersCsv:(t={})=>{const s=new URLSearchParams;Object.entries(t).forEach(([a,d])=>{d!=null&&d!==""&&s.append(a,d)});let r="/api";try{const a=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(a&&a.startsWith("/"))r=a;else if(typeof window<"u"&&/^https?:\/\//i.test(a)){const d=new URL(a);d.origin===window.location.origin&&(r=d.pathname||"/api")}}catch{}let n=null;try{n=localStorage.getItem("my_store_token")}catch{}const o={};return n&&(o.Authorization=`Bearer ${n}`),fetch(r+"/admin/stats/orders/export/csv"+(s.toString()?`?${s.toString()}`:""),{headers:o}).then(a=>a.text())},exportOrdersXlsx:(t={})=>{const s=new URLSearchParams;Object.entries(t).forEach(([a,d])=>{d!=null&&d!==""&&s.append(a,d)});let r="/api";try{const a=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(a&&a.startsWith("/"))r=a;else if(typeof window<"u"&&/^https?:\/\//i.test(a)){const d=new URL(a);d.origin===window.location.origin&&(r=d.pathname||"/api")}}catch{}let n=null;try{n=localStorage.getItem("my_store_token")}catch{}const o={};return n&&(o.Authorization=`Bearer ${n}`),fetch(r+"/admin/stats/orders/export/xlsx"+(s.toString()?`?${s.toString()}`:""),{headers:o}).then(a=>a.blob())},panel:()=>me("/admin/panel")};function Qa(t,s){i.useEffect(()=>{const r=n=>{!t.current||t.current.contains(n.target)||s(n)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[t,s])}function zs(){const t=ue(),[s,r]=i.useState(!1),n=i.useRef(null);Qa(n,()=>r(!1)),i.useEffect(()=>{r(!1)},[t.pathname,t.search]);const o=l=>{const v=new URLSearchParams(t.search).get("view");return l==="overview"?t.pathname.endsWith("/admin")&&!v:v===l},a=[{to:"/admin",label:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©",icon:e.jsx(or,{size:17}),view:"overview"},{to:"/admin/users",label:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†",icon:e.jsx(lr,{size:17}),view:"users"},{to:"/admin/customers",label:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",icon:e.jsx(cr,{size:17}),view:"customers"},{to:"/admin?view=products",label:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",icon:e.jsx(De,{size:17}),view:"products"},{to:"/admin?view=orders",label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",icon:e.jsx(dr,{size:17}),view:"orders"},{to:"/admin?view=audit",label:"Ø§Ù„Ø³Ø¬Ù„Ø§Øª",icon:e.jsx(ur,{size:17}),view:"audit"},{to:"/admin?view=reviews",label:"Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª",icon:e.jsx(mr,{size:17}),view:"reviews"},{to:"/admin?view=brands",label:"Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª",icon:e.jsx(ws,{size:17}),view:"brands"},{to:"/admin?view=offers",label:"Ø§Ù„Ø¹Ø±ÙˆØ¶",icon:e.jsx(pr,{size:17}),view:"offers"},{to:"/admin?view=ads",label:"Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª",icon:e.jsx(as,{size:17}),view:"ads"},{to:"/admin?view=marketing",label:"Ø§Ù„ØªØ³ÙˆÙŠÙ‚",icon:e.jsx(as,{size:17}),view:"marketing"},{to:"/admin?view=settings",label:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",icon:e.jsx(Ie,{size:17}),view:"settings"},{to:"/admin?view=cats",label:"Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª",icon:e.jsx(hr,{size:17}),view:"cats"}],d=t.pathname.startsWith("/admin");return e.jsx("header",{className:"w-full bg-white border-b border-slate-200 shadow-sm sticky top-0 z-40",dir:"rtl",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto flex items-center justify-between px-4 py-2",children:[e.jsx(Me,{to:"/admin",className:"flex items-center gap-2","aria-label":"Go to Admin Dashboard",children:e.jsx("h1",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"})}),e.jsx("button",{className:"sm:hidden p-2 rounded-md text-slate-600 hover:bg-slate-100","aria-label":s?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©","aria-expanded":s,onClick:()=>r(l=>!l),children:s?e.jsx(Ue,{size:20}):e.jsx(vs,{size:20})}),e.jsx("nav",{className:"hidden sm:flex items-center gap-3 overflow-x-auto scrollbar-none",role:"navigation","aria-label":"Admin navigation",children:a.map((l,f)=>{const v=l.view?o(l.view):t.pathname.includes(l.to),b=d&&v;return e.jsxs(Me,{to:l.to,className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-[0.85rem] transition-all duration-200 whitespace-nowrap ${b?"bg-slate-900 text-white font-semibold shadow-sm":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,"aria-current":b?"page":void 0,children:[e.jsx("span",{className:"opacity-90",children:l.icon}),e.jsx("span",{children:l.label})]},f)})}),s&&e.jsx("div",{ref:n,className:"absolute left-4 right-4 top-full mt-2 bg-white border rounded-lg shadow-lg p-3 sm:hidden z-50",children:e.jsxs("ul",{className:"grid gap-2",children:[e.jsx("li",{className:"px-3 py-2 border-b mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin",alt:"Admin avatar",className:"w-8 h-8 rounded-full border border-slate-200"}),e.jsx("div",{className:"text-sm text-slate-600",children:e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ù…Ø´Ø±Ù"})})]})}),a.map((l,f)=>{const v=l.view?o(l.view):t.pathname.includes(l.to),b=d&&v;return e.jsx("li",{children:e.jsxs(Me,{to:l.to,className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${b?"bg-slate-900 text-white":"text-slate-700 hover:bg-slate-100"}`,children:[e.jsx("span",{className:"opacity-90",children:l.icon}),e.jsx("span",{children:l.label})]})},f)})]})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[e.jsx("div",{className:"text-sm text-slate-600",children:e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ù…Ø´Ø±Ù"})}),e.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin",alt:"Admin avatar",className:"w-8 h-8 rounded-full border border-slate-200 shadow-sm"})]})]})})}const Ee={padding:".55rem .75rem",border:"1px solid #e2e8f0",borderRadius:10,minWidth:160,fontSize:".8rem",background:"#fff"},_e={display:"inline-flex",alignItems:"center",gap:".4rem",border:0,background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",padding:".6rem .95rem",borderRadius:10,cursor:"pointer",fontSize:".75rem",fontWeight:600},Re={..._e,background:"#f1f5f9",color:"#334155"},Pe={background:"#f1f5f9",border:0,width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8,cursor:"pointer",color:"#0f172a"},ds={...Pe,background:"#fee2e2",color:"#b91c1c"},Ya={width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:14,overflow:"hidden",boxShadow:"0 4px 14px -6px rgba(0,0,0,.06)"},Za={display:"flex",gap:".35rem",alignItems:"center"},en={textAlign:"center",padding:"1rem",fontSize:".75rem",color:"#64748b"};function He(){const{user:t}=fe()||{},s=t?.role==="admin",[r,n]=i.useState(!1),[o,a]=i.useState(null),[d,l]=i.useState([]),[f,v]=i.useState(0),[b,y]=i.useState(1),[x,p]=i.useState(20),[u,w]=i.useState(""),[O,g]=i.useState(""),[D,P]=i.useState(!0),[h,L]=i.useState(""),[C,_]=i.useState({id:null,name:"",email:"",phone:"",role:"admin",active:!0,password:"",sendInvite:!0}),[$,B]=i.useState(!1),F=b*x<Math.max(f,0),W=b>1,c=async()=>{n(!0),a(null);try{const N=await we.listUsers({page:1,pageSize:x}),T=Array.isArray(N)?N:N?.users||[];l(T),v(T.length)}catch(N){a(N.message)}finally{n(!1)}};i.useEffect(()=>{s&&c()},[s]);const j=i.useMemo(()=>{const N=u.trim().toLowerCase();return d.filter(T=>!(D&&T.role==="user"||N&&!((T.name||"").toLowerCase().includes(N)||(T.email||"").toLowerCase().includes(N)||(T.phone||"").toLowerCase().includes(N))||O&&T.role!==O||h==="1"&&T.active===!1||h==="0"&&T.active!==!1))},[d,u,O,h,D]),R=i.useMemo(()=>{const N=(b-1)*x;return j.slice(N,N+x)},[j,b,x]),k=()=>_({id:null,name:"",email:"",phone:"",role:"admin",active:!0,password:"",sendInvite:!0}),U=async N=>{N.preventDefault(),B(!0),a(null);try{if(C.id){const T={name:C.name,role:C.role,phone:C.phone},K=await we.updateUser(C.id,T),Q=K?.user||K;l(ee=>ee.map(se=>se.id===Q.id?{...se,...Q}:se))}else{const T={email:C.email,name:C.name||null,phone:C.phone||null,role:C.role,sendInvite:!!C.sendInvite};T.sendInvite||(T.password=C.password);const K=await we.createUser(T),Q=K?.user||K;l(ee=>[{...Q,active:!0},...ee])}k(),await c()}catch(T){a(T.message)}finally{B(!1)}},q=async N=>{if(window.confirm("Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ"))try{await we.deleteUser(N),l(T=>T.filter(K=>K.id!==N))}catch(T){alert("ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù: "+T.message)}},z=async(N,T)=>{try{T?await we.activateUser(N.id):await we.deactivateUser(N.id),l(K=>K.map(Q=>Q.id===N.id?{...Q,active:!!T}:Q))}catch(K){alert("ÙØ´Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: "+K.message)}};return s?e.jsxs("div",{style:{direction:"rtl",padding:"1.25rem 0",fontSize:".85rem"},children:[e.jsx("h1",{style:{margin:"0 0 1rem",fontSize:"1.4rem",fontWeight:700},children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:16},children:[e.jsx(zs,{}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[e.jsx("input",{placeholder:"Ø¨Ø­Ø« (Ø§Ø³Ù…/Ø¥ÙŠÙ…ÙŠÙ„/Ù‡Ø§ØªÙ)",value:u,onChange:N=>w(N.target.value),style:Ee}),e.jsxs("select",{value:O,onChange:N=>{g(N.target.value),y(1)},style:Ee,children:[e.jsx("option",{value:"",children:"ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±"}),e.jsx("option",{value:"user",children:"Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("option",{value:"seller",children:"Ø¨Ø§Ø¦Ø¹"}),e.jsx("option",{value:"delivery",children:"Ù…ÙˆØµÙ„"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"})]}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:".8rem",padding:".45rem .6rem",background:"#fff",border:"1px solid #e2e8f0",borderRadius:10},children:[e.jsx("input",{type:"checkbox",checked:D,onChange:N=>{P(N.target.checked),y(1)}})," Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø·Ø§Ù‚Ù… ÙÙ‚Ø· (Ù…Ø¯Ø±Ø§Ø¡/Ø¨Ø§Ø¦Ø¹ÙŠÙ†)"]}),e.jsxs("select",{value:h,onChange:N=>{L(N.target.value),y(1)},style:Ee,children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"1",children:"Ù…ÙØ¹Ù„"}),e.jsx("option",{value:"0",children:"Ù…ÙˆÙ‚ÙˆÙ"})]}),e.jsx("select",{value:x,onChange:N=>{p(+N.target.value||20),y(1)},style:Ee,children:[10,20,50,100].map(N=>e.jsxs("option",{value:N,children:[N," / ØµÙØ­Ø©"]},N))}),e.jsx("button",{type:"button",onClick:c,style:Re,children:"ØªØ­Ø¯ÙŠØ«"}),r&&e.jsx("span",{style:{fontSize:".7rem",color:"#64748b"},children:"...ØªØ­Ù…ÙŠÙ„"}),o&&e.jsxs("span",{style:{fontSize:".7rem",color:"#b91c1c"},children:["Ø®Ø·Ø£: ",o]})]}),e.jsxs("form",{onSubmit:U,style:{background:"#fff",padding:"1rem",borderRadius:12,boxShadow:"0 4px 14px -6px rgba(0,0,0,.08)",display:"grid",gap:10,marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:".95rem"},children:C.id?"ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…":"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit,minmax(160px,1fr))"},children:[!C.id&&e.jsxs(e.Fragment,{children:[e.jsx("input",{placeholder:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",required:!0,value:C.email,onChange:N=>_(T=>({...T,email:N.target.value}))}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:".8rem"},children:[e.jsx("input",{type:"checkbox",checked:!!C.sendInvite,onChange:N=>_(T=>({...T,sendInvite:N.target.checked}))})," Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"]}),!C.sendInvite&&e.jsx("input",{placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",required:!C.sendInvite,type:"password",value:C.password,onChange:N=>_(T=>({...T,password:N.target.value}))})]}),e.jsx("input",{placeholder:"Ø§Ù„Ø§Ø³Ù…",value:C.name,onChange:N=>_(T=>({...T,name:N.target.value}))}),e.jsx("input",{placeholder:"Ø§Ù„Ù‡Ø§ØªÙ",value:C.phone,onChange:N=>_(T=>({...T,phone:N.target.value}))}),e.jsxs("select",{value:C.role,onChange:N=>_(T=>({...T,role:N.target.value})),children:[e.jsx("option",{value:"user",children:"Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("option",{value:"seller",children:"Ø¨Ø§Ø¦Ø¹"}),e.jsx("option",{value:"delivery",children:"Ù…ÙˆØµÙ„"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"})]}),C.id&&e.jsxs("select",{value:C.active?"1":"0",onChange:N=>_(T=>({...T,active:N.target.value==="1"})),children:[e.jsx("option",{value:"1",children:"Ù…ÙØ¹Ù„"}),e.jsx("option",{value:"0",children:"Ù…ÙˆÙ‚ÙˆÙ"})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx("button",{type:"submit",disabled:$,style:_e,children:C.id?"Ø­ÙØ¸":"Ø¥Ø¶Ø§ÙØ©"}),C.id&&e.jsx("button",{type:"button",onClick:()=>k(),style:Re,children:"Ø¥Ù„ØºØ§Ø¡"})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:Ya,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„"}),e.jsx("th",{children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{children:"Ø§Ù„Ø¯ÙˆØ±"}),e.jsx("th",{children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{children:"Ø¥Ù†Ø´Ø§Ø¡"}),e.jsx("th",{children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsxs("tbody",{children:[R.map(N=>e.jsxs("tr",{children:[e.jsx("td",{children:N.name||"â€”"}),e.jsx("td",{style:{fontSize:".75rem"},children:N.email}),e.jsx("td",{style:{fontSize:".75rem"},children:N.phone||"â€”"}),e.jsx("td",{children:N.role}),e.jsx("td",{children:N.active===!1?"Ù…ÙˆÙ‚ÙˆÙ":"Ù…ÙØ¹Ù„"}),e.jsx("td",{children:N.createdAt?new Date(N.createdAt).toLocaleDateString():"â€”"}),e.jsxs("td",{style:Za,children:[e.jsx("button",{title:"ØªØ¹Ø¯ÙŠÙ„",onClick:()=>_({id:N.id,name:N.name||"",email:N.email||"",phone:N.phone||"",role:N.role||"user",active:N.active!==!1,sendInvite:!1,password:""}),style:Pe,children:"âœŽ"}),N.role!=="delivery"&&e.jsx("button",{title:"ØªØ¹ÙŠÙŠÙ† ÙƒÙ…ÙˆØµÙ„",onClick:async()=>{try{await we.updateUser(N.id,{role:"delivery"}),c()}catch(T){alert("ÙØ´Ù„ Ø§Ù„ØªØ¹ÙŠÙŠÙ†: "+T.message)}},style:Pe,children:"ðŸšš"}),N.active===!1?e.jsx("button",{title:"ØªÙØ¹ÙŠÙ„",onClick:()=>z(N,!0),style:Pe,children:"âœ“"}):e.jsx("button",{title:"Ø¥ÙŠÙ‚Ø§Ù",onClick:()=>z(N,!1),style:ds,children:"â¸"}),e.jsx("button",{title:"Ø­Ø°Ù",onClick:()=>q(N.id),style:ds,children:"ðŸ—‘"})]})]},N.id)),!R.length&&!r&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:en,children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})})]})]})}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",marginTop:10},children:[e.jsx("button",{disabled:!W,onClick:()=>y(N=>Math.max(1,N-1)),style:W?_e:Re,children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{style:{fontSize:".7rem"},children:["ØµÙØ­Ø© ",b," / ",Math.max(1,Math.ceil(j.length/x))]}),e.jsx("button",{disabled:!F,onClick:()=>y(N=>N+1),style:F?_e:Re,children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})]}):e.jsxs("div",{style:{direction:"rtl",padding:"2rem",maxWidth:520,margin:"2rem auto",background:"#fff",border:"1px solid #e2e8f0",borderRadius:16,boxShadow:"0 6px 28px -8px rgba(0,0,0,.12)"},children:[e.jsx("h2",{style:{marginTop:0,fontSize:"1.1rem"},children:"ðŸš« ØµÙ„Ø§Ø­ÙŠØ§Øª ØºÙŠØ± ÙƒØ§ÙÙŠØ©"}),e.jsx("p",{style:{fontSize:".75rem",lineHeight:1.7,color:"#475569"},children:"Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù…ØªØ§Ø­Ø© Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·."}),e.jsx("a",{href:"/",style:{display:"inline-block",marginTop:12,fontSize:".7rem",fontWeight:600,color:"#69be3c",textDecoration:"none"},children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})}const he=(t,s,r="name")=>{try{if(!s)return;const n=`${r}="${t}"`;let o=document.head.querySelector(`[${r}="${t}"]`);o||(o=document.createElement("meta"),o.setAttribute(r,t),document.head.appendChild(o)),o.setAttribute("content",s)}catch{}},Ce=({title:t,description:s,image:r,url:n})=>{const{setting:o}=ke()||{};return i.useEffect(()=>{const a=o?.siteNameAr||o?.siteNameEn||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",d=t||a;document.title=d,he("description",s,"name"),he("og:title",d,"property"),he("og:description",s,"property"),r&&(he("og:image",r,"property"),he("twitter:image",r,"name")),n&&he("og:url",n,"property"),he("twitter:card",r?"summary_large_image":"summary","name"),he("twitter:title",d,"name"),s&&he("twitter:description",s,"name"),he("og:site_name",a,"property")},[t,s,r,n,o?.siteNameAr,o?.siteNameEn]),null};function tn(){const[t,s]=E.useState(null),[r,n]=E.useState(!0),[o,a]=E.useState(null);return E.useEffect(()=>{let d=!0;return(async()=>{n(!0),a(null);try{const l=await X.adminStatsOverview();if(!d)return;s(l?.stats||null)}catch(l){if(!d)return;a(l.message||"Failed")}finally{d&&n(!1)}})(),()=>{d=!1}},[]),{data:t,loading:r,error:o}}function us({points:t=[],width:s=280,height:r=60,stroke:n="#111827",fill:o="rgba(17,24,39,0.08)"}){const a=E.useRef(null);return E.useEffect(()=>{const d=a.current;if(!d)return;const l=d.getContext("2d");if(l.clearRect(0,0,s,r),!t.length)return;t.map((u,w)=>w);const f=t.map(u=>u),v=Math.min(...f),b=Math.max(...f),y=6,x=u=>y+u/(t.length-1)*(s-y*2),p=u=>{const w=b-v||1;return r-y-(u-v)/w*(r-y*2)};l.beginPath(),l.moveTo(x(0),p(t[0]));for(let u=1;u<t.length;u++)l.lineTo(x(u),p(t[u]));l.strokeStyle=n,l.lineWidth=2,l.stroke(),l.lineTo(x(t.length-1),r-y),l.lineTo(x(0),r-y),l.closePath(),l.fillStyle=o,l.fill()},[t,s,r,n,o]),e.jsx("canvas",{ref:a,width:s,height:r,style:{width:s,height:r}})}const sn=[{key:"7",label:"7 Ø£ÙŠØ§Ù…"},{key:"14",label:"14 ÙŠÙˆÙ…"},{key:"30",label:"30 ÙŠÙˆÙ…"}],Ke=()=>{const{data:t,loading:s,error:r}=tn(),[n,o]=E.useState("7"),[a,d]=E.useState(()=>new Date(Date.now()-6*864e5).toISOString().slice(0,10)),[l,f]=E.useState(()=>new Date().toISOString().slice(0,10)),[v,b]=E.useState([]),[y,x]=E.useState([]),[p,u]=E.useState(!1),[w,O]=E.useState(null),[g,D]=E.useState(""),[P,h]=E.useState(""),[L,C]=E.useState({totalOrders:0,totalRevenue:0,avgOrder:0,byStatus:{},byMethod:{},topProducts:[]}),_=E.useCallback(async()=>{u(!0),O(null);try{const c={from:a,to:l,page:1,pageSize:500};g&&(c.status=g),P&&(c.paymentMethod=P);const R=(await X.listOrdersAdmin(c))?.orders||[],k=new Date(a),U=new Date(l),q=Math.max(1,Math.round((U-k)/864e5)+1),z=new Map,N=new Map;for(let te=0;te<q;te++){const ne=new Date(k);ne.setDate(k.getDate()+te);const Y=ne.toISOString().slice(0,10);z.set(Y,0),N.set(Y,0)}let T=0;const K={},Q={},ee=new Map;for(const te of R){T+=te.grandTotal||0,K[te.status]=(K[te.status]||0)+1;const ne=te.paymentMethod||"unknown";Q[ne]=(Q[ne]||0)+1;const Y=new Date(te.createdAt).toISOString().slice(0,10);z.has(Y)&&z.set(Y,(z.get(Y)||0)+(te.grandTotal||0)),N.has(Y)&&N.set(Y,(N.get(Y)||0)+1),(te.items||[]).forEach(Z=>{const A=Z.productId||Z.name?.ar||Z.name?.en||"Ù…Ù†ØªØ¬",V=ee.get(A)||{name:Z.name?.ar||Z.name?.en||A,qty:0,revenue:0};V.qty+=Z.quantity||0,V.revenue+=(Z.price||0)*(Z.quantity||0),ee.set(A,V)})}const se=R.length,ae=se?T/se:0,ve=Array.from(ee.values()).sort((te,ne)=>ne.revenue-te.revenue).slice(0,10);C({totalOrders:se,totalRevenue:T,avgOrder:ae,byStatus:K,byMethod:Q,topProducts:ve}),b(Array.from(z.values())),x(Array.from(N.values()))}catch(c){O(c.message||"Failed to load analytics")}finally{u(!1)}},[a,l,g,P]);E.useEffect(()=>{_()},[_]);const $=c=>{o(c);const j=Number(c),R=new Date,k=new Date;k.setDate(R.getDate()-(j-1)),d(k.toISOString().slice(0,10)),f(R.toISOString().slice(0,10))},B="https://my-store-backend-production.up.railway.app/api",F=c=>{const j=new URLSearchParams;return a&&j.set("from",a),l&&j.set("to",l),g&&j.set("status",g),P&&j.set("paymentMethod",P),`${B}/admin/stats/orders/export/${c}?${j.toString()}`},W=async c=>{let j=null;try{j=localStorage.getItem("my_store_token")}catch{}const R={};j&&(R.Authorization=`Bearer ${j}`);const k=await fetch(F(c),{headers:R});if(!k.ok)throw new Error(`Export failed: ${k.status}`);const U=await k.blob(),q=URL.createObjectURL(U),z=document.createElement("a");z.href=q,z.download=c==="csv"?"orders_export.csv":"orders_export.xlsx",document.body.appendChild(z),z.click(),z.remove(),URL.revokeObjectURL(q)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ce,{title:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± | Reports",description:"Reports overview"}),e.jsx("h1",{className:"page-title",children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± / Reports"}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsx("div",{style:{fontSize:28,fontWeight:700},children:t?.todayOrders??0})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙŠÙˆÙ…"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsxs("div",{style:{fontSize:28,fontWeight:700},children:[(t?.todayRevenue??0).toFixed?.(2)||0," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsxs("div",{style:{fontSize:28,fontWeight:700},children:[(t?.avgOrderValueToday??0).toFixed?.(2)||0," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsx("div",{style:{fontSize:28,fontWeight:700},children:t?.pendingBankCount??0})]})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("strong",{children:"Ø§Ù„ÙØªØ±Ø©:"}),sn.map(c=>e.jsx("button",{onClick:()=>$(c.key),className:n===c.key?"btn btn-primary":"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:n===c.key?"#111827":"#fff",color:n===c.key?"#fff":"#111"},children:c.label},c.key)),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:a,onChange:c=>d(c.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:l,onChange:c=>f(c.target.value)})]}),e.jsxs("label",{children:["Ø§Ù„Ø­Ø§Ù„Ø©:",e.jsxs("select",{value:g,onChange:c=>D(c.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"pending",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("option",{value:"processing",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}),e.jsx("option",{value:"paid",children:"Ù…Ø¯ÙÙˆØ¹"}),e.jsx("option",{value:"shipped",children:"ØªÙ… Ø§Ù„Ø´Ø­Ù†"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙŠ"})]})]}),e.jsxs("label",{children:["Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:",e.jsxs("select",{value:P,onChange:c=>h(c.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"}),e.jsx("option",{value:"cod",children:"Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("option",{value:"stc",children:"STC Pay"})]})]}),e.jsx("button",{onClick:()=>_(),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØ­Ø¯ÙŠØ«"})]}),e.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{onClick:()=>W("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV"}),e.jsx("button",{onClick:()=>W("xlsx"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± Excel"})]})]}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„ÙØªØ±Ø©)"}),p?e.jsx("div",{children:"..."}):w?e.jsx("div",{className:"error",children:String(w)}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:L.totalOrders})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (Ø§Ù„ÙØªØ±Ø©)"}),p?e.jsx("div",{children:"..."}):w?e.jsx("div",{className:"error",children:String(w)}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[L.totalRevenue.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨ (Ø§Ù„ÙØªØ±Ø©)"}),p?e.jsx("div",{children:"..."}):w?e.jsx("div",{className:"error",children:String(w)}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[L.avgOrder.toFixed(2)," SAR"]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0},children:["Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ù…Ù† ",a," Ø¥Ù„Ù‰ ",l,")"]}),p?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):w?e.jsx("span",{className:"error",children:String(w)}):null]}),e.jsxs("div",{style:{marginTop:8,display:"grid",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsx(us,{points:v,width:560,height:100})]}),e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(us,{points:y,width:560,height:70,stroke:"#0ea5e9",fill:"rgba(14,165,233,0.12)"})]})]}),e.jsxs("div",{className:"muted",style:{marginTop:8,display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯: ",v.reduce((c,j)=>c+j,0).toFixed(2)," SAR"]}),e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ",y.reduce((c,j)=>c+j,0)]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©"}),p?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(L.byStatus).sort((c,j)=>j[1]-c[1]).map(([c,j])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:c}),e.jsx("td",{style:{textAlign:"end"},children:j})]},c)),Object.keys(L.byStatus).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),p?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(L.byMethod).sort((c,j)=>j[1]-c[1]).map(([c,j])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:c}),e.jsx("td",{style:{textAlign:"end"},children:j})]},c)),Object.keys(L.byMethod).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),p?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("th",{children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[L.topProducts.map((c,j)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:c.name}),e.jsx("td",{style:{textAlign:"center"},children:c.qty}),e.jsxs("td",{style:{textAlign:"end"},children:[c.revenue.toFixed(2)," SAR"]})]},j)),L.topProducts.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]})]})};function rn(t,s,r){const[n,o]=E.useState({orders:[],total:0,page:1,totalPages:1}),[a,d]=E.useState(!1),[l,f]=E.useState(null);return E.useEffect(()=>{let v=!0;return(async()=>{d(!0),f(null);try{const b={status:"pending_bank_review",paymentMethod:"bank",page:r||1,pageSize:50};t&&(b.from=t),s&&(b.to=s);const y=await X.listOrdersAdmin(b);if(!v)return;o({orders:y.orders||[],total:y.total||(y.orders||[]).length,page:y.page||1,totalPages:y.totalPages||1})}catch(b){if(!v)return;f(b.message||"Failed to load")}finally{v&&d(!1)}})(),()=>{v=!1}},[t,s,r]),{...n,loading:a,error:l}}const an=({o:t,onConfirm:s,onReject:r})=>{const o=(t.paymentMeta||{}).bank||{},a=o.receiptUrl,d=o.reference,[l,f]=E.useState("");return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontFamily:"monospace",fontSize:12},children:t.id}),e.jsx("div",{className:"muted",children:new Date(t.createdAt).toLocaleString()})]}),e.jsx("td",{children:t.userId}),e.jsxs("td",{children:[t.grandTotal?.toFixed?.(2)||t.grandTotal," ",t.currency||"SAR"]}),e.jsxs("td",{children:[a?e.jsx("a",{href:a,target:"_blank",rel:"noreferrer",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±ÙÙ‚"}):e.jsx("span",{className:"muted",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯"}),e.jsxs("div",{className:"muted",children:["Ø§Ù„Ù…Ø±Ø¬Ø¹: ",d||"â€”"]})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>s(t.id,d),className:"btn",style:{padding:"6px 10px",border:"1px solid #0a0",color:"#0a0",borderRadius:6},children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹"}),e.jsx("input",{type:"text",value:l,onChange:v=>f(v.target.value),placeholder:"Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",style:{minWidth:180}}),e.jsx("button",{onClick:()=>r(t.id,l),className:"btn",style:{padding:"6px 10px",border:"1px solid #a00",color:"#a00",borderRadius:6},children:"Ø±ÙØ¶"})]})})]})},Je=()=>{const[t,s]=E.useState(""),[r,n]=E.useState(""),[o,a]=E.useState(1),{orders:d,loading:l,error:f,total:v,totalPages:b}=rn(t,r,o),y=E.useCallback(()=>{a(1)},[]),x=async(u,w)=>{try{await X.bankConfirm(u,w),y(),alert("ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯")}catch(O){alert(O.message||"ÙØ´Ù„ Ø§Ù„ØªØ£ÙƒÙŠØ¯")}},p=async(u,w)=>{if(window.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±ÙØ¶ØŸ"))try{await X.bankReject(u,w||void 0),y(),alert("ØªÙ… Ø§Ù„Ø±ÙØ¶")}catch(O){alert(O.message||"ÙØ´Ù„ Ø§Ù„Ø±ÙØ¶")}};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ce,{title:"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©",description:"Bank transfers review"}),e.jsx("h1",{className:"page-title",children:"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",margin:"8px 0",flexWrap:"wrap"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:t,onChange:u=>s(u.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:r,onChange:u=>n(u.target.value)})]}),e.jsx("button",{onClick:()=>a(1),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØ·Ø¨ÙŠÙ‚"})]}),e.jsxs("div",{className:"card",style:{padding:0,border:"1px solid #eee",borderRadius:8},children:[e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("strong",{children:["Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©: ",v]}),l?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):f?e.jsx("span",{className:"error",children:String(f)}):null]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"right",background:"#fafafa"},children:[e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ù…Ø±ÙÙ‚/Ø§Ù„Ù…Ø±Ø¬Ø¹"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡"})]})}),e.jsxs("tbody",{children:[d.map(u=>e.jsx(an,{o:u,onConfirm:x,onReject:p},u.id)),!l&&d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{padding:16},className:"muted",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©."})})]})]})}),b>1&&e.jsxs("div",{style:{padding:12,display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid #eee"},children:[e.jsx("button",{disabled:o<=1,onClick:()=>a(u=>Math.max(1,u-1)),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{className:"muted",children:["ØµÙØ­Ø© ",o," Ù…Ù† ",b]}),e.jsx("button",{disabled:o>=b,onClick:()=>a(u=>Math.min(b,u+1)),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})};function ms({points:t=[],width:s=560,height:r=100,stroke:n="#111827",fill:o="rgba(17,24,39,0.08)"}){const a=E.useRef(null);return E.useEffect(()=>{const d=a.current;if(!d)return;const l=d.getContext("2d");if(l.clearRect(0,0,s,r),!t.length)return;t.map((u,w)=>w);const f=t.map(u=>u),v=Math.min(...f),b=Math.max(...f),y=6,x=u=>y+u/(t.length-1)*(s-y*2),p=u=>{const w=b-v||1;return r-y-(u-v)/w*(r-y*2)};l.beginPath(),l.moveTo(x(0),p(t[0]));for(let u=1;u<t.length;u++)l.lineTo(x(u),p(t[u]));l.strokeStyle=n,l.lineWidth=2,l.stroke(),l.lineTo(x(t.length-1),r-y),l.lineTo(x(0),r-y),l.closePath(),l.fillStyle=o,l.fill()},[t,s,r,n,o]),e.jsx("canvas",{ref:a,width:s,height:r,style:{width:s,height:r}})}const nn=[{key:"7",label:"7 Ø£ÙŠØ§Ù…"},{key:"14",label:"14 ÙŠÙˆÙ…"},{key:"30",label:"30 ÙŠÙˆÙ…"}],Ge=()=>{const[t,s]=E.useState("7"),[r,n]=E.useState(()=>new Date(Date.now()-6*864e5).toISOString().slice(0,10)),[o,a]=E.useState(()=>new Date().toISOString().slice(0,10)),[d,l]=E.useState(""),[f,v]=E.useState(""),[b,y]=E.useState(!1),[x,p]=E.useState(null),[u,w]=E.useState({totalOrders:0,totalRevenue:0,avgOrder:0,uniqueCustomers:0,byStatus:{},byMethod:{},topProducts:[],topCustomers:[]}),[O,g]=E.useState([]),[D,P]=E.useState([]),[h,L]=E.useState(null),C=j=>{s(j);const R=Number(j),k=new Date,U=new Date;U.setDate(k.getDate()-(R-1)),n(U.toISOString().slice(0,10)),a(k.toISOString().slice(0,10))},_=E.useCallback(async()=>{const j={from:r,to:o,page:1,pageSize:250};d&&(j.status=d),f&&(j.paymentMethod=f);const R=[],k=await X.listOrdersAdmin(j);(k?.orders||[]).forEach(q=>R.push(q));const U=k?.totalPages||1;for(let q=2;q<=Math.min(U,8);q++)((await X.listOrdersAdmin({...j,page:q}))?.orders||[]).forEach(N=>R.push(N));return R},[r,o,d,f]),$=E.useCallback(j=>{const R=new Date(r),k=new Date(o),U=Math.max(1,Math.round((k-R)/864e5)+1),q=new Map,z=new Map;for(let Y=0;Y<U;Y++){const Z=new Date(R);Z.setDate(R.getDate()+Y);const A=Z.toISOString().slice(0,10);q.set(A,0),z.set(A,0)}let N=0;const T={},K={},Q=new Map,ee=new Map;for(const Y of j){N+=Y.grandTotal||0,T[Y.status]=(T[Y.status]||0)+1;const Z=Y.paymentMethod||"unknown";K[Z]=(K[Z]||0)+1;const A=new Date(Y.createdAt).toISOString().slice(0,10);q.has(A)&&q.set(A,(q.get(A)||0)+(Y.grandTotal||0)),z.has(A)&&z.set(A,(z.get(A)||0)+1);const V=Y.userId||"guest",re=ee.get(V)||{id:V,revenue:0,orders:0};re.revenue+=Y.grandTotal||0,re.orders+=1,ee.set(V,re),(Y.items||[]).forEach(m=>{const H=m.productId||m.name?.ar||m.name?.en||"Ù…Ù†ØªØ¬",G=Q.get(H)||{name:m.name?.ar||m.name?.en||H,qty:0,revenue:0};G.qty+=m.quantity||0,G.revenue+=(m.price||0)*(m.quantity||0),Q.set(H,G)})}const se=j.length,ae=se?N/se:0,ve=ee.size,te=Array.from(Q.values()).sort((Y,Z)=>Z.revenue-Y.revenue).slice(0,10),ne=Array.from(ee.values()).sort((Y,Z)=>Z.revenue-Y.revenue).slice(0,10);w({totalOrders:se,totalRevenue:N,avgOrder:ae,uniqueCustomers:ve,byStatus:T,byMethod:K,topProducts:te,topCustomers:ne}),g(Array.from(q.values())),P(Array.from(z.values()))},[r,o]),B=E.useCallback(async()=>{y(!0),p(null);try{const j=await _();$(j);const R=Math.max(1,Math.round((new Date(o)-new Date(r))/864e5)+1),k=await X.adminStatsFinancials({from:r,to:o,days:R});L(k)}catch(j){p(j.message||"Failed to load analytics")}finally{y(!1)}},[_,$]);E.useEffect(()=>{B()},[B]);const F="https://my-store-backend-production.up.railway.app/api",W=j=>{const R=new URLSearchParams;return r&&R.set("from",r),o&&R.set("to",o),d&&R.set("status",d),f&&R.set("paymentMethod",f),`${F}/admin/stats/orders/export/${j}?${R.toString()}`},c=async j=>{let R=null;try{R=localStorage.getItem("my_store_token")}catch{}const k={};R&&(k.Authorization=`Bearer ${R}`);const U=await fetch(W(j),{headers:k});if(!U.ok)throw new Error(`Export failed: ${U.status}`);const q=await U.blob(),z=URL.createObjectURL(q),N=document.createElement("a");N.href=z,N.download=j==="csv"?"analytics_orders.csv":"analytics_orders.xlsx",document.body.appendChild(N),N.click(),N.remove(),URL.revokeObjectURL(z)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ce,{title:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª | Analytics",description:"Analytics overview"}),e.jsx("h1",{className:"page-title",children:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª / Analytics"}),x&&e.jsx("div",{className:"error",style:{marginTop:8},children:String(x)}),e.jsxs("div",{style:{marginTop:16,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("strong",{children:"Ø§Ù„ÙØªØ±Ø©:"}),nn.map(j=>e.jsx("button",{onClick:()=>C(j.key),className:t===j.key?"btn btn-primary":"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:t===j.key?"#111827":"#fff",color:t===j.key?"#fff":"#111"},children:j.label},j.key)),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:r,onChange:j=>n(j.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:o,onChange:j=>a(j.target.value)})]}),e.jsxs("label",{children:["Ø§Ù„Ø­Ø§Ù„Ø©:",e.jsxs("select",{value:d,onChange:j=>l(j.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"pending",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("option",{value:"processing",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}),e.jsx("option",{value:"paid",children:"Ù…Ø¯ÙÙˆØ¹"}),e.jsx("option",{value:"shipped",children:"ØªÙ… Ø§Ù„Ø´Ø­Ù†"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙŠ"})]})]}),e.jsxs("label",{children:["Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:",e.jsxs("select",{value:f,onChange:j=>v(j.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"}),e.jsx("option",{value:"cod",children:"Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("option",{value:"stc",children:"STC Pay"})]})]}),e.jsx("button",{onClick:B,className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:b?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦":"ØªØ­Ø¯ÙŠØ«"})]}),e.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{onClick:()=>c("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV"}),e.jsx("button",{onClick:()=>c("xlsx"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± Excel"})]})]}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„ÙØªØ±Ø©)"}),b?e.jsx("div",{children:"..."}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:u.totalOrders})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (Ø§Ù„ÙØªØ±Ø©)"}),b?e.jsx("div",{children:"..."}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[u.totalRevenue.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨"}),b?e.jsx("div",{children:"..."}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[u.avgOrder.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„ÙØ±ÙŠØ¯ÙˆÙ†"}),b?e.jsx("div",{children:"..."}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:u.uniqueCustomers})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0},children:["Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ù…Ù† ",r," Ø¥Ù„Ù‰ ",o,")"]}),b?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):null]}),e.jsxs("div",{style:{marginTop:8,display:"grid",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsx(ms,{points:O,width:560,height:100})]}),e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(ms,{points:D,width:560,height:70,stroke:"#0ea5e9",fill:"rgba(14,165,233,0.12)"})]})]}),e.jsxs("div",{className:"muted",style:{marginTop:8,display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯: ",O.reduce((j,R)=>j+R,0).toFixed(2)," SAR"]}),e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ",D.reduce((j,R)=>j+R,0)]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0},children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© (ØªØ¬Ù…ÙŠØ¹ÙŠ)"}),e.jsx("div",{style:{display:"flex",gap:8},children:e.jsx("button",{onClick:()=>c("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV (Ø·Ù„Ø¨Ø§Øª)"})})]}),b?e.jsx("div",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsxs("div",{style:{fontWeight:700,fontSize:22},children:[(h?.totals?.totalRevenue||0).toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("div",{style:{fontWeight:700,fontSize:22},children:h?.totals?.totalOrders||0})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨"}),e.jsxs("div",{style:{fontWeight:700,fontSize:22},children:[(h?.totals?.overallAov||0).toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙˆÙ† (Ø§Ù„ÙØªØ±Ø©)"}),e.jsx("div",{style:{fontWeight:700,fontSize:22},children:h?.totals?.activeCustomersWindow||0})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©"}),b?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(u.byStatus).sort((j,R)=>R[1]-j[1]).map(([j,R])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:j}),e.jsx("td",{style:{textAlign:"end"},children:R})]},j)),Object.keys(u.byStatus).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),b?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(u.byMethod).sort((j,R)=>R[1]-j[1]).map(([j,R])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:j}),e.jsx("td",{style:{textAlign:"end"},children:R})]},j)),Object.keys(u.byMethod).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),b?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("th",{children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[u.topProducts.map((j,R)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:j.name}),e.jsx("td",{style:{textAlign:"center"},children:j.qty}),e.jsxs("td",{style:{textAlign:"end"},children:[j.revenue.toFixed(2)," SAR"]})]},R)),u.topProducts.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),b?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("th",{children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[u.topCustomers.map((j,R)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:j.id==="guest"?"Ø¶ÙŠÙ":j.id}),e.jsx("td",{style:{textAlign:"center"},children:j.orders}),e.jsxs("td",{style:{textAlign:"end"},children:[j.revenue.toFixed(2)," SAR"]})]},R)),u.topCustomers.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]})]})},on=({children:t,title:s})=>e.jsxs("div",{className:"flex flex-col lg:flex-row bg-slate-50 min-h-screen",dir:"rtl",children:[e.jsx(zs,{}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[s&&e.jsx("header",{className:"pb-4 mb-6 border-b border-slate-200",children:e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:s})}),t]})})]}),ln=({rows:t=8,cols:s=6})=>e.jsx("div",{role:"status","aria-live":"polite",className:"w-full",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{children:Array.from({length:s}).map((r,n)=>e.jsx("th",{className:"p-2 border-b text-left",children:e.jsx(os,{className:"h-4 w-24"})},n))})}),e.jsx("tbody",{children:Array.from({length:t}).map((r,n)=>e.jsx("tr",{className:"border-b border-gray-100",children:Array.from({length:s}).map((o,a)=>e.jsx("td",{className:"p-2.5",children:e.jsx(os,{className:"h-4 w-32"})},a))},n))})]})});function be(...t){return Ss(ks(t))}const cn=Gt("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ce=E.forwardRef(({className:t,variant:s,size:r,...n},o)=>e.jsx("button",{className:be(cn({variant:s,size:r,className:t})),ref:o,...n}));ce.displayName="Button";const je=E.forwardRef(({className:t,type:s,icon:r,label:n,...o},a)=>e.jsxs("div",{className:"w-full",children:[n&&e.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:n}),e.jsxs("div",{className:"relative",children:[r&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:r}),e.jsx("input",{type:s,className:be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r?"pr-10":"",t),ref:a,...o})]})]}));je.displayName="Input";const Se=E.forwardRef(({className:t,options:s,...r},n)=>e.jsx("select",{className:be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r,children:s.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}));Se.displayName="Select";const dn=Gt("rounded-lg border bg-card text-card-foreground shadow-sm",{variants:{},defaultVariants:{}}),$s=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:be(dn(),t),...s}));$s.displayName="Card";const Ms=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:be("flex flex-col space-y-1.5 p-6",t),...s}));Ms.displayName="CardHeader";const Ws=E.forwardRef(({className:t,children:s,...r},n)=>e.jsx("h3",{ref:n,className:be("text-lg font-semibold leading-none tracking-tight",t),...r,children:s}));Ws.displayName="CardTitle";const un=E.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:be("text-sm text-muted-foreground",t),...s}));un.displayName="CardDescription";const Fs=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:be("p-6 pt-0",t),...s}));Fs.displayName="CardContent";const mn=E.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:be("flex items-center p-6 pt-0",t),...s}));mn.displayName="CardFooter";const pn=({label:t,value:s,help:r})=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm",children:[e.jsx("p",{className:"text-sm text-slate-500",children:t}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:s}),r&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:r})]}),hn=({onUserAdded:t,onCancel:s})=>{const[r,n]=i.useState({name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",sendInvite:!0,showPassword:!1}),[o,a]=i.useState(!1),[d,l]=i.useState(null),f=Ne(),v=(p,u)=>n(w=>({...w,[p]:u})),b=()=>{const p="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$%^&*()_+";let u="";for(let w=0;w<12;w++)u+=p[Math.floor(Math.random()*p.length)];n(w=>({...w,password:u,confirmPassword:u,showPassword:!0,sendInvite:!1}))},y=async p=>{p.preventDefault(),l(null),a(!0);try{const u={email:r.email.trim(),password:r.sendInvite?void 0:r.password,name:r.name.trim()||void 0,role:r.role,phone:r.phone.trim()||void 0,sendInvite:r.sendInvite};if(!u.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email))throw new Error("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­");if(!r.sendInvite){if(!u.password||u.password.length<6)throw new Error("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 6 Ø£Ø­Ø±Ù");if(r.password!==r.confirmPassword)throw new Error("ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚")}const w=await X.adminUserCreate(u);w.user&&t(w.user)}catch(u){const w=u.message||"ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…";l(w.includes("EMAIL_EXISTS")?"Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„":w),f.error("ÙØ´Ù„ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡",w)}finally{a(!1)}},x=[{value:"user",label:"Ù…Ø³ØªØ®Ø¯Ù…"},{value:"admin",label:"Ù…Ø¯ÙŠØ±"},{value:"seller",label:"Ø¨Ø§Ø¦Ø¹"}];return e.jsxs("form",{onSubmit:y,className:"p-4 my-4 bg-slate-50 border rounded-lg space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯"}),d&&e.jsx("div",{className:"bg-red-100 border border-red-200 text-red-700 p-3 rounded-md text-sm",children:d}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(je,{label:"Ø§Ù„Ø§Ø³Ù…",value:r.name,onChange:p=>v("name",p.target.value),placeholder:"Ø§Ø®ØªÙŠØ§Ø±ÙŠ"}),e.jsx(je,{label:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",type:"email",value:r.email,onChange:p=>v("email",p.target.value),required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(je,{type:r.showPassword?"text":"password",value:r.password,onChange:p=>v("password",p.target.value),disabled:r.sendInvite,minLength:r.sendInvite?0:6,placeholder:r.sendInvite?"Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ØªØ¹ÙŠÙŠÙ†":""}),e.jsx(ce,{type:"button",variant:"outline",onClick:()=>v("showPassword",!r.showPassword),children:r.showPassword?"Ø¥Ø®ÙØ§Ø¡":"Ø¥Ø¸Ù‡Ø§Ø±"}),e.jsx(ce,{type:"button",variant:"outline",onClick:b,disabled:r.sendInvite,children:"ØªÙˆÙ„ÙŠØ¯"})]})]}),!r.sendInvite&&e.jsx(je,{label:"ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",type:r.showPassword?"text":"password",value:r.confirmPassword,onChange:p=>v("confirmPassword",p.target.value),minLength:6}),e.jsx(Se,{label:"Ø§Ù„Ø¯ÙˆØ±",value:r.role,onChange:p=>v("role",p.target.value),options:x}),e.jsx(je,{label:"Ø§Ù„Ø¬ÙˆØ§Ù„",type:"tel",value:r.phone,onChange:p=>v("phone",p.target.value),placeholder:"Ø§Ø®ØªÙŠØ§Ø±ÙŠ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"sendInvite",checked:r.sendInvite,onChange:p=>v("sendInvite",p.target.checked)}),e.jsx("label",{htmlFor:"sendInvite",className:"text-sm",children:"Ø¥Ø±Ø³Ø§Ù„ Ø¯Ø¹ÙˆØ© Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù„ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ce,{type:"button",variant:"ghost",onClick:s,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(ce,{type:"submit",disabled:o,children:o?"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø¶Ø§ÙØ©â€¦":"Ø­ÙØ¸"})]})]})},gn=({user:t,onUserUpdated:s,onUserDeleted:r})=>{const[n,o]=i.useState(!1),[a,d]=i.useState(t.role),[l,f]=i.useState(!1),v=Ne(),b=async()=>{try{await X.adminUserUpdate(t.id,{role:a}),s({...t,role:a}),o(!1),v.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­")}catch(w){v.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ±",w.message)}},y=async()=>{const w=!t.active;try{w?await X.adminUserActivate(t.id):await X.adminUserDeactivate(t.id),s({...t,active:w}),v.success(`ØªÙ… ${w?"ØªÙØ¹ÙŠÙ„":"ØªØ¹Ø·ÙŠÙ„"} Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…`)}catch(O){v.error("ÙØ´Ù„ ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",O.message)}},x=async()=>{if(window.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${t.name||t.email}ØŸ`))try{await X.adminUserDelete(t.id),r(t.id),v.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­")}catch(w){v.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",w.message)}},p=[{value:"user",label:"Ù…Ø³ØªØ®Ø¯Ù…"},{value:"admin",label:"Ù…Ø¯ÙŠØ±"},{value:"seller",label:"Ø¨Ø§Ø¦Ø¹"}],u=p.find(w=>w.value===t.role);return e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.avatarUrl||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name||"U")}&background=random`,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}),e.jsx("span",{className:"font-medium text-slate-800",children:t.name||"â€”"})]})}),e.jsx("td",{className:"p-3 text-slate-600",children:t.email}),e.jsx("td",{className:"p-3",children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{value:a,onChange:w=>d(w.target.value),options:p,className:"h-8"}),e.jsx(ce,{size:"sm",onClick:b,children:"Ø­ÙØ¸"}),e.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:"Ø¥Ù„ØºØ§Ø¡"})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.role==="admin"?"bg-green-100 text-green-800":t.role==="seller"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:u?.label||t.role})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.active?"Ù…ÙØ¹Ù„":"ØºÙŠØ± Ù…ÙØ¹Ù„"})}),e.jsx("td",{className:"p-3 text-slate-500",children:new Date(t.createdAt).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"})}),e.jsxs("td",{className:"p-3 text-left relative",children:[e.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>f(w=>!w),children:e.jsx(gr,{size:16})}),l&&e.jsx("div",{className:"absolute left-0 top-10 mt-2 w-48 bg-white border rounded-md shadow-lg z-10",onMouseLeave:()=>f(!1),children:e.jsxs("ul",{className:"py-1",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>{o(!0),f(!1)},className:"w-full text-right px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±"})}),e.jsx("li",{children:e.jsxs("button",{onClick:y,className:"w-full text-right px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 flex items-center gap-2",children:[t.active?e.jsx(xr,{size:14}):e.jsx(fr,{size:14}),t.active?"ØªØ¹Ø·ÙŠÙ„":"ØªÙØ¹ÙŠÙ„"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:x,className:"w-full text-right px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[e.jsx(yr,{size:14}),"Ø­Ø°Ù"]})})]})})]})]})},Xe=()=>{const[t,s]=i.useState({search:"",role:"",status:"",from:"",to:""}),[r]=Lr(t.search,300),[n,o]=i.useState(1),[a,d]=i.useState(10),[l,f]=i.useState({by:"createdAt",dir:"desc"}),[v,b]=i.useState(!1),[y,x]=i.useState(null),[p,u]=i.useState([]),[w,O]=i.useState(0),g=Ne(),[D,P]=i.useState(!1),h=i.useCallback(async()=>{b(!0),x(null);try{const k={page:n,pageSize:a,search:r||void 0,role:t.role||void 0,status:t.status||void 0,from:t.from||void 0,to:t.to||void 0,sortBy:l.by,sortDir:l.dir},U=await X.listUsers(k);u(U.users||[]),O(U.total||0)}catch(k){x(k.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"),g.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",k.message)}finally{b(!1)}},[n,a,r,t.role,t.status,t.from,t.to,l.by,l.dir,g]);i.useEffect(()=>{h()},[h]);const L=(k,U)=>{s(q=>({...q,[k]:U})),o(1)},C=k=>{l.by===k?f(U=>({...U,dir:U.dir==="asc"?"desc":"asc"})):f({by:k,dir:"desc"})},_=k=>{u(U=>[k,...U]),O(U=>U+1),P(!1),g.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­")},$=k=>{u(U=>U.map(q=>q.id===k.id?k:q))},B=k=>{u(U=>U.filter(q=>q.id!==k)),O(U=>U-1)},F=Math.max(1,Math.ceil(w/a)),W=i.useMemo(()=>[{label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",value:w},{label:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙˆÙ†",value:p.filter(k=>k.active).length,help:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ø°ÙŠÙ† Ø³Ø¬Ù„ÙˆØ§ Ø¯Ø®ÙˆÙ„Ø§Ù‹ Ø®Ù„Ø§Ù„ Ø¢Ø®Ø± 30 ÙŠÙˆÙ…Ù‹Ø§"},{label:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡",value:p.filter(k=>k.role==="admin").length},{label:"Ù…Ø³Ø¬Ù‘Ù„ÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±",value:p.filter(k=>new Date(k.createdAt)>new Date(new Date().setDate(new Date().getDate()-30))).length}],[p,w]),c=[{value:"",label:"ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±"},{value:"user",label:"Ù…Ø³ØªØ®Ø¯Ù…"},{value:"admin",label:"Ù…Ø¯ÙŠØ±"},{value:"seller",label:"Ø¨Ø§Ø¦Ø¹"}],j=[{value:"",label:"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª"},{value:"active",label:"Ù…ÙØ¹Ù„"},{value:"inactive",label:"ØºÙŠØ± Ù…ÙØ¹Ù„"}],R=k=>l.by!==k?null:l.dir==="asc"?e.jsx(Sr,{size:14}):e.jsx(kr,{size:14});return e.jsxs(on,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",children:[e.jsx(Ce,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",description:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:W.map(k=>e.jsx(pn,{...k},k.label))}),e.jsxs($s,{children:[e.jsxs(Ms,{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs(Ws,{children:["Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (",w,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ce,{variant:"outline",size:"sm",onClick:h,disabled:v,children:[e.jsx(br,{size:14,className:`mr-2 ${v?"animate-spin":""}`}),"ØªØ­Ø¯ÙŠØ«"]}),e.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>{},children:[e.jsx(jr,{size:14,className:"mr-2"}),"ØªØµØ¯ÙŠØ±"]}),e.jsxs(ce,{size:"sm",onClick:()=>P(!0),children:[e.jsx(vr,{size:14,className:"mr-2"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…"]})]})]}),e.jsxs(Fs,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(je,{placeholder:"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ØŒ Ø£Ùˆ Ø§Ù„Ø¬ÙˆØ§Ù„...",value:t.search,onChange:k=>L("search",k.target.value),icon:e.jsx(wr,{size:16,className:"text-slate-400"})})}),e.jsx(Se,{value:t.role,onChange:k=>L("role",k.target.value),options:c}),e.jsx(Se,{value:t.status,onChange:k=>L("status",k.target.value),options:j}),e.jsx(je,{type:"date",value:t.from,onChange:k=>L("from",k.target.value),label:"Ù…Ù† ØªØ§Ø±ÙŠØ®"})]}),D&&e.jsx(hn,{onUserAdded:_,onCancel:()=>P(!1)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"text-slate-500 bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>C("name"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Ø§Ù„Ø§Ø³Ù… ",R("name")]})}),e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>C("email"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Ø§Ù„Ø¨Ø±ÙŠØ¯ ",R("email")]})}),e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>C("role"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Ø§Ù„Ø¯ÙˆØ± ",R("role")]})}),e.jsx("th",{className:"p-3 font-semibold",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>C("createdAt"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… ",R("createdAt")]})}),e.jsx("th",{className:"p-3 font-semibold text-left",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{children:v?e.jsx(ln,{rows:a,cols:6}):y?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-12 text-red-500",children:y})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-12 text-slate-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ."})}):p.map(k=>e.jsx(gn,{user:k,onUserUpdated:$,onUserDeleted:B},k.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t mt-4",children:[e.jsxs("span",{className:"text-sm text-slate-500",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",w," | ØµÙØ­Ø© ",n," Ù…Ù† ",F]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{variant:"outline",size:"sm",onClick:()=>o(k=>Math.max(1,k-1)),disabled:n<=1,children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx(ce,{variant:"outline",size:"sm",onClick:()=>o(k=>Math.min(F,k+1)),disabled:n>=F,children:"Ø§Ù„ØªØ§Ù„ÙŠ"}),e.jsx(Se,{value:a,onChange:k=>d(Number(k.target.value)),options:[{value:10,label:"10 / ØµÙØ­Ø©"},{value:20,label:"20 / ØµÙØ­Ø©"},{value:50,label:"50 / ØµÙØ­Ø©"}]})]})]})]})]})]})]})},Te=async()=>(await J(async()=>{const{default:t}=await Promise.resolve().then(()=>Ht);return{default:t}},void 0)).default,Qe=()=>{const{setting:t,loading:s,error:r,update:n,uploadLogo:o}=ke(),[a,d]=i.useState({siteNameAr:"",siteNameEn:"",colorPrimary:"#69be3c",colorSecondary:"#2eafff",colorAccent:"#2eafff",taxNumber:"",supportPhone:"",supportMobile:"",supportWhatsapp:"",supportEmail:"",supportHours:"",footerAboutAr:"",footerAboutEn:"",linkBlog:"",linkSocial:"",linkReturns:"",linkPrivacy:"",appStoreUrl:"",playStoreUrl:"",companyNameAr:"",companyNameEn:"",commercialRegNo:"",addressAr:"",addressEn:"",heroBackgroundImage:"",heroBackgroundGradient:"",heroCenterImage:"",heroAutoplayInterval:"",topStripEnabled:!1,topStripAutoscroll:!0,topStripBackground:"#fde68a",shippingBase:"",shippingPerKm:"",shippingMin:"",shippingMax:"",shippingFallback:"",originLat:"",originLng:"",payPaypalEnabled:!1,payStcEnabled:!0,payCodEnabled:!0,payBankEnabled:!0,whatsappEnabled:!1,aramexEnabled:!1,aramexApiUrl:"",aramexApiKey:"",aramexApiUser:"",aramexApiPass:"",aramexWebhookSecret:"",smsaEnabled:!1,smsaApiUrl:"",smsaApiKey:"",smsaWebhookSecret:""}),[l,f]=i.useState(null),[v,b]=i.useState(null),[y,x]=i.useState(!1),[p,u]=i.useState(!1),[w,O]=i.useState(""),[g,D]=i.useState({}),P=i.useRef(null);i.useEffect(()=>{t&&d(m=>({...m,siteNameAr:t.siteNameAr||"",siteNameEn:t.siteNameEn||"",colorPrimary:t.colorPrimary||m.colorPrimary,colorSecondary:t.colorSecondary||m.colorSecondary,colorAccent:t.colorAccent||m.colorAccent,taxNumber:t.taxNumber||"",supportPhone:t.supportPhone||"",supportMobile:t.supportMobile||"",supportWhatsapp:t.supportWhatsapp||"",supportEmail:t.supportEmail||"",supportHours:t.supportHours||"",footerAboutAr:t.footerAboutAr||"",footerAboutEn:t.footerAboutEn||"",linkBlog:t.linkBlog||"",linkSocial:t.linkSocial||"",linkReturns:t.linkReturns||"",linkPrivacy:t.linkPrivacy||"",appStoreUrl:t.appStoreUrl||"",playStoreUrl:t.playStoreUrl||"",companyNameAr:t.companyNameAr||"",companyNameEn:t.companyNameEn||"",commercialRegNo:t.commercialRegNo||"",addressAr:t.addressAr||"",addressEn:t.addressEn||"",heroBackgroundImage:t.heroBackgroundImage||"",heroBackgroundGradient:t.heroBackgroundGradient||"",heroCenterImage:t.heroCenterImage||"",heroAutoplayInterval:t.heroAutoplayInterval??"",topStripEnabled:!!t.topStripEnabled,topStripAutoscroll:t.topStripAutoscroll!==0&&t.topStripAutoscroll!==!1,topStripBackground:t.topStripBackground||"#fde68a",shippingBase:t.shippingBase??"",shippingPerKm:t.shippingPerKm??"",shippingMin:t.shippingMin??"",shippingMax:t.shippingMax??"",shippingFallback:t.shippingFallback??"",originLat:t.originLat??"",originLng:t.originLng??"",payPaypalEnabled:!!t.payPaypalEnabled,payStcEnabled:t.payStcEnabled!==0&&t.payStcEnabled!==!1,payCodEnabled:t.payCodEnabled!==0&&t.payCodEnabled!==!1,payBankEnabled:t.payBankEnabled!==0&&t.payBankEnabled!==!1,whatsappEnabled:t.whatsappEnabled!==0&&t.whatsappEnabled!==!1,aramexEnabled:!!t.aramexEnabled,aramexApiUrl:t.aramexApiUrl||"",aramexApiKey:t.aramexApiKey||"",aramexApiUser:t.aramexApiUser||"",aramexApiPass:t.aramexApiPass||"",aramexWebhookSecret:t.aramexWebhookSecret||"",smsaEnabled:!!t.smsaEnabled,smsaApiUrl:t.smsaApiUrl||"",smsaApiKey:t.smsaApiKey||"",smsaWebhookSecret:t.smsaWebhookSecret||""}))},[t]);const h=(m,H)=>d(G=>({...G,[m]:H})),L=m=>/^#([0-9a-fA-F]{6})$/.test(String(m||"")),C=m=>!m||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(m)),_=m=>{if(!m)return!0;try{return new URL(m),!0}catch{return!1}},$=m=>!m||/^[0-9+\s-]+$/.test(String(m)),B=()=>{const m={};!a.siteNameAr&&!a.siteNameEn&&(m.siteNameEn="ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±"),L(a.colorPrimary)||(m.colorPrimary="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),L(a.colorSecondary)||(m.colorSecondary="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),L(a.colorAccent)||(m.colorAccent="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),a.topStripBackground&&!L(a.topStripBackground)&&(m.topStripBackground="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),C(a.supportEmail)||(m.supportEmail="ØµÙŠØºØ© Ø¨Ø±ÙŠØ¯ ØºÙŠØ± ØµØ­ÙŠØ­Ø©"),_(a.linkBlog)||(m.linkBlog="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),_(a.linkSocial)||(m.linkSocial="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),_(a.linkReturns)||(m.linkReturns="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),_(a.linkPrivacy)||(m.linkPrivacy="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),_(a.appStoreUrl)||(m.appStoreUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),_(a.playStoreUrl)||(m.playStoreUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),_(a.heroBackgroundImage)||(m.heroBackgroundImage="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),_(a.heroCenterImage)||(m.heroCenterImage="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),a.heroAutoplayInterval&&isNaN(+a.heroAutoplayInterval)&&(m.heroAutoplayInterval="Ù‚ÙŠÙ…Ø© Ø±Ù‚Ù…ÙŠØ© Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©");const H=G=>G===""||!isNaN(+G);return H(a.shippingBase)||(m.shippingBase="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),H(a.shippingPerKm)||(m.shippingPerKm="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),H(a.shippingMin)||(m.shippingMin="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),H(a.shippingMax)||(m.shippingMax="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),H(a.shippingFallback)||(m.shippingFallback="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),H(a.originLat)||(m.originLat="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),H(a.originLng)||(m.originLng="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),a.aramexApiUrl&&!_(a.aramexApiUrl)&&(m.aramexApiUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),a.smsaApiUrl&&!_(a.smsaApiUrl)&&(m.smsaApiUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),$(a.supportPhone)||(m.supportPhone="Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· Ù…Ø³Ù…ÙˆØ­Ø©"),$(a.supportMobile)||(m.supportMobile="Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· Ù…Ø³Ù…ÙˆØ­Ø©"),D(m),Object.keys(m).length===0},F=async m=>{m.preventDefault(),x(!0),O("");try{if(!B()){O("ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø¸Ù„Ù„Ø©"),x(!1);return}const H={};if(t?Object.keys(a).forEach(G=>{a[G]!==t[G]&&(a[G]!==""||t[G]!==void 0&&t[G]!==null&&t[G]!=="")&&(H[G]=a[G])}):Object.assign(H,a),Object.keys(H).length===0&&!l){O("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª Ù„Ù„Ø­ÙØ¸"),x(!1);return}Object.keys(H).length,Object.keys(H).length>0&&await n(H),l&&(await o(l),f(null),v&&(URL.revokeObjectURL(v),b(null))),O("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­")}catch(H){let G="";const oe=H&&H.message?String(H.message):"",ge=H&&H.data&&H.data.message?String(H.data.message):"";oe.includes("connect ECONNREFUSED")||ge.includes("connect ECONNREFUSED")?G="ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ Ø§Ù„Ù…Ù„Ù‚Ù… Ø§Ù„Ø¨Ø¹ÙŠØ¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.":oe.includes("FORBIDDEN")||ge.includes("Admin only")?G="Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø£Ø¯Ù…Ù†.":oe.includes("UPDATE_FAILED")&&ge.includes("does not exist")?G="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ù…Ø²Ø§Ù…Ù†Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.":oe.includes("UNAUTHENTICATED")||ge.includes("UNAUTHENTICATED")?G="ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.":oe.includes("NOT_FOUND")||ge.includes("NOT_FOUND")?G="Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.":oe.includes("INVALID")||ge.includes("INVALID")?G="ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.":oe.includes("password")||ge.includes("password")?G="ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.":ge?G="ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: "+ge:oe?G="ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: "+oe:G="Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸.",O(G)}finally{x(!1)}},W=i.useMemo(()=>({"--color-primary":a.colorPrimary,"--color-primary-alt":a.colorSecondary,"--color-accent":a.colorAccent}),[a.colorPrimary,a.colorSecondary,a.colorAccent]),c=async()=>{if(!l){O("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø´Ø¹Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹");return}u(!0),O("");try{await o(l),f(null),v&&(URL.revokeObjectURL(v),b(null)),O("ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­")}catch(m){const H=m?.code?` (${m.code})`:"",G=m?.data?.message||m?.message||"";O("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±"+H+": "+G)}finally{u(!1)}},j=()=>{try{const m=document.documentElement;m.style.setProperty("--color-primary",a.colorPrimary),m.style.setProperty("--color-secondary",a.colorSecondary),m.style.setProperty("--color-accent",a.colorAccent),O("ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©")}catch{}},R=()=>{try{const m=document.documentElement;m.style.setProperty("--color-primary",t?.colorPrimary||"#69be3c"),m.style.setProperty("--color-secondary",t?.colorSecondary||"#2eafff"),m.style.setProperty("--color-accent",t?.colorAccent||"#2eafff"),O("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¥Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ©")}catch{}},[k,U]=i.useState(null),[q,z]=i.useState(!1),N=async()=>{z(!0),O("");try{const H=await(await J(async()=>{const{default:G}=await Promise.resolve().then(()=>Ht);return{default:G}},void 0)).default.whatsappHealth({suppressLog:!0});U(H?.health||H||null)}catch(m){U({ok:!1,error:m?.message||"ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„"})}finally{z(!1)}},[T,K]=i.useState(""),[Q,ee]=i.useState(!1),[se,ae]=i.useState(null),ve=async()=>{ae(null);const m=String(T||"").trim();if(!m){ae({ok:!1,message:"ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨"});return}ee(!0);try{const G=await(await J(async()=>{const{default:oe}=await Promise.resolve().then(()=>Ht);return{default:oe}},void 0)).default.whatsappSendInvoiceByOrder(m);ae(G?.result||G||{ok:!0})}catch(H){ae({ok:!1,message:H?.data?.message||H?.message||"ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"})}finally{ee(!1)}},te=m=>{if(!m){f(null),v&&URL.revokeObjectURL(v),b(null);return}const H=/image\/(png|jpe?g|webp|svg\+xml)/.test(m.type),G=m.size<=2*1024*1024;if(!H){O("ØµÙŠØºØ© Ø§Ù„Ø´Ø¹Ø§Ø± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† PNG/JPG/WebP/SVG");return}if(!G){O("Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø± ÙŠØ¬Ø¨ Ø£Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 2MB");return}f(m),v&&URL.revokeObjectURL(v),b(URL.createObjectURL(m))},[ne,Y]=i.useState(!1),[Z,A]=i.useState("store-info"),V=[{id:"store-info",label:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±"},{id:"brand-colors",label:"Ø§Ù„Ø£Ù„ÙˆØ§Ù†"},{id:"logo-preview",label:"Ø§Ù„Ø´Ø¹Ø§Ø±"},{id:"contact-info",label:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„"},{id:"company-footer",label:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„ÙÙˆØªØ±"},{id:"top-strip",label:"Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ"},{id:"hero",label:"Ø¨Ø·Ù„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"},{id:"whatsapp",label:"Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"},{id:"env-db",label:"Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"},{id:"shipping-payment",label:"Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø¯ÙØ¹"},{id:"shipping-providers",label:"Ù…Ø²ÙˆØ¯Ùˆ Ø§Ù„Ø´Ø­Ù†"},{id:"links-apps",label:"Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª"}],re=m=>{A(m),Y(!1),setTimeout(()=>{document.getElementById(m)?.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ce,{title:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª | Settings",description:"Store settings"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between"},children:[e.jsx("h1",{className:"page-title",style:{margin:0},children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª / Settings"}),e.jsx("button",{type:"button",className:"ui-btn ui-btn--soft ui-btn--sm",onClick:()=>Y(!0),children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…"})]}),ne&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>Y(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,.35)",zIndex:50}}),e.jsxs("aside",{role:"dialog","aria-label":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…",style:{position:"fixed",insetBlockStart:0,insetInlineEnd:0,blockSize:"100dvh",inlineSize:"min(80vw, 320px)",background:"#fff",borderInlineStart:"1px solid #e2e8f0",zIndex:60,display:"grid",gridTemplateRows:"auto 1fr",boxShadow:"-12px 0 24px -16px rgba(0,0,0,.25)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBlockEnd:"1px solid #e2e8f0"},children:[e.jsx("strong",{children:"Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"}),e.jsx("button",{type:"button",className:"ui-btn ui-btn--ghost ui-btn--sm",onClick:()=>Y(!1),children:"Ø¥ØºÙ„Ø§Ù‚"})]}),e.jsx("nav",{style:{padding:8,overflow:"auto"},children:e.jsx("ul",{style:{listStyle:"none",margin:0,padding:0,display:"grid",gap:6},children:V.map(m=>e.jsx("li",{children:e.jsx("button",{type:"button",className:"ui-btn ui-btn--ghost ui-btn--sm",style:{width:"100%",justifyContent:"flex-start"},onClick:()=>re(m.id),children:m.label})},m.id))})})]})]}),e.jsx("div",{"aria-live":"polite",style:{minHeight:24,marginBottom:8,color:w?.startsWith("ÙØ´Ù„")?"#dc2626":"#0f766e"},children:w}),s?e.jsx("p",{children:"ÙŠØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):r?e.jsxs("p",{className:"error",children:["Ø®Ø·Ø£: ",r]}):e.jsxs("form",{onSubmit:F,className:"settings-form",style:{display:"grid",gap:12,maxWidth:880},children:[e.jsx("section",{id:"store-info",style:{scrollMarginTop:80},hidden:Z!=="store-info",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"siteNameAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± (AR)"}),e.jsx("input",{id:"siteNameAr",value:a.siteNameAr,onChange:m=>h("siteNameAr",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ù…ØªØ¬Ø± Ø§Ù„Ù†Ø®Ø¨Ø©"})]}),e.jsxs("label",{htmlFor:"siteNameEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Store Name (EN)"}),e.jsx("input",{id:"siteNameEn",value:a.siteNameEn,onChange:m=>h("siteNameEn",m.target.value),placeholder:"e.g., Elite Store"}),g.siteNameEn&&e.jsx("small",{style:{color:"#dc2626"},children:g.siteNameEn})]})]})]})}),e.jsx("section",{id:"brand-colors",style:{scrollMarginTop:80},hidden:Z!=="brand-colors",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù‡ÙˆÙŠØ©"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-3)",gap:8},children:[e.jsxs("label",{htmlFor:"colorPrimary",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ"}),e.jsx("input",{id:"colorPrimary",type:"color",value:a.colorPrimary,onChange:m=>h("colorPrimary",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:a.colorPrimary,onChange:m=>h("colorPrimary",m.target.value)}),g.colorPrimary&&e.jsx("small",{style:{color:"#dc2626"},children:g.colorPrimary})]}),e.jsxs("label",{htmlFor:"colorSecondary",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ"}),e.jsx("input",{id:"colorSecondary",type:"color",value:a.colorSecondary,onChange:m=>h("colorSecondary",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:a.colorSecondary,onChange:m=>h("colorSecondary",m.target.value)}),g.colorSecondary&&e.jsx("small",{style:{color:"#dc2626"},children:g.colorSecondary})]}),e.jsxs("label",{htmlFor:"colorAccent",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù„ÙˆÙ† Ù…Ù…ÙŠØ²"}),e.jsx("input",{id:"colorAccent",type:"color",value:a.colorAccent,onChange:m=>h("colorAccent",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:a.colorAccent,onChange:m=>h("colorAccent",m.target.value)}),g.colorAccent&&e.jsx("small",{style:{color:"#dc2626"},children:g.colorAccent})]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{type:"button",onClick:j,style:{background:"#22c55e",color:"#fff",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©"}),e.jsx("button",{type:"button",onClick:R,style:{background:"#94a3b8",color:"#0b0f19",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©"})]})]})}),e.jsxs("section",{id:"logo-preview",style:{scrollMarginTop:80},hidden:Z!=="logo-preview",children:[e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø´Ø¹Ø§Ø±"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(v||t?.logoUrl||t?.logo)&&e.jsx("img",{src:v||t.logoUrl||t.logo,alt:"logo",style:{height:48,objectFit:"contain"}}),e.jsx("input",{ref:P,type:"file",accept:"image/png,image/jpeg,image/webp,image/svg+xml",onChange:m=>te(m.target.files?.[0]||null),style:{display:"none"}}),e.jsx("button",{type:"button",onClick:()=>P.current?.click(),style:{background:"#e2e8f0",color:"#0f172a",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:"Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ"}),l&&e.jsx("span",{style:{fontSize:".6rem"},children:l.name}),e.jsx("button",{type:"button",onClick:c,disabled:!l||p,style:{background:"#0ea5e9",color:"#fff",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:p?"ÙŠØ±ÙØ¹...":"Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±"})]})]}),e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø¨Ø§Ø´Ø±Ø©"}),e.jsxs("div",{style:{...W,display:"flex",alignItems:"center",gap:12,padding:12,border:"1px dashed #e2e8f0",borderRadius:8},children:[e.jsx("div",{style:{width:56,height:56,background:"var(--color-primary)",borderRadius:8}}),e.jsx("div",{style:{width:56,height:56,background:"var(--color-primary-alt)",borderRadius:8}}),e.jsx("div",{style:{width:56,height:56,background:"var(--color-accent)",borderRadius:8}}),e.jsx("span",{style:{fontWeight:700},children:a.siteNameAr||a.siteNameEn||"Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsx("button",{type:"button",style:{marginInlineStart:"auto",background:"var(--color-primary)",color:"#fff",border:"0",borderRadius:8,padding:"6px 10px",fontWeight:700},children:"Ø²Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ"})]})]})]}),e.jsx("section",{id:"contact-info",style:{scrollMarginTop:80},hidden:Z!=="contact-info",children:e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"supportPhone",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù‡Ø§ØªÙ)"}),e.jsx("input",{id:"supportPhone",value:a.supportPhone,onChange:m=>h("supportPhone",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 920000000"}),g.supportPhone&&e.jsx("small",{style:{color:"#dc2626"},children:g.supportPhone})]}),e.jsxs("label",{htmlFor:"supportMobile",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (Mobile)"}),e.jsx("input",{id:"supportMobile",value:a.supportMobile,onChange:m=>h("supportMobile",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: +9665XXXXXXXX"}),g.supportMobile&&e.jsx("small",{style:{color:"#dc2626"},children:g.supportMobile})]}),e.jsxs("label",{htmlFor:"supportWhatsapp",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ÙˆØ§ØªØ³Ø§Ø¨ (Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)"}),e.jsx("input",{id:"supportWhatsapp",value:a.supportWhatsapp,onChange:m=>h("supportWhatsapp",m.target.value),onBlur:m=>h("supportWhatsapp",m.target.value.replace(/\D+/g,"")),placeholder:"Ù…Ø«Ø§Ù„: 9665XXXXXXXX"}),e.jsx("small",{style:{opacity:.7},children:"Ø³ÙŠØ³ØªØ®Ø¯Ù… ÙƒØ±Ø§Ø¨Ø· wa.me/Ø§Ù„Ø±Ù‚Ù…"})]}),e.jsxs("label",{htmlFor:"supportEmail",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("input",{id:"supportEmail",type:"email",value:a.supportEmail,onChange:m=>h("supportEmail",m.target.value),placeholder:"support@example.com"}),g.supportEmail&&e.jsx("small",{style:{color:"#dc2626"},children:g.supportEmail})]}),e.jsxs("label",{htmlFor:"supportHours",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"supportHours",value:a.supportHours,onChange:m=>h("supportHours",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 9Øµ - 6Ù… (Ø§Ù„Ø³Ø¨Øª-Ø§Ù„Ø®Ù…ÙŠØ³)"})]}),e.jsxs("label",{htmlFor:"taxNumber",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"taxNumber",value:a.taxNumber,onChange:m=>h("taxNumber",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 311307460300003"})]})]})]})}),e.jsxs("section",{id:"company-footer",style:{display:"grid",gap:12,scrollMarginTop:80},hidden:Z!=="company-footer",children:[e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"ÙˆØµÙ Ø§Ù„ÙÙˆØªØ±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"footerAboutAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù†Ø¨Ø°Ø© (AR)"}),e.jsx("textarea",{id:"footerAboutAr",rows:4,value:a.footerAboutAr,onChange:m=>h("footerAboutAr",m.target.value),placeholder:`Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¨Ø§Ù„Ø­Ø¨Ø©
ÙˆØ¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ Ù…Ù† Ù…Ù†Ø¸ÙØ§Øª Ùˆ ÙƒÙ…Ø§Ù„ÙŠØ§Øª
Ø£ÙŠØ¶Ù‹Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙ†Ø§ Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª ÙˆØ¬Ù…ÙŠØ¹
Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø±Ù†Ø§ Ø¬Ù…Ù„Ø© ÙˆØ¬ÙˆØ¯ØªÙ†Ø§
Ø£ØµÙ„ÙŠØ©`}),e.jsx("small",{style:{opacity:.7},children:"ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø© Ø£Ø³Ø·Ø±Ø› Ø³ØªØ¸Ù‡Ø± ÙƒÙÙ‚Ø±Ø§Øª Ù…Ù†ÙØµÙ„Ø©."})]}),e.jsxs("label",{htmlFor:"footerAboutEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"About (EN)"}),e.jsx("textarea",{id:"footerAboutEn",rows:4,value:a.footerAboutEn,onChange:m=>h("footerAboutEn",m.target.value),placeholder:"We specialize in wholesale and retail food products and home essentials."})]})]})]}),e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"companyNameAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© (AR)"}),e.jsx("input",{id:"companyNameAr",value:a.companyNameAr,onChange:m=>h("companyNameAr",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø¢Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©"})]}),e.jsxs("label",{htmlFor:"companyNameEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Company Name (EN)"}),e.jsx("input",{id:"companyNameEn",value:a.companyNameEn,onChange:m=>h("companyNameEn",m.target.value),placeholder:"e.g., Asia Outlet Co."})]}),e.jsxs("label",{htmlFor:"commercialRegNo",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ"}),e.jsx("input",{id:"commercialRegNo",value:a.commercialRegNo,onChange:m=>h("commercialRegNo",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 1010xxxxxx"})]}),e.jsxs("label",{htmlFor:"taxNumber2",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ"}),e.jsx("input",{id:"taxNumber2",value:a.taxNumber,onChange:m=>h("taxNumber",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 311307460300003"})]}),e.jsxs("label",{htmlFor:"addressAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (AR)"}),e.jsx("textarea",{id:"addressAr",rows:2,value:a.addressAr,onChange:m=>h("addressAr",m.target.value),placeholder:"Ø§Ù„Ø±ÙŠØ§Ø¶ - Ø­ÙŠ ... Ø´Ø§Ø±Ø¹ ..."})]}),e.jsxs("label",{htmlFor:"addressEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Address (EN)"}),e.jsx("textarea",{id:"addressEn",rows:2,value:a.addressEn,onChange:m=>h("addressEn",m.target.value),placeholder:"Riyadh, District..., Street..."})]})]})]})]}),e.jsx("section",{id:"top-strip",style:{scrollMarginTop:80},hidden:Z!=="top-strip",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ (Top Strip)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8,alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!a.topStripEnabled,onChange:m=>h("topStripEnabled",m.target.checked)}),e.jsx("span",{style:{fontSize:".8rem",fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ"})]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!a.topStripAutoscroll,onChange:m=>h("topStripAutoscroll",m.target.checked)}),e.jsx("span",{style:{fontSize:".8rem",fontWeight:700},children:"ØªØ­Ø±ÙŠÙƒ ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]}),e.jsxs("label",{htmlFor:"topStripBackground",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©"}),e.jsx("input",{id:"topStripBackground",type:"color",value:a.topStripBackground,onChange:m=>h("topStripBackground",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:a.topStripBackground,onChange:m=>h("topStripBackground",m.target.value)}),g.topStripBackground&&e.jsx("small",{style:{color:"#dc2626"},children:g.topStripBackground})]}),e.jsx("div",{style:{fontSize:".65rem",opacity:.7},children:"Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ÙŠÙØ¯Ø§Ø± Ù…Ù† Ù‚Ø³Ù… Ø§Ù„ØªØ³ÙˆÙŠÙ‚ (Ø¨Ø§Ù†Ø±Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ - Ù…ÙˆÙ‚Ø¹ topStrip)."})]})]})}),e.jsx("section",{id:"hero",style:{scrollMarginTop:80},hidden:Z!=="hero",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø¨Ø·Ù„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Hero)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"heroBackgroundImage",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© (Ø±Ø§Ø¨Ø·)"}),e.jsx("input",{id:"heroBackgroundImage",type:"url",value:a.heroBackgroundImage,onChange:m=>h("heroBackgroundImage",m.target.value),placeholder:"https://.../hero.jpg"}),g.heroBackgroundImage&&e.jsx("small",{style:{color:"#dc2626"},children:g.heroBackgroundImage})]}),e.jsxs("label",{htmlFor:"heroCenterImage",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØµÙˆØ±Ø© ÙˆØ³Ø·ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - Ø±Ø§Ø¨Ø·)"}),e.jsx("input",{id:"heroCenterImage",type:"url",value:a.heroCenterImage,onChange:m=>h("heroCenterImage",m.target.value),placeholder:"https://.../center.webp"}),g.heroCenterImage&&e.jsx("small",{style:{color:"#dc2626"},children:g.heroCenterImage})]}),e.jsxs("label",{htmlFor:"heroBackgroundGradient",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØªØ¯Ø±Ù‘Ø¬ Ø§Ù„ØªØ¹ØªÙŠÙ… (CSS)"}),e.jsx("input",{id:"heroBackgroundGradient",value:a.heroBackgroundGradient,onChange:m=>h("heroBackgroundGradient",m.target.value),placeholder:"linear-gradient(135deg, rgba(16,185,129,0.6), rgba(5,150,105,0.6))"})]}),e.jsxs("label",{htmlFor:"heroAutoplayInterval",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©)"}),e.jsx("input",{id:"heroAutoplayInterval",type:"number",min:"1000",step:"500",value:a.heroAutoplayInterval,onChange:m=>h("heroAutoplayInterval",m.target.value),placeholder:"5000"}),g.heroAutoplayInterval&&e.jsx("small",{style:{color:"#dc2626"},children:g.heroAutoplayInterval})]})]})]})}),e.jsx("section",{id:"whatsapp",style:{scrollMarginTop:80},hidden:Z!=="whatsapp",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!a.whatsappEnabled,onChange:m=>h("whatsappEnabled",m.target.checked)}),e.jsx("span",{style:{fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:N,className:"btn-secondary",disabled:q,children:q?"ÙŠÙØ­Øµ...":"ØªØ´Ø®ÙŠØµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯"}),k&&e.jsxs("div",{className:"text-xs",style:{display:"grid",gap:4},children:[e.jsxs("div",{children:["Ø§Ù„Ù…Ø²ÙˆÙ‘Ø¯: ",e.jsx("strong",{children:k.provider||"â€”"})]}),e.jsxs("div",{children:["Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„ØªÙ‡ÙŠØ¦Ø©: ",e.jsx("strong",{style:{color:k.configured&&k.enabled?"#065f46":"#991b1b"},children:k.configured&&k.enabled?"Ø¬Ø§Ù‡Ø²":"ØºÙŠØ± Ù…ÙƒØªÙ…Ù„"})]}),(k.meta||k.twilio)&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(120px,1fr))",gap:6},children:Object.entries(k.meta||k.twilio).map(([m,H])=>e.jsxs("div",{className:"text-[11px]",style:{opacity:.85},children:[e.jsx("span",{style:{fontWeight:700},children:m}),": ",e.jsx("span",{style:{color:H?"#065f46":"#991b1b"},children:String(H)})]},m))}),k.error&&e.jsxs("div",{className:"text-[11px] text-red-700",children:["Ø®Ø·Ø£: ",k.error]})]})]}),e.jsxs("div",{style:{display:"grid",gap:6,borderTop:"1px dashed #e2e8f0",paddingTop:8},children:[e.jsxs("label",{htmlFor:"waOrderId",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ø®ØªØ¨Ø§Ø±: Ø¥Ø±Ø³Ø§Ù„ ÙØ§ØªÙˆØ±Ø© Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ (Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(140px, 220px) auto",gap:8,alignItems:"center"},children:[e.jsx("input",{id:"waOrderId",value:T,onChange:m=>K(m.target.value),placeholder:"Ù…Ø«Ø§Ù„: ord_123..."}),e.jsx("button",{type:"button",onClick:ve,disabled:Q||!T,className:"ui-btn ui-btn--sm",style:{background:"#16a34a",color:"#fff"},children:Q?"ÙŠØ±Ø³Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),se&&e.jsx("div",{className:"text-[12px]",style:{color:se.ok!==!1?"#065f46":"#991b1b"},children:se.ok!==!1?"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„/Ø§Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ).":`ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${se.message||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`}),e.jsx("small",{style:{opacity:.7},children:"Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØªØ·Ù„Ø¨ Ø°Ù„Ùƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø£Ø¯Ù…Ù† ÙˆØªÙ‡ÙŠØ¦Ø© Ù…Ø²ÙˆØ¯ ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­. Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ù„ÙŠØŒ ÙØ¹Ù‘Ù„ Ø±Ø¤ÙˆØ³ Ø§Ù„ØªØ·ÙˆÙŠØ± ALLOW_DEV_HEADERS."})]}),e.jsx("small",{style:{opacity:.7},children:"ÙŠØªØ·Ù„Ø¨ Ø¶Ø¨Ø· Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø²ÙˆÙ‘Ø¯ (Twilio Ø£Ùˆ Meta). Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø± ÙŠØªÙŠØ­/ÙŠØ¹Ø·Ù‘Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±."})]})]})}),e.jsx("section",{id:"env-db",style:{scrollMarginTop:80},hidden:Z!=="env-db",children:e.jsxs("fieldset",{style:{display:"grid",gap:12,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx(xn,{})]})}),e.jsx("section",{id:"shipping-payment",style:{scrollMarginTop:80},hidden:Z!=="shipping-payment",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø¯ÙØ¹"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-3)",gap:8},children:[e.jsxs("label",{htmlFor:"shippingBase",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø³ÙˆÙ… Ø£Ø³Ø§Ø³ÙŠØ© (SAR)"}),e.jsx("input",{id:"shippingBase",type:"number",step:"0.01",value:a.shippingBase,onChange:m=>h("shippingBase",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 10"}),g.shippingBase&&e.jsx("small",{style:{color:"#dc2626"},children:g.shippingBase})]}),e.jsxs("label",{htmlFor:"shippingPerKm",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù„ÙƒÙ„ ÙƒÙ… (SAR/km)"}),e.jsx("input",{id:"shippingPerKm",type:"number",step:"0.01",value:a.shippingPerKm,onChange:m=>h("shippingPerKm",m.target.value),placeholder:"0.7"}),g.shippingPerKm&&e.jsx("small",{style:{color:"#dc2626"},children:g.shippingPerKm})]}),e.jsxs("label",{htmlFor:"shippingMin",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰"}),e.jsx("input",{id:"shippingMin",type:"number",step:"0.01",value:a.shippingMin,onChange:m=>h("shippingMin",m.target.value),placeholder:"15"}),g.shippingMin&&e.jsx("small",{style:{color:"#dc2626"},children:g.shippingMin})]}),e.jsxs("label",{htmlFor:"shippingMax",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰"}),e.jsx("input",{id:"shippingMax",type:"number",step:"0.01",value:a.shippingMax,onChange:m=>h("shippingMax",m.target.value),placeholder:"60"}),g.shippingMax&&e.jsx("small",{style:{color:"#dc2626"},children:g.shippingMax})]}),e.jsxs("label",{htmlFor:"shippingFallback",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØªØ¹Ø±ÙØ© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©"}),e.jsx("input",{id:"shippingFallback",type:"number",step:"0.01",value:a.shippingFallback,onChange:m=>h("shippingFallback",m.target.value),placeholder:"25"}),g.shippingFallback&&e.jsx("small",{style:{color:"#dc2626"},children:g.shippingFallback})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"originLat",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø¥Ø­Ø¯Ø§Ø«ÙŠ Ø§Ù„Ù…ØªØ¬Ø± (Lat)"}),e.jsx("input",{id:"originLat",type:"number",step:"0.0001",value:a.originLat,onChange:m=>h("originLat",m.target.value),placeholder:"24.7136"}),g.originLat&&e.jsx("small",{style:{color:"#dc2626"},children:g.originLat})]}),e.jsxs("label",{htmlFor:"originLng",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø¥Ø­Ø¯Ø§Ø«ÙŠ Ø§Ù„Ù…ØªØ¬Ø± (Lng)"}),e.jsx("input",{id:"originLng",type:"number",step:"0.0001",value:a.originLng,onChange:m=>h("originLng",m.target.value),placeholder:"46.6753"}),g.originLng&&e.jsx("small",{style:{color:"#dc2626"},children:g.originLng})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-4-min)",gap:8,marginTop:8},children:[e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!a.payPaypalEnabled,onChange:m=>h("payPaypalEnabled",m.target.checked)})," PayPal"]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!a.payStcEnabled,onChange:m=>h("payStcEnabled",m.target.checked)})," STC Pay"]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!a.payCodEnabled,onChange:m=>h("payCodEnabled",m.target.checked)})," Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!a.payBankEnabled,onChange:m=>h("payBankEnabled",m.target.checked)})," Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ"]})]})]})}),e.jsx("section",{id:"shipping-providers",style:{scrollMarginTop:80},hidden:Z!=="shipping-providers",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ù…Ø²ÙˆØ¯Ùˆ Ø§Ù„Ø´Ø­Ù† (Aramex / SMSA)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:12},children:[e.jsxs("div",{style:{display:"grid",gap:8,alignContent:"start"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{id:"aramexEnabled",type:"checkbox",checked:!!a.aramexEnabled,onChange:m=>h("aramexEnabled",m.target.checked)}),e.jsx("label",{htmlFor:"aramexEnabled",style:{fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ Aramex"})]}),e.jsxs("label",{htmlFor:"aramexApiUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Aramex API URL"}),e.jsx("input",{id:"aramexApiUrl",type:"url",value:a.aramexApiUrl,onChange:m=>h("aramexApiUrl",m.target.value),placeholder:"https://api.aramex.com/..."}),g.aramexApiUrl&&e.jsx("small",{style:{color:"#dc2626"},children:g.aramexApiUrl})]}),e.jsxs("label",{htmlFor:"aramexApiKey",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"API Key"}),e.jsx("input",{id:"aramexApiKey",value:a.aramexApiKey,onChange:m=>h("aramexApiKey",m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"aramexApiUser",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Username"}),e.jsx("input",{id:"aramexApiUser",value:a.aramexApiUser,onChange:m=>h("aramexApiUser",m.target.value),placeholder:"user"})]}),e.jsxs("label",{htmlFor:"aramexApiPass",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Password"}),e.jsx("input",{id:"aramexApiPass",type:"password",value:a.aramexApiPass,onChange:m=>h("aramexApiPass",m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),e.jsxs("label",{htmlFor:"aramexWebhookSecret",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Webhook Secret (ØªÙˆÙ‚ÙŠØ¹)"}),e.jsx("input",{id:"aramexWebhookSecret",value:a.aramexWebhookSecret,onChange:m=>h("aramexWebhookSecret",m.target.value),placeholder:"secret"})]})]}),e.jsxs("div",{style:{display:"grid",gap:8,alignContent:"start"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{id:"smsaEnabled",type:"checkbox",checked:!!a.smsaEnabled,onChange:m=>h("smsaEnabled",m.target.checked)}),e.jsx("label",{htmlFor:"smsaEnabled",style:{fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ SMSA"})]}),e.jsxs("label",{htmlFor:"smsaApiUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"SMSA API URL"}),e.jsx("input",{id:"smsaApiUrl",type:"url",value:a.smsaApiUrl,onChange:m=>h("smsaApiUrl",m.target.value),placeholder:"https://api.smsaexpress.com/..."}),g.smsaApiUrl&&e.jsx("small",{style:{color:"#dc2626"},children:g.smsaApiUrl})]}),e.jsxs("label",{htmlFor:"smsaApiKey",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"API Key"}),e.jsx("input",{id:"smsaApiKey",value:a.smsaApiKey,onChange:m=>h("smsaApiKey",m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsxs("label",{htmlFor:"smsaWebhookSecret",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Webhook Secret (ØªÙˆÙ‚ÙŠØ¹)"}),e.jsx("input",{id:"smsaWebhookSecret",value:a.smsaWebhookSecret,onChange:m=>h("smsaWebhookSecret",m.target.value),placeholder:"secret"})]})]})]}),e.jsx("small",{style:{opacity:.7},children:"Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ø³ÙŠÙ‚Ø±Ø£ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ÙƒÙ„ Ù…Ø²ÙˆØ¯."})]})}),e.jsx("section",{id:"links-apps",style:{scrollMarginTop:80},hidden:Z!=="links-apps",children:e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"linkBlog",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø¯ÙˆÙ†Ø© (Blog)"}),e.jsx("input",{id:"linkBlog",type:"url",value:a.linkBlog,onChange:m=>h("linkBlog",m.target.value),placeholder:"https://example.com/blog"}),g.linkBlog&&e.jsx("small",{style:{color:"#dc2626"},children:g.linkBlog})]}),e.jsxs("label",{htmlFor:"linkSocial",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ"}),e.jsx("input",{id:"linkSocial",type:"url",value:a.linkSocial,onChange:m=>h("linkSocial",m.target.value),placeholder:"https://instagram.com/yourbrand"}),g.linkSocial&&e.jsx("small",{style:{color:"#dc2626"},children:g.linkSocial})]}),e.jsxs("label",{htmlFor:"linkReturns",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹"}),e.jsx("input",{id:"linkReturns",type:"url",value:a.linkReturns,onChange:m=>h("linkReturns",m.target.value),placeholder:"https://example.com/returns"}),g.linkReturns&&e.jsx("small",{style:{color:"#dc2626"},children:g.linkReturns})]}),e.jsxs("label",{htmlFor:"linkPrivacy",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©"}),e.jsx("input",{id:"linkPrivacy",type:"url",value:a.linkPrivacy,onChange:m=>h("linkPrivacy",m.target.value),placeholder:"https://example.com/privacy"}),g.linkPrivacy&&e.jsx("small",{style:{color:"#dc2626"},children:g.linkPrivacy})]}),e.jsxs("label",{htmlFor:"appStoreUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· ØªØ·Ø¨ÙŠÙ‚ iOS (App Store)"}),e.jsx("input",{id:"appStoreUrl",type:"url",value:a.appStoreUrl,onChange:m=>h("appStoreUrl",m.target.value),placeholder:"https://apps.apple.com/app/idXXXXXXXXX"}),e.jsx("small",{style:{opacity:.7},children:"Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· App Store Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚."}),g.appStoreUrl&&e.jsx("small",{style:{color:"#dc2626"},children:g.appStoreUrl})]}),e.jsxs("label",{htmlFor:"playStoreUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· ØªØ·Ø¨ÙŠÙ‚ Android (Google Play)"}),e.jsx("input",{id:"playStoreUrl",type:"url",value:a.playStoreUrl,onChange:m=>h("playStoreUrl",m.target.value),placeholder:"https://play.google.com/store/apps/details?id=your.app"}),e.jsx("small",{style:{opacity:.7},children:"Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· Google Play Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚."}),g.playStoreUrl&&e.jsx("small",{style:{color:"#dc2626"},children:g.playStoreUrl})]})]})]})}),e.jsxs("div",{style:{position:"sticky",bottom:0,background:"rgba(255,255,255,0.7)",backdropFilter:"saturate(180%) blur(8px)",padding:"10px 0",borderTop:"1px solid #e2e8f0",display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{type:"submit",disabled:y,style:{background:"#0ea5e9",color:"#fff",border:0,padding:"8px 14px",borderRadius:8,fontWeight:700},children:y?"ÙŠØ­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"}),e.jsx("span",{style:{fontSize:".75rem",opacity:.8},children:"Ù„Ù† ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø²ÙˆØ§Ø± Ø­ØªÙ‰ ØªØ­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª."})]})]})]})};function xn(){const[t,s]=i.useState(!0),[r,n]=i.useState(!1),[o,a]=i.useState(!1),[d,l]=i.useState(!1),[f,v]=i.useState(""),[b,y]=i.useState({serverEnv:"",clientEnv:""}),[x,p]=i.useState(!1),[u,w]=i.useState(""),[O,g]=i.useState(""),[D,P]=i.useState(""),[h,L]=i.useState(""),[C,_]=i.useState(""),[$,B]=i.useState("3306"),[F,W]=i.useState(""),[c,j]=i.useState(""),[R,k]=i.useState("");i.useEffect(()=>{(async()=>{try{const K=await(await Te()).envGet();y(K?.files||{}),p(!!K?.prod);const Q=K?.env?.client||{},ee=K?.env?.server||{};w(Q.VITE_PROXY_TARGET||""),g(Q.VITE_API_URL||""),P(Q.VITE_API_TIMEOUT_MS||""),L(ee.DATABASE_URL||""),_(ee.DB_HOST||""),B(ee.DB_PORT||"3306"),W(ee.DB_USER||""),j(""),k(ee.DB_NAME||"")}catch(T){const Q=T?.status===404?" â€” Ù…Ø³Ø§Ø± /api/env ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";v("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©: "+(T?.data?.message||T?.message||"")+Q)}finally{s(!1)}})()},[]);const U=i.useMemo(()=>{if(!C||!F||!R)return"";const T=$||"3306",K=c?`:${encodeURIComponent(c)}`:"";return`mysql://${encodeURIComponent(F)}${K}@${C}:${T}/${R}`},[C,$,F,c,R]),q=async()=>{n(!0),v("");try{const T=await Te(),K={};u!==void 0&&(K.VITE_PROXY_TARGET=u),O!==void 0&&(K.VITE_API_URL=O),D!==void 0&&(K.VITE_API_TIMEOUT_MS=String(D||""));const Q=await T.envUpdate("client",K);v(`ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (${Q.updatedKeys.length} Ù…ÙØªØ§Ø­) ÙÙŠ ${Q.file}`)}catch(T){const Q=T?.status===404?" â€” Ù…Ø³Ø§Ø± /api/env ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";v("ÙØ´Ù„ Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©: "+(T?.data?.message||T?.message||"")+Q)}finally{n(!1)}},z=async()=>{l(!0),v("");try{const T=await Te(),K=h?{databaseUrl:h}:{host:C,port:$,user:F,pass:c,name:R},Q=await T.envDbTest(K);v(`Ù†Ø¬Ø­ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${Q.version||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}catch(T){const Q=T?.status===404?" â€” Ù…Ø³Ø§Ø± /api/env/db/test ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";v("ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: "+(T?.data?.message||T?.message||"")+Q)}finally{l(!1)}},N=async()=>{a(!0),v("");try{const T=await Te(),K={};h?K.DATABASE_URL=h:(C!==void 0&&(K.DB_HOST=C),$!==void 0&&(K.DB_PORT=String($||"3306")),F!==void 0&&(K.DB_USER=F),c&&(K.DB_PASS=c),R!==void 0&&(K.DB_NAME=R));const Q=await T.envUpdate("server",K);v(`ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù… (${Q.updatedKeys.length} Ù…ÙØªØ§Ø­) ÙÙŠ ${Q.file}. Ù‚Ø¯ ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ø£Ù…Ø± Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.`)}catch(T){const Q=T?.status===404?" â€” Ù…Ø³Ø§Ø± /api/env ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";v("ÙØ´Ù„ Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù…: "+(T?.data?.message||T?.message||"")+Q)}finally{a(!1)}};return t?e.jsx("div",{children:"ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©..."}):e.jsxs("div",{style:{display:"grid",gap:16},children:[e.jsxs("div",{className:"text-xs",style:{opacity:.75},children:[e.jsx("div",{children:"Ù…Ù„ÙØ§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©:"}),e.jsxs("div",{children:["Ø§Ù„Ø®Ø§Ø¯Ù…: ",e.jsx("code",{children:b.serverEnv||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsxs("div",{children:["Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©: ",e.jsx("code",{children:b.clientEnv||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),x&&e.jsx("div",{style:{color:"#991b1b"},children:"ØªÙ†Ø¨ÙŠÙ‡: ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ â€” Ù‚Ø¯ ÙŠØªÙ… ØªØ¹Ø·ÙŠÙ„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ¦Ø©."})]}),e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:700,fontSize:".8rem"},children:"Ø¨ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Vite)"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("label",{htmlFor:"viteProxyTarget",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"VITE_PROXY_TARGET"}),e.jsx("input",{id:"viteProxyTarget",value:u,onChange:T=>w(T.target.value),placeholder:"http://localhost:8842"})]}),e.jsxs("label",{htmlFor:"viteApiUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"VITE_API_URL (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"viteApiUrl",value:O,onChange:T=>g(T.target.value),placeholder:"http://localhost:8842/api"})]}),e.jsxs("label",{htmlFor:"viteTimeout",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"VITE_API_TIMEOUT_MS (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"viteTimeout",value:D,onChange:T=>P(T.target.value),placeholder:"12000"})]}),e.jsx("div",{style:{display:"flex",gap:8},children:e.jsx("button",{type:"button",onClick:q,disabled:r,className:"ui-btn",style:{background:"#0ea5e9",color:"#fff"},children:r?"ÙŠØ­ÙØ¸...":"Ø­ÙØ¸ Ø¨ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©"})})]})]}),e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:700,fontSize:".8rem"},children:"Ø¨ÙŠØ¦Ø© Ø§Ù„Ø®Ø§Ø¯Ù… (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("label",{htmlFor:"dbUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DATABASE_URL (Ø¨Ø¯ÙŠÙ„ Ø¹Ù† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©)"}),e.jsx("input",{id:"dbUrl",value:h,onChange:T=>L(T.target.value),placeholder:"mysql://user:pass@host:3306/dbname"})]}),e.jsx("div",{className:"text-xs",style:{opacity:.7},children:"Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© Ø£Ø¯Ù†Ø§Ù‡ (Ø¥Ø°Ø§ ØªÙ… ØªØ­Ø¯ÙŠØ¯ DATABASE_URL Ø³ÙŠØªÙ… ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸)."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"dbHost",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_HOST"}),e.jsx("input",{id:"dbHost",value:C,onChange:T=>_(T.target.value),placeholder:"localhost Ø£Ùˆ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±"})]}),e.jsxs("label",{htmlFor:"dbPort",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_PORT"}),e.jsx("input",{id:"dbPort",value:$,onChange:T=>B(T.target.value),placeholder:"3306"})]}),e.jsxs("label",{htmlFor:"dbUser",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_USER"}),e.jsx("input",{id:"dbUser",value:F,onChange:T=>W(T.target.value),placeholder:"root Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"})]}),e.jsxs("label",{htmlFor:"dbPass",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_PASS"}),e.jsx("input",{id:"dbPass",type:"password",value:c,onChange:T=>j(T.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢ (Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø¹Ø¯Ù… Ø§Ù„ØªØºÙŠÙŠØ±)"})]}),e.jsxs("label",{htmlFor:"dbName",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_NAME"}),e.jsx("input",{id:"dbName",value:R,onChange:T=>k(T.target.value),placeholder:"Ø§Ø³Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"})]})]}),e.jsx("div",{className:"text-xs",style:{opacity:.75},children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ù†ÙŠØ© Ù…Ù† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©:"}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:12,background:"#f8fafc",padding:"6px 8px",borderRadius:6,direction:"ltr"},children:U||"(Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ… Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©)"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx("button",{type:"button",onClick:z,disabled:d,className:"ui-btn",style:{background:"#16a34a",color:"#fff"},children:d?"ÙŠÙØ­Øµ...":"Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsx("button",{type:"button",onClick:N,disabled:o,className:"ui-btn",style:{background:"#0ea5e9",color:"#fff"},children:o?"ÙŠØ­ÙØ¸...":"Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù…"})]})]})]}),e.jsx("div",{"aria-live":"polite",className:"text-xs",style:{color:f?.startsWith("ÙØ´Ù„")?"#991b1b":"#065f46"},children:f}),e.jsx("small",{style:{opacity:.7},children:"Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API ÙˆØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Vite Ø­ØªÙ‰ ØªÙØ·Ø¨Ù‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª."})]})}function Ye(){const[t,s]=i.useState(null),[r,n]=i.useState(!0),[o,a]=i.useState(null),[d,l]=i.useState(""),[f,v]=i.useState(""),[b,y]=i.useState("");async function x(){try{n(!0);const g=await X.request?X.request("/auth/me"):fetch("/api/auth/me").then(P=>P.json()),D=g.ok?g:await fetch("/api/auth/me").then(P=>P.json());if(!D.ok)throw new Error(D.error||"LOAD_FAILED");s(D.user),l(D.user?.phone||"")}catch(g){a(g.message||"ERR")}finally{n(!1)}}i.useEffect(()=>{x()},[]);async function p(){try{a(null),y("");const g=await fetch("/api/auth/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:d})}),D=await g.json();if(!g.ok||!D.ok)throw new Error(D.error||g.statusText);y("ØªÙ… Ø­ÙØ¸ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"),await x()}catch(g){a(g.message||"ÙØ´Ù„")}}async function u(){try{a(null),y("");const g=await fetch("/api/auth/verify-email/request",{method:"POST"}),D=await g.json();if(!g.ok||!D.ok)throw new Error(D.error||g.statusText);y("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ø¨Ø±ÙŠØ¯ (Ù…Ø­Ø§ÙƒØ§Ø©)")}catch(g){a(g.message||"ÙØ´Ù„")}}async function w(){try{a(null),y("");const g=await fetch("/api/auth/verify-phone/request",{method:"POST"}),D=await g.json();if(!g.ok||!D.ok)throw new Error(D.error||g.statusText);y("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ù‡Ø§ØªÙ (Ù…Ø­Ø§ÙƒØ§Ø©)")}catch(g){a(g.message||"ÙØ´Ù„")}}async function O(){try{a(null),y("");const g=await fetch("/api/auth/verify-phone/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:f})}),D=await g.json();if(!g.ok||!D.ok)throw new Error(D.error||g.statusText);y("ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù‡Ø§ØªÙ"),await x()}catch(g){a(g.message||"ÙØ´Ù„")}}return r?e.jsx("div",{style:Ze,children:"...ØªØ­Ù…ÙŠÙ„"}):o?e.jsx("div",{style:Ze,children:e.jsx("div",{style:fs,children:o})}):e.jsx("div",{style:Ze,children:e.jsxs("div",{style:fn,children:[e.jsx("h1",{style:{margin:0,fontSize:"1.25rem",fontWeight:700},children:"Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨"}),b&&e.jsx("div",{style:bn,children:b}),o&&e.jsx("div",{style:fs,children:o}),e.jsxs("section",{style:ps,children:[e.jsx("h2",{style:hs,children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsxs("p",{style:gs,children:["Ø§Ù„Ø¨Ø±ÙŠØ¯: ",e.jsx("b",{children:t?.email})," â€” Ø§Ù„Ø­Ø§Ù„Ø©: ",t?.emailVerifiedAt?"Ù…ÙÙØ¹Ù„":"ØºÙŠØ± Ù…ÙÙØ¹Ù„"]}),!t?.emailVerifiedAt&&e.jsx("button",{style:et,onClick:u,children:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚"})]}),e.jsxs("section",{style:ps,children:[e.jsx("h2",{style:hs,children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsxs("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx("input",{style:xs,placeholder:"05xxxxxxxx",value:d,onChange:g=>l(g.target.value)}),e.jsx("button",{style:yn,onClick:p,children:"Ø­ÙØ¸"})]}),e.jsxs("p",{style:gs,children:["Ø§Ù„Ø­Ø§Ù„Ø©: ",t?.phoneVerifiedAt?"Ù…ÙÙØ¹Ù„":"ØºÙŠØ± Ù…ÙÙØ¹Ù„"]}),!t?.phoneVerifiedAt&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:".5rem"},children:[e.jsx("button",{style:et,onClick:w,children:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚"}),e.jsxs("div",{style:{display:"flex",gap:".5rem"},children:[e.jsx("input",{style:xs,placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²",value:f,onChange:g=>v(g.target.value)}),e.jsx("button",{style:et,onClick:O,children:"ØªØ£ÙƒÙŠØ¯"})]})]})]})]})})}const Ze={direction:"rtl",display:"flex",justifyContent:"center",padding:"2rem"},fn={background:"#fff",padding:"1.5rem",border:"1px solid #e2e8f0",borderRadius:18,display:"flex",flexDirection:"column",gap:"1rem",width:"100%",maxWidth:640,boxShadow:"0 8px 34px -12px rgba(0,0,0,.15)"},ps={borderTop:"1px solid #f1f5f9",paddingTop:".75rem"},hs={margin:"0 0 .25rem",fontSize:"1rem"},gs={margin:0,fontSize:".8rem",color:"#475569"},et={padding:".6rem .9rem",border:0,borderRadius:12,background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",fontSize:".8rem",fontWeight:600,cursor:"pointer"},yn={padding:".55rem .85rem",border:"1px solid #e2e8f0",borderRadius:12,background:"#fff",color:"#334155",fontSize:".8rem",fontWeight:600,cursor:"pointer"},xs={padding:".6rem .8rem",border:"1px solid #e2e8f0",borderRadius:12,fontSize:".8rem"},fs={background:"#fee2e2",color:"#b91c1c",padding:".5rem .7rem",borderRadius:12,fontSize:".75rem",lineHeight:1.5},bn={background:"#dcfce7",color:"#166534",padding:".5rem .7rem",borderRadius:12,fontSize:".75rem",lineHeight:1.5},jn={},tt=jn?.VITE_PUBLIC_DOMAIN||typeof window<"u"&&window.__APP_CANONICAL_DOMAIN__||"https://jomlah.app";function st(t,s={}){const r=Object.entries(s).map(([o,a])=>`[${o}="${a}"]`).join("");let n=document.head.querySelector(`${t}${r}`);return n||(n=document.createElement(t),Object.entries(s).forEach(([o,a])=>n.setAttribute(o,a)),document.head.appendChild(n)),n}const vn=({alternates:t=["ar","en"]})=>{const s=ue(),r=pe();return i.useEffect(()=>{const n=s.pathname.split("/").filter(Boolean);let o=r?.locale||"ar";r?.locale||n[0]&&t.includes(n[0])&&(o=n[0]);let a;o==="ar"?a="/"+n.filter(b=>b!=="ar").join("/"):a="/"+[o,...n.slice(1)].join("/"),a==="/"&&(a="/");const d=`${tt}${a}`.replace(/\/+$/,"/");st("link",{rel:"canonical"}).setAttribute("href",d),t.forEach(b=>{let y;b==="ar"?y="/"+n.filter(u=>u!=="ar"&&u!=="en").join("/"):y="/"+[b,...n.filter((u,w)=>!(w===0&&t.includes(u)))].join("/"),y==="/"&&(y="/");const x=`${tt}${y}`.replace(/\/+$/,"/");st("link",{rel:"alternate",hreflang:b}).setAttribute("href",x)}),st("link",{rel:"alternate",hreflang:"x-default"}).setAttribute("href",`${tt}/`),Array.from(document.head.querySelectorAll('meta[property="og:locale:alternate"]')).forEach(b=>b.parentNode.removeChild(b)),t.forEach(b=>{const y=document.createElement("meta");y.setAttribute("property","og:locale:alternate"),y.setAttribute("content",b==="ar"?"ar_AR":"en_US"),document.head.appendChild(y)})},[s,t,r?.locale]),null},Bs={};let ys=!1;function wn(){if(ys)return;const t=Bs?.VITE_GA_ID;if(t)try{let s=function(){window.dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||s,s("js",new Date),s("config",t,{send_page_view:!1});const r=document.createElement("script");r.async=!0,r.src=`https://www.googletagmanager.com/gtag/js?id=${encodeURIComponent(t)}`,document.head.appendChild(r),ys=!0}catch{}}function Sn(t,s){if(!(!Bs?.VITE_GA_ID||typeof window.gtag!="function"))try{window.gtag("event","page_view",{page_path:t||window.location.pathname,page_title:s||document.title,page_location:window.location.href})}catch{}}const rt=E.lazy(()=>J(()=>import("./Home-nlMLq94n.js").then(t=>t.a),__vite__mapDeps([8,6,1,2,3,4,5,7,9,10,11]))),at=E.lazy(()=>J(()=>import("./Cart-CORDAYbD.js"),__vite__mapDeps([12,6,1,2,3,4,5,7,10,13]))),nt=E.lazy(()=>J(()=>import("./CheckoutPage-CbmVguQj.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16,13]))),it=E.lazy(()=>J(()=>import("./index-mnDEV8hL.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,13])).then(t=>({default:t.LoginPage}))),ot=E.lazy(()=>J(()=>import("./index-mnDEV8hL.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,13])).then(t=>({default:t.RegisterPage}))),lt=E.lazy(()=>J(()=>import("./index-mnDEV8hL.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,13])).then(t=>({default:t.ForgotPasswordPage}))),ct=E.lazy(()=>J(()=>import("./ResetPasswordPage-CeM0P5HY.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,13]))),dt=E.lazy(()=>J(()=>import("./VerifyEmailPage-C6sCrmjt.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,13]))),ut=E.lazy(()=>J(()=>import("./Orders-BhFyM1P7.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,21,13]))),mt=E.lazy(()=>J(()=>import("./MyOrders-qCLt5BE6.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,21,13]))),pt=E.lazy(()=>J(()=>import("./OrderDetails-p19YF5XO.js"),__vite__mapDeps([23,6,1,2,3,4,5,7,16,21,13]))),kn=E.lazy(()=>J(()=>import("./AdminDashboard-B4pJiWHe.js"),__vite__mapDeps([24,6,1,2,3,4,5,7,25,13]))),ht=E.lazy(()=>J(()=>import("./ProductInventory-DvjXzqyj.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,13]))),gt=E.lazy(()=>J(()=>import("./Orders-CqybTGLt.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,28,29,21,13]))),xt=E.lazy(()=>J(()=>import("./Products-Bq5UUnqZ.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,28,29,31,13]))),ft=E.lazy(()=>J(()=>import("./Invoices-DAWPYykL.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,28,21,13]))),yt=E.lazy(()=>J(()=>import("./Marketing-C8BG_mkS.js"),__vite__mapDeps([33,1,2,3,4,5,6,7,13]))),bt=E.lazy(()=>J(()=>import("./Apps-BOfN4-gV.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,13]))),jt=E.lazy(()=>J(()=>import("./Integrations-BNhkdVri.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,13]))),vt=E.lazy(()=>J(()=>import("./SellerDashboard-BQhfUlMl.js"),__vite__mapDeps([36,6,1,2,3,4,5,7,37,25,13]))),wt=E.lazy(()=>J(()=>import("./DeliveryDashboard-BlPc4GSC.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,39,40,25,13]))),St=E.lazy(()=>J(()=>import("./ProductDetailPage-JoAJqUa0.js"),__vite__mapDeps([41,1,2,3,4,5,6,7,42,13]))),kt=E.lazy(()=>J(()=>import("./StoresPage-nu3K0b3W.js"),__vite__mapDeps([43,1,2,3,4,5,6,7]))),Nt=E.lazy(()=>J(()=>import("./OffersPage-CWyUkeZ4.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,45,9,10,13]))),At=E.lazy(()=>J(()=>import("./InvoiceViewer-CdiFRrOi.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,13]))),Ct=E.lazy(()=>J(()=>import("./CatalogPage-DMStKmTa.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,13]))),Et=E.lazy(()=>J(()=>import("./Legal-SYChWhwc.js"),__vite__mapDeps([48,1,2,3,4,5,6,7]))),Rt=E.lazy(()=>J(()=>import("./Products-mZWTKzTS.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,45,9,10,31,13]))),Tt=E.lazy(()=>J(()=>import("./Chat-DunndQGL.js"),__vite__mapDeps([50,1,2,3,4,5,6,7,13]))),_t=E.lazy(()=>J(()=>import("./StyleGuide-BJuEy92p.js"),__vite__mapDeps([51,1,2,3,4,5,6,7,39,13]))),Pt=E.lazy(()=>J(()=>import("./Profile-DDPZcQ2F.js"),__vite__mapDeps([52,1,2,3,4,5,6,7,13]))),It=E.lazy(()=>J(()=>import("./ProductManager-CuVg5OhD.js"),__vite__mapDeps([53,1,2,3,4,5,6,7,37,13]))),Ot=E.lazy(()=>J(()=>import("./OrderTracker-uDpEp1ra.js"),__vite__mapDeps([54,1,2,3,4,5,6,7,13]))),Lt=E.lazy(()=>J(()=>import("./Addresses-CX7OBO7y.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,13]))),Dt=E.lazy(()=>J(()=>import("./SellerKyc-DI42CqiI.js"),__vite__mapDeps([56,1,2,3,4,5,6,7,13]))),Ut=E.lazy(()=>J(()=>import("./AdminKycReview-D1PKaHh5.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,13]))),zt=E.lazy(()=>J(()=>import("./Map-BzGZLzSH.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,15,39,13]))),$t=E.lazy(()=>J(()=>import("./History-C4AugFeN.js"),__vite__mapDeps([59,1,2,3,4,5,6,7,39,13]))),Mt=E.lazy(()=>J(()=>import("./Availability-DNB9X7WU.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,13]))),Wt=E.lazy(()=>J(()=>import("./DeliverySummary-D0pbpNgJ.js"),__vite__mapDeps([61,1,2,3,4,5,6,7,40]))),Ft=E.lazy(()=>J(()=>import("./UIPreview-B_hhICA2.js"),__vite__mapDeps([62,1,2,3,4,5,6,7,39,63,13]))),Nn=()=>{const t=ue();return i.useEffect(()=>{try{wn()}catch{}try{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"page_view",path:t.pathname,timestamp:Date.now()}),Sn(t.pathname);const s=new CustomEvent("reinit:home",{detail:{path:t.pathname,ts:Date.now()}});requestAnimationFrame(()=>{try{document.dispatchEvent(s)}catch{}})}catch{}},[t]),null},An=()=>{const{pathname:t}=ue();return i.useEffect(()=>{try{window.scrollY>2e3?window.scrollTo({top:0,left:0,behavior:"auto"}):window.scrollTo({top:0,left:0,behavior:"smooth"})}catch{}},[t]),null},Cn=({children:t})=>{const r=ue().pathname.split("/").filter(Boolean);return r[0]&&r[0].length===2&&!["ar","en","fr"].includes(r[0])?e.jsx(le,{to:"/",replace:!0}):t},Bt=({prefix:t=""})=>{const{user:s}=fe()||{},r=s?.role,n=ue(),a=new URLSearchParams(n.search).get("view");return a==="users"?e.jsx(le,{to:`${t}/admin/users`,replace:!0}):a==="customers"?e.jsx(le,{to:`${t}/admin/customers`,replace:!0}):e.jsx(M,{isAuthed:!!s,userRole:r,requiredRoles:["admin"],element:e.jsx(kn,{}),redirectTo:`${t}/login`})},En=()=>{const{user:t}=fe()||{};t?.role;const s=t?.role;return e.jsx(Va,{children:e.jsxs(Ba,{children:[e.jsx(vn,{}),e.jsxs(Cn,{children:[e.jsx(An,{}),e.jsx(Nn,{}),e.jsx(Ha,{children:e.jsx(i.Suspense,{fallback:e.jsx(Ka,{}),children:e.jsx(ze,{mode:"wait",children:e.jsx(Rn,{children:e.jsxs(Nr,{children:[e.jsx(S,{path:"/",element:e.jsx(rt,{})}),e.jsx(S,{path:"/admin/inventory",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ht,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/chat",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Tt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin",element:e.jsx(Bt,{prefix:""})}),e.jsx(S,{path:"/catalog",element:e.jsx(Ct,{})}),e.jsx(S,{path:"/products",element:e.jsx(Rt,{})}),e.jsx(S,{path:"/product/:id",element:e.jsx(St,{})}),e.jsx(S,{path:"/stores",element:e.jsx(kt,{})}),e.jsx(S,{path:"/offers",element:e.jsx(Nt,{})}),e.jsx(S,{path:"/style-guide",element:e.jsx(_t,{})}),e.jsx(S,{path:"/ui",element:e.jsx(Ft,{})}),e.jsx(S,{path:"/cart",element:e.jsx(at,{})}),e.jsx(S,{path:"/checkout",element:e.jsx(nt,{})}),e.jsx(S,{path:"/orders",element:e.jsx(ut,{})}),e.jsx(S,{path:"/legal/:slug",element:e.jsx(Et,{})}),e.jsx(S,{path:"/my-orders",element:e.jsx(mt,{})}),e.jsx(S,{path:"/order/:id",element:e.jsx(pt,{})}),e.jsx(S,{path:"/order/:id/track",element:e.jsx(Ot,{})}),e.jsx(S,{path:"/account/addresses",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Lt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/invoice/:id",element:e.jsx(At,{})}),e.jsx(S,{path:"/seller/kyc",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Dt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/sellers/kyc",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ut,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/seller/products",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(It,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(wt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/map",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(zt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/history",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx($t,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/availability",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Mt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/summary",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Wt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/DeliveryDashboard",element:e.jsx(le,{to:"/delivery",replace:!0})}),e.jsx(S,{path:"/seller",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(vt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/SellerDashboard",element:e.jsx(le,{to:"/seller",replace:!0})}),e.jsx(S,{path:"/account/security",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Ye,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/account/profile",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Pt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/users",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/categories",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(le,{to:"/admin?view=cats",replace:!0}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/reports",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/bank-transfers",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/analytics",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/customers",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Xe,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/settings",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Qe,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/orders",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(gt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/products",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(xt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/invoices",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ft,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/marketing",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(yt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/apps",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(bt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/integrations",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(jt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/login",element:e.jsx(it,{})}),e.jsx(S,{path:"/register",element:e.jsx(ot,{})}),e.jsx(S,{path:"/forgot",element:e.jsx(lt,{})}),e.jsx(S,{path:"/reset-password",element:e.jsx(ct,{})}),e.jsx(S,{path:"/verify-email",element:e.jsx(dt,{})}),e.jsx(S,{path:"/en",element:e.jsx(rt,{})}),e.jsx(S,{path:"/en/admin/inventory",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ht,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/chat",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Tt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/catalog",element:e.jsx(Ct,{})}),e.jsx(S,{path:"/en/products",element:e.jsx(Rt,{})}),e.jsx(S,{path:"/en/product/:id",element:e.jsx(St,{})}),e.jsx(S,{path:"/en/stores",element:e.jsx(kt,{})}),e.jsx(S,{path:"/en/offers",element:e.jsx(Nt,{})}),e.jsx(S,{path:"/en/style-guide",element:e.jsx(_t,{})}),e.jsx(S,{path:"/en/ui",element:e.jsx(Ft,{})}),e.jsx(S,{path:"/en/cart",element:e.jsx(at,{})}),e.jsx(S,{path:"/en/checkout",element:e.jsx(nt,{})}),e.jsx(S,{path:"/en/orders",element:e.jsx(ut,{})}),e.jsx(S,{path:"/en/legal/:slug",element:e.jsx(Et,{})}),e.jsx(S,{path:"/en/my-orders",element:e.jsx(mt,{})}),e.jsx(S,{path:"/en/order/:id",element:e.jsx(pt,{})}),e.jsx(S,{path:"/en/order/:id/track",element:e.jsx(Ot,{})}),e.jsx(S,{path:"/en/account/addresses",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Lt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/invoice/:id",element:e.jsx(At,{})}),e.jsx(S,{path:"/en/seller/kyc",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Dt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/sellers/kyc",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ut,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/seller/products",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(It,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(wt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/map",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(zt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/history",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx($t,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/availability",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Mt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/summary",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Wt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/DeliveryDashboard",element:e.jsx(le,{to:"/en/delivery",replace:!0})}),e.jsx(S,{path:"/en/seller",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(vt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/SellerDashboard",element:e.jsx(le,{to:"/en/seller",replace:!0})}),e.jsx(S,{path:"/en/account/security",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Ye,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/account/profile",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Pt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin",element:e.jsx(Bt,{prefix:"/en"})}),e.jsx(S,{path:"/en/admin/users",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/categories",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(le,{to:"/en/admin?view=cats",replace:!0}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/reports",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/bank-transfers",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/analytics",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/customers",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Xe,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/settings",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Qe,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/orders",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(gt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/products",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(xt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/invoices",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ft,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/marketing",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(yt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/apps",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(bt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/integrations",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(jt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/login",element:e.jsx(it,{})}),e.jsx(S,{path:"/en/register",element:e.jsx(ot,{})}),e.jsx(S,{path:"/en/forgot",element:e.jsx(lt,{})}),e.jsx(S,{path:"/en/reset-password",element:e.jsx(ct,{})}),e.jsx(S,{path:"/en/verify-email",element:e.jsx(dt,{})}),e.jsx(S,{path:"/fr",element:e.jsx(rt,{})}),e.jsx(S,{path:"/fr/admin/inventory",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ht,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/chat",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Tt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/catalog",element:e.jsx(Ct,{})}),e.jsx(S,{path:"/fr/products",element:e.jsx(Rt,{})}),e.jsx(S,{path:"/fr/product/:id",element:e.jsx(St,{})}),e.jsx(S,{path:"/fr/stores",element:e.jsx(kt,{})}),e.jsx(S,{path:"/fr/offers",element:e.jsx(Nt,{})}),e.jsx(S,{path:"/fr/style-guide",element:e.jsx(_t,{})}),e.jsx(S,{path:"/fr/ui",element:e.jsx(Ft,{})}),e.jsx(S,{path:"/fr/cart",element:e.jsx(at,{})}),e.jsx(S,{path:"/fr/checkout",element:e.jsx(nt,{})}),e.jsx(S,{path:"/fr/orders",element:e.jsx(ut,{})}),e.jsx(S,{path:"/fr/legal/:slug",element:e.jsx(Et,{})}),e.jsx(S,{path:"/fr/my-orders",element:e.jsx(mt,{})}),e.jsx(S,{path:"/fr/order/:id",element:e.jsx(pt,{})}),e.jsx(S,{path:"/fr/order/:id/track",element:e.jsx(Ot,{})}),e.jsx(S,{path:"/fr/account/addresses",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Lt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/invoice/:id",element:e.jsx(At,{})}),e.jsx(S,{path:"/fr/seller/kyc",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Dt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/sellers/kyc",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ut,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/seller/products",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(It,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(wt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/map",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(zt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/history",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx($t,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/availability",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Mt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/summary",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Wt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/DeliveryDashboard",element:e.jsx(le,{to:"/fr/delivery",replace:!0})}),e.jsx(S,{path:"/fr/seller",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(vt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/SellerDashboard",element:e.jsx(le,{to:"/fr/seller",replace:!0})}),e.jsx(S,{path:"/fr/account/security",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Ye,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/account/profile",element:e.jsx(M,{isAuthed:!!t,element:e.jsx(Pt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin",element:e.jsx(Bt,{prefix:"/fr"})}),e.jsx(S,{path:"/fr/admin/users",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/categories",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(le,{to:"/fr/admin?view=cats",replace:!0}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/reports",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/bank-transfers",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/analytics",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/customers",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Xe,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/settings",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Qe,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/orders",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(gt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/products",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(xt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/invoices",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ft,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/marketing",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(yt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/apps",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(bt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/integrations",element:e.jsx(M,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(jt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/login",element:e.jsx(it,{})}),e.jsx(S,{path:"/fr/register",element:e.jsx(ot,{})}),e.jsx(S,{path:"/fr/forgot",element:e.jsx(lt,{})}),e.jsx(S,{path:"/fr/reset-password",element:e.jsx(ct,{})}),e.jsx(S,{path:"/fr/verify-email",element:e.jsx(dt,{})})]})})})})})]})]})})};function Rn({children:t}){const s=ue();return e.jsx(xe.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18,ease:"easeOut"},children:t},s.pathname)}const qs=i.createContext(null),Tn=Array.from({length:6}).map((t,s)=>{const r=(s+1).toString();return{id:r,slug:`product-${r}`,name:{ar:`Ù…Ù†ØªØ¬ ${r}`,en:`Product ${r}`},short:{ar:"ÙˆØµÙ Ù…Ø¤Ù‚Øª",en:"Temp description"},price:25+s*2,oldPrice:s%2===0?30+s*2:null,image:"/vite.svg",rating:s%5+1,stock:5+s}}),_n=({children:t})=>{const[s,r]=i.useState(Tn),[n,o]=i.useState(!1),[a,d]=i.useState(null);i.useEffect(()=>{let f=!0;return o(!0),d(null),X.listProducts().then(v=>{if(f&&Array.isArray(v)){const b=v.map(y=>{const x=y.name||{ar:y.nameAr,en:y.nameEn},p=x?.ar||y.nameAr||"",u=x?.en||y.nameEn||"",w=y.imageVariants||null,O=Array.isArray(y.gallery)?y.gallery:[];let g=y.image;if(w&&(g=w.thumb||w.medium||w.original||y.image),!g&&O.length){const D=O[0];D?.variants?g=D.variants.thumb||D.variants.medium||D.variants.original||D.url:g=D.url}return{...y,name:p,nameAr:p,nameEn:u,originalPrice:y.oldPrice||y.originalPrice||null,images:Array.isArray(y.images)?y.images:y.image?[y.image]:[],gallery:O,displayImage:g}});r(b)}}).catch(v=>{f&&d(v.message||"fetch_error")}).finally(()=>{f&&o(!1)}),()=>{f=!1}},[]);const l=i.useMemo(()=>({products:s,loading:n,error:a,list:()=>s,getProductById:f=>s.find(v=>v.id===f),getProductBySlug:f=>s.find(v=>v.slug===f)}),[s,n,a]);return e.jsx(qs.Provider,{value:l,children:t})},pc=()=>i.useContext(qs),Pn=i.createContext(null),In=({children:t})=>{const{user:s}=fe()||{},[r,n]=i.useState(!1),[o,a]=i.useState(null),[d,l]=i.useState(()=>{try{const p=localStorage.getItem("my_store_wishlist");return p?JSON.parse(p):[]}catch{return[]}}),f=i.useRef(!1);i.useEffect(()=>{try{localStorage.setItem("my_store_wishlist",JSON.stringify(d))}catch{}},[d]),i.useEffect(()=>{(async()=>{let u=!1;try{u=!!localStorage.getItem("my_store_token")}catch{}if(!(!s||!u||f.current)){n(!0),a(null);try{const w=await X.wishlistList(),O=Array.isArray(w)?w:w.items||[];l(O.map(g=>({...g,id:g.productId||g.id}))),f.current=!0}catch(w){a(w.message)}finally{n(!1)}}})()},[s]);const x={wishlistItems:d,addToWishlist:async p=>{if(!(!p||!p.id)&&(l(u=>u.find(w=>w.id===p.id)?u:[...u,p]),s))try{await X.wishlistAdd(p.id)}catch(u){a(u.message)}},removeFromWishlist:async p=>{if(l(u=>u.filter(w=>w.id!==p)),s)try{await X.wishlistRemove(p)}catch(u){a(u.message)}},clearWishlist:async()=>{const p=d.map(u=>u.id);if(l([]),s)for(const u of p)try{await X.wishlistRemove(u)}catch{}},loading:r,error:o};return e.jsx(Pn.Provider,{value:x,children:t})};function On(t,{onEvent:s,withAuthToken:r=!0}={}){const n=i.useRef(null);i.useEffect(()=>{const o=r&&localStorage.getItem("my_store_token")||"",a=o?`${t}${t.includes("?")?"&":"?"}token=${encodeURIComponent(o)}`:t,d=new EventSource(a);n.current=d;const l=f=>{const{type:v,data:b}=f;let y=null;try{y=b?JSON.parse(b):null}catch{}s&&s(v,y)};return d.addEventListener("order.created",l),d.addEventListener("order.updated",l),d.addEventListener("heartbeat",l),d.addEventListener("hello",l),()=>{try{d.close()}catch{}}},[t,s,r])}function Ln({onOrderEvent:t}){return On("/api/events",{onEvent:(s,r)=>{r&&(s==="order.created"||s==="order.updated")&&t&&t(s,r)}}),null}const Vs=i.createContext(null),Dn=({children:t})=>{const[s,r]=i.useState([]),[n,o]=i.useState(null),[a,d]=i.useState(!0),[l,f]=i.useState(1),v=20,{user:b}=fe()||{},y=Ar(),[x,p]=i.useState(()=>{try{const c=localStorage.getItem("my_store_orders");return c?JSON.parse(c):[]}catch{return[]}});i.useEffect(()=>{try{localStorage.setItem("my_store_orders",JSON.stringify(x))}catch{}},[x]);const u=["orders",{scope:b?.role==="admin"?"all":b?.id||"guest"}],{data:w,isLoading:O,isFetching:g,isError:D,error:P,refetch:h}=Cr({queryKey:u,queryFn:async()=>{const c=await X.listOrders();return Array.isArray(c?.orders)?c.orders:[]},enabled:a,staleTime:6e4,gcTime:5*6e4,retry:1});i.useEffect(()=>{a&&Array.isArray(w)&&(r(w),o(null))},[w,a]),i.useEffect(()=>{D&&(d(!1),r(x),o(P?.message||"Failed to load orders"))},[D,P,x]),i.useEffect(()=>{a&&h()},[b?.id]);const L=async c=>{const j={createdAt:new Date().toISOString(),status:"pending",...c};if(a)try{const U=await X.createOrder(j);if(U?.order)return r(q=>[U.order,...q]),y.setQueriesData({queryKey:["orders"]},q=>Array.isArray(q)?[U.order,...q]:[U.order]),U.order}catch{d(!1)}const R=j.id||`ord_${Date.now()}`,k={...j,id:R};return p(U=>[k,...U]),r(U=>[k,...U]),y.setQueriesData({queryKey:["orders"]},U=>Array.isArray(U)?[k,...U]:[k]),k},C=async(c,j)=>{if(a)try{await X.updateOrder(c,{status:j})}catch{d(!1)}r(R=>R.map(k=>k.id===c?{...k,status:j}:k)),p(R=>R.map(k=>k.id===c?{...k,status:j}:k)),y.setQueriesData({queryKey:["orders"]},R=>Array.isArray(R)?R.map(k=>k.id===c?{...k,status:j}:k):R)},_=c=>{!c||!c.id||(r(j=>j.some(k=>k.id===c.id)?j.map(k=>k.id===c.id?{...k,...c}:k):[c,...j]),p(j=>j.some(k=>k.id===c.id)?j.map(k=>k.id===c.id?{...k,...c}:k):[c,...j]))},$=()=>s,B=c=>s.find(j=>j.id===c),F=s.slice((l-1)*v,l*v),W=Math.ceil(s.length/v)||1;return e.jsxs(Vs.Provider,{value:{orders:s,addOrder:L,updateOrderStatus:C,mergeOrder:_,getOrders:$,getOrderById:B,loading:O||g,error:n,refresh:()=>a?h():null,page:l,setPage:f,totalPages:W,paged:F,useRemote:a},children:[e.jsx(Ln,{onOrderEvent:(c,j)=>{if(!j?.orderId)return;const{orderId:R,status:k}=j;r(U=>U.map(q=>q.id===R?{...q,status:k}:q)),p(U=>U.map(q=>q.id===R?{...q,status:k}:q)),y.setQueriesData({queryKey:["orders"]},U=>{if(!Array.isArray(U))return U;let q=!1;const z=U.map(N=>N.id===R?(q=!0,{...N,status:k}):N);return!q&&c==="order.created"?[{id:R,status:k,createdAt:new Date().toISOString(),items:[],userId:j.userId},...z]:z})}}),t]})},hc=()=>i.useContext(Vs),Hs=i.createContext(null),gc=()=>i.useContext(Hs),qt="adminConsoleData_v1",Un={products:[],users:[],orders:[]};function zn(t,s){switch(s.type){case"INIT":return{...t,...s.payload};case"ADD_PRODUCT":return{...t,products:[s.payload,...t.products]};case"UPDATE_PRODUCT":return{...t,products:t.products.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_PRODUCT":return{...t,products:t.products.filter(r=>r.id!==s.id)};case"ADD_USER":return{...t,users:[s.payload,...t.users]};case"UPDATE_USER":return{...t,users:t.users.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_USER":return{...t,users:t.users.filter(r=>r.id!==s.id)};case"ADD_ORDER":return{...t,orders:[s.payload,...t.orders]};case"UPDATE_ORDER":return{...t,orders:t.orders.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_ORDER":return{...t,orders:t.orders.filter(r=>r.id!==s.id)};default:return t}}function $n({children:t}){const[s,r]=i.useReducer(zn,Un);i.useEffect(()=>{try{const p=localStorage.getItem(qt);if(p)r({type:"INIT",payload:JSON.parse(p)});else{const u={products:[{id:"p1",name:"Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ",price:120,stock:50,status:"active"},{id:"p2",name:"Ø­Ù‚ÙŠØ¨Ø© Ø¬Ù„Ø¯",price:340,stock:8,status:"draft"}],users:[{id:"u1",name:"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…",role:"admin",active:!0},{id:"u2",name:"Ø¨Ø§Ø¦Ø¹ Ø£Ø­Ù…Ø¯",role:"seller",active:!0}],orders:[{id:"o1",total:450.75,status:"pending",customer:"Ù…Ø´ØªØ±ÙŠ 1",items:3},{id:"o2",total:90,status:"paid",customer:"Ù…Ø´ØªØ±ÙŠ 2",items:1}]};localStorage.setItem(qt,JSON.stringify(u)),r({type:"INIT",payload:u})}}catch{}},[]),i.useEffect(()=>{localStorage.setItem(qt,JSON.stringify(s))},[s]);const n=i.useCallback(p=>{let u;if(p&&typeof p.name=="object"&&p.name!==null&&!(p.name instanceof Date)){const O=(p.name.ar||"").toString().trim(),g=(p.name.en||"").toString().trim();u={ar:O||g||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…",en:g||O||"Product"}}else typeof p?.name=="string"?u=p.name.trim()||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…":u="Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";const w={id:"p"+Date.now(),name:u,price:+p?.price||0,stock:+p?.stock||0,status:p?.status||"active"};return r({type:"ADD_PRODUCT",payload:w}),w},[]),o=i.useCallback((p,u)=>{r({type:"UPDATE_PRODUCT",payload:{id:p,...u}})},[]),a=i.useCallback(p=>r({type:"DELETE_PRODUCT",id:p}),[]),d=i.useCallback(p=>{let u;if(p&&typeof p.name=="object"&&p.name!==null){const O=(p.name.ar||"").toString().trim(),g=(p.name.en||"").toString().trim();u=O||g||"Ù…Ø³ØªØ®Ø¯Ù…"}else typeof p?.name=="string"?u=p.name.trim()||"Ù…Ø³ØªØ®Ø¯Ù…":u="Ù…Ø³ØªØ®Ø¯Ù…";const w={id:"u"+Date.now(),name:u,role:p?.role||"user",active:p?.active??!0};return r({type:"ADD_USER",payload:w}),w},[]),l=i.useCallback((p,u)=>{r({type:"UPDATE_USER",payload:{id:p,...u}})},[]),f=i.useCallback(p=>r({type:"DELETE_USER",id:p}),[]),v=i.useCallback(p=>{const u={id:"o"+Date.now(),total:+p.total||0,status:p.status||"pending",customer:p.customer||"Ø¹Ù…ÙŠÙ„",items:+p.items||1};return r({type:"ADD_ORDER",payload:u}),u},[]),b=i.useCallback((p,u)=>{r({type:"UPDATE_ORDER",payload:{id:p,...u}})},[]),y=i.useCallback(p=>r({type:"DELETE_ORDER",id:p}),[]),x={...s,addProduct:n,updateProduct:o,deleteProduct:a,addUser:d,updateUser:l,deleteUser:f,addOrder:v,updateOrder:b,deleteOrder:y};return e.jsx(Hs.Provider,{value:x,children:t})}const Mn=new Or({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:"always",networkMode:"online"},mutations:{retry:0}}}),Wn="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",Fn={home:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",about:"Ù…Ù† Ù†Ø­Ù†",products:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",contact:"Ø§ØªØµÙ„ Ø¨Ù†Ø§",catalog:"Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",offers:"Ø§Ù„Ø¹Ø±ÙˆØ¶",account:"Ø­Ø³Ø§Ø¨ÙŠ",stores:"Ø§Ù„Ù…ØªØ§Ø¬Ø±",myOrders:"Ø·Ù„Ø¨Ø§ØªÙŠ",sellerKyc:"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹",admin:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",orders:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",dashboard:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"},Bn="Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",qn="Ø§Ù„Ø¹Ø±ÙˆØ¶",Vn="Ø§Ù„Ù…ØªØ§Ø¬Ø±",Hn="Ø§Ù„Ø³Ù„Ø©",Kn="Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª",Jn="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ù„Ø©",Gn="Ø§Ù„Ø¯ÙØ¹",Xn="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡",Qn="ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©",Yn="Ø§Ù„Ø«ÙŠÙ…",Zn="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…",ei="ÙØ§ØªØ­",ti="Ø¯Ø§ÙƒÙ†",si="Ø§Ù„Ù†Ø¸Ø§Ù… (ØªÙ„Ù‚Ø§Ø¦ÙŠ)",ri="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",ai="Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",ni="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...",ii="Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©",oi="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±.",li="Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©",ci="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…ÙØ¶Ù„Ø©",di="Ø§Ù„Ù…ÙØ¶Ù„Ø©",ui="Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©",mi="Ø§Ù„Ø³Ø¹Ø±",pi="ØºÙŠØ± Ù…ØªÙˆÙØ±",hi="ØªÙØ§ØµÙŠÙ„",gi="Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",xi="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",fi="Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",yi="Ø¹Ø±Ø¶ Ø³Ø±ÙŠØ¹",bi="Ø¥ØºÙ„Ø§Ù‚",ji="Ø­Ø³Ø§Ø¨ÙŠ",vi="Ù…Ø±Ø­Ø¨Ø§",wi="Ø®Ø±ÙˆØ¬",Si="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©",ki="Ø¨Ø­Ø«",Ni="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹",Ai="Ø§Ù„Ø´Ø­Ù†",Ci="Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©",Ei="Ø§Ù„Ø®ØµÙ…",Ri="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",Ti="ÙƒÙˆØ¯ Ø®ØµÙ…",_i="ØªØ·Ø¨ÙŠÙ‚",Pi="Ø¥Ø²Ø§Ù„Ø© {{code}}",Ii="Ø£Ø¶ÙÙ {{amount}} Ø±.Ø³ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ",Oi="Ø§Ù„ØªØ§Ù„ÙŠ",Li="Ø§Ù„Ø³Ø§Ø¨Ù‚",Di="ØµÙØ­Ø©",Ui="Ù…Ù†",zi="Ù…Ù†ÙØ° Ø¢Ø³ÙŠØ§",$i="Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø¨Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¬Ù…Ù„Ø©",Mi="Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ© Ù…Ù† Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŒ ÙƒÙˆØ±ÙŠØ§ØŒ Ø§Ù„ØµÙŠÙ† ÙˆØ§Ù„Ù…Ø²ÙŠØ¯",Wi="ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†",Fi="ØªØ¹Ø±Ù Ø¹Ù„ÙŠÙ†Ø§",Bi="ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†",qi="ØªØµÙØ­ Ø§Ù„Ø¹Ø±ÙˆØ¶",Vi="Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ",Hi="Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 500 Ø±ÙŠØ§Ù„",Ki="Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©",Ji="Ù…Ù†ØªØ¬Ø§Øª Ø£ØµÙ„ÙŠØ© 100%",Gi="ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹",Xi="Ø®Ù„Ø§Ù„ 2-3 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„",Qi="Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©",Yi="Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©",Zi="Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",eo="Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",to="Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",so="Ø¹Ø±ÙˆØ¶ ÙˆØ®ØµÙˆÙ…Ø§Øª",ro="Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",ao="Ù…Ù† Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",no="Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ø²ÙŠØ¯",io="Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...",oo="Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",lo="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù„Ø§Ù…Ø©",co="Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ù†ØªØ¬Ø§Øª",uo="Ø§Ù„Ø£Ù‚Ù„ Ù…Ù†ØªØ¬Ø§Øª",mo="Ø§Ù„Ø§Ø³Ù… (Ø¹Ø±Ø¨ÙŠ)",po="Ø§Ù„Ø§Ø³Ù… (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)",ho="Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",go="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬",xo="{{count}} Ù…Ù†ØªØ¬",fo="Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§ØªÙƒ",yo="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†",bo="Ø·Ù„Ø¨Ø§ØªÙŠ",jo="ØªØ­Ø¯ÙŠØ«",vo="ÙØ§ØªÙˆØ±Ø©",wo="Ø¹Ù†Ø§ØµØ± Ø¥Ø¶Ø§ÙÙŠØ©",So="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",ko="Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ",No={home:Wn,nav:Fn,catalog:Bn,offers:qn,stores:Vn,cart:Hn,cartTitle:Kn,cartDetails:Jn,checkout:Gn,proceedCheckout:Xn,changeLanguage:Qn,theme:Yn,toggleTheme:Zn,themeLight:ei,themeDark:ti,themeSystemAuto:si,login:ri,register:ai,searchPlaceholder:ni,addToCart:ii,noItems:oi,emptyCart:li,emptyWishlist:ci,wishlist:di,viewWishlist:ui,new:"Ø¬Ø¯ÙŠØ¯",price:mi,outOfStock:pi,details:hi,products:gi,breadcrumbHome:xi,breadcrumbCatalog:fi,quickView:yi,close:bi,account:ji,greet:vi,logout:wi,sidebar:Si,search:ki,itemsTotal:Ni,shipping:Ai,tax:Ci,discount:Ei,grandTotal:Ri,coupon:Ti,apply:_i,removeCoupon:Pi,freeShippingHint:Ii,next:Oi,prev:Li,page:Di,of:Ui,heroTitle:zi,heroSubtitle:$i,heroLead:Mi,heroCtaShop:Wi,heroCtaAbout:Fi,shop_now:Bi,view_offers:qi,featureFreeShippingTitle:Vi,featureFreeShippingDesc:Hi,featureQualityTitle:Ki,featureQualityDesc:Ji,featureFastDeliveryTitle:Gi,featureFastDeliveryDesc:Xi,featuredProducts:Qi,featuredSubtitle:Yi,viewAllProducts:Zi,rating:eo,latestProducts:to,discountProducts:so,blog:ro,fromBlog:ao,readMore:no,loading:io,brandsTitle:oo,searchBrand:lo,mostProducts:co,fewestProducts:uo,nameAR:mo,nameEN:po,viewProducts:ho,noResults:go,productsCount:xo,pleaseLoginToViewOrders:fo,noOrdersYet:yo,myOrders:bo,refresh:jo,invoice:vo,additionalItems:wo,totalLabel:So,mobileNavigation:ko},Ao="Home",Co={home:"Home",about:"About",actions:{add:"Add",add_to_cart:"Add to cart",added:"Added",apply:"Apply",back:"Back",choose:"Choose",clear:"Clear",clear_all:"Clear all",close:"Close",open:"Open",continue_shopping:"Continue shopping",enter_password:"Enter password",log_in_html:'Have an account? <a href="{{ link }}">Log in</a> to check out faster.',log_in:"Sign in",log_out:"Sign out",open_image_in_full_screen:"Open image in full screen",remove:"Remove",remove_discount:"Remove discount {{ code }}",show_all_options:"Show all options",see_items:{one:"See {{ count }} item",other:"See {{ count }} items"},show_filters:"Filter",show_less:"Show less",show_more:"Show more",sign_in_options:"Other sign in options",view_in_your_space:"View in your space",view_all:"View all",more:"More",zoom:"Zoom",close_dialog:"Close dialog",reset:"Reset",enter_using_password:"Enter using password",sign_up:"Sign up",submit:"Submit",view_store_information:"View store information",sort:"Sort"},account:"Account",cart:"Cart"},Eo="Coupon",Ro="Apply",To="Remove {{code}}",_o="Add {{amount}} SAR for free shipping",Po="Next",Io="Previous",Oo="Page",Lo="of",Do="Asia Outlet",Uo="Asian quality at wholesale prices",zo="Discover the best carefully selected Asian products from Japan, Korea, China and more",$o="Shop Now",Mo="About Us",Wo="Shop Now",Fo="View Offers",Bo="Free Shipping",qo="For orders above 500 SAR",Vo="Quality Guarantee",Ho="100% Authentic Products",Ko="Fast Delivery",Jo="Within 2-3 business days",Go="Featured Products",Xo="Top selected Asian products",Qo="View all products",Yo="Rating",Zo="Latest Products",el="Discounts & Offers",tl="Blog",sl="From the Blog",rl="Read more",al="Loading...",nl="Brands",il="Search brand",ol="Most Products",ll="Fewest Products",cl="Name (AR)",dl="Name (EN)",ul="View products",ml="No results",pl="{{count}} products",hl="Please log in to view your orders",gl="No orders yet",xl="My Orders",fl="Refresh",yl="Invoice",bl="additional items",jl="Total",vl="Mobile navigation",wl={home:Ao,nav:Co,coupon:Eo,apply:Ro,removeCoupon:To,freeShippingHint:_o,next:Po,prev:Io,page:Oo,of:Lo,heroTitle:Do,heroSubtitle:Uo,heroLead:zo,heroCtaShop:$o,heroCtaAbout:Mo,shop_now:Wo,view_offers:Fo,featureFreeShippingTitle:Bo,featureFreeShippingDesc:qo,featureQualityTitle:Vo,featureQualityDesc:Ho,featureFastDeliveryTitle:Ko,featureFastDeliveryDesc:Jo,featuredProducts:Go,featuredSubtitle:Xo,viewAllProducts:Qo,rating:Yo,latestProducts:Zo,discountProducts:el,blog:tl,fromBlog:sl,readMore:rl,loading:al,brandsTitle:nl,searchBrand:il,mostProducts:ol,fewestProducts:ll,nameAR:cl,nameEN:dl,viewProducts:ul,noResults:ml,productsCount:pl,pleaseLoginToViewOrders:hl,noOrdersYet:gl,myOrders:xl,refresh:fl,invoice:yl,additionalItems:bl,totalLabel:jl,mobileNavigation:vl},Sl={title:"Ma Boutique",searchPlaceholder:"Rechercher des produitsâ€¦",noResults:"Aucun rÃ©sultat",loading:"Chargementâ€¦"},kl={home:"Accueil",products:"Produits",orders:"Commandes",admin:"Admin",catalog:"Catalogue",offers:"Offres",stores:"Magasins",myOrders:"Mes commandes",sellerKyc:"KYC Vendeur",dashboard:"Tableau de bord"},Nl="Catalogue",Al="Offres",Cl="Magasins",El="Panier",Rl="Panier",Tl="Panier vide",_l="Passer au paiement",Pl="Changer la langue",Il="ThÃ¨me",Ol="Basculer le thÃ¨me",Ll="Clair",Dl="Sombre",Ul="SystÃ¨me (Auto)",zl="Total",$l="Navigation mobile",Ml={customers:{title:"Clients",add:"Ajouter",name:"Nom",email:"E-mail",role:"RÃ´le",status:"Statut",active:"Actif",inactive:"Inactif"}},Wl="Acheter",Fl="Voir les offres",Bl={app:Sl,nav:kl,catalog:Nl,offers:Al,stores:Cl,cart:El,cartTitle:Rl,emptyCart:Tl,proceedCheckout:_l,changeLanguage:Pl,theme:Il,toggleTheme:Ol,themeLight:Ll,themeDark:Dl,themeSystemAuto:Ul,totalLabel:zl,mobileNavigation:$l,admin:Ml,shop_now:Wl,view_offers:Fl},ql={ar:{translation:No},en:{translation:wl},fr:{translation:Bl}},Vl=()=>{try{const t=localStorage.getItem("lang"),s=document?.documentElement?.lang,r=navigator?.language||navigator?.languages?.[0],n=(t||s||r||"ar").slice(0,2).toLowerCase();return["ar","en","fr"].includes(n)?n:"en"}catch{return"ar"}};Ns.use(Er).init({resources:ql,lng:Vl(),fallbackLng:"en",interpolation:{escapeValue:!1},returnNull:!1});function Hl(t={}){const{immediate:s=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:o,onRegisteredSW:a,onRegisterError:d}=t;let l,f;const v=async(y=!0)=>{await f};async function b(){if("serviceWorker"in navigator){if(l=await J(async()=>{const{Workbox:y}=await import("./vendor-CKneRQof.js").then(x=>x.c5);return{Workbox:y}},__vite__mapDeps([2,1,3,4,5,6,7])).then(({Workbox:y})=>new y("/sw.js",{scope:"/",type:"classic"})).catch(y=>{d?.(y)}),!l)return;l.addEventListener("activated",y=>{(y.isUpdate||y.isExternal)&&window.location.reload()}),l.addEventListener("installed",y=>{y.isUpdate||n?.()}),l.register({immediate:s}).then(y=>{a?a("/sw.js",y):o?.(y)}).catch(y=>{d?.(y)})}}return f=b(),v}function Kl(t={}){const{immediate:s=!0,onNeedRefresh:r,onOfflineReady:n,onRegistered:o,onRegisteredSW:a,onRegisterError:d}=t,[l,f]=i.useState(!1),[v,b]=i.useState(!1),[y]=i.useState(()=>Hl({immediate:s,onOfflineReady(){b(!0),n?.()},onNeedRefresh(){f(!0),r?.()},onRegistered:o,onRegisteredSW:a,onRegisterError:d}));return{needRefresh:[l,f],offlineReady:[v,b],updateServiceWorker:y}}function Jl(){const[t,s]=E.useState(!1);return E.useEffect(()=>{const r=()=>{const n=window.scrollY||document.documentElement.scrollTop;s(n>500)};return window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)},[]),t?e.jsx("button",{type:"button",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-5 inset-inline-end-5 z-50 rounded-full bg-slate-900 text-white shadow-lg hover:bg-slate-800 transition p-3","aria-label":"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰",children:"â†‘"}):null}if(typeof window<"u"&&window.AOS&&typeof window.AOS.init=="function")try{window.AOS.init({duration:600,once:!0})}catch{}const Gl=()=>{const{locale:t}=pe();return E.useEffect(()=>{const s=document.documentElement;s.setAttribute("lang",["ar","en","fr"].includes(t)?t:t==="ar"?"ar":"en"),s.setAttribute("dir",t==="ar"?"rtl":"ltr")},[t]),null},Xl=()=>{const t=Ne();return E.useEffect(()=>{const s=r=>{const{type:n="info",title:o,description:a,duration:d}=r.detail||{};(n==="success"?t.success:n==="error"?t.error:n==="warn"?t.warn:t.info)(o,a,d)};return window.addEventListener("toast:show",s),()=>window.removeEventListener("toast:show",s)},[t]),null},Ql=({children:t})=>e.jsx(Ir,{i18n:Ns,children:e.jsx(Br,{children:e.jsx(Mr,{children:e.jsx(Hr,{children:e.jsx(_n,{children:e.jsx(na,{children:e.jsx(In,{children:e.jsx(Dn,{children:e.jsx($n,{children:e.jsx(zr,{children:e.jsxs(Vr,{children:[e.jsx(Gl,{}),e.jsx(Xl,{}),e.jsx(ec,{}),e.jsx(Zl,{}),e.jsx(Jl,{}),t]})})})})})})})})})})}),Yl=Rr([{path:"*",element:e.jsx(Ql,{children:e.jsx(En,{})})}],{future:{v7_startTransition:!0,v7_relativeSplatPath:!0}});Tr.createRoot(document.getElementById("root")).render(e.jsxs(_r,{client:Mn,children:[e.jsx(Pr,{router:Yl,future:{v7_startTransition:!0,v7_relativeSplatPath:!0}}),null]}));function Zl(){return E.useEffect(()=>{const t=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!(typeof navigator<"u"&&typeof navigator.vibrate=="function"))return;const r=()=>{if(!t)try{navigator.vibrate(12)}catch{}};return window.addEventListener("cart:add",r),()=>window.removeEventListener("cart:add",r)},[]),null}function ec(){const t=Ne(),s=E.useRef(null),{updateServiceWorker:r}=Kl({onNeedRefresh(){if(!t?.show||s.current)return;const n=t.show({type:"info",title:"ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯ Ø¬Ø§Ù‡Ø²",description:"Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¢Ø®Ø± Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª.",duration:0,action:{label:"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†",onClick:()=>{if(s.current=null,typeof r=="function")try{r(!0)}catch{}else window.location.reload()}}});s.current=n},onOfflineReady(){t?.success?.("Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„","ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØµÙØ­ Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª",4e3)},onRegisterError(n){console.warn("[PWA] register error",n)}});return E.useEffect(()=>()=>{s.current=null},[]),null}export{ze as A,Na as B,Ca as C,uc as D,Qt as E,Ht as F,Aa as I,Ia as L,Da as P,Ce as S,ke as a,pc as b,ra as c,Yt as d,fe as e,hc as f,X as g,Ea as h,Ra as i,_a as j,Ta as k,cc as l,xe as m,ln as n,gc as o,we as p,zs as q,ie as r,Ne as s,ce as t,pe as u,on as v,ye as w,os as x,dc as y,mc as z};
