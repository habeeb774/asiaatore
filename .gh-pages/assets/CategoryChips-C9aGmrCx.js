import{r as n,u as q,b as M,j as s,n as U,o as $,T as y,l as x,p as l,q as C,t as b,v as k,w as v}from"./vendor.react-BIXKTxlu.js";import{u as J,g as O}from"./index-B9WgXUd4.js";import{C as w}from"./Chip-DBCBBoVO.js";import"./vendor-CKneRQof.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-Dl6I9sMh.js";/* empty css                     */const P='after:content-[" "] after:absolute after:top-0 after:right-0 after:w-8 after:h-full after:pointer-events-none after:bg-gradient-to-l after:from-white after:to-transparent',Y=()=>{const[u,p]=n.useState([]),[j,d]=n.useState(!1),[S,N]=n.useState(null),f=q(),z=M(),h=n.useRef(null),{locale:o}=J(),L=o==="en"?"/en/products":o==="fr"?"/fr/products":"/products",[c,A]=n.useState(!1),g=10;n.useEffect(()=>{d(!0);try{const e=localStorage.getItem("cats_cache");if(e){const r=JSON.parse(e);Array.isArray(r)&&p(r)}}catch{}O.listCategories({withCounts:1}).then(e=>{if(e?.categories){p(e.categories);try{localStorage.setItem("cats_cache",JSON.stringify(e.categories))}catch{}}}).catch(e=>N(e.message)).finally(()=>d(!1))},[]);const i=n.useMemo(()=>{const e=new Map;for(const t of u){const a=t.slug||t.id||t.name?.ar||t.name?.en||JSON.stringify(t);e.has(a)||e.set(a,t)}const r=Array.from(e.values());return r.sort((t,a)=>(a.productCount||0)-(t.productCount||0)||(t.name?.ar||"").localeCompare(a.name?.ar||"","ar")),r},[u]);if(j)return s.jsx("div",{className:"text-xs opacity-60 px-4 py-2",children:"تحميل الفئات..."});if(S)return s.jsx("div",{className:"text-xs text-red-600 px-4 py-2",children:"خطأ الفئات"});if(!i.length)return null;const I=c?i:i.slice(0,g),m=e=>{const r=h.current;if(!r)return;const t=Math.round(r.clientWidth*.8)*(e==="left"?-1:1);r.scrollBy({left:t,behavior:"smooth"})};return s.jsxs("div",{className:"relative",role:"navigation","aria-label":"تصنيفات",children:[s.jsx("button",{type:"button","aria-label":"Scroll right",onClick:()=>m("right"),className:"absolute left-1 top-1/2 -translate-y-1/2 z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden sm:inline-flex",children:s.jsx(U,{size:18})}),s.jsx("button",{type:"button","aria-label":"Scroll left",onClick:()=>m("left"),className:"absolute right-1 top-1/2 -translate-y-1/2 z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden sm:inline-flex",children:s.jsx($,{size:18})}),s.jsxs("div",{ref:h,className:`flex gap-3 overflow-x-auto pb-2 px-2 snap-x snap-mandatory mobile-gutters hide-scrollbar ${P}`,dir:"rtl",children:[I.map(e=>{const t=new URLSearchParams(f.search).get("category")===e.slug||f.pathname.includes(`/category/${e.slug}`),a=(e?.name?.ar||e?.name?.en||e?.slug||"").toLowerCase(),R=(()=>{switch((e.icon||"").toLowerCase().trim()){case"cup-soda":case"soda":case"drink":case"drinks":return v;case"coffee":case"tea":return k;case"cookie":case"cookies":case"biscuit":case"biscuits":return b;case"candy":case"sugar":return C;case"utensils":case"pasta":case"rice":return l;case"store":case"supermarket":return x;case"tag":return y}return/(ماء|مشروب|مشروبات|drinks?|beverages?|water)/.test(a)?v:/(شاي|قهوة|coffee|tea)/.test(a)?k:/(بسكويت|كوكي|كوكيز|biscuits?|cookies?)/.test(a)?b:/(سكر|sugar)/.test(a)?C:/(مكرونة|معكرونة|أرز|ارز|pasta|rice)/.test(a)?l:/(صلصات|مخللات|sauces?|pickles?)/.test(a)?l:/(سوبرماركت|supermarket)/.test(a)?x:y})(),E=e.name?.ar||e.name?.en||e.slug;return s.jsx(w,{className:"snap-start shrink-0",variant:t?"primary":"outline",size:"lg",selected:t,onClick:()=>z(`${L}?category=${encodeURIComponent(e.slug)}&page=1`),"aria-current":t?"page":void 0,children:s.jsxs("span",{"aria-hidden":"true",style:{display:"inline-flex",alignItems:"center",gap:6},children:[e.image?s.jsx("img",{src:e.image,alt:"",style:{width:20,height:20,objectFit:"contain"}}):s.jsx(R,{size:18}),s.jsx("span",{children:E}),typeof e.productCount=="number"&&e.productCount>0&&s.jsxs("span",{style:{fontSize:".72rem",opacity:.75},children:["(",e.productCount,")"]})]})},e.id||e.slug)}),i.length>g&&s.jsx(w,{type:"button",onClick:()=>A(e=>!e),className:"snap-start shrink-0",variant:c?"soft":"outline",size:"md",children:c?o==="ar"?"إخفاء":"Hide":o==="ar"?"عرض المزيد":"Show more"})]})]})};export{Y as default};
