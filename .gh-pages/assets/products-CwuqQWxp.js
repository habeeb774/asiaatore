import{aa as p,a9 as u}from"./vendor.react-BIXKTxlu.js";const y=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"/api",f=(t={})=>Object.entries(t).filter(([,e])=>e!=null&&e!=="").map(([e,n])=>Array.isArray(n)?n.map(r=>`${encodeURIComponent(e)}=${encodeURIComponent(r)}`).join("&"):`${encodeURIComponent(e)}=${encodeURIComponent(n)}`).join("&");async function a(t,e,{signal:n}={}){const r=e?`?${f(e)}`:"",o=await fetch(`${y}${t}${r}`,{method:"GET",credentials:"include",headers:{Accept:"application/json"},signal:n});if(!o.ok){const s=await o.json().catch(()=>({})),c=new Error(s.message||`Request failed: ${o.status}`);throw c.status=o.status,c.body=s,c}return o.json()}const i=t=>["products",{...t}];async function d({queryKey:t,signal:e}){const[,n]=t;return a("/products",n,{signal:e})}function q(t){return p({queryKey:i(t),queryFn:d,placeholderData:e=>e})}const m=t=>["product",t];async function l({queryKey:t,signal:e}){const[,n]=t;return a(`/products/${n}`,void 0,{signal:e})}function $(){const t=u();return e=>t.prefetchQuery({queryKey:m(e),queryFn:l,staleTime:6e4})}function P(t,e){const n=u();return()=>{if(!e)return;const r={...t,page:(Number(t?.page)||1)+1};return n.prefetchQuery({queryKey:i(r),queryFn:d,staleTime:6e4})}}export{$ as a,P as b,q as u};
