import{E as e,N as t,O as n,P as r,w as i}from"./index-HsKwDOAa.js";var a=r(t()),o=r(e()),s=({state:e,onChange:t})=>{let{locale:r}=i(),s=r===`ar`,c=n=>t({...e,...n}),l=()=>t({category:``,sort:`new`,min:``,max:``,rating:``,discount:!1}),[u,d]=(0,a.useState)([]),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(``);(0,a.useEffect)(()=>{let e=!0,t=`pf_cats_cache_v1`,r=Date.now();try{let e=localStorage.getItem(t);if(e){let t=JSON.parse(e);t.expires>r&&Array.isArray(t.data)&&d(t.data)}}catch{}return p(!0),n.listCategories({withCounts:1}).then(n=>{let i=n.categories||[],a=new Map;for(let e of i){if(!e?.slug)continue;a.has(e.slug)||a.set(e.slug,e)}let o=Array.from(a.values()).sort((e,t)=>(t.productCount||0)-(e.productCount||0)||String(e.name?.ar||e.slug).localeCompare(String(t.name?.ar||t.slug),`ar`)).filter(e=>(e.productCount||0)>0);e&&d(o);try{localStorage.setItem(t,JSON.stringify({data:o,expires:r+3e5}))}catch{}}).catch(t=>{e&&h(t.message||`failed`)}).finally(()=>{e&&p(!1)}),()=>{e=!1}},[]);let g=(0,a.useMemo)(()=>u.map(e=>({value:e.slug,label:s?e.name?.ar||e.slug:e.name?.en||e.slug})),[u,s]);return(0,o.jsxs)(`div`,{className:`product-filters`,style:{display:`flex`,flexWrap:`wrap`,gap:`12px`,alignItems:`flex-end`},children:[(0,o.jsxs)(`div`,{className:`filter-group`,children:[(0,o.jsx)(`label`,{htmlFor:`cat`,children:s?`التصنيف`:`Category`}),(0,o.jsxs)(`select`,{id:`cat`,value:e.category,onChange:e=>c({category:e.target.value}),children:[(0,o.jsx)(`option`,{value:``,children:s?`الكل`:`All`}),g.map(e=>(0,o.jsx)(`option`,{value:e.value,children:e.label},e.value))]}),f&&(0,o.jsx)(`div`,{style:{fontSize:12,color:`#888`},children:s?`...جاري التحميل`:`Loading...`}),m&&(0,o.jsx)(`div`,{role:`status`,style:{fontSize:12,color:`#a00`},children:s?`فشل تحميل التصنيفات`:`Failed to load categories`})]}),(0,o.jsxs)(`div`,{className:`filter-group`,children:[(0,o.jsx)(`label`,{htmlFor:`sort`,children:s?`ترتيب`:`Sort`}),(0,o.jsxs)(`select`,{id:`sort`,value:e.sort,onChange:e=>c({sort:e.target.value}),children:[(0,o.jsx)(`option`,{value:`new`,children:s?`الأحدث`:`Newest`}),(0,o.jsx)(`option`,{value:`price-asc`,children:s?`السعر ↑`:`Price ↑`}),(0,o.jsx)(`option`,{value:`price-desc`,children:s?`السعر ↓`:`Price ↓`})]})]}),(0,o.jsxs)(`div`,{className:`filter-group`,children:[(0,o.jsx)(`label`,{children:s?`السعر من`:`Price Min`}),(0,o.jsx)(`input`,{type:`number`,min:`0`,value:e.min||``,onChange:e=>c({min:e.target.value}),placeholder:s?`أدنى`:`Min`,style:{width:100}})]}),(0,o.jsxs)(`div`,{className:`filter-group`,children:[(0,o.jsx)(`label`,{children:s?`إلى`:`To`}),(0,o.jsx)(`input`,{type:`number`,min:`0`,value:e.max||``,onChange:e=>c({max:e.target.value}),placeholder:s?`أقصى`:`Max`,style:{width:100}})]}),(0,o.jsxs)(`div`,{className:`filter-group`,children:[(0,o.jsx)(`label`,{children:s?`التقييم`:`Rating`}),(0,o.jsxs)(`select`,{value:e.rating||``,onChange:e=>c({rating:e.target.value}),children:[(0,o.jsx)(`option`,{value:``,children:s?`الكل`:`All`}),[5,4,3,2,1].map(e=>(0,o.jsx)(`option`,{value:e,children:s?`على الأقل ${e}`:`≥ ${e}`},e))]})]}),(0,o.jsxs)(`div`,{className:`filter-group`,style:{display:`flex`,flexDirection:`column`},children:[(0,o.jsx)(`label`,{children:s?`خصم`:`Discount`}),(0,o.jsx)(`input`,{type:`checkbox`,checked:!!e.discount,onChange:e=>c({discount:e.target.checked})})]}),(0,o.jsx)(`button`,{type:`button`,onClick:l,style:{padding:`6px 14px`,borderRadius:8,border:`1px solid #ccc`,background:`#f8f8f8`,cursor:`pointer`},children:s?`إعادة ضبط`:`Reset`})]})};export{s as t};