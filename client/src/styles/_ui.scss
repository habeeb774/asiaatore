/* UI primitives using design tokens in :root (see _design-system.scss)
   Extended to respect admin-controlled CSS variables (previewable via Settings):
   --ui-button-radius, --ui-button-shadow, --ui-input-radius, --ui-font-family, --ui-base-font-size
*/
/* Button */
.ui-btn {
  --btn-h: 40px;
  --btn-px: var(--space-4, 1rem);
  --btn-radius: var(--ui-button-radius, var(--radius-md, 10px));
  /* allow admin to override default button shadow */
  --btn-shadow: var(--ui-button-shadow, 0 8px 20px rgba(var(--color-primary-rgb, 105,190,60), 0.12));
  --btn-gap: var(--space-2, .5rem);
  --btn-fg: #fff;
  --btn-bg: var(--color-primary, #69be3c);
  --btn-border: transparent;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--btn-gap);
  height: var(--btn-h);
  padding-inline: var(--btn-px);
  border-radius: var(--btn-radius);
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-fg);
  font-weight: 600;
  /* allow admin to set a global font family for UI primitives */
  font-family: var(--ui-font-family, inherit);
  line-height: 1;
  cursor: pointer;
  transition: transform var(--transition-fast, .18s ease), box-shadow var(--transition-fast, .18s ease), opacity var(--transition-fast, .18s ease);
  box-shadow: var(--btn-shadow);
}
.ui-btn:hover { filter: brightness(0.98); }
.ui-btn:active { transform: translateY(0.5px); }
.ui-btn:focus-visible { outline: 2px solid var(--color-ring, #C8A96A); outline-offset: 2px; }
.ui-btn[disabled], .ui-btn.is-disabled { opacity: .6; cursor: not-allowed; }

/* Button variants */
.ui-btn--primary { --btn-bg: var(--color-primary); --btn-fg: #fff; --btn-border: transparent; }
.ui-btn--secondary { --btn-bg: var(--color-primary-alt, #2eafff); --btn-fg: #fff; --btn-border: transparent; }
.ui-btn--accent { --btn-bg: var(--color-accent, #2563eb); --btn-fg: #fff; --btn-border: transparent; }
.ui-btn--danger { --btn-bg: var(--color-danger, #dc2626); --btn-fg: #fff; --btn-border: transparent; }
.ui-btn--outline { --btn-bg: transparent; --btn-fg: var(--color-text, #1f2933); --btn-border: var(--color-border, #e4e7eb); box-shadow: none; }
.ui-btn--ghost { --btn-bg: transparent; --btn-fg: var(--color-text, #1f2933); --btn-border: transparent; box-shadow: none; }
.ui-btn--soft { --btn-bg: color-mix(in srgb, var(--color-primary) 12%, transparent); --btn-fg: var(--color-primary); --btn-border: transparent; }

/* Button sizes */
.ui-btn--sm { --btn-h: 32px; --btn-px: var(--space-3, .75rem); font-size: var(--text-sm, .75rem); }
.ui-btn--md { --btn-h: 40px; --btn-px: var(--space-4, 1rem); font-size: var(--text-sm, .85rem); }
.ui-btn--lg { --btn-h: 46px; --btn-px: var(--space-5, 1.25rem); font-size: var(--text-md, .95rem); }
.ui-btn--icon { --btn-h: 40px; padding: 0; width: var(--btn-h); }

/* Loading state */
.ui-btn.is-loading { position: relative; pointer-events: none; }
.ui-btn.is-loading .ui-spinner { inline-size: 1em; block-size: 1em; border-radius: 50%; border: 2px solid currentColor; border-inline-start-color: transparent; animation: ui-spin .9s linear infinite; }
@keyframes ui-spin { to { transform: rotate(360deg); } }

/* Badge */
.ui-badge {
  display: inline-flex; align-items: center; gap: .35rem;
  padding: .15rem .5rem; border-radius: 999px; font-weight: 700; font-size: var(--text-xs, .7rem);
  background: var(--color-bg-alt, #f6f7f9); color: var(--color-text, #1f2933); border: 1px solid var(--color-border, #e4e7eb);
}
.ui-badge--sm { padding: .1rem .45rem; font-size: var(--text-xs, .65rem); }
.ui-badge--md { /* default size, explicit class for consistency */ padding: .15rem .5rem; font-size: var(--text-xs, .7rem); }
.ui-badge--lg { padding: .25rem .65rem; font-size: var(--text-sm, .8rem); }
.ui-badge--neutral { background: #f1f5f9; color: #0f172a; border-color: #e2e8f0; }
.ui-badge--info { background: rgba(37,99,235,.12); color: #1e3a8a; border-color: rgba(37,99,235,.24); }
.ui-badge--success { background: rgba(34,197,94,.12); color: #065f46; border-color: rgba(16,185,129,.24); }
.ui-badge--warning { background: rgba(245,158,11,.12); color: #92400e; border-color: rgba(245,158,11,.24); }
.ui-badge--danger { background: rgba(220,38,38,.12); color: #991b1b; border-color: rgba(220,38,38,.24); }

/* Card */
.ui-card { background: var(--color-surface, #fff); color: var(--color-text, #1f2933); border: 1px solid var(--color-border, #e4e7eb); border-radius: var(--radius-lg, 16px); box-shadow: 0 10px 24px -14px rgba(0,0,0,.18); }
.ui-card--outline { box-shadow: none; }
.ui-card--flat { box-shadow: none; border-color: var(--color-border-soft, #edf0f3); }
.ui-card--ghost { background: transparent; border-color: transparent; box-shadow: none; }
.ui-card__header { padding: var(--space-4, 1rem); border-block-end: 1px solid var(--color-border, #e4e7eb); }
.ui-card__title { font-weight: 700; font-size: var(--text-lg, 1.15rem); margin: 0; font-family: var(--font-serif, inherit); }
.ui-card__content { padding: var(--space-4, 1rem); }

/* Chip */
.ui-chip {
  --chip-bg: #fff; --chip-fg: var(--color-text, #1f2933); --chip-br: var(--color-border, #e4e7eb);
  display: inline-flex; align-items: center; gap: .5rem; padding: .35rem .75rem; border-radius: 999px;
  border: 1px solid var(--chip-br); background: var(--chip-bg); color: var(--chip-fg);
  font-weight: 700; font-size: var(--text-sm, .85rem); cursor: pointer; transition: background var(--transition-fast, .18s ease), color var(--transition-fast, .18s ease), border-color var(--transition-fast, .18s ease);
}
.ui-chip:hover { background: var(--color-bg-alt, #f6f7f9); }
.ui-chip--sm { padding: .25rem .6rem; font-size: var(--text-xs, .75rem); }
.ui-chip--lg { padding: .5rem .9rem; font-size: var(--text-md, .95rem); }
.ui-chip--primary { --chip-bg: color-mix(in srgb, var(--color-primary) 12%, transparent); --chip-fg: var(--color-primary); --chip-br: color-mix(in srgb, var(--color-primary) 40%, transparent); }
.ui-chip--outline { --chip-bg: transparent; --chip-fg: var(--color-text); --chip-br: var(--color-border); }
.ui-chip.is-selected { box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-primary) 40%, transparent); }
.ui-chip__close { inline-size: 1.1em; block-size: 1.1em; border-radius: 50%; display: grid; place-items: center; background: transparent; border: 0; color: inherit; }
.ui-chip__close:hover { background: rgba(0,0,0,.06); }

/* Skeleton */
.ui-skeleton { position: relative; overflow: hidden; background: var(--color-border-soft, #edf0f3); border-radius: var(--radius-sm, 6px); }
.ui-skeleton::after { content: ""; position: absolute; inset: 0; transform: translateX(-100%); background: linear-gradient(90deg, transparent, rgba(255,255,255,.6), transparent); animation: ui-shimmer 1.3s infinite; }
.ui-skeleton--sm { height: .75rem; }
.ui-skeleton--md { height: 1rem; }
.ui-skeleton--lg { height: 1.25rem; }
.ui-skeleton--text { height: 1em; border-radius: 4px; }
.ui-skeleton--circle { border-radius: var(--radius-full, 9999px); aspect-ratio: 1 / 1; }
.ui-skeleton--static::after { animation: none; opacity: 0; }
@keyframes ui-shimmer { 100% { transform: translateX(100%); } }

/* Form inputs */
.ui-input {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .45rem .75rem;
  border-radius: var(--ui-input-radius, var(--radius-md, 10px));
  border: 1px solid var(--color-border, #e4e7eb);
  background: var(--color-surface, #fff);
  color: var(--color-text);
  /* base font-size can be controlled by admin preview */
  font-size: var(--ui-base-font-size, var(--text-base, .85rem));
  line-height: 1;
  transition: box-shadow var(--transition-fast,.18s) , border-color var(--transition-fast,.18s), background var(--transition-fast,.18s);
}
.ui-input:focus-within { box-shadow: 0 6px 18px -6px rgba(0,0,0,.06); border-color: color-mix(in srgb, var(--color-primary) 40%, transparent); }
.ui-input input, .ui-input textarea, .ui-input select {
  border: 0; background: transparent; color: inherit; font: inherit; outline: none; width: 100%; padding: 0; margin: 0;
}
.ui-input--sm { padding: .25rem .5rem; font-size: var(--text-sm, .75rem); }
.ui-input--lg { padding: .65rem 1rem; font-size: var(--text-md, .95rem); }

/* Utility mapping classes for JS primitives (keeps old names working) */
/* .ui-btn--primary is defined above; this comment is a placeholder. */

/* Responsive helpers for admin Settings form */
.settings-form {
  /* Defaults: single column on very small screens */
  --cols-2: 1fr;
  --cols-3: 1fr;
  --cols-4-min: 1fr;
}

/* ≥640px (sm) */
@media (min-width: 640px) {
  .settings-form {
    --cols-2: 1fr 1fr;
    --cols-3: repeat(2, minmax(0, 1fr));
    --cols-4-min: repeat(2, minmax(140px, 1fr));
  }
}

/* ≥768px (md) */
@media (min-width: 768px) {
  .settings-form {
    --cols-3: repeat(3, minmax(0, 1fr));
  }
}

/* ≥1024px (lg) */
@media (min-width: 1024px) {
  .settings-form {
    --cols-4-min: repeat(4, minmax(140px, 1fr));
  }
}
