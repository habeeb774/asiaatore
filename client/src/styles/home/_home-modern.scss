/* HomePage Modern Styles - Modern overhaul and enhanced components */
@use '../_variables' as *;
@use '../_mixins' as *;
@use './_shared-components' as shared;
@use './_shared-product-card' as shared-product;

/* Modern Overhaul Layer */
.home-page-wrapper {
  --section-gap: var(--space-section-gap);
  padding: 5px 0 2px;
  font-family: var(--font-sans);
  background: var(--color-bg);
  color: var(--color-text);
}

/* Uniform section spacing */
.home-page-wrapper .section-padding {
  /* Unified vertical rhythm â‰ˆ py-20 (5rem) */
  padding-block: 5rem;
  position: relative;
  isolation: isolate;
}

/* Container modernization */
.home-page-wrapper .container-custom {
  max-width: var(--layout-max);
  padding-inline: var(--layout-padding-x);
  margin-inline: auto;
}

/* Section head refactor */
.home-section-head__title {
  font: var(--weight-bold) var(--text-h2)/1.15 var(--font-sans);
  letter-spacing: -0.5px;
  color: var(--color-text);
  margin: 0 0 .6rem;
}
.home-section-head__subtitle {
  font: var(--weight-regular) var(--text-section)/1.55 var(--font-sans);
  color: var(--color-text-soft);
  max-width: 56ch;
  margin: 0 auto;
}

/* Product grid modernization */
.home-products .featured-grid {
  @extend .grid-base;
  gap: 1.5rem; /* ~ gap-6 */
  grid-template-columns: repeat(auto-fill,minmax(min(100%,210px),1fr));
  align-items: stretch;
}

/* Category grid and cards */
.cats-grid {
  @extend .grid-base;
  gap: 1.25rem;
  grid-template-columns: repeat(auto-fill, minmax(min(100%, 180px), 1fr));
  align-items: stretch;
}

.cat-card {
  @extend .card-base;
  @include shared.card-hover;
  display: block;
  position: relative;
  border-radius: 18px;
  overflow: hidden;
  background: var(--grad-soft);
  box-shadow: var(--shadow-xs);
  transition: transform var(--transition-md), box-shadow var(--transition-md);
}

.cat-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
}
.cat-card__media { position: relative; aspect-ratio: 4 / 3; background: #f3f4f6; }
.cat-card__media img { width: 100%; height: 100%; object-fit: cover; display: block; }
.cat-card__placeholder { width: 100%; height: 100%; display: grid; place-items: center; font-weight: 800; font-size: 2rem; color: var(--color-primary); }
.cat-card__overlay {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: .75rem .85rem;
  background: linear-gradient(180deg, rgba(0,0,0,0) 40%, rgba(0,0,0,.55));
  color: #fff;
}
.cat-card__title { font: 700 var(--text-sm)/1.2 var(--font-sans); text-shadow: 0 2px 10px rgba(0,0,0,.35); }
.cat-card__badge {
  margin-top: .35rem;
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  font: 600 var(--text-xs)/1 var(--font-sans);
  background: rgba(255,255,255,.16);
  border: 1px solid rgba(255,255,255,.22);
  color: #fff;
  padding: .35rem .55rem;
  border-radius: 999px;
  backdrop-filter: saturate(140%) blur(4px);
}

/* Product card redesign (progressive enhancement; keeps old classes) */
.home-products .product-card {
  @include shared-product.product-card-base;
  @include shared.card-hover;
  position: relative;
  display: flex;
  flex-direction: column;
  background: var(--color-surface);
  border: 1px solid var(--color-border-soft);
  border-radius: var(--radius-lg);
  padding: .95rem .95rem 1.05rem;
  min-height: 100%;
  box-shadow: var(--shadow-xs);
  transition: box-shadow var(--transition-md), transform var(--transition-md), border-color var(--transition-fast);
}

.home-products .product-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-6px);
  border-color: var(--color-border);
}
.home-products .product-card .product-image {
  position: relative;
  aspect-ratio: 1/1;
  border-radius: var(--radius-md);
  overflow: hidden;
  background: var(--grad-soft);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: .55rem;
}
.home-products .product-card .product-image img { width: 100%; height: 100%; object-fit: cover; display: block; }

/* Discount & status badges unify */
.home-products .product-card .discount-badge,
.home-products .product-card .badge,
.home-products .product-card .gallery-indicator {
  position: absolute;
  top: .55rem;
  inset-inline-end: .55rem;
  background: var(--grad-primary);
  color: #fff;
  font: 600 var(--text-xs)/1 var(--font-sans);
  padding: .35rem .55rem;
  border-radius: var(--radius-md);
  letter-spacing: .2px;
  box-shadow: 0 4px 10px -4px rgba(var(--color-primary-rgb),.4);
}
.home-products .product-card .discount-badge { background: rgba(var(--color-primary-rgb), .9); }

/* Title clamp refinement */
.home-products .product-card .product-title {
  font: 600 var(--text-sm)/1.4 var(--font-sans);
  margin: 0;
  color: var(--color-text);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2; /* Non-standard fallback awareness */
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-height: calc(var(--text-sm) * 1.4 * 2 + 2px);
}

.home-products .product-card .rating-row { margin-top: .15rem; }
.home-products .product-card .price-row { display: flex; align-items: baseline; gap: .45rem; margin-top: .3rem; }
.home-products .product-card .price-row .price { font: 700 var(--text-md)/1 var(--font-sans); color: var(--color-primary); }
.home-products .product-card .price-row .old { font: 500 var(--text-xs)/1 var(--font-sans); color: var(--color-text-faint); text-decoration: line-through; }

.home-products .product-card .actions { display: flex; gap: .5rem; margin-top: auto; }
.home-products .product-card .actions button,
.home-products .product-card .actions a { flex: 1; }
.home-products .product-card .actions button.primary { @supports (background: paint(worklet)) { } }

/* Hover overlay subtle (reuse existing .product-overlay if present) */
.home-products .product-card .product-overlay { position: absolute; inset: 0; background: linear-gradient(180deg,rgba(0,0,0,0) 20%,rgba(0,0,0,.35)); opacity: 0; transition: opacity var(--transition-md); }
.home-products .product-card:hover .product-overlay { opacity: 1; }

/* Refine hero */
.home-hero { position: relative; overflow: hidden; }
.home-hero__title { font: var(--weight-bold) var(--text-h1)/1.05 var(--font-sans); letter-spacing: -1px; }
.home-hero__subtitle { display: block; font: var(--weight-semibold) var(--text-h2)/1.2 var(--font-sans); margin-top: .35rem; color: var(--color-primary-alt); }
.home-hero__lead { font: var(--weight-light) var(--text-section)/1.7 var(--font-sans); max-width: 52ch; margin-top: .9rem; }
.home-hero__actions { display: flex; gap: .75rem; margin-top: 1.25rem; }
.home-hero__btn { font-size: var(--text-sm); }
.home-hero__visual { position: relative; }
.home-hero__shape { position: absolute; inset: 0; mix-blend-mode: overlay; pointer-events: none; }

/* Feature cards */
.home-features__grid {
  @extend .grid-base;
  gap: 1.5rem;
  grid-template-columns: repeat(auto-fill,minmax(min(100%,180px),1fr));
}

.home-feature {
  @extend .card-base;
  @include shared.card-hover;
  background: var(--grad-soft);
  border: 1px solid var(--color-border-soft);
  border-radius: var(--radius-lg);
  padding: 1.1rem .95rem 1.15rem;
  position: relative;
  box-shadow: var(--shadow-xs);
  transition: box-shadow var(--transition-fast), transform var(--transition-fast);
}

.home-feature:hover {
  box-shadow: var(--shadow-sm);
  transform: translateY(-4px);
}
.home-feature__icon { width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; background: rgba(var(--color-primary-rgb),.08); border-radius: var(--radius-md); color: var(--color-primary); margin-bottom: .65rem; }
.home-feature__title { font: 600 var(--text-sm)/1.3 var(--font-sans); margin: 0 0 .4rem; }
.home-feature__text { font: 400 var(--text-xs)/1.5 var(--font-sans); color: var(--color-text-soft); margin: 0; }

/* Blog preview */
.blog-preview-grid {
  @extend .grid-base;
  gap: 1.5rem;
  grid-template-columns: repeat(auto-fill,minmax(min(100%,260px),1fr));
}

.blog-card {
  @extend .card-base;
  @include shared.card-hover;
  display: flex;
  flex-direction: column;
  background: var(--color-surface);
  border: 1px solid var(--color-border-soft);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-xs);
  transition: box-shadow var(--transition-fast), transform var(--transition-fast);
}

.blog-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-6px);
}
.blog-card__media { aspect-ratio: 16/10; background: var(--grad-soft); position: relative; overflow: hidden; }
.blog-card__media img { width: 100%; height: 100%; object-fit: cover; display: block; }
.blog-card__body { padding: .9rem .95rem 1.1rem; display: flex; flex-direction: column; gap: .55rem; }
.blog-card__title { font: 600 var(--text-sm)/1.35 var(--font-sans); margin: 0; }
.blog-card__excerpt { font: 400 var(--text-xs)/1.55 var(--font-sans); color: var(--color-text-soft); margin: 0; }
.blog-card__more { font: 600 var(--text-xs)/1 var(--font-sans); color: var(--color-primary); text-decoration: none; margin-top: .25rem; transition: color var(--transition-fast); }
.blog-card__more:hover { color: var(--color-primary-alt); }

/* Buttons refine (progressive override) */
.btn-primary {
  @extend .btn-primary;
  background: var(--grad-primary);
  border: 0;
}

.btn-secondary {
  @extend .btn-secondary;
  background: rgba(var(--color-primary-rgb),.08);
  border: 1px solid rgba(var(--color-primary-rgb),.15);
  color: var(--color-primary);
  transition: background var(--transition-fast), color var(--transition-fast);
}

.btn-secondary:hover {
  background: rgba(var(--color-primary-rgb),.12);
  color: var(--color-primary);
}

/* Responsive tweaks */
@media (max-width: 680px) {
  .home-hero__actions { flex-wrap: wrap; }
  .home-hero__title { font-size: calc(var(--text-xl) * .9); }
  .home-products .featured-grid { grid-template-columns: repeat(auto-fill,minmax(min(100%,160px),1fr)); padding: 0; }
  /* Enforce min height and object-fit on small screens for images */
  .home-products .product-card .product-image { min-height: 200px; }
  .home-products .product-card .product-image img { object-fit: cover; }
  .cats-grid .cat-card__media { min-height: 200px; }
  .cats-grid .cat-card__media img { object-fit: cover; }
}

/* Force 2 columns on very small screens for denser layout */
@media (max-width: 420px) {
  .home-products .featured-grid { grid-template-columns: repeat(2, 1fr) !important; }
  .cats-grid { grid-template-columns: repeat(2, 1fr) !important; }
}