const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor.motion-CEWeT_EF.js","assets/vendor.react-BYd2qOD7.js","assets/vendor-B1AZ7KNd.js","assets/vendor.router-BdFOcp8q.js","assets/vendor.i18next-COqwnjR1.js","assets/vendor.zustand-BuMo4m-J.js","assets/vendor.tanstack-K6OTystZ.js","assets/vendor.leaflet-DeoKySpZ.js","assets/Home-kvrYEkTf.js","assets/ProductCard-BOYIxbom.js","assets/LazyImage-DU_XlSwx.js","assets/Home-Dam-pyhB.css","assets/Cart-kXnZL2Nx.js","assets/vendor-B1-rhOTE.css","assets/CheckoutPage-DRiqVrda.js","assets/reactLeafletCompat-DEJJQ2L-.js","assets/paymentService-B8T7E9Nq.js","assets/apiService-DNwSxsHw.js","assets/index-D2Vvpq6p.js","assets/ResetPasswordPage-as82_sdc.js","assets/VerifyEmailPage-DiyvGywP.js","assets/Orders-BBFsvwNg.js","assets/invoiceService-BN1qyjVf.js","assets/MyOrders-tfo6ISpQ.js","assets/OrderDetails-DJ6-QLKY.js","assets/AdminDashboard-CUKKkqjq.js","assets/AdminPage-ZStTfICb.css","assets/ProductInventory-BGXW66fr.js","assets/Orders-xUzC4QRl.js","assets/Modal-B0gOZ9wp.js","assets/Products-CxdD7As7.js","assets/products-Dr55B0VG.js","assets/Invoices-00C2vYCh.js","assets/Marketing-BmPtW4HI.js","assets/Apps-89Umikuw.js","assets/Integrations-B4fZ643P.js","assets/SellerDashboard-BogZn74X.js","assets/StoreContext-CpbFIqdO.js","assets/DeliveryDashboard-CXhuqHHm.js","assets/badge-BxPRoUlF.js","assets/RoutePlanner-DgtsbYSf.js","assets/ProductDetailPage-CPEqGpz1.js","assets/ProductDetailPage-B1oiAMKh.css","assets/StoresPage-yQPTtoNl.js","assets/OffersPage-BEaPlnJO.js","assets/ProductGridSkeleton-CrsfAGvV.js","assets/InvoiceViewer-CvtvDGLa.js","assets/CatalogPage-mya5ggdK.js","assets/Legal-CNix48uC.js","assets/Products-D8FsC3yY.js","assets/Chat-DRt3a8rt.js","assets/StyleGuide-DPnm2PRD.js","assets/Profile-D86MXkCJ.js","assets/ProductManager-DMA1rNX6.js","assets/OrderTracker-BuEq9DzH.js","assets/Addresses-CJ7a4bMD.js","assets/SellerKyc-Dv48CDP3.js","assets/AdminKycReview-D-HqS27M.js","assets/Map-Dy-CKcbN.js","assets/History-DxQsNUoi.js","assets/Availability-1fdX9DSB.js","assets/DeliverySummary-Dypzti_O.js","assets/UIPreview-XtWlGabF.js","assets/Chip-CXgHS-z1.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,R as P,u as ue,b as Oe,c as Vs,d as Hs,L as pe,S as Gt,e as bs,H as js,P as Ie,B as ws,f as Jt,h as _e,C as Ft,i as Re,X as Le,M as Ss,k as Ks,l as Gs,m as es,U as ks,n as Js,o as Es,p as Pe,q as Xs,t as Qs,T as As,v as Ue,w as ts,x as ss,y as rs,z as ns,A as Ys,D as Zs,E as er,G as tr,N as de,F as ze,I as sr,J as rr,K as nr,O as ar,Q as ir,V as or,W as as,Y as lr,Z as cr,_ as dr,$ as ur,a0 as pr,a1 as mr,a2 as hr,a3 as gr,a4 as xr,a5 as fr,a6 as yr,a7 as vr,a8 as br,a9 as k,aa as jr,ab as wr,ac as Sr,ad as kr,ae as Er,af as Ar,ag as Nr,ah as Cr}from"./vendor.react-BYd2qOD7.js";import{_ as J,b as Tr}from"./vendor.tanstack-K6OTystZ.js";import{b_ as Xt,b$ as _r}from"./vendor-B1AZ7KNd.js";import{p as Rr}from"./vendor.zustand-BuMo4m-J.js";/* empty css                     */import{i as Ns}from"./vendor.i18next-COqwnjR1.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.leaflet-DeoKySpZ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const is="https://my-store-backend-production.up.railway.app/api";let Ae="/api";if(is.trim()){const t=is.replace(/\/$/,"");if(t.startsWith("/"))Ae=t;else try{Ae=new URL(t).origin}catch{Ae=t}}const Pr=(()=>{const s=Number("10000");return Number.isFinite(s)&&s>0?s:12e3})();async function L(t,s={}){const r=Ae+t;let i,o=null;try{o=localStorage.getItem("my_store_token")}catch{}const u={...s.body instanceof FormData?{}:{"Content-Type":"application/json"},...s.headers||{}};o&&(u.Authorization=`Bearer ${o}`);const d=new AbortController,b=d.signal,y=t.startsWith("/auth"),g=t==="/events"||t==="/api/events"||r.endsWith("/api/events"),v=typeof s.timeout=="number"?s.timeout:Pr;let x=null;!g&&v>0&&(x=setTimeout(()=>{try{d.abort("timeout")}catch{}},v));try{i=await fetch(r,{headers:u,signal:b,...s,...y?{credentials:"include"}:{}})}catch(l){const c=l&&(l.name==="AbortError"||l==="timeout")?`Timeout after ${v}ms`:l?.message||"Unknown error";throw Object.assign(new Error("Network error: "+c),{code:"NETWORK",reason:c})}finally{x&&clearTimeout(x)}if(i.status===401&&!s._retry)try{const l=await fetch(Ae+"/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(l.ok){const c=await l.json();if(c?.accessToken){try{localStorage.setItem("my_store_token",c.accessToken)}catch{}const w={...u,Authorization:`Bearer ${c.accessToken}`},I=await fetch(r,{headers:w,...s,_retry:!0});if(!I.ok)throw new Error(`API Error ${I.status} after refresh`);return I.json()}}}catch{}if(!i.ok){let l="",c;try{l=await i.text()}catch{}if(l)try{c=JSON.parse(l)}catch{}const w=(s.method||"GET").toUpperCase(),I=`API Error ${i.status} ${i.statusText} (${w} ${t})`+(c?.error?` code=${c.error}`:"");if(s&&s.suppressLog,c&&typeof c=="object")return Promise.reject(Object.assign(new Error(I),{code:c.error,data:c,status:i.status}));throw new Error(I)}return i.json()}const Y={request:L,listProducts:()=>L("/products"),getProduct:t=>L(`/products/${t}`),searchProducts:t=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,i)}),L("/products"+(s.toString()?`?${s.toString()}`:""))},createProduct:t=>L("/products",{method:"POST",body:JSON.stringify(t)}),updateProduct:(t,s)=>L(`/products/${t}`,{method:"PUT",body:JSON.stringify(s)}),deleteProduct:t=>L(`/products/${t}`,{method:"DELETE"}),listOffers:()=>L("/products/offers"),createProductForm:t=>L("/products",{method:"POST",body:t}),updateProductForm:(t,s)=>L(`/products/${encodeURIComponent(t)}`,{method:"PUT",body:s}),listOrders:t=>L("/orders"+(t?`?userId=${encodeURIComponent(t)}`:"")),getOrder:t=>L(`/orders/${t}`),createOrder:t=>L("/orders",{method:"POST",body:JSON.stringify(t)}),updateOrder:(t,s)=>L(`/orders/${t}`,{method:"PATCH",body:JSON.stringify(s||{})}),authLogin:(t,s)=>L("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s}),credentials:"include"}),authRegister:(t,s,r)=>L("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:s,name:r}),credentials:"include"}),authLogout:()=>L("/auth/logout",{method:"POST",credentials:"include"}),me:()=>L("/auth/me"),meUpdate:t=>L("/auth/me",{method:"PATCH",body:JSON.stringify(t||{})}),wishlistList:()=>L("/wishlist"),wishlistAdd:t=>L("/wishlist",{method:"POST",body:JSON.stringify({productId:t})}),wishlistRemove:t=>L(`/wishlist/${t}`,{method:"DELETE"}),reviewsModerationList:()=>L("/reviews/moderation"),reviewModerate:(t,s)=>L(`/reviews/${encodeURIComponent(t)}/moderate`,{method:"POST",body:JSON.stringify({action:s})}),reviewsListForProduct:t=>L(`/reviews?productId=${encodeURIComponent(t)}`),cartList:()=>L("/cart"),cartSet:(t,s)=>L("/cart/set",{method:"POST",body:JSON.stringify({productId:t,quantity:s})}),cartRemoveItem:t=>L(`/cart/item/${encodeURIComponent(t)}`,{method:"DELETE"}),cartMerge:t=>L("/cart/merge",{method:"POST",body:JSON.stringify({items:t})}),cartClear:()=>L("/cart",{method:"DELETE"}),bankConfirm:(t,s)=>L("/pay/bank/confirm",{method:"POST",body:JSON.stringify({orderId:t,reference:s})}),bankReject:(t,s)=>L("/pay/bank/reject",{method:"POST",body:JSON.stringify({orderId:t,reason:s})}),listCategories:(t,s)=>{const r=new URLSearchParams,i=t||{};return i.withCounts&&r.append("withCounts",String(i.withCounts)),L("/categories"+(r.toString()?`?${r.toString()}`:""),s||{})},getCategoryBySlug:t=>L(`/categories/slug/${encodeURIComponent(t)}`),categoryCreate:t=>t instanceof FormData?L("/categories",{method:"POST",body:t}):L("/categories",{method:"POST",body:JSON.stringify(t)}),categoryUpdate:(t,s)=>s instanceof FormData?L(`/categories/${encodeURIComponent(t)}`,{method:"PUT",body:s}):L(`/categories/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(s)}),categoryDelete:t=>L(`/categories/${encodeURIComponent(t)}`,{method:"DELETE"}),createCategory:function(t){return this.categoryCreate(t)},createCategoryForm:function(t){return this.categoryCreate(t)},updateCategory:function(t,s){return this.categoryUpdate(t,s)},updateCategoryForm:function(t,s){return this.categoryUpdate(t,s)},deleteCategory:function(t){return this.categoryDelete(t)},settingsGet:()=>L("/settings"),settingsUpdate:t=>L("/settings",{method:"PATCH",body:JSON.stringify(t||{})}),settingsUploadLogo:t=>{const s=new FormData;return s.append("logo",t),L("/settings/logo",{method:"POST",body:s})},whatsappHealth:(t={})=>L("/invoices/_whatsapp",t||{}),whatsappSendInvoiceByOrder:t=>L(`/invoices/by-order/${encodeURIComponent(t)}/whatsapp`,{method:"POST"}),envGet:()=>L("/env"),envUpdate:(t,s)=>L("/env",{method:"PATCH",body:JSON.stringify({scope:t,entries:s})}),envDbTest:t=>L("/env/db/test",{method:"POST",body:JSON.stringify(t||{})}),brandsList:()=>L("/brands"),marketingFeatures:()=>L("/marketing/features"),marketingBanners:()=>L("/marketing/banners"),marketingAppLinks:()=>L("/marketing/app-links"),marketingTrack:t=>L("/marketing/track",{method:"POST",body:JSON.stringify(t||{})}),marketingMetrics:(t=30)=>L(`/marketing/metrics?days=${encodeURIComponent(t)}`),marketingFeatureCreate:t=>L("/marketing/features",{method:"POST",body:JSON.stringify(t||{})}),marketingFeatureUpdate:(t,s)=>L(`/marketing/features/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingFeatureDelete:t=>L(`/marketing/features/${encodeURIComponent(t)}`,{method:"DELETE"}),marketingBannerCreate:t=>L("/marketing/banners",{method:"POST",body:JSON.stringify(t||{})}),marketingBannerUpdate:(t,s)=>L(`/marketing/banners/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingBannerDelete:t=>L(`/marketing/banners/${encodeURIComponent(t)}`,{method:"DELETE"}),marketingAppLinkCreate:t=>L("/marketing/app-links",{method:"POST",body:JSON.stringify(t||{})}),marketingAppLinkUpdate:(t,s)=>L(`/marketing/app-links/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingAppLinkDelete:t=>L(`/marketing/app-links/${encodeURIComponent(t)}`,{method:"DELETE"}),listAds:()=>L("/ads"),createAd:t=>L("/ads",{method:"POST",body:JSON.stringify(t)}),updateAd:(t,s)=>L(`/ads/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s)}),deleteAd:t=>L(`/ads/${encodeURIComponent(t)}`,{method:"DELETE"}),searchTypeahead:t=>L(`/search/typeahead?q=${encodeURIComponent(t||"")}`),catalogSummary:()=>L("/products/catalog/summary"),tierList:t=>L(`/tier-prices/products/${encodeURIComponent(t)}/tier-prices`),tierCreate:(t,s)=>L(`/tier-prices/products/${encodeURIComponent(t)}/tier-prices`,{method:"POST",body:JSON.stringify(s||{})}),tierUpdate:(t,s)=>L(`/tier-prices/tier-prices/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),tierDelete:t=>L(`/tier-prices/tier-prices/${encodeURIComponent(t)}`,{method:"DELETE"}),deliveryList:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,String(i))}),L("/delivery/orders"+(s.toString()?`?${s.toString()}`:""))},deliveryAccept:t=>L(`/delivery/orders/${encodeURIComponent(t)}/accept`,{method:"POST"}),deliveryReject:t=>L(`/delivery/orders/${encodeURIComponent(t)}/reject`,{method:"POST"}),deliveryStart:t=>L(`/delivery/orders/${encodeURIComponent(t)}/start`,{method:"POST"}),deliveryComplete:(t,s)=>s instanceof FormData?L(`/delivery/orders/${encodeURIComponent(t)}/complete`,{method:"POST",body:s}):L(`/delivery/orders/${encodeURIComponent(t)}/complete`,{method:"POST",body:JSON.stringify(s||{})}),deliveryFail:(t,s)=>L(`/delivery/orders/${encodeURIComponent(t)}/fail`,{method:"POST",body:JSON.stringify({reason:s})}),deliveryLocation:(t,s)=>L(`/delivery/orders/${encodeURIComponent(t)}/location`,{method:"POST",body:JSON.stringify(s||{})}),deliveryStatusPatch:(t,s)=>L(`/delivery/orders/${encodeURIComponent(t)}/status`,{method:"PATCH",body:JSON.stringify({status:s})}),deliveryOtpGenerate:t=>L(`/delivery/orders/${encodeURIComponent(t)}/otp/generate`,{method:"POST"}),deliveryOtpConfirm:(t,s)=>L(`/delivery/orders/${encodeURIComponent(t)}/otp/confirm`,{method:"POST",body:JSON.stringify({code:s})}),deliverySignature:(t,s)=>L(`/delivery/orders/${encodeURIComponent(t)}/signature`,{method:"POST",body:s}),deliveryProfileGet:()=>L("/delivery/me/profile"),deliveryProfileUpdate:t=>L("/delivery/me/profile",{method:"PATCH",body:JSON.stringify(t||{})}),deliveryHistory:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,String(i))}),L("/delivery/orders/history"+(s.toString()?`?${s.toString()}`:""))},shippingQuote:t=>L("/shipping/quote",{method:"POST",body:JSON.stringify({address:t||{}})}),orderShipments:(t,s={})=>L(`/orders/${encodeURIComponent(t)}/ship`+(s.refresh?"?refresh=1":"")),setupStatus:()=>L("/setup/status"),setupAdmin:t=>L("/setup/admin",{method:"POST",body:JSON.stringify(t||{})}),inventoryList:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,String(i))}),L("/inventory"+(s.toString()?`?${s.toString()}`:""))},inventoryByProduct:t=>L(`/inventory/${encodeURIComponent(t)}`),inventoryLowStock:()=>L("/inventory/low-stock"),inventoryAdjust:(t,s)=>L(`/inventory/${encodeURIComponent(t)}/update`,{method:"POST",body:JSON.stringify(s||{})}),inventoryReserve:(t,s,r=null)=>L("/inventory/reserve",{method:"POST",body:JSON.stringify({order_id:t,items:s,warehouse_id:r})}),inventoryRelease:t=>L("/inventory/release",{method:"POST",body:JSON.stringify({order_id:t})}),reportInventoryMovement:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,String(i))}),L("/reports/inventory-movement"+(s.toString()?`?${s.toString()}`:""))},reportTopSelling:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,String(i))}),L("/reports/top-selling"+(s.toString()?`?${s.toString()}`:""))},reportStockValuation:()=>L("/reports/stock-valuation")},qt=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"})),Me={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_TIMEOUT_MS:"10000",VITE_API_URL:"https://my-store-backend-production.up.railway.app/api",VITE_PROXY_TARGET:"http://localhost:8836"},Cs=a.createContext(null),Or=({children:t})=>{const[s,r]=a.useState(null),[i,o]=a.useState(!0),[n,u]=a.useState(null);a.useEffect(()=>{let g=!0;return(async()=>{try{const v=await Y.settingsGet();if(!g)return;let x=v.setting||null;if(x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/api/uploads")&&(x.logo=x.logo.replace(/^\/api/,"")),x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/")){const l=x.logo.startsWith("/uploads"),c=Me&&"https://my-store-backend-production.up.railway.app/api";let w=window.location.origin;if(l){if(c&&typeof c=="string"&&c.trim()&&!c.startsWith("/"))try{w=new URL(c).origin}catch{}else w.includes(":517")&&(w=w.replace(/:\d+$/,":4000"));x.logoUrl=w+x.logo}else x.logoUrl=x.logo}r(x)}catch(v){u(v.message)}finally{o(!1)}})(),()=>{g=!1}},[]),a.useEffect(()=>{if(!s)return;const g=document.documentElement,v=(l,c)=>{try{if(!c)return;let w=document.head.querySelector(`link[rel="${l}"]`);w||(w=document.createElement("link"),w.setAttribute("rel",l),document.head.appendChild(w)),w.setAttribute("href",c)}catch{}};s.logo&&(v("icon",s.logo),v("shortcut icon",s.logo),v("apple-touch-icon",s.logo));const x=(l,c)=>{if(c){if(l==="colorPrimary"){g.style.setProperty("--color-primary",c);const w=os(c);w&&g.style.setProperty("--color-primary-rgb",w)}if(l==="colorSecondary"&&(g.style.setProperty("--color-primary-alt",c),g.style.setProperty("--color-secondary",c)),l==="colorAccent"){g.style.setProperty("--color-accent",c);const w=os(c);w&&g.style.setProperty("--color-accent-rgb",w)}}};x("colorPrimary",s.colorPrimary),x("colorSecondary",s.colorSecondary),x("colorAccent",s.colorAccent),s.colorPrimary&&s.colorSecondary&&g.style.setProperty("--grad-primary",`linear-gradient(90deg, ${s.colorPrimary}, ${s.colorSecondary})`);try{const l=s.siteNameAr||s.siteNameEn;if(l){let c=document.head.querySelector('meta[property="og:site_name"]');c||(c=document.createElement("meta"),c.setAttribute("property","og:site_name"),document.head.appendChild(c)),c.setAttribute("content",l)}}catch{}},[s]);const d=async g=>{let x=(await Y.settingsUpdate(g)).setting;if(x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/api/uploads")&&(x.logo=x.logo.replace(/^\/api/,"")),x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/")){const l=x.logo.startsWith("/uploads"),c=Me&&"https://my-store-backend-production.up.railway.app/api";if(l){let w=window.location.origin;if(c&&typeof c=="string"&&c.trim()&&!c.startsWith("/"))try{w=new URL(c).origin}catch{}else w.includes(":517")&&(w=w.replace(/:\d+$/,":4000"));x.logoUrl=w+x.logo}else x.logoUrl=x.logo}return r(x),x},b=async g=>{let x=(await Y.settingsUploadLogo(g)).setting;if(x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/api/uploads")&&(x.logo=x.logo.replace(/^\/api/,"")),x&&x.logo&&typeof x.logo=="string"&&x.logo.startsWith("/")){const l=x.logo.startsWith("/uploads"),c=Me&&"https://my-store-backend-production.up.railway.app/api";if(l){let w=window.location.origin;if(c&&typeof c=="string"&&c.trim()&&!c.startsWith("/"))try{w=new URL(c).origin}catch{}else w.includes(":517")&&(w=w.replace(/:\d+$/,":4000"));x.logoUrl=w+x.logo}else x.logoUrl=x.logo}return x&&r(x),x||null},y=a.useMemo(()=>({setting:s,loading:i,error:n,update:d,uploadLogo:b}),[s,i,n]);return e.jsx(Cs.Provider,{value:y,children:t})},Se=()=>a.useContext(Cs);function os(t){try{const s=t.replace("#",""),r=parseInt(s.length===3?s.split("").map(u=>u+u).join(""):s,16),i=r>>16&255,o=r>>8&255,n=r&255;return`${i},${o},${n}`}catch{return null}}let $e=null;function Ts(){return $e||($e=J(()=>import("./vendor.motion-CEWeT_EF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(t=>t).catch(()=>null)),$e}function Ir(t){return function(r){const[i,o]=P.useState(()=>null);if(P.useEffect(()=>{let u=!0;return Ts().then(d=>{if(!u)return;if(!d)return o(()=>null);const b=d[t];o(()=>b||null)}),()=>{u=!1}},[]),!i)return r.fallback||null;const n=i;return e.jsx(n,{...r})}}const fe=new Proxy({},{get(t,s){const r=String(s),i=function(n){const[u,d]=P.useState(null);if(P.useEffect(()=>{let y=!0;return Ts().then(g=>{if(!y)return;if(!g)return d(()=>null);const v=g.motion||g,x=v&&v[r];d(()=>x||null)}),()=>{y=!1}},[]),!u)return n.fallback||null;const b=u;return e.jsx(b,{...n})};return i.displayName=`LazyMotion.${r}`,i}}),De=Ir("AnimatePresence"),_s="inline-flex items-center justify-center rounded-md font-semibold transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",Vt={primary:"bg-primary text-white hover:brightness-95",secondary:"bg-secondary text-white hover:brightness-95",ghost:"bg-transparent text-foreground hover:bg-gray-100",outline:"bg-transparent border border-gray-300 text-foreground hover:bg-gray-50",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-600",destructive:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-600",success:"bg-green-600 text-white hover:bg-green-700 focus-visible:ring-green-600"},Ht={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-5 py-3 text-lg"};function Lr({variant:t="primary",size:s="md",className:r}={}){return Xt(_s,Vt[t]||Vt.primary,Ht[s]||Ht.md,r)}const Z=P.forwardRef(function({as:s="button",variant:r="primary",size:i="md",className:o,children:n,disabled:u=!1,"aria-label":d,...b},y){const g=Xt(_s,Vt[r],Ht[i],o,{"opacity-50 cursor-not-allowed pointer-events-none":u});return s==="a"?e.jsx("a",{ref:y,className:g,"aria-label":d,...b,children:n}):e.jsx("button",{ref:y,type:b.type||"button",className:g,disabled:u,"aria-label":d,...b,children:n})}),Ql=P.forwardRef(function({href:s,variant:r="primary",size:i="md",className:o,children:n,...u},d){return e.jsx("a",{ref:d,href:s,className:Lr({variant:r,size:i,className:o}),...u,children:n})});function be(...t){return t.flatMap(s=>Array.isArray(s)?s:[s]).filter(Boolean).join(" ")}const Dr=P.forwardRef(function({className:s,...r},i){return e.jsx("input",{ref:i,className:be("flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm shadow-sm","placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",s),...r})});function Ur({className:t="",variant:s="default",...r}){const i=s&&s!=="default"?`ui-card--${s}`:"";return e.jsx("div",{className:be("ui-card",i,t),...r})}function zr({className:t,...s}){return e.jsx("div",{className:be("ui-card__header",t),...s})}function Mr({className:t,...s}){return e.jsx("h3",{className:be("ui-card__title",t),...s})}function $r({className:t,...s}){return e.jsx("div",{className:be("ui-card__content",t),...s})}function Yl({className:t,...s}){return e.jsx("p",{className:be("ui-card__description text-sm text-gray-600",t),...s})}function ls({className:t,...s}){return e.jsx("div",{className:be("animate-pulse rounded-md bg-gray-200/70 dark:bg-gray-800/60",t),...s})}function Wr(...t){return _r(Xt(t))}const Rs=a.createContext(),Br=({children:t,initialLocale:s})=>{ue?.();const r=Oe?.(),{i18n:i,t:o}=Vs(),n=typeof window<"u"?window.location.pathname.split("/").filter(Boolean)[0]:null,u=n&&["ar","en","fr"].includes(n)?n:s||i?.language||"ar",[d,b]=a.useState(u),y=a.useCallback(x=>{b(x);try{i?.changeLanguage(x)}catch{}try{localStorage.setItem("lang",x)}catch{}if(typeof window>"u"||!r)return;const l=window.location.pathname.split("/").filter(Boolean);l[0]&&["ar","en","fr"].includes(l[0])&&l.shift(),x!=="ar"&&l.unshift(x);const c="/"+l.join("/");r(c+window.location.search,{replace:!0})},[r,i]),g=a.useCallback(x=>o(x),[o]),v=a.useMemo(()=>({locale:d,setLocale:y,t:g,available:["ar","en","fr"]}),[d,g,y]);return a.useEffect(()=>{try{typeof document<"u"&&(document.documentElement.lang=d||"ar",document.documentElement.dir=d==="ar"?"rtl":"ltr",d==="ar"?document.documentElement.classList.add("is-rtl"):document.documentElement.classList.remove("is-rtl"))}catch{}},[d]),e.jsx(Rs.Provider,{value:v,children:t})},me=()=>{const t=a.useContext(Rs);return t||{t:s=>s,locale:"ar",setLocale:()=>{},available:["ar","en","fr"]}},Fr=Hs(Rr((t,s)=>({items:[],addItem:(r,i=1)=>t(o=>o.items.find(u=>u.id===r.id)?{items:o.items.map(u=>u.id===r.id?{...u,quantity:u.quantity+i}:u)}:{items:[...o.items,{...r,quantity:i}]}),removeItem:r=>t(i=>({items:i.items.filter(o=>o.id!==r)})),updateQuantity:(r,i)=>t(o=>({items:o.items.map(n=>n.id===r?{...n,quantity:Math.max(0,i)}:n).filter(n=>n.quantity>0)})),clearCart:()=>t({items:[]}),getTotal:()=>s().items.reduce((r,i)=>r+i.price*i.quantity,0),getItemCount:()=>s().items.reduce((r,i)=>r+i.quantity,0)}),{name:"cart-storage"})),qr=()=>{const t=Fr(s=>s.getItemCount());return t===0?null:e.jsxs(pe,{to:"/cart",className:"fixed bottom-4 left-4 z-50 flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-white shadow-lg transition hover:bg-primary/90 md:bottom-6 md:left-6",children:[e.jsx(Gt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:t})]})},Vr=a.createContext(null);let Hr=0;const Kr=({children:t})=>{const[s,r]=a.useState([]),i=a.useCallback(n=>{r(u=>u.filter(d=>d.id!==n))},[]),o=a.useCallback((n,u={})=>{const d=++Hr,b={id:d,msg:n,type:u.type||"info",ttl:u.ttl||3e3};return r(y=>[...y,b]),b.ttl>0&&setTimeout(()=>i(d),b.ttl),d},[i]);return a.useEffect(()=>{const n=u=>{const d=u?.detail||{},b=d.name||"Ù…Ù†ØªØ¬",y=o({title:"ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",name:b,image:d.image||null,type:"success",action:{label:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡",href:"/checkout"}},{ttl:2600});try{window.dispatchEvent(new CustomEvent("cart:icon-bump"))}catch{}return y};return window.addEventListener("cart:add",n),()=>window.removeEventListener("cart:add",n)},[o]),a.useEffect(()=>{const n=u=>{o("Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",{type:"error",ttl:2500})};return window.addEventListener("auth:required",n),()=>window.removeEventListener("auth:required",n)},[o]),e.jsxs(Vr.Provider,{value:{push:o,remove:i},children:[t,e.jsx("div",{className:"toast-region","aria-live":"polite","aria-atomic":"true",children:s.map(n=>{const d=typeof n.msg=="object"&&n.msg!==null?n.msg:{title:n.msg};if(d&&d.name&&typeof d.name=="object")try{d.name=JSON.stringify(d.name)}catch{d.name=String(d.name)}return e.jsxs("div",{className:`toast toast-${n.type}`,role:"status",children:[d.image&&e.jsx("div",{className:"toast-media",children:e.jsx("img",{src:d.image,alt:""})}),e.jsxs("div",{className:"toast-body",children:[e.jsx("div",{className:"toast-title",children:d.title}),d.name&&e.jsx("div",{className:"toast-sub",children:d.name})]}),d.action?.href&&e.jsx("a",{className:"toast-cta",href:d.action.href,children:d.action.label||"ÙØªØ­"}),e.jsx("button",{onClick:()=>i(n.id),"aria-label":"Ø¥ØºÙ„Ø§Ù‚",className:"toast-close",children:"Ã—"})]},n.id)})}),e.jsx("style",{children:`
        .toast-region { position: fixed; top: 1rem; inset-inline-end: 1rem; display: flex; flex-direction: column; gap: .5rem; z-index: 2000; }
        .toast { background: #111827; color:#fff; padding:.65rem .75rem; border-radius: 12px; box-shadow:0 10px 30px -10px rgba(9,9,11,.5); font-size:.85rem; display:flex; align-items:center; gap:.65rem; animation: toast-in .28s var(--ease-standard, ease); min-width: 240px; }
        .toast-success { background: linear-gradient(90deg, var(--color-primary), var(--color-primary-alt)); }
        .toast-error { background:#b91c1c; }
        .toast-media { width: 38px; height: 38px; border-radius: 8px; overflow: hidden; background: rgba(255,255,255,.15); flex-shrink:0; display:flex; align-items:center; justify-content:center; }
        .toast-media img { width:100%; height:100%; object-fit: cover; display:block; }
        .toast-body { display:flex; flex-direction:column; gap:2px; min-width:0; }
        .toast-title { font-weight: 700; font-size: .82rem; }
        .toast-sub { font-size: .72rem; opacity: .95; }
        .toast-cta { margin-inline-start: .35rem; font-weight:700; font-size:.72rem; background: #fff; color:#0f172a; text-decoration:none; padding:.4rem .6rem; border-radius: 8px; box-shadow:0 3px 8px rgba(0,0,0,.15); }
        .toast-close { background:transparent; border:0; color:#fff; cursor:pointer; font-size:1rem; line-height:1; padding: .1rem .2rem; }
        @keyframes toast-in { from { opacity:0; transform: translateY(-6px); } to { opacity:1; transform: translateY(0);} }
      `})]})},Gr=P.forwardRef(({className:t,as:s="div",padded:r=!0,children:i,...o},n)=>{const u=s||"div";return e.jsx(u,{ref:n,className:be("bg-white/90 dark:bg-gray-800/80 backdrop-blur rounded-2xl shadow-lg ring-1 ring-gray-200/60 dark:ring-gray-700",r?"p-6":"",t),...o,children:i})});Gr.displayName="Panel";function Kt({content:t,children:s,placement:r="right",offset:i=8,disabled:o=!1}){const[n,u]=a.useState(!1),[d,b]=a.useState({top:0,left:0}),[y,g]=a.useState(!1),v=a.useRef(null);a.useEffect(()=>(g(!0),()=>g(!1)),[]);const x=()=>{const I=v.current;if(!I)return;const j=I.getBoundingClientRect();let z=j.top+j.height/2,$=j.left+j.width/2;switch(r){case"left":$=j.left-i,z=j.top+j.height/2;break;case"right":$=j.right+i,z=j.top+j.height/2;break;case"top":$=j.left+j.width/2,z=j.top-i;break;case"bottom":$=j.left+j.width/2,z=j.bottom+i;break}b({top:z,left:$})},l=()=>{o||(x(),u(!0))},c=()=>u(!1),w=P.isValidElement(s)?a.cloneElement(s,{ref:I=>{typeof s.ref=="function"?s.ref(I):s.ref&&(s.ref.current=I),v.current=I},onMouseEnter:I=>{s.props?.onMouseEnter?.(I),l()},onMouseLeave:I=>{s.props?.onMouseLeave?.(I),c()},onFocus:I=>{s.props?.onFocus?.(I),l()},onBlur:I=>{s.props?.onBlur?.(I),c()},"aria-describedby":n?"tooltip":void 0}):s;return a.useEffect(()=>{if(!n||o)return;const I=()=>x();return window.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",I),()=>{window.removeEventListener("scroll",I),window.removeEventListener("resize",I)}},[n,o]),e.jsxs(e.Fragment,{children:[w,y&&n&&!o&&bs.createPortal(e.jsx("div",{role:"tooltip",id:"tooltip",style:{position:"fixed",top:d.top,left:d.left,transform:r==="right"?"translate(0, -50%)":r==="left"?"translate(-100%, -50%)":r==="top"?"translate(-50%, -100%)":"translate(-50%, 0)",background:"rgba(17,17,17,0.95)",color:"#fff",borderRadius:8,padding:"6px 10px",fontSize:12,lineHeight:1.2,pointerEvents:"none",zIndex:2e3,boxShadow:"0 6px 18px rgba(0,0,0,.25)"},children:t}),document.body)]})}const Ps=a.createContext({theme:"system",setTheme:()=>{}}),Jr=t=>{if(t==="dark")return"dark";if(t==="light")return"light";try{return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}},We=t=>{if(typeof document>"u")return;const s=document.documentElement,r=Jr(t);s.classList.remove("theme-light","theme-dark"),r==="light"&&t!=="system"&&s.classList.add("theme-light"),r==="dark"&&t!=="system"&&s.classList.add("theme-dark");try{s.setAttribute("data-theme",r)}catch{}},Xr=()=>{try{const t=localStorage.getItem("theme");if(t&&["light","dark","system"].includes(t))return t}catch{}return"system"},Qr=({children:t})=>{const[s,r]=a.useState(Xr),i=a.useRef(null);a.useEffect(()=>{We(s)},[s]),a.useEffect(()=>{try{localStorage.setItem("theme",s)}catch{}},[s]),a.useEffect(()=>{We(s)},[]),a.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;if(i.current&&i.current.removeEventListener)try{i.current.removeEventListener("change",d)}catch{}const u=window.matchMedia("(prefers-color-scheme: dark)");i.current=u;function d(){s==="system"&&We("system")}try{u.addEventListener("change",d)}catch{}return()=>{try{u.removeEventListener("change",d)}catch{}}},[s]);const o=a.useCallback(u=>{["light","dark","system"].includes(u)&&r(u)},[]),n=a.useMemo(()=>({theme:s,setTheme:o}),[s,o]);return e.jsx(Ps.Provider,{value:n,children:t})},Qt=()=>a.useContext(Ps),Os=a.createContext(null);let Yr=1;const Zr=({children:t})=>{const[s,r]=a.useState([]),i=a.useCallback(u=>{r(d=>d.filter(b=>b.id!==u))},[]),o=a.useCallback(u=>{const d=Yr++,{type:b="info",title:y,description:g,duration:v=3500,action:x}=u||{},l={id:d,type:b,title:y,description:g,action:x,createdAt:Date.now()};return r(c=>[...c,l]),v>0&&setTimeout(()=>i(d),v),d},[i]),n=a.useMemo(()=>({show:o,success:(u,d,b,y={})=>o({type:"success",title:u,description:d,duration:b,...y}),error:(u,d,b,y={})=>o({type:"error",title:u,description:d,duration:b,...y}),info:(u,d,b,y={})=>o({type:"info",title:u,description:d,duration:b,...y}),warn:(u,d,b,y={})=>o({type:"warn",title:u,description:d,duration:b,...y})}),[o]);return e.jsxs(Os.Provider,{value:n,children:[t,e.jsx("div",{className:"toaster","aria-live":"polite","aria-atomic":"true",children:s.map(u=>e.jsxs("div",{className:`toast toast-${u.type}`,role:"status",onClick:()=>i(u.id),children:[u.title&&e.jsx("div",{className:"toast-title",children:u.title}),u.description&&e.jsx("div",{className:"toast-desc",children:u.description}),u.action&&u.action.label?e.jsx("button",{type:"button",className:"toast-action",onClick:d=>{d.stopPropagation();try{u.action.onClick?.()}catch{}u.action.autoClose!==!1&&i(u.id)},children:u.action.label}):null]},u.id))})]})},ke=()=>a.useContext(Os),Is=a.createContext(null),en=({children:t})=>{const s=ke?.(),[r,i]=a.useState(()=>{try{const d=localStorage.getItem("my_store_user");return d?JSON.parse(d):null}catch{return null}});a.useEffect(()=>{try{r?localStorage.setItem("my_store_user",JSON.stringify(r)):localStorage.removeItem("my_store_user")}catch{}},[r]),a.useEffect(()=>{try{!localStorage.getItem("my_store_token")&&r&&i(null)}catch{}},[]);const o=async(d,b)=>{try{const y=await Y.authLogin(d,b);if(y.ok&&(y.accessToken||y.token)){const v=y.accessToken||y.token;try{localStorage.setItem("my_store_token",v)}catch{}i(y.user);try{s?.success?.("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",y.user?.email||"")}catch{}return{ok:!0}}const g=y?.error;return g==="USER_NOT_FOUND"?s?.warn?.("Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯","ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ù‚Ù… Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„"):g==="WRONG_PASSWORD"?s?.error?.("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©","Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø®ÙŠØ§Ø± Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"):g==="DB_UNAVAILABLE"?s?.error?.("Ø®Ø¯Ù…Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± Ù…ØªØ§Ø­Ø©","Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹ØŒ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ Ø¥Ù† ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹"):g==="MISSING_CREDENTIALS"?s?.warn?.("Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©","ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"):s?.error?.("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",g||"ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"),{ok:!1,error:g||"LOGIN_FAILED"}}catch(y){const g=y?.message?.includes("Network error")?"ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…":"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹";return s?.error?.("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",g),{ok:!1,error:"NETWORK_OR_UNKNOWN"}}},n=(d="user")=>{const y={id:{seller:"seller-1",admin:"admin-1",user:"user-1",delivery:"delivery-1"}[d]||d+"-mock",role:d,name:d};i(y)},u=async()=>{try{await Y.request("/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})}catch{}i(null);try{localStorage.removeItem("my_store_token")}catch{}try{s?.info?.("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬")}catch{}};return e.jsx(Is.Provider,{value:{user:r,login:o,logout:u,devLoginAs:n},children:t})},ye=()=>a.useContext(Is);function Ee(t,s,r=typeof window<"u"?window:null){const i=a.useRef();a.useEffect(()=>{i.current=s},[s]),a.useEffect(()=>{if(!r||!r.addEventListener)return;const o=n=>i.current&&i.current(n);return r.addEventListener(t,o),()=>r.removeEventListener(t,o)},[t,r])}const Ls=a.createContext({open:!1,setOpen:()=>{},toggle:()=>{}}),tn=({children:t,defaultOpen:s=!1})=>{const[r,i]=a.useState(!!s),o=a.useCallback(u=>i(!!u),[]),n=a.useCallback(()=>i(u=>!u),[]);return e.jsx(Ls.Provider,{value:{open:r,setOpen:o,toggle:n},children:t})},Ds=()=>a.useContext(Ls);function sn(t,s){switch(s.type){case"SET_COLLAPSED":return{...t,collapsed:!!s.value};case"TOGGLE_COLLAPSED":return{...t,collapsed:!t.collapsed};case"SET_MOBILE_OPEN":return{...t,mobileOpen:!!s.value};case"TOGGLE_MOBILE_OPEN":return{...t,mobileOpen:!t.mobileOpen};case"SET_REDUCED_MOTION":return{...t,reducedMotion:!!s.value};case"SET_HOVERING":return{...t,hovering:!!s.value};case"SET_BADGES":return{...t,badges:s.value||{}};case"UPDATE_BADGE":return{...t,badges:{...t.badges,[s.key]:Number(s.value)||0}};case"SET_SCROLL_FADES":return{...t,showTopFade:!!s.top,showBottomFade:!!s.bottom};default:return t}}const cs=P.memo(function({item:s,pathname:r,locale:i,collapsed:o,mobileMode:n,closeMobile:u,t:d}){const y=[s.to,`/en${s.to}`,`/fr${s.to}`].some(l=>r===l||r.startsWith(`${l}/`));let g;try{const l=s.navKey?`nav.${s.navKey}`:null;if(l){const c=d(l);c&&c!==l&&(g=c)}}catch{}g||(g=i==="ar"?s.labelAr:s.labelEn);const v=s.icon,x=typeof v=="string"?e.jsx("span",{style:{fontSize:"1.7rem"},children:v}):v?e.jsx(v,{size:28,style:{filter:y?"drop-shadow(0 2px 8px #f6ad55)":"none",marginBottom:"2px"}}):null;return e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsx(Kt,{content:g,placement:i==="ar"?"left":"right",disabled:!o||n,children:e.jsxs(pe,{to:s.to,className:"nav-link","data-active":y,"aria-current":y?"page":void 0,title:o?g:void 0,"data-tip":o?g:void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",minHeight:"64px",borderRadius:"14px",margin:"0 auto",background:y?"rgba(255,255,255,0.12)":"transparent",border:y?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:y?"0 2px 8px -2px #f6ad55":"none",color:y?"#f6ad55":"#fff",fontSize:"1.08rem",transition:"all 0.18s",cursor:"pointer",outline:"none",padding:"0 8px",gap:"2px"},onMouseEnter:l=>l.currentTarget.style.background="rgba(255,255,255,0.18)",onMouseLeave:l=>l.currentTarget.style.background=y?"rgba(255,255,255,0.12)":"transparent",onKeyDown:l=>{try{if(l.key==="ArrowDown"||l.key==="ArrowRight"){l.preventDefault();const c=l.currentTarget.parentElement.nextElementSibling;c&&c.querySelector(".nav-link")?.focus()}else if(l.key==="ArrowUp"||l.key==="ArrowLeft"){l.preventDefault();const c=l.currentTarget.parentElement.previousElementSibling;c&&c.querySelector(".nav-link")?.focus()}else l.key==="Home"?(l.preventDefault(),l.currentTarget.closest(".sidebar-modern__nav")?.firstElementChild?.querySelector(".nav-link")?.focus()):l.key==="End"&&(l.preventDefault(),l.currentTarget.closest(".sidebar-modern__nav")?.lastElementChild?.querySelector(".nav-link")?.focus())}catch{}},onClick:()=>{n&&u()},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:x}),e.jsx("span",{className:"nav-label",style:{fontSize:".5rem",fontWeight:y?700:500,opacity:y?1:.88,whiteSpace:"nowrap",marginTop:"2px",textAlign:"center",lineHeight:"1.15"},children:g})]})})})}),rn=[{to:"/",labelAr:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",labelEn:"Home",navKey:"home",icon:js},{to:"/products",labelAr:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",labelEn:"Products",navKey:"products",icon:Ie},{to:"/catalog",labelAr:"Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",labelEn:"Catalog",navKey:"catalog",icon:ws},{to:"/offers",labelAr:"Ø§Ù„Ø¹Ø±ÙˆØ¶",labelEn:"Offers",navKey:"offers",icon:Jt},{to:"/cart",labelAr:"Ø§Ù„Ø³Ù„Ø©",labelEn:"Cart",navKey:"cart",icon:Gt},{to:"/stores",labelAr:"Ø§Ù„Ù…ØªØ§Ø¬Ø±",labelEn:"Stores",navKey:"stores",icon:_e}],nn=[{to:"/admin",labelAr:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",labelEn:"Dashboard",icon:es},{to:"/admin/reports",labelAr:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",labelEn:"Reports",icon:Ft},{to:"/admin/analytics",labelAr:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª",labelEn:"Analytics",icon:es},{to:"/admin/customers",labelAr:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",labelEn:"Customers",icon:ks},{to:"/admin/settings",labelAr:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",labelEn:"Settings",icon:Re}],an=()=>{const{pathname:t}=ue(),{locale:s,t:r,setLocale:i}=me(),{theme:o,setTheme:n}=Qt(),{user:u}=ye()||{},{setting:d}=Se()||{},b=u?.role==="admin";function y(){try{return Ds()}catch{return{}}}const{open:g,toggle:v,setOpen:x}=y(),[l,c]=a.useReducer(sn,{collapsed:!1,mobileOpen:!!g,reducedMotion:!1,hovering:!1,badges:{},showTopFade:!1,showBottomFade:!1}),w=a.useRef(null),I=a.useRef(null),j=a.useRef(0),z=a.useRef(null),$=a.useRef(null),h=a.useRef(null),D=a.useRef(null);a.useEffect(()=>{try{const p=window.matchMedia("(prefers-reduced-motion: reduce)");c({type:"SET_REDUCED_MOTION",value:!!p.matches});const f=S=>c({type:"SET_REDUCED_MOTION",value:!!S.matches});return p.addEventListener?p.addEventListener("change",f):p.addListener&&p.addListener(f),()=>{p.removeEventListener?p.removeEventListener("change",f):p.removeListener&&p.removeListener(f)}}catch{}},[]),a.useEffect(()=>{if(E()&&l.mobileOpen)try{window.history.pushState({sidebar:!0},"")}catch{}},[l.mobileOpen]);const R=a.useCallback(()=>{l.mobileOpen&&(c({type:"SET_MOBILE_OPEN",value:!1}),x&&x(!1))},[l.mobileOpen,x]);Ee("popstate",R);const E=()=>typeof window<"u"&&window.innerWidth<=980;a.useEffect(()=>{try{const p=localStorage.getItem("sb_collapsed");p!=null&&!E()&&c({type:"SET_COLLAPSED",value:p==="1"})}catch{}c({type:"SET_MOBILE_OPEN",value:!1})},[]),a.useEffect(()=>{if(!E())try{localStorage.setItem("sb_collapsed",l.collapsed?"1":"0")}catch{}},[l.collapsed]),a.useEffect(()=>{try{document.body.style.overflow=l.mobileOpen?"hidden":""}catch{}try{const p=document.getElementById("main");p&&(l.mobileOpen?p.setAttribute("aria-hidden","true"):p.removeAttribute("aria-hidden"))}catch{}return()=>{try{document.body.style.overflow=""}catch{}try{const p=document.getElementById("main");p&&p.removeAttribute("aria-hidden")}catch{}}},[l.mobileOpen]);const M=a.useCallback(p=>{p.key==="Escape"&&(E()?l.mobileOpen&&c({type:"SET_MOBILE_OPEN",value:!1}):l.collapsed||c({type:"SET_COLLAPSED",value:!0})),!E()&&p.altKey&&p.shiftKey&&(p.key==="S"||p.key==="s")&&(p.preventDefault(),c({type:"TOGGLE_COLLAPSED"})),E()&&p.altKey&&p.shiftKey&&(p.key==="M"||p.key==="m")&&(p.preventDefault(),c({type:"TOGGLE_MOBILE_OPEN"}))},[l.mobileOpen,l.collapsed]);Ee("keydown",M),a.useEffect(()=>{if(!l.mobileOpen)return;const p=w.current;if(!p)return;const f=p.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'),S=f[0],V=f[f.length-1];try{S&&S.focus()}catch{}const K=Q=>{Q.key==="Tab"&&f.length!==0&&(Q.shiftKey?document.activeElement===S&&(Q.preventDefault(),V&&V.focus()):document.activeElement===V&&(Q.preventDefault(),S&&S.focus()))};return p.addEventListener("keydown",K),()=>p.removeEventListener("keydown",K)},[l.mobileOpen]),a.useEffect(()=>{if(!l.mobileOpen)return;const p=w.current;if(!p)return;const f=K=>{const Q=K.touches?.[0];Q&&(I.current=Q.clientX,j.current=0)},S=K=>{if(I.current==null)return;const Q=K.touches?.[0];if(!Q)return;const se=Q.clientX-I.current;if(j.current=se,se<0){const re=Math.max(se,-120);p.style.transform=`translate3d(${re}px,0,0)`,p.style.transition=l.reducedMotion?"none":"transform 0s"}},V=()=>{const K=j.current||0;p.style.transition="",p.style.transform="",I.current=null,j.current=0,K<-60&&c({type:"SET_MOBILE_OPEN",value:!1})};return p.addEventListener("touchstart",f,{passive:!0}),p.addEventListener("touchmove",S,{passive:!0}),p.addEventListener("touchend",V),p.addEventListener("touchcancel",V),()=>{p.removeEventListener("touchstart",f),p.removeEventListener("touchmove",S),p.removeEventListener("touchend",V),p.removeEventListener("touchcancel",V),p.style.transition="",p.style.transform=""}},[l.mobileOpen,l.reducedMotion]),a.useEffect(()=>{c({type:"SET_MOBILE_OPEN",value:!1})},[t]),a.useEffect(()=>{typeof g=="boolean"&&c({type:"SET_MOBILE_OPEN",value:!!g})},[g]),Ee("sidebar:toggle",p=>{if(x||v)return;const f=p&&p.detail!=null&&typeof p.detail=="object"&&"cmd"in p.detail?p.detail.cmd:p?.detail;f==="toggle"?c({type:"TOGGLE_MOBILE_OPEN"}):f==="open"?c({type:"SET_MOBILE_OPEN",value:!0}):f==="close"&&c({type:"SET_MOBILE_OPEN",value:!1})}),a.useEffect(()=>{x&&x(l.mobileOpen);try{window.dispatchEvent(new CustomEvent("sidebar:state",{detail:{open:l.mobileOpen}}))}catch{}},[l.mobileOpen,x]);const q=a.useCallback(p=>{const{key:f,value:S}=p?.detail||{};f&&c({type:"UPDATE_BADGE",key:f,value:S})},[]);Ee("nav:badge",q);const F=a.useCallback(()=>{const p=z.current;if(!p)return;const f=p.scrollTop||0,S=p.clientHeight||0,V=p.scrollHeight||0;c({type:"SET_SCROLL_FADES",top:f>4,bottom:f+S<V-4})},[]);a.useEffect(()=>{const p=z.current;if(!p)return;F();const f=()=>F();return p.addEventListener("scroll",f,{passive:!0}),()=>{p.removeEventListener("scroll",f)}},[F,l.mobileOpen,l.collapsed]);const B=a.useCallback(()=>{F()},[F]);Ee("resize",B);const T=a.useCallback(()=>{c({type:"SET_MOBILE_OPEN",value:!1}),x&&x(!1)},[x]);a.useEffect(()=>{const p=w.current;if(!p)return;const f=()=>{!E()&&l.collapsed&&c({type:"SET_HOVERING",value:!0})},S=()=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{p.contains(document.activeElement)||c({type:"SET_HOVERING",value:!1}),h.current=null},180)};return p.addEventListener("focusin",f),p.addEventListener("focusout",S),()=>{p.removeEventListener("focusin",f),p.removeEventListener("focusout",S)}},[l.collapsed]),a.useEffect(()=>()=>{$.current&&clearTimeout($.current),h.current&&clearTimeout(h.current)},[]);const A=P.useMemo(()=>{const p=[...rn];return u&&(p.push({to:"/my-orders",labelAr:"Ø·Ù„Ø¨Ø§ØªÙŠ",labelEn:"My Orders",navKey:"myOrders",icon:Ft}),(u.role==="seller"||u.role==="admin")&&p.push({to:"/seller/kyc",labelAr:"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹",labelEn:"Seller KYC",navKey:"sellerKyc",icon:Re}),u.role==="delivery"&&(p.push({to:"/delivery",labelAr:"Ø§Ù„ØªÙˆØµÙŠÙ„",labelEn:"Delivery",icon:Ft}),p.push({to:"/delivery/map",labelAr:"Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªØªØ¨Ø¹",labelEn:"Delivery Map",icon:"ðŸ—ºï¸"}),p.push({to:"/delivery/history",labelAr:"Ø³Ø¬Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„",labelEn:"History",icon:"ðŸ•˜"}),p.push({to:"/delivery/availability",labelAr:"Ø§Ù„ØªÙˆÙØ±",labelEn:"Availability",icon:"âœ…"}))),p},[u]),O=()=>{if(E()){const p=!l.mobileOpen;c({type:"SET_MOBILE_OPEN",value:p}),x&&x(p)}else c({type:"TOGGLE_COLLAPSED"})},_=E()?l.mobileOpen:!l.collapsed,N=a.useRef(null),U=o==="light";return E()||l.collapsed&&l.hovering,e.jsxs(e.Fragment,{children:[null,E()&&!l.mobileOpen&&e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",top:0,bottom:0,left:0,width:14,zIndex:1020,touchAction:"pan-y",pointerEvents:"auto",userSelect:"none",background:"transparent"},onTouchStart:p=>{const f=p.touches?.[0];f&&f.clientX<=14&&(c({type:"SET_MOBILE_OPEN",value:!0}),x&&x(!0))}}),e.jsx(De,{children:(!E()||l.mobileOpen)&&e.jsx(fe.aside,{initial:E()?{x:"-100%"}:!1,animate:E()?{x:0}:{width:l.collapsed?!E()&&l.hovering?"220px":"68px":"88px"},exit:E()?{x:"-100%"}:!1,transition:l.reducedMotion?{duration:0}:E()?{type:"spring",stiffness:400,damping:38}:{type:"spring",stiffness:260,damping:28},className:`sidebar-modern ${b?"has-admin":""}`,id:"app-sidebar","data-collapsed":l.collapsed,"data-open":l.mobileOpen,role:E()?"dialog":"navigation","aria-modal":E()?"true":void 0,tabIndex:E()?-1:void 0,ref:w,"aria-label":"Main sidebar navigation",style:{background:U?"linear-gradient(180deg, rgba(23,138,61,0.88) 0%, rgba(15,60,30,0.88) 100%)":"linear-gradient(180deg,#178a3d 0%,#0f3c1e 100%)",minHeight:"100vh",boxShadow:_?"0 10px 25px -10px rgba(0,0,0,0.28)":"2px 0 16px -8px rgba(0,0,0,0.10)",borderRadius:"0 18px 18px 0",width:E()?(l.collapsed,"88px"):void 0,overflow:l.collapsed?l.hovering?"visible":"hidden":"visible",zIndex:1301,position:E()?"fixed":void 0,top:0,left:0,backdropFilter:U?"blur(4px)":void 0,willChange:E()?"transform":"width"},onMouseEnter:()=>{E()||!l.collapsed||(h.current&&(clearTimeout(h.current),h.current=null),$.current||($.current=setTimeout(()=>{c({type:"SET_HOVERING",value:!0}),$.current=null},60)))},onMouseLeave:p=>{E()||($.current&&(clearTimeout($.current),$.current=null),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{const f=w.current,S=D.current;f&&f.matches(":hover")||S&&S.matches(":hover")||c({type:"SET_HOVERING",value:!1}),h.current=null},180))},children:e.jsxs("div",{className:"sidebar-modern__inner",ref:N,style:{position:"relative",paddingBottom:"calc(12px + env(safe-area-inset-bottom))"},children:[e.jsxs("div",{className:"sidebar-modern__head",children:[e.jsx("span",{className:"sidebar-modern__brand",style:{fontWeight:700,fontSize:".95rem",color:"#fff",letterSpacing:".5px"},children:s==="ar"?d?.siteNameAr||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":d?.siteNameEn||"My Store"}),e.jsxs("button",{type:"button",className:"sidebar-modern__toggle",onClick:O,"aria-expanded":_,"aria-controls":"app-sidebar","aria-label":E()?l.mobileOpen?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":l.collapsed?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar",title:E()?l.mobileOpen?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":l.collapsed?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar",style:{background:"rgba(255,255,255,0.08)",border:"none",borderRadius:"8px",padding:"6px",color:"#fff",marginTop:"6px",cursor:"pointer"},children:[E()?l.mobileOpen?e.jsx(Le,{size:18,"aria-hidden":"true"}):e.jsx(Ss,{size:18,"aria-hidden":"true"}):l.collapsed?e.jsx(Ks,{size:18,"aria-hidden":"true"}):e.jsx(Gs,{size:18,"aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:E()?l.mobileOpen?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":l.collapsed?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar"})]})]}),e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,top:58,height:16,pointerEvents:"none",opacity:l.showTopFade?1:0,transition:"opacity .2s",background:"linear-gradient(to bottom, rgba(0,0,0,.28), rgba(0,0,0,0))"}}),e.jsxs("ul",{ref:z,className:"sidebar-modern__nav",role:"list","aria-label":"Main navigation",style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"18px"},children:[e.jsx("li",{className:"nav-section-label",style:{color:"#f6ad55",fontWeight:700,fontSize:".75rem",marginBottom:"2px"},children:s==="ar"?"Ø§Ù„ØªØµÙØ­":"Browse"}),A.map(p=>e.jsx(cs,{item:p,pathname:t,locale:s,collapsed:l.collapsed,mobileMode:E(),closeMobile:T,t:r},p.to)),b&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"nav-section-label",style:{color:"#f6ad55",fontWeight:700,fontSize:".75rem",marginTop:"12px"},children:r("nav.admin")!=="nav.admin"?r("nav.admin"):s==="ar"?"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©":"Admin"}),e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsx(Kt,{content:r("nav.orders")!=="nav.orders"?r("nav.orders"):s==="ar"?"Ø§Ù„Ø·Ù„Ø¨Ø§Øª":"Orders",placement:s==="ar"?"left":"right",disabled:!l.collapsed||E(),children:e.jsxs(pe,{to:"/orders",className:"nav-link","data-active":["/orders","/en/orders","/fr/orders"].some(p=>t===p||t.startsWith(`${p}/`)),"aria-current":["/orders","/en/orders","/fr/orders"].some(p=>t===p)?"page":void 0,"data-tip":l.collapsed?s==="ar"?"ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª":"All Orders":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",borderRadius:"14px",margin:"0 auto",background:["/orders","/en/orders","/fr/orders"].some(p=>t===p||t.startsWith(`${p}/`))?"rgba(255,255,255,0.12)":"transparent",border:["/orders","/en/orders","/fr/orders"].some(p=>t===p||t.startsWith(`${p}/`))?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:["/orders","/en/orders","/fr/orders"].some(p=>t===p||t.startsWith(`${p}/`))?"0 2px 8px -2px #f6ad55":"none",color:["/orders","/en/orders","/fr/orders"].some(p=>t===p||t.startsWith(`${p}/`))?"#f6ad55":"#fff",fontSize:"1.7rem",transition:"all 0.18s",cursor:"pointer",outline:"none"},children:[e.jsxs("span",{className:"nav-icon","aria-hidden":"true",style:{position:"relative"},children:[e.jsx(Js,{size:28}),(l.badges.orders||0)>0&&e.jsx("span",{"aria-hidden":"true",style:{position:"absolute",top:-6,insetInlineEnd:-6,background:"#ef4444",color:"#fff",borderRadius:10,fontSize:10,lineHeight:"14px",padding:"0 5px",minWidth:14,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,.25)"},children:Math.min(l.badges.orders,99)})]}),e.jsx("span",{className:"nav-label",style:{fontSize:".72rem",marginTop:"2px",fontWeight:700,opacity:1},children:r("nav.orders")!=="nav.orders"?r("nav.orders"):s==="ar"?"Ø§Ù„Ø·Ù„Ø¨Ø§Øª":"Orders"})]})})}),e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsx(Kt,{content:r("nav.sellerKyc")!=="nav.sellerKyc"?r("nav.sellerKyc"):s==="ar"?"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹":"Seller KYC",placement:s==="ar"?"left":"right",disabled:!l.collapsed||E(),children:e.jsxs(pe,{to:"/admin/sellers/kyc",className:"nav-link","data-active":["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(p=>t===p),"aria-current":["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(p=>t===p)?"page":void 0,"data-tip":l.collapsed?s==="ar"?"Ù…Ø±Ø§Ø¬Ø¹Ø© KYC":"KYC Review":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",borderRadius:"14px",margin:"0 auto",background:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(p=>t===p)?"rgba(255,255,255,0.12)":"transparent",border:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(p=>t===p)?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(p=>t===p)?"0 2px 8px -2px #f6ad55":"none",color:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(p=>t===p)?"#f6ad55":"#fff",fontSize:"1.7rem",transition:"all 0.18s",cursor:"pointer",outline:"none"},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:e.jsx(Re,{size:28})}),e.jsx("span",{className:"nav-label",style:{fontSize:".72rem",marginTop:"2px",fontWeight:700,opacity:1},children:r("nav.sellerKyc")!=="nav.sellerKyc"?r("nav.sellerKyc"):s==="ar"?"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹":"Seller KYC"})]})})}),nn.map(p=>e.jsx(cs,{item:p,pathname:t,locale:s,collapsed:l.collapsed,mobileMode:E(),closeMobile:T,t:r},p.to))]})]}),e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,bottom:58,height:18,pointerEvents:"none",opacity:l.showBottomFade?1:0,transition:"opacity .2s",background:"linear-gradient(to top, rgba(0,0,0,.28), rgba(0,0,0,0))"}}),e.jsxs("div",{className:"sidebar-modern__footer",style:{marginTop:"auto",padding:"10px 0 56px",textAlign:"center",position:"relative"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"18px",marginBottom:"10px",marginTop:"2px"},children:e.jsx("button",{onClick:()=>{const p=["ar","en","fr"],f=p.indexOf(s);i(p[(f+1)%p.length])},"aria-label":s==="ar"?"ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©":"Change language",title:s==="ar"?"ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©":"Change language",style:{background:"#f6ad55",border:"none",borderRadius:"50%",padding:"9px",color:"#fff",fontWeight:700,cursor:"pointer",transition:"background 0.2s",width:"38px",height:"38px",fontSize:"1.1rem",boxShadow:"0 1px 8px 0 #f6ad55",display:"flex",alignItems:"center",justifyContent:"center"},children:s==="ar"?"Ø¹":s==="en"?"E":"F"})}),e.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:"10px",marginTop:"0",gap:"0"},children:e.jsx("button",{onClick:()=>n(o==="dark"?"light":o==="light"?"system":"dark"),"aria-label":o==="dark"?s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­":"Light mode":o==="light"?s==="ar"?"Ø§Ù„Ù†Ø¸Ø§Ù…":"System":s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†":"Dark mode",title:o==="dark"?s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­":"Light mode":o==="light"?s==="ar"?"Ø§Ù„Ù†Ø¸Ø§Ù…":"System":s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†":"Dark mode",style:{background:"#fff",border:"2px solid #f6ad55",borderRadius:"50%",padding:"7px",color:"#222",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px 0 rgba(0,0,0,0.18)",width:"34px",height:"34px",zIndex:99,position:"relative",marginInlineEnd:"2px",marginTop:"2px",marginBottom:"2px"},children:o==="dark"?e.jsxs("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-sun",children:[e.jsx("circle",{cx:"6.5",cy:"6.5",r:"3"}),e.jsx("path",{d:"M6.5 0v1.5m5 5H13m-1.5 5V13m-5-1.5H0m1.5-5H0m1.36-4.57l1.1 1.1m6.68 0l-1.1 1.1m1.1 6.68l-1.1-1.1m-6.68 0l1.1-1.1"})]}):o==="light"?e.jsxs("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-monitor",children:[e.jsx("rect",{x:"1",y:"2",width:"11",height:"8",rx:"2"}),e.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),e.jsx("line",{x1:"6.5",y1:"10",x2:"6.5",y2:"12"})]}):e.jsx("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-moon",children:e.jsx("path",{d:"M12 8.5A5.5 5.5 0 1 1 6.5 1a4.2 4.2 0 0 0 5.5 7.5Z"})})})}),(()=>{const p=(d?.supportWhatsapp||"").toString().replace(/\D+/g,"");if(!p)return null;const f=`https://wa.me/${p}`;return e.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"6px 0",position:"absolute",left:0,right:0,bottom:10},children:e.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer","aria-label":s==="ar"?"ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨":"Contact via WhatsApp",title:s==="ar"?"ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨":"Contact via WhatsApp",onMouseEnter:S=>{S.currentTarget.style.transform="scale(1.1)",S.currentTarget.style.boxShadow="0 4px 14px rgba(0,0,0,.24)"},onMouseLeave:S=>{S.currentTarget.style.transform="scale(1)",S.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,.18)"},style:{background:"#22c55e",border:"none",borderRadius:"50%",padding:"7px",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"38px",height:"38px",boxShadow:"0 2px 12px rgba(0,0,0,.18)",transition:"transform .15s ease, box-shadow .15s ease"},children:e.jsx(Es,{size:16})})})})(),e.jsx("span",{className:"sidebar-mini-badge",style:{background:"#f6ad55",color:"#fff",borderRadius:"8px",padding:"2px 10px",fontWeight:700,fontSize:".7rem"},children:"v1.0"}),u&&e.jsxs("span",{style:{fontSize:".55rem",fontWeight:600,opacity:.75,display:"block",marginTop:"4px",color:"#fff"},children:[s==="ar"?"Ø¯ÙˆØ±:":"Role:"," ",u.role]}),e.jsx("small",{style:{fontSize:".55rem",opacity:.55,display:"block",marginTop:"2px",color:"#fff"},children:s==="ar"?"ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ":"Preview mode"})]})]})})}),!E()&&l.collapsed&&e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",top:0,bottom:0,left:68,width:8,background:"transparent",zIndex:1300,pointerEvents:"auto"},ref:D,onMouseEnter:()=>{E()||c({type:"SET_HOVERING",value:!0})},onMouseLeave:()=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{const p=w.current,f=D.current;p&&p.matches(":hover")||f&&f.matches(":hover")||c({type:"SET_HOVERING",value:!1}),h.current=null},160)}}),e.jsx("div",{className:"sidebar-modern__backdrop","data-open":l.mobileOpen,role:"button",tabIndex:l.mobileOpen?0:-1,"aria-label":"Close menu",onClick:()=>{c({type:"SET_MOBILE_OPEN",value:!1}),x&&x(!1)},onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),c({type:"SET_MOBILE_OPEN",value:!1}),x&&x(!1))}})]})},Be=(t,s="en")=>{try{return new Intl.NumberFormat(s,{style:"currency",currency:"SAR",maximumFractionDigits:2}).format(t||0)}catch{return(t||0).toFixed(2)+" SAR"}};function Us({onClose:t,items:s,total:r,locale:i,t:o,updateQuantity:n}){const d=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches?{initial:!1,animate:{},exit:{}}:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8}};return e.jsxs(fe.aside,{id:"cart-panel",...d,transition:{duration:.22},className:"fixed right-4 top-20 w-96 bg-white dark:bg-slate-900 border rounded-lg shadow-xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-slate-800 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:o("cartTitle")||"Cart"}),e.jsx("button",{onClick:t,className:"p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":o("close")||"Close",children:e.jsx(Le,{size:16})})]}),e.jsx("div",{className:"p-4 max-h-64 overflow-auto",children:s&&s.length?e.jsx("ul",{className:"flex flex-col gap-3",children:s.map(b=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("img",{src:b.images?.[0]||b.image||"/images/hero-image.svg",alt:b.name||"",className:"w-14 h-14 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:b.name||b.title}),e.jsxs("div",{className:"text-xs text-slate-500",children:[Be(b.price||b.salePrice||0,i)," Ã— ",b.quantity||1]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:Be((b.price||b.salePrice||0)*(b.quantity||1),i)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>n&&n(b.id,Math.max(1,(b.quantity||1)-1)),className:"px-2 py-1 border rounded","aria-label":"Decrease quantity",children:"-"}),e.jsx("span",{className:"px-2 py-1 border rounded",children:b.quantity||1}),e.jsx("button",{onClick:()=>n&&n(b.id,(b.quantity||1)+1),className:"px-2 py-1 border rounded","aria-label":"Increase quantity",children:"+"})]})]})]},b.id))}):e.jsx("div",{className:"text-sm text-slate-500",children:o("emptyCart")||"Cart is empty"})}),e.jsxs("div",{className:"p-4 border-t dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm text-slate-600",children:o("totalLabel")||"Total"}),e.jsx("div",{className:"font-semibold",children:Be(r,i)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pe,{to:"/cart",onClick:t,className:"w-1/2 text-center py-2 border rounded",children:o("cart")||"View cart"}),e.jsx(pe,{to:"/checkout",onClick:t,className:"w-1/2 text-center py-2 bg-amber-500 text-white rounded",children:o("proceedCheckout")||"Checkout"})]})]})]})}const on=[{to:"/catalog",label:"catalog",icon:ws},{to:"/products",label:"products",icon:Ie},{to:"/offers",label:"offers",icon:Jt},{to:"/stores",label:"stores",icon:_e}];function ln({t,isActive:s}){return e.jsx("div",{style:{width:"100vw",position:"relative",left:"50%",right:"50%",marginLeft:"-50vw",marginRight:"-50vw"},children:e.jsx("nav",{className:"top-nav flex items-center justify-center gap-2 sm:gap-4 md:gap-6 px-2 py-2 rounded-xl bg-white/80 dark:bg-slate-900/80 shadow-md border border-slate-200 dark:border-slate-800 transition-all duration-300",style:{width:"100%"},children:on.map(r=>e.jsxs(pe,{to:r.to,className:`top-nav-link flex items-center gap-1 px-3 py-2 rounded-lg font-semibold text-slate-700 dark:text-slate-100 hover:bg-emerald-50 dark:hover:bg-emerald-900 transition-colors duration-200 ${s(r.to)?"bg-emerald-100 dark:bg-emerald-800 text-emerald-700 dark:text-emerald-200 shadow":""}`,children:[r.icon&&e.jsx(r.icon,{size:18,className:"mr-1"}),e.jsx("span",{children:t(r.label)})]},r.to))})})}function cn(){try{return Qt()}catch{return{theme:"system",setTheme:()=>{}}}}function dn({t,locale:s,setLocale:r,panel:i,setPanel:o,cartItems:n,cartTotal:u,updateQuantity:d,user:b}){const y=a.useRef(null),g=Array.isArray(n)?n.reduce((l,c)=>l+(c.quantity||1),0):0;a.useEffect(()=>{const l=y.current;if(!(!l||typeof l.animate!="function"))try{l.animate([{transform:"scale(1)"},{transform:"scale(1.08)"},{transform:"scale(1)"}],{duration:280,easing:"cubic-bezier(.2,.9,.3,1)"})}catch{}},[g]);const{theme:v,setTheme:x}=cn();return a.useMemo(()=>v==="system"?"light":v==="light"?"dark":"system",[v]),v==="dark"?t?.("themeDark"):v==="light"?t?.("themeLight"):t?.("themeSystemAuto"),e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 transition-colors duration-300",children:b?e.jsxs(pe,{to:"/account/profile",className:"flex items-center gap-2 px-3 py-1 border rounded text-sm bg-white/90 dark:bg-slate-950/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 transition-colors duration-300",children:[e.jsx(Pe,{size:16}),e.jsx("span",{className:"hidden sm:inline-block",children:b.name||(b.email||"").split("@")[0]})]}):e.jsxs(pe,{to:"/login",className:"border rounded bg-white/90 dark:bg-slate-950/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 transition-colors duration-300 flex items-center justify-center",style:{minWidth:0,minHeight:0,padding:0},children:[e.jsx(Pe,{size:18,className:"block sm:hidden"}),e.jsx("span",{className:"hidden sm:inline-block text-sm px-3 py-1",children:t("login")||"Login"})]})})}const un=a.createContext(null),pn=()=>a.useContext(un);function Yt({src:t,alt:s,className:r="",style:i={},loading:o="lazy",decoding:n="async",fetchPriority:u,fetchpriority:d,...b}){const y=j=>{if(!j||typeof j!="string")return"";let z=j.trim();return z.startsWith("/api/uploads")&&(z=z.replace(/^\/api/,"")),z.startsWith("uploads/")&&(z="/"+z),/^\d{2,4}x\d{2,4}(\?.*)?$/.test(z)&&(z=`https://via.placeholder.com/${z}`),z},g=y(t),[v,x]=a.useState(g||""),l=a.useRef(g||""),c=a.useRef(null);a.useEffect(()=>{if(!t)return;const j=y(t);if(j===v)return;c.current&&(c.current.onload=null,c.current.onerror=null,c.current=null);const z=new Image;return c.current=z,z.onload=()=>{l.current=j,x(j),c.current=null},z.onerror=()=>{c.current=null},z.src=j,()=>{c.current&&(c.current.onload=null,c.current.onerror=null,c.current=null)}},[t,v]);const w=v||y(t)||"",I=u??d??"low";return e.jsx("img",{src:w,alt:s,className:r,style:i,loading:o,decoding:n,fetchPriority:I,...b})}function mn(){const{byLocation:t}=pn()||{byLocation:{topStrip:[]}},{setting:s}=Se()||{},r=t&&t.topStrip||[],i=a.useRef(null);return a.useEffect(()=>{if(!i.current||!s?.topStripAutoscroll)return;const o=i.current;let n,u=0;const d=.4,b=()=>{o&&(u=(u+d)%o.scrollWidth,o.scrollLeft=u,n=requestAnimationFrame(b))};return n=requestAnimationFrame(b),()=>cancelAnimationFrame(n)},[s?.topStripAutoscroll,r.length]),!s?.topStripEnabled||!r||r.length===0?null:e.jsx("div",{className:"w-full bg-white/90 dark:bg-slate-900/90 border-b dark:border-slate-800",children:e.jsx("div",{className:"max-w-full sm:max-w-[1200px] mx-auto px-2 sm:px-6 md:px-10",children:e.jsx("div",{ref:i,className:"w-full flex gap-4 overflow-x-auto no-scrollbar py-2 items-center smooth-scroll",style:{scrollBehavior:"smooth"},"aria-label":"Top promotions",children:r.map(o=>e.jsxs("a",{href:o.linkUrl||"#",className:"flex-shrink-0 min-w-[220px] sm:min-w-[260px] bg-white/95 dark:bg-slate-800/80 rounded-lg p-2 shadow-sm hover:shadow-md transition-shadow flex items-center gap-3","aria-label":o.titleEn||o.titleAr,children:[o.image?e.jsx("div",{className:"w-14 h-10 rounded-md overflow-hidden flex-shrink-0",children:e.jsx(Yt,{src:o.image,alt:o.titleEn||o.titleAr,className:"w-full h-full object-cover"})}):null,e.jsxs("div",{className:"flex-1 text-sm leading-tight",children:[e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-100",children:o.titleAr||o.titleEn}),o.bodyAr||o.bodyEn?e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:o.bodyAr||o.bodyEn}):null]})]},o.id))})})})}function le(t,s,r=["ar","en"]){if(t==null)return"";if(typeof t=="string"||typeof t=="number")return String(t);if(typeof t=="object"){if(t[s])return String(t[s]);for(const o of r)if(t[o])return String(t[o]);const i=Object.values(t).find(o=>typeof o=="string"||typeof o=="number");return i?String(i):""}return""}function Zl(t,s,r="name"){return le(t?.[r],s)}function ec(t,s,r,i){return le(t?.[s],r,i)}const zs=a.createContext(null),hn=({children:t})=>{const{user:s}=ye()||{},i=me()?.locale??"ar",[o,n]=a.useState(()=>{try{const h=localStorage.getItem("my_store_cart"),D=h?JSON.parse(h):[],R=10,E=new Map;for(const M of Array.isArray(D)?D:[]){const q=M?.id||M?.productId;if(!q)continue;const F=E.get(q)||{...M,id:q,quantity:0},B=Math.min(R,(F.quantity||0)+(parseInt(M.quantity||1,10)||1));E.set(q,{...F,quantity:B})}return Array.from(E.values())}catch{return[]}}),[u,d]=a.useState(!1),[b,y]=a.useState(null),g=a.useRef(!1),v=a.useRef(new Map);a.useEffect(()=>()=>{try{v.current.forEach(h=>clearTimeout(h)),v.current.clear()}catch{}},[]),a.useEffect(()=>{try{localStorage.setItem("my_store_cart",JSON.stringify(o))}catch{}},[o]);const x=10;function l(h,D){const R=h?.price||0;if(!Array.isArray(h?.tierPrices)||!h.tierPrices.length)return R;const E=[...h.tierPrices].sort((q,F)=>q.minQty-F.minQty);let M=R;for(const q of E)if(D>=q.minQty)M=q.price;else break;return M}const c=a.useCallback((h,D=1)=>{if(!h||!h.id)return{ok:!1,reason:"INVALID_PRODUCT"};if(!s){y("AUTH_REQUIRED");try{window.dispatchEvent(new CustomEvent("auth:required",{detail:{action:"add_to_cart",productId:h.id}})),window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"warn",title:"ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",description:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©"}}))}catch{}return{ok:!1,reason:"AUTH_REQUIRED"}}let R,E=D;n(M=>{const q=M.findIndex(B=>B.id===h.id);if(q>-1){const B=[...M],T=B[q].quantity||1,A=Math.min(x,T+D);return E=A,B[q].quantity=A,B[q].price=l(h,A),R={type:"increment",quantity:A},B}const F=l(h,D);return R={type:"new",quantity:D},[...M,{...h,quantity:D,price:F}]});try{const M={productId:h.id,name:le(h?.name??h?.title,i)||(typeof h?.name=="string"?h.name:h?.title)||"Ù…Ù†ØªØ¬",image:Array.isArray(h.images)&&h.images[0]||h.image||null,quantity:D};window.dispatchEvent(new CustomEvent("cart:add",{detail:M})),window.dispatchEvent(new Event("cart:icon-bump"));const q=R?.type==="increment";window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"success",title:q?"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ©":"ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",description:M.name}}))}catch{}return(async()=>{try{await Y.cartSet(h.id,E)}catch(M){if(M?.code==="INSUFFICIENT_STOCK"||/INSUFFICIENT_STOCK/.test(M?.message||"")){const q=Number(M?.data?.available??0);n(F=>F.map(B=>{if(B.id!==h.id)return B;const T=Math.min(B.quantity||0,q),A=l(h,T);return{...B,quantity:T,price:A}}));try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"error",title:"Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©",description:`Ø§Ù„Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†: ${q}`}}))}catch{}}else y(M.message)}})(),{ok:!0,...R}},[s,i]),w=h=>{n(D=>D.filter(R=>R.id!==h)),s&&(async()=>{try{await Y.cartRemoveItem(h)}catch(D){y(D.message)}})()},I=(h,D)=>{let R=0;if(n(E=>E.map(M=>{if(M.id!==h)return M;R=M.quantity||0;const q=l(M,D);return{...M,quantity:D,price:q}})),s)try{const E=v.current;E.has(h)&&clearTimeout(E.get(h));const M=setTimeout(async()=>{try{await Y.cartSet(h,D)}catch(q){if(q?.code==="INSUFFICIENT_STOCK"||/INSUFFICIENT_STOCK/.test(q?.message||"")){const F=Number(q?.data?.available??0);n(B=>B.map(T=>{if(T.id!==h)return T;const A=Math.min(F,R),O=l(T,A);return{...T,quantity:A,price:O}}));try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"error",title:"Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©",description:`Ø§Ù„Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†: ${F}`}}))}catch{}}else y(q.message)}finally{try{E.delete(h)}catch{}}},300);E.set(h,M)}catch{}},j=()=>{n([]),s&&(async()=>{try{await Y.cartClear()}catch(h){y(h.message)}})()};a.useEffect(()=>{(async()=>{let D=!1;try{D=!!localStorage.getItem("my_store_token")}catch{}if(!(!s||!D)&&!g.current){d(!0),y(null);try{const R=await Y.cartList(),E=Array.isArray(R)?R:R.items||[],M=new Map;E.forEach(F=>{M.set(F.productId||F.id,{id:F.productId||F.id,quantity:F.quantity||1,price:F.price||F.salePrice||0,...F})}),o.forEach(F=>{if(!M.has(F.id))M.set(F.id,F);else{const B=M.get(F.id);B.quantity=Math.max(B.quantity||1,F.quantity||1),M.set(F.id,B)}});const q=Array.from(M.values());if(n(q),o.length){try{const F=await Y.cartMerge(q.map(T=>({productId:T.id,quantity:T.quantity}))),B=Array.isArray(F?.skipped)?F.skipped:[];if(B.length){const T=i==="ar"?`ØªØ¹Ø°Ø± Ø¥Ø¶Ø§ÙØ© ${B.length} Ø¹Ù†ØµØ± Ø¨Ø³Ø¨Ø¨ Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†`:`${B.length} items were skipped (out of stock)`;try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"warn",title:"Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",description:T}}))}catch{}}}catch{}try{const F=await Y.cartList(),B=Array.isArray(F)?F:F.items||[];n(B.map(T=>({id:T.productId||T.id,quantity:T.quantity||1,price:T.price||T.salePrice||0,...T})))}catch{}}g.current=!0}catch(R){y(R.message)}finally{d(!1)}}})()},[s]);const z=o.reduce((h,D)=>h+Number(D.price||D.salePrice||0)*Number(D.quantity||1),0),$={cartItems:o,addToCart:c,removeFromCart:w,updateQuantity:I,clearCart:j,cartTotal:z,maxPerItem:x,loading:u,error:b};return e.jsx(zs.Provider,{value:$,children:t})},Zt=()=>a.useContext(zs),gn=({size:t=24,className:s=""})=>e.jsx("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),xn=({size:t=24,className:s=""})=>e.jsx("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),fn=({size:t=20,className:s=""})=>e.jsxs("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("circle",{cx:"11",cy:"11",r:"6",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),yn=()=>({t:t=>t,locale:"en",setLocale:()=>{}}),vn=()=>({user:null,logout:()=>{}}),bn=()=>({cartItems:[],updateQuantity:()=>{},removeFromCart:()=>{}}),Fe=(t,s)=>{try{const r=typeof window<"u"?window[t]:void 0;if(!r)return s();if(typeof r=="function")try{const i=r();if(i)return i}catch{}return typeof r=="object"?r:s()}catch{return s()}},jn=P.memo(function({className:s=""}){const r=ue(),i=me()||Fe("__useLanguage__",yn),o=ye()||Fe("__useAuth__",vn),n=Zt()||Fe("__useCart__",bn),u=Ds(),{t:d,locale:b,setLocale:y}=i,{user:g}=o,{cartItems:v=[],updateQuantity:x}=n,{setting:l}=Se()||{},c=a.useMemo(()=>l?.logoUrl||l?.logo||"/images/site-logo.png",[l]),[w,I]=a.useState(null),[j,z]=a.useState(!1),[$,h]=a.useState(!1),[D,R]=a.useState("");a.useEffect(()=>{if(!D)return;h(!0);const p=setTimeout(()=>{h(!1)},600);return()=>clearTimeout(p)},[D]),a.useEffect(()=>{const p=localStorage.getItem("dark-mode")==="true";z(p),document.body.classList.toggle("dark-mode",p),document.body.classList.toggle("light-mode",!p)},[]),a.useEffect(()=>{localStorage.setItem("dark-mode",j),document.body.classList.toggle("dark-mode",j),document.body.classList.toggle("light-mode",!j)},[j]),a.useCallback(()=>z(p=>!p),[]),a.useRef(null),a.useMemo(()=>v.reduce((p,f)=>p+(f.quantity||1),0),[v]);const E=a.useMemo(()=>v.reduce((p,f)=>p+(f.price||f.salePrice||0)*(f.quantity||1),0),[v]);a.useCallback(()=>I("cart"),[]);const M=a.useCallback(()=>I(null),[]),[q,F]=a.useState(!1),B=a.useCallback(()=>{if(u&&typeof u.toggle=="function")u.toggle();else try{window.dispatchEvent(new CustomEvent("sidebar:toggle",{detail:{cmd:"toggle"}}))}catch{}},[u]);a.useEffect(()=>{if(u&&typeof u.open=="boolean"){F(!!u.open);return}const p=f=>{f?.detail&&typeof f.detail.open=="boolean"&&F(f.detail.open)};return window.addEventListener("sidebar:state",p),()=>window.removeEventListener("sidebar:state",p)},[u]);const[T,A]=a.useState(!1);a.useEffect(()=>{const p=()=>A(window.scrollY>6);return p(),window.addEventListener("scroll",p,{passive:!0}),()=>window.removeEventListener("scroll",p)},[]);const{pathname:O}=r,_=a.useCallback(p=>O===p||O.startsWith(p+"/"),[O]),U=["/","/en","/fr"].includes(O)?"h-14 md:h-16":"h-16";return e.jsxs(e.Fragment,{children:[e.jsx(mn,{}),e.jsxs("header",{className:`w-full sticky top-0 z-[1200] ${U} bg-gradient-to-b from-white/95 via-white/90 to-slate-100/80 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900/90 backdrop-blur border-b dark:border-slate-800 transition-shadow transition-colors duration-300 ${T?"shadow-2xl":"shadow"} ${s}`,dir:"rtl",children:[$&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 z-[1300]",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 via-emerald-600 to-emerald-400 animate-pulse rounded-b",style:{width:"100%"}})}),e.jsx("a",{href:"#main",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 px-3 py-1 rounded bg-amber-500 text-white",children:d("Skip to content")}),e.jsxs("div",{className:"relative max-w-full sm:max-w-[1200px] mx-auto w-full h-full px-2 sm:px-6 md:px-10 grid grid-cols-3 items-center gap-3 sm:gap-6 transition-colors duration-300",children:[e.jsxs("div",{className:"col-start-1 col-end-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-full max-w-[420px] flex items-center group relative",style:{background:"rgba(255,255,255,0.65)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:"2rem",boxShadow:"0 4px 24px 0 rgba(16,38,57,0.08)",border:"none",padding:"0.25rem 0.5rem",minHeight:"48px",transition:"box-shadow .25s cubic-bezier(.4,1.3,.5,1), background .25s"},children:e.jsxs("div",{className:"relative flex-1 flex items-center items-stretch gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("search:focus"))}catch{window.dispatchEvent(new Event("search:focus"))}},className:"flex items-center justify-center p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":d("ÙØªØ­ Ø§Ù„Ø¨Ø­Ø«")||"ÙØªØ­ Ø§Ù„Ø¨Ø­Ø«",children:e.jsx(fn,{size:20,className:"text-slate-500"})}),e.jsx(pe,{to:g?"/account/profile":"/login","aria-label":g?d("profile")||"Profile":d("login")||"Login",className:"flex items-center justify-center p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(Pe,{size:18,className:"text-sky-600 dark:text-sky-300"})})]})}),e.jsx("div",{className:"ml-3 hidden sm:flex",children:e.jsx(dn,{t:d,locale:b,setLocale:y,panel:w,setPanel:I,cartItems:v,cartTotal:E,updateQuantity:x,user:g})})]}),e.jsx("div",{className:"col-start-2 col-end-3 flex justify-center",children:e.jsx(pe,{to:"/",className:"block","aria-label":l?.siteNameAr||l?.siteNameEn||"Home",children:e.jsx("div",{className:"w-[150px] h-[48px] flex items-center justify-center overflow-hidden",style:{minWidth:150},children:e.jsx(Yt,{src:c,alt:l?.siteNameAr||l?.siteNameEn||"Logo",className:"h-[40px] w-auto object-contain drop-shadow cursor-pointer"})})})}),e.jsx("div",{className:"col-start-2 col-end-3 hidden sm:flex justify-center mt-12",children:e.jsx("nav",{className:"w-full flex items-center justify-center",children:e.jsx(ln,{t:d,isActive:_})})}),e.jsx("div",{className:"col-start-3 col-end-4 flex items-center justify-end gap-2 sm:gap-4",children:e.jsx("button",{onClick:B,"aria-expanded":q,"aria-label":d(q?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Ø§ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"),"aria-controls":"site-sidebar",className:"p-3 rounded-xl md:hidden bg-slate-50 dark:bg-slate-800 border shadow-sm hover:bg-emerald-50 dark:hover:bg-emerald-900 focus-visible:ring-2 focus-visible:ring-emerald-500 min-w-[44px] min-h-[44px] transition-all duration-300",children:q?e.jsx(xn,{size:22}):e.jsx(gn,{size:22})})})]}),typeof document<"u"&&bs.createPortal(e.jsx(De,{children:w==="cart"&&e.jsx(Us,{onClose:M,items:v,total:E,locale:b,t:d,updateQuantity:x})}),document.body)]})]})}),wn=()=>{const{locale:t}=me(),s=t==="ar"?"Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ ÙˆØ®ÙŠØ§Ø±Ø§Øª Ø¯ÙØ¹ Ù…ØªØ¹Ø¯Ø¯Ø©":"Split your purchases via Tabby & Tamara â€“ Fast shipping & flexible payments";return e.jsx("div",{className:"announcement-bar-modern",role:"note",children:e.jsx("div",{className:"announcement-inner",children:e.jsx("span",{className:"announcement-text",children:s})})})},Sn=()=>{const{locale:t}=me(),{pathname:s,search:r}=ue(),i=Oe(),[o,n]=a.useState([]),[u,d]=a.useState(!1),[b,y]=a.useState(null),g=a.useRef(null),[v,x]=a.useState(!1),[l,c]=a.useState(!1),w=a.useRef({down:!1,startX:0,scrollLeft:0,moved:!1}),I=12;a.useEffect(()=>{d(!0);try{const N=localStorage.getItem("cats_cache"),U=Number(localStorage.getItem("cats_cache_ts")||0),p=Date.now()-U<3600*1e3;if(N&&p){const f=JSON.parse(N);Array.isArray(f)&&n(f)}}catch{}Y.listCategories({withCounts:1}).then(N=>{if(N?.categories){n(N.categories);try{localStorage.setItem("cats_cache",JSON.stringify(N.categories)),localStorage.setItem("cats_cache_ts",String(Date.now()))}catch{}}}).catch(N=>y(N.message)).finally(()=>d(!1))},[]);const j=a.useMemo(()=>{const N=new Map;for(const p of o){const f=p.slug||p.id||p.name?.ar||p.name?.en||JSON.stringify(p);N.has(f)||N.set(f,p)}const U=Array.from(N.values());return U.sort((p,f)=>(f.productCount||0)-(p.productCount||0)||(p.name?.ar||"").localeCompare(f.name?.ar||"","ar")),U},[o]),z=a.useMemo(()=>{const N=new URLSearchParams(r).get("category");if(N)return N;const U=s.split("/").filter(Boolean),p=U.findIndex(f=>f==="category");return p>=0?U[p+1]:null},[s,r]),$=N=>{const U=g.current;if(!U)return;const p=Math.round(U.clientWidth*.8)*(N==="left"?-1:1);U.scrollBy({left:p,behavior:"smooth"})},h=N=>{const U=g.current;U&&(w.current={down:!0,startX:N,scrollLeft:U.scrollLeft,moved:!1},c(!0),U.dataset.dragging="1")},D=N=>{const U=g.current;if(!U||!w.current.down)return;const p=N-w.current.startX;Math.abs(p)>4&&(w.current.moved=!0),U.scrollLeft=w.current.scrollLeft-p},R=()=>{const N=g.current;N&&delete N.dataset.dragging,w.current.down=!1,c(!1)},E=N=>{N.button===0&&h(N.clientX)},M=N=>{w.current.down&&(N.preventDefault(),D(N.clientX))},q=()=>R(),F=()=>R(),B=N=>{const U=N.touches?.[0];U&&h(U.clientX)},T=N=>{const U=N.touches?.[0];U&&D(U.clientX)},A=()=>R(),O=N=>{const U=g.current;U&&Math.abs(N.deltaY)>Math.abs(N.deltaX)&&(U.scrollBy({left:N.deltaY,behavior:"auto"}),N.preventDefault())},_=N=>{const{key:U}=N;if(!["ArrowLeft","ArrowRight","Home","End"].includes(U))return;const p=g.current;if(!p)return;const f=Array.from(p.querySelectorAll("button.cat-pill")),S=f.indexOf(N.currentTarget);if(S<0)return;N.preventDefault();let V=S;U==="ArrowLeft"&&(V=Math.max(0,S-1)),U==="ArrowRight"&&(V=Math.min(f.length-1,S+1)),U==="Home"&&(V=0),U==="End"&&(V=f.length-1);const K=f[V];K&&(K.focus(),K.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"}))};return e.jsxs("div",{className:"category-scroller",role:"navigation","aria-label":t==="ar"?"Ø§Ù„Ø£Ù‚Ø³Ø§Ù…":"Categories",children:[e.jsx("button",{type:"button","aria-label":"Scroll right",onClick:()=>$("right"),className:"cat-arrow absolute left-2 top-[calc(var(--header-height,72px)+10px)] z-10 hidden md:inline-flex","data-dir":"right",children:e.jsx(Xs,{size:18})}),e.jsx("button",{type:"button","aria-label":"Scroll left",onClick:()=>$("left"),className:"cat-arrow absolute right-2 top-[calc(var(--header-height,72px)+10px)] z-10 hidden md:inline-flex","data-dir":"left",children:e.jsx(Qs,{size:18})}),e.jsxs("div",{ref:g,className:`category-track${l?" is-dragging":""}`,onMouseDown:E,onMouseMove:M,onMouseUp:q,onMouseLeave:F,onTouchStart:B,onTouchMove:T,onTouchEnd:A,onWheel:O,children:[u&&e.jsx("span",{className:"text-xs opacity-70 px-2",children:"â€¦"}),b&&e.jsx("span",{className:"text-xs text-red-600 px-2",children:"Ø®Ø·Ø£"}),!u&&(v?j:j.slice(0,I)).map(N=>{const U=z&&z===N.slug,p=(N?.name?.ar||N?.name?.en||N?.slug||"").toLowerCase(),S=(()=>{switch((N.icon||"").toLowerCase().trim()){case"cup-soda":case"soda":case"drink":case"drinks":return ns;case"coffee":case"tea":return rs;case"cookie":case"cookies":case"biscuit":case"biscuits":return ss;case"candy":case"sugar":return ts;case"utensils":case"pasta":case"rice":return Ue;case"store":case"supermarket":return _e;case"tag":return As}return/(Ù…Ø§Ø¡|Ù…Ø´Ø±ÙˆØ¨|Ù…Ø´Ø±ÙˆØ¨Ø§Øª|drinks?|beverages?|water)/.test(p)?ns:/(Ø´Ø§ÙŠ|Ù‚Ù‡ÙˆØ©|coffee|tea)/.test(p)?rs:/(Ø¨Ø³ÙƒÙˆÙŠØª|ÙƒÙˆÙƒÙŠ|ÙƒÙˆÙƒÙŠØ²|biscuits?|cookies?)/.test(p)?ss:/(Ø³ÙƒØ±|sugar)/.test(p)?ts:/(Ù…ÙƒØ±ÙˆÙ†Ø©|Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©|Ø£Ø±Ø²|Ø§Ø±Ø²|pasta|rice)/.test(p)?Ue:/(ØµÙ„ØµØ§Øª|Ù…Ø®Ù„Ù„Ø§Øª|sauces?|pickles?)/.test(p)?Ue:/(Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª|supermarket)/.test(p)?_e:null})(),V=K=>{if(g.current?.dataset?.dragging==="1"||w.current.moved)return;const Q=new URLSearchParams(r||"");Q.set("category",K),Q.set("page","1");const se=Q.toString();i(`${s}${se?`?${se}`:""}`,{replace:!1})};return e.jsxs("button",{type:"button",onClick:()=>V(N.slug),className:`cat-pill ${U?"active":""}`,"aria-current":U?"page":void 0,onKeyDown:_,children:[S&&e.jsx(S,{size:14,className:"opacity-70"}),e.jsx("span",{children:t==="ar"?N.name?.ar||N.slug:N.name?.en||N.slug}),typeof N.productCount=="number"&&N.productCount>0&&e.jsx("span",{className:"count",children:N.productCount})]},N.id||N.slug)}),j.length>I&&e.jsx("button",{type:"button",onClick:()=>x(N=>!N),className:"cat-pill",children:v?t==="ar"?"Ø¥Ø®ÙØ§Ø¡":"Hide":t==="ar"?"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯":"Show more"})]})]})};function kn({isAr:t,storeName:s,logo:r,aboutLines:i}){return e.jsxs("ul",{className:`footer-about text-slate-700 ${t?"text-right":"text-left"} flex-shrink-0 min-w-[280px] snap-start`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Yt,{src:r,alt:s,className:"h-10 w-auto"}),e.jsx("span",{className:"sr-only",children:s})]}),e.jsx("div",{className:"text-sm leading-7 space-y-1",children:i.map((o,n)=>e.jsx("p",{children:o},n))})]})}function En({t,linkBlog:s,linkSocial:r,linkReturns:i,linkPrivacy:o}){return e.jsxs("ul",{className:"footer-links text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[220px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.links}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:s,className:"footer-link hover:text-slate-900",children:t.blog})}),e.jsx("li",{children:e.jsx("a",{href:r,className:"footer-link hover:text-slate-900",children:t.social})}),e.jsx("li",{children:e.jsx("a",{href:i,className:"footer-link hover:text-slate-900",children:t.returns})}),e.jsx("li",{children:e.jsx("a",{href:o,className:"footer-link hover:text-slate-900",children:t.privacy})})]})]})}function An({t,chatPath:s,supportMobile:r,supportPhone:i,supportEmail:o}){return e.jsxs("div",{className:"footer-support text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[220px] sm:min-w-[260px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.support}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 justify-items-center md:flex md:flex-wrap md:justify-center",children:[e.jsxs(pe,{to:s,"aria-label":t.chat,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(Es,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.chat})]}),e.jsxs("a",{href:`tel:${r}`,"aria-label":t.mobile,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(Ys,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.mobile})]}),e.jsxs("a",{href:`tel:${i}`,"aria-label":t.phone,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(Zs,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.phone})]}),e.jsxs("a",{href:`mailto:${o}`,"aria-label":t.email,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(er,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.email})]})]})]})}function Nn({t,appStoreUrl:s,playStoreUrl:r,isRtl:i,taxNumber:o}){return e.jsxs("div",{className:"footer-app-badges text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[260px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.appTitle}),e.jsx(Cn,{appStoreUrl:s,playStoreUrl:r,playBadgeAlt:t.playBadgeAlt,appStoreBadgeAlt:t.appStoreBadgeAlt,isRtl:i}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-slate-700 mb-1",children:i?"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ":"Tax number"}),e.jsx("div",{className:"text-sm font-semibold tracking-wide",children:o})]})]})}function Cn({appStoreUrl:t,playStoreUrl:s,playBadgeAlt:r,appStoreBadgeAlt:i,isRtl:o}){const[n,u]=P.useState(!0),[d,b]=P.useState(!0);return e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-4",children:[e.jsx("a",{href:s,target:"_blank",rel:"noreferrer noopener",className:"group inline-flex items-center justify-center rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-md active:shadow","aria-label":r,children:n?e.jsx("img",{src:"/assets/badges/google-play-badge.svg",alt:r,className:"h-11 md:h-12 object-contain transition-transform duration-150 group-hover:-translate-y-0.5 group-active:translate-y-0 group-hover:brightness-110",loading:"lazy",onError:()=>u(!1)}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-black px-3 py-2 text-white transition-colors hover:border-slate-400",children:[e.jsx("span",{className:"text-[10px] leading-3 opacity-80",children:"GET IT ON"}),e.jsx("span",{className:"text-sm font-semibold",children:"Google Play"})]})}),e.jsx("a",{href:t,target:"_blank",rel:"noreferrer noopener",className:"group inline-flex items-center justify-center rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-md active:shadow","aria-label":i,children:d?e.jsx("img",{src:"/assets/badges/app-store-badge.svg",alt:i,className:"h-11 md:h-12 object-contain transition-transform duration-150 group-hover:-translate-y-0.5 group-active:translate-y-0 group-hover:brightness-110",loading:"lazy",onError:()=>b(!1)}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-black px-3 py-2 text-white transition-colors hover:border-slate-400",children:[e.jsx("span",{className:"text-[10px] leading-3 opacity-80",children:"Download on the"}),e.jsx("span",{className:"text-sm font-semibold",children:"App Store"})]})})]})}const Tn=()=>{const{locale:t}=me(),{setting:s}=Se()||{},r=t==="ar",i=le(s?.siteName,t)||(r?s?.siteNameAr||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":s?.siteNameEn||"My Store"),o=s?.taxNumber||"311307460300003",n=(r?s?.addressAr:s?.addressEn)||"",u=s?.commercialRegNo||"",d=s?.supportPhone||"920000000",b=s?.supportMobile||"+966500000000";s?.supportWhatsapp;const y=s?.supportEmail||"support@example.com",g=s?.linkBlog||"#",v=s?.linkSocial||"#",x=s?.linkReturns||"#",l=s?.linkPrivacy||"#",c=s?.appStoreUrl||"#",w=s?.playStoreUrl||"#",I=r?"/chat":t==="en"?"/en/chat":"/fr/chat",j={appTitle:r?`ØªØ·Ø¨ÙŠÙ‚ ${i}`:`${i} App`,support:r?"Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡":"Customer Service",links:r?"Ø±ÙˆØ§Ø¨Ø· ØªÙ‡Ù…Ùƒ":"Useful Links",blog:r?"Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©":"Blog",social:r?"Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ":"Social Media",returns:r?"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø³ØªØ¨Ø¯Ø§Ù„ ÙˆØ§Ù„Ø¥Ø³ØªØ±Ø¬Ø§Ø¹":"Return & Exchange Policy",privacy:r?"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©":"Privacy & Terms",phone:r?"Ù‡Ø§ØªÙ":"Phone",mobile:r?"Ø¬ÙˆØ§Ù„":"Mobile",whatsapp:r?"ÙˆØ§ØªØ³Ø§Ø¨":"WhatsApp",chat:r?"Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©":"Chat",email:r?"Ø¥ÙŠÙ…ÙŠÙ„":"Email",playBadgeAlt:r?"Ø§Ø­ØµÙ„ Ø¹Ù„ÙŠÙ‡ Ù…Ù† Google Play":"Get it on Google Play",appStoreBadgeAlt:r?"Ø­Ù…Ù‘Ù„ Ù…Ù† App Store":"Download on the App Store"},z=s?.footerAbout??(r?s?.footerAboutAr:s?.footerAboutEn)??"",$=le(z,t),h=$?.trim()?r?$.split(/\r?\n/).filter(Boolean):[$]:r?["Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¨Ø§Ù„Ø­Ø¨Ø©","ÙˆØ¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ Ù…Ù† Ù…Ù†Ø¸ÙØ§Øª Ùˆ ÙƒÙ…Ø§Ù„ÙŠØ§Øª","Ø£ÙŠØ¶Ù‹Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙ†Ø§ Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª ÙˆØ¬Ù…ÙŠØ¹","Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø±Ù†Ø§ Ø¬Ù…Ù„Ø© ÙˆØ¬ÙˆØ¯ØªÙ†Ø§","Ø£ØµÙ„ÙŠØ©"]:["We specialize in wholesale and retail food products and home essentials. We also have a supermarket section to cover family needs with genuine quality at great prices."];return e.jsx("footer",{className:"site-footer mt-12 bg-gradient-to-r from-white/90 via-[#F6FFF0] to-white/90 border-t border-slate-200",children:e.jsxs("div",{className:"container-custom px-4 py-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 items-start",children:[e.jsx("div",{className:"md:col-span-4",children:e.jsx(kn,{isAr:r,storeName:i,logo:s?.logoUrl||s?.logo||"/logo.svg",aboutLines:h})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(En,{t:j,linkBlog:g,linkSocial:v,linkReturns:x,linkPrivacy:l})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(An,{t:j,chatPath:I,supportMobile:b,supportPhone:d,supportEmail:y})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(Nn,{t:j,appStoreUrl:c,playStoreUrl:w,isRtl:r,taxNumber:o})})]}),e.jsx("div",{className:"mt-8 border-t border-slate-200 pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-700",children:[e.jsxs("span",{className:"block md:inline",children:["Â© ",new Date().getFullYear()," ",i,"."]}),e.jsxs("span",{className:"hidden md:inline",children:["Â ",r?"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©":"All rights reserved","."]}),(n||u)&&e.jsxs("span",{className:"block md:inline ms-2",children:[r?"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†":"Address",": ",n||"-",u?` Â· ${r?"Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ":"CR"}: ${u}`:""]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:v,className:"inline-flex items-center gap-2 text-sm text-slate-700 hover:text-primary focus:outline-none focus:ring-2 focus:ring-amber-500/40 rounded-md px-2 py-1",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"opacity-90",children:e.jsx("path",{d:"M22 5.924c-.68.302-1.412.505-2.183.597.786-.47 1.39-1.213 1.674-2.1-.734.435-1.549.75-2.415.921C18.5 4.17 17.45 3.7 16.273 3.7c-2.06 0-3.735 1.674-3.735 3.735 0 .293.034.578.096.85C9.69 7.947 7.12 6.53 5.07 4.368c-.321.55-.505 1.19-.505 1.87 0 1.29.656 2.427 1.654 3.092-.61-.02-1.188-.188-1.69-.47v.05c0 1.8 1.28 3.297 2.978 3.64-.312.084-.64.129-.978.129-.24 0-.474-.024-.699-.066.475 1.486 1.854 2.57 3.488 2.6-1.279 1.003-2.892 1.602-4.645 1.602-.302 0-.6-.018-.895-.053C6.467 21.04 8.244 21.7 10.17 21.7c6.444 0 9.968-5.34 9.968-9.97 0-.152-.004-.304-.01-.455.68-.49 1.27-1.1 1.74-1.8-.626.28-1.3.468-2 .573z"})}),e.jsx("span",{className:"sr-only",children:r?"Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„":"Social"})]}),e.jsx("a",{href:l,className:"text-sm text-slate-700 hover:text-slate-900 underline",children:r?"Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©":"Privacy & Terms"})]})]})})]})})};function _n(){function t(){try{return me()}catch{return{locale:"ar",t:B=>B}}}function s(){try{return ye()}catch{return{user:null}}}function r(){try{return Zt()}catch{return{cartItems:[]}}}function i(){try{return ue()}catch{return{pathname:"/"}}}function o(){try{return Oe()}catch{return()=>{}}}const{panel:n,setPanel:u}=arguments[0]&&typeof arguments[0]=="object"?arguments[0]:{},{locale:d,t:b}=t(),{user:y}=s(),g=i(),v=o(),{cartItems:x=[]}=r(),[l,c]=a.useState(!1),[w,I]=a.useState(!1),j=a.useRef(0),[z,$]=a.useState(!1),h=d==="ar"?"":`/${d}`,D=g?.pathname||"/",R=a.useMemo(()=>Array.isArray(x)?x.reduce((B,T)=>B+(T.quantity||1),0):0,[x]),E=a.useCallback(B=>v(B),[v]),M=a.useCallback(()=>{typeof u=="function"&&(u(n==="cart"?null:"cart"),navigator?.vibrate&&navigator.vibrate(10))},[n,u]);a.useEffect(()=>{if(R>0){$(!0);const B=setTimeout(()=>$(!1),320);return()=>clearTimeout(B)}},[R]),a.useEffect(()=>{try{const O=window.matchMedia("(prefers-reduced-motion: reduce)");c(!!O.matches);const _=N=>c(!!N.matches);O.addEventListener?O.addEventListener("change",_):O.addListener(_)}catch{}const B=()=>{const O=window.scrollY||0;Math.abs(O-j.current)>8&&(I(O>j.current&&O>120),j.current=O)};window.addEventListener("scroll",B,{passive:!0});let T,A;try{if(T=window.visualViewport,T){const O=T.height;A=()=>I(O-T.height>120),T.addEventListener("resize",A)}}catch{}return()=>{window.removeEventListener("scroll",B);try{T&&T.removeEventListener&&A&&T.removeEventListener("resize",A)}catch{}}},[]);const q=a.useMemo(()=>[{key:"home",label:b?.("nav.home")||"Home",icon:js,isActive:D==="/"||D==="/en"||D==="/fr",onClick:()=>E(h||"/")},{key:"categories",label:d==="ar"?"Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª":b?.("nav.catalog")||"Categories",icon:tr,isActive:D.startsWith(`${h}/catalog`),onClick:()=>E(`${h}/catalog`)},{key:"products",label:d==="ar"?"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª":b?.("nav.products")||"Products",icon:Ie,isActive:D.startsWith(`${h}/products`),onClick:()=>E(`${h}/products`)},{key:"offers",label:b?.("nav.offers")||"Offers",icon:Jt,isActive:D.startsWith(`${h}/offers`),onClick:()=>E(`${h}/offers`)},{key:"cart",label:b?.("cart")||"Cart",icon:Gt,isActive:!1,onClick:()=>M()},{key:"account",label:b?.("nav.account")||"Account",icon:Pe,isActive:D.startsWith(`${h}/account`)||D.startsWith(`${h}/login`),onClick:()=>E(y?`${h}/account/profile`:`${h}/login`)}],[b,h,D,E,y,M,d]),F=({item:B})=>{const{key:T,label:A,icon:O,isActive:_,onClick:N}=B,p=(S=>{if(typeof S=="string")return S;if(!S)return"";try{return typeof S=="object"?(S[d]||S.en||S.ar||Object.values(S)[0]||"")+"":String(S)}catch{return""+S}})(A),f=T==="account"?"text-sky-600":"text-amber-600";return e.jsxs(fe.button,{type:"button",whileTap:{scale:.92},"aria-label":p||T,"aria-current":_?"page":void 0,onClick:N,className:`flex-1 h-14 flex flex-col items-center justify-center gap-1 text-[11px] font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 ${_?f:"text-slate-700 dark:text-slate-300"}`,children:[e.jsx(O,{size:18}),e.jsx("span",{className:"leading-none",children:p})]})};return e.jsx(fe.nav,{dir:"rtl",role:"navigation","aria-label":b?.("mobileNavigation")||"Mobile navigation",initial:!1,animate:{y:w?84:0,opacity:1},transition:l?{duration:0}:{type:"spring",stiffness:260,damping:24},className:"md:hidden fixed bottom-0 left-0 right-0 w-full z-[1050] pointer-events-none",style:{paddingBottom:"max(0px, env(safe-area-inset-bottom))"},children:e.jsxs("div",{className:"relative w-full px-2",style:{pointerEvents:"auto"},children:[e.jsx("div",{className:"flex flex-row justify-between items-center gap-2 relative rounded-2xl shadow-2xl border border-white/60 dark:border-slate-800 bg-white/70 dark:bg-slate-900/80 backdrop-blur-xl w-full",children:q.filter(B=>B.key!=="cart").map(B=>e.jsx(F,{item:B},B.key))}),(()=>{const B=q.find(A=>A.key==="cart"),T=B.icon;return e.jsxs(fe.button,{type:"button",whileTap:{scale:.92},whileHover:{scale:1.08},"aria-label":(function(){try{return typeof B.label=="string"?B.label:B.label&&typeof B.label=="object"?B.label[d]||B.label.en||B.label.ar||"cart":String(B.label||"cart")}catch{return"cart"}})(),onClick:()=>{B.onClick(),$(!0),setTimeout(()=>$(!1),320)},animate:z?{boxShadow:"0 0 0 12px rgba(251, 191, 36, 0.4)"}:{boxShadow:"0 2px 16px rgba(0,0,0,0.18)"},transition:{duration:.32},className:"absolute md:hidden left-1/2 -translate-x-1/2 z-[1101] bg-emerald-500 text-white shadow-2xl rounded-full w-20 h-20 flex items-center justify-center border-4 border-emerald-500 dark:border-emerald-500 transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400 hover:shadow-2xl active:scale-95",style:{bottom:"calc(100% + 12px)",pointerEvents:"auto"},children:[e.jsx(T,{size:38,color:"#10b981"}),R>0&&e.jsx(fe.span,{className:"absolute -top-2 -right-2 min-w-7 h-7 px-2 rounded-full bg-amber-500 text-white text-[13px] font-bold shadow-lg border-2 border-white dark:border-slate-900",children:R})]})})()]})})}function Rn(){try{return me()}catch{return{locale:"ar",t:s=>s,setLocale:()=>{}}}}function Pn(){const{locale:t,t:s}=Rn(),[r,i]=a.useState(!1),[o,n]=a.useState(""),[u,d]=a.useState(!1),[b,y]=a.useState(null),[g,v]=a.useState({products:[],categories:[],brands:[]}),[x,l]=a.useState([]),[c,w]=a.useState(!1),[I,j]=a.useState(!1),[z,$]=a.useState(1),[h,D]=a.useState(0),[R,E]=a.useState([]),[M,q]=a.useState([]),[F,B]=a.useState(-1),[T,A]=a.useState(()=>{try{const C=localStorage.getItem("my_store_recent_searches");return C?JSON.parse(C):[]}catch{return[]}}),O=a.useRef(null),_=t==="ar",N=Oe(),U=a.useRef(null),p=a.useCallback(()=>i(!0),[]),f=a.useCallback(()=>i(!1),[]);a.useEffect(()=>{const C=()=>p();return window.addEventListener("search:focus",C),()=>window.removeEventListener("search:focus",C)},[p]),a.useEffect(()=>{if(r){const C=setTimeout(()=>{try{O.current?.focus()}catch{}},60);return()=>clearTimeout(C)}},[r]),a.useEffect(()=>{const C=H=>{H.key==="Escape"&&f()};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[f]),a.useEffect(()=>{if(!r)return;let C=!1;return(async()=>{try{const H=await Y.catalogSummary().catch(()=>({categories:[]}));C||E(Array.isArray(H?.categories)?H.categories.slice(0,6):[])}catch{}try{const H=await Y.searchProducts({page:1,pageSize:8}).catch(()=>[]),ae=Array.isArray(H)?H:Array.isArray(H?.items)?H.items:[];C||q(ae.slice(0,8))}catch{}})(),()=>{C=!0}},[r]),a.useEffect(()=>{B(-1)},[g,r,o]);const S=a.useCallback(C=>{C&&A(H=>{const ae=[C,...H.filter(m=>m!==C)].slice(0,8);try{localStorage.setItem("my_store_recent_searches",JSON.stringify(ae))}catch{}return ae})},[]),V=a.useCallback(async C=>{if(!C||C.trim().length<2){v({products:[],categories:[]});return}d(!0),y(null);try{const H=await Y.searchTypeahead(C.trim());v({products:Array.isArray(H?.products)?H.products:[],categories:Array.isArray(H?.categories)?H.categories:[],brands:Array.isArray(H?.brands)?H.brands:[]})}catch(H){y(H?.message||"Error")}finally{d(!1)}},[]),K=a.useCallback(async(C,H=1,ae=24)=>{const m=(C||"").trim();if(m){w(!0),j(!0),y(null);try{const G=await Y.searchProducts({q:m,page:H,pageSize:ae}),X=Array.isArray(G)?G:Array.isArray(G?.items)?G.items:Array.isArray(G?.products)?G.products:[],ce=Number(G?.total||G?.count||(Array.isArray(X)?X.length:0));l(X),D(ce),$(Number(G?.page||H))}catch(G){y(G?.message||"Error")}finally{w(!1)}}},[]);a.useEffect(()=>{if(r)return U.current&&clearTimeout(U.current),U.current=setTimeout(()=>V(o),280),()=>clearTimeout(U.current)},[o,V,r]);const Q=(o||"").trim().length>=2,se=r&&!Q,re=a.useMemo(()=>{const C=[];return Q&&((g.categories||[]).slice(0,6).forEach(H=>C.push({type:"category",data:H})),(g.brands||[]).slice(0,6).forEach(H=>C.push({type:"brand",data:H})),(g.products||[]).slice(0,8).forEach(H=>C.push({type:"product",data:H}))),C},[g,Q]),je=C=>re.length===0?-1:C<0?re.length-1:C>=re.length?0:C,ne=a.useCallback(C=>{if(Q){if(C.key==="ArrowDown"||C.key==="ArrowUp")C.preventDefault(),B(H=>je(H+(C.key==="ArrowDown"?1:-1)));else if(C.key==="Enter"&&F>=0&&re[F]){C.preventDefault();const H=re[F];H.type==="product"?(S(o.trim()),f(),N(`/products/${H.data.slug||H.data.id}`)):H.type==="category"?(S(o.trim()),f(),N(`/products?category=${encodeURIComponent(H.data.slug||H.data.id||"")}`)):H.type==="brand"&&(S(o.trim()),f(),N(`/products?brand=${encodeURIComponent(H.data.slug||H.data.id||"")}`))}}},[Q,F,re,o,f,N,S]),ie=(C,H)=>{if(!H)return C;try{const ae=String(C||"").toLowerCase().indexOf(H.toLowerCase());if(ae===-1)return C;const m=C.slice(0,ae),G=C.slice(ae,ae+H.length),X=C.slice(ae+H.length);return e.jsxs("span",{children:[m,e.jsx("span",{className:"bg-amber-200/60 px-0.5",children:G}),X]})}catch{return C}},ee=a.useCallback(C=>{C?.preventDefault?.();const H=(o||"").trim();H&&(S(H),K(H,1,24))},[o,f,N,S]),te=a.useMemo(()=>_?"rtl":"ltr",[_]);return e.jsx(De,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(fe.div,{initial:{opacity:0},animate:{opacity:.35},exit:{opacity:0},transition:{duration:.18},className:"fixed inset-0 bg-black z-[1200]",onClick:f},"search-overlay"),e.jsx(fe.div,{dir:_?"rtl":"ltr",initial:{opacity:0,scale:.98,y:-6},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:-6},transition:{duration:.18},className:"fixed inset-0 z-[1201] flex items-start justify-center pt-20 sm:pt-24","aria-modal":"true",role:"dialog","aria-label":s&&(s("search")||"Search"),children:e.jsx("div",{className:"relative w-full px-4 max-w-2xl z-[1202]",children:e.jsxs("div",{className:"bg-white/95 dark:bg-slate-900/90 rounded-xl shadow-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:s&&(s("search")||"Search")}),e.jsx("button",{onClick:f,className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500","aria-label":s?.("close")||"Close",children:e.jsx(Le,{size:18})})]}),e.jsxs("form",{onSubmit:ee,className:"relative",children:[e.jsx("input",{ref:O,type:"search",value:o,onChange:C=>n(C.target.value),onKeyDown:C=>{if(ne(C),C.key==="Enter"){const H=(o||"").trim();if(!H)return;F<0&&(C.preventDefault(),S(H),f(),N(`/search?q=${encodeURIComponent(H)}`))}},placeholder:s&&(s("searchPlaceholder")||"Search..."),className:"w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-800 border dark:border-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500"}),e.jsx("button",{type:"submit",className:"absolute end-2 top-1/2 -translate-y-1/2 text-sm font-semibold text-emerald-600 disabled:opacity-50",disabled:!o.trim(),children:t==="ar"?"Ø¨Ø­Ø«":"Search"})]}),I?e.jsxs("div",{className:"mt-4",children:[c&&e.jsx("div",{className:"text-sm text-slate-500",children:t==="ar"?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...":"Searching..."}),!c&&x&&x.length===0&&e.jsx("div",{className:"text-sm text-slate-500",children:t==="ar"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«":"No search results"}),!c&&x&&x.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:x.map(C=>e.jsx("button",{className:"text-start p-2 bg-transparent rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800",onClick:()=>{S(o.trim()),f(),N(`/products/${C.slug||C.id}`)},children:e.jsxs("div",{className:"w-full flex gap-3 items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded overflow-hidden bg-slate-100 dark:bg-slate-800 flex-shrink-0",children:e.jsx("img",{src:C.image,alt:le(C.name,t)||C.name||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold truncate",children:le(C.name,t)||C.name||C.title}),e.jsxs("div",{className:"text-xs text-slate-500",children:[Number(C.price||0).toFixed(2)," Ø±.Ø³"]})]})]})},C.id))}),h>x.length&&e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx("button",{disabled:z<=1||c,onClick:()=>{const C=Math.max(1,z-1);K(o,C)},className:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-800",children:t==="ar"?"Ø§Ù„Ø³Ø§Ø¨Ù‚":"Prev"}),e.jsx("div",{className:"text-sm opacity-80",children:z}),e.jsx("button",{disabled:c,onClick:()=>{const C=z+1;K(o,C)},className:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-800",children:t==="ar"?"Ø§Ù„ØªØ§Ù„ÙŠ":"Next"})]})]})]}):Q?e.jsxs("div",{className:"mt-3 space-y-2",children:[u&&e.jsx("div",{className:"text-xs text-slate-500",children:t==="ar"?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...":"Loading..."}),b&&e.jsx("div",{className:"text-xs text-red-600",children:b}),!u&&!b&&(g.products.length>0||g.categories.length>0)&&e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[g.categories.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø§Ù„ÙØ¦Ø§Øª":"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.categories.map((C,H)=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>{S(o.trim()),f(),N(`/products?category=${encodeURIComponent(C.slug||C.id||"")}`)},children:ie(le(C.name,t)||C.nameAr||C.nameEn||C.slug,o)},C.slug||H))})]}),g.brands&&g.brands.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":"Brands"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.brands.slice(0,6).map((C,H)=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>{S(o.trim()),f(),N(`/products?brand=${encodeURIComponent(C.slug||C.id||"")}`)},children:ie(le(C.name,t)||C.nameAr||C.nameEn||C.slug,o)},C.id||C.slug||H))})]}),g.products.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ù…Ù†ØªØ¬Ø§Øª":"Products"}),e.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800",children:g.products.slice(0,8).map(C=>e.jsxs("li",{className:`p-2 flex items-center gap-3 hover:bg-slate-50/60 dark:hover:bg-slate-800 cursor-pointer ${re[F]?.type==="product"&&re[F]?.data?.id===C.id?"bg-amber-50 dark:bg-amber-900/10":""}`,onClick:()=>{S(o.trim()),f(),N(`/products/${C.slug||C.id}`)},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:C.image&&e.jsx("img",{src:C.image,alt:le(C.name,t)||C.nameAr||C.nameEn||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-[12px] font-semibold truncate",children:ie(le(C.name,t)||C.nameAr||C.nameEn||"",o)}),e.jsxs("div",{className:"text-[11px] text-slate-500 flex gap-3",children:[e.jsxs("span",{children:[Number(C.price||0).toFixed(2)," Ø±.Ø³"]}),C.category&&e.jsx("span",{className:"opacity-70",children:le(C.category,t)||C.category})]})]})]},C.id))})]})]}),!u&&!b&&g.products.length===0&&g.categories.length===0&&e.jsx("div",{className:"text-xs text-slate-500",children:t==="ar"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬":"No results"})]}):se?e.jsxs("div",{className:"mt-3 space-y-4",dir:te,children:[T&&T.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø­Ø« Ø­Ø¯ÙŠØ«Ø©":"Recent Searches"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(C=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>n(C),children:C},C))})]}),R&&R.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"ØªØµÙ†ÙŠÙØ§Øª Ø´Ø§Ø¦Ø¹Ø©":"Popular Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(C=>e.jsxs("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/30",onClick:()=>{f(),N(`/products?category=${encodeURIComponent(C.category)}`)},children:[C.category," ",C.count!=null&&e.jsxs("span",{className:"opacity-60",children:["(",C.count,")"]})]},C.category))})]}),M&&M.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ù…Ù†ØªØ¬Ø§Øª Ø­Ø¯ÙŠØ«Ø©":"Recent Products"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:M.slice(0,6).map(C=>e.jsxs("button",{className:"text-start",onClick:()=>{f(),N(`/products/${C.slug||C.id}`)},children:[e.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800",children:C.image&&e.jsx("img",{src:C.image,alt:le(C.name,t)||C.nameAr||C.nameEn||"",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"mt-1 text-[11px] font-medium truncate",children:le(C.name,t)||C.nameAr||C.nameEn||""})]},C.id))})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:t==="ar"?"Ø§ÙƒØªØ¨ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª":"Type to search products"})]}):null]})})},"search-panel")]})})}function On({open:t,onClose:s,...r}){return a.useEffect(()=>{if(!t)return;const i=o=>{o.key==="Escape"&&s()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,s]),t?e.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-end justify-end",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30",onClick:s}),e.jsx(Us,{...r,onClose:s})]}):null}function In({timeout:t=1200}){const[s,r]=a.useState(!0);return a.useEffect(()=>{let i=null;function o(){r(!1),window.removeEventListener("load",o)}return document.readyState==="complete"?i=setTimeout(o,t):(window.addEventListener("load",o),i=setTimeout(o,t+800)),()=>{window.removeEventListener("load",o),i&&clearTimeout(i)}},[t]),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loader-init","aria-hidden":!s}),e.jsx("div",{className:"content-loading",role:"status","aria-hidden":!s,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"lds-spinner","aria-hidden":!0,children:Array.from({length:12}).map((i,o)=>e.jsx("div",{},o))})})})]}):null}function Ln(){return null}const Dn=({children:t})=>{P.useEffect(()=>{const l=()=>y("cart");return window.addEventListener("cart:open",l),()=>window.removeEventListener("cart:open",l)},[]);const{locale:s,setLocale:r,available:i}=me(),{theme:o,setTheme:n}=Qt(),{pathname:u}=ue(),d=u==="/"||u==="/en",[b,y]=P.useState(null),{cartItems:g=[],updateQuantity:v}=Zt(),x=Array.isArray(g)?g.reduce((l,c)=>l+Number(c.price||c.salePrice||0)*Number(c.quantity||1),0):0;return e.jsx(Kr,{children:e.jsx(tn,{children:e.jsxs("div",{className:"app-layout professional-layout theme-minimal",children:[e.jsx(In,{}),e.jsx(Ln,{}),e.jsx(an,{}),e.jsxs("div",{className:"content-with-sidebar",children:[e.jsx(wn,{}),e.jsx(jn,{}),!d&&e.jsx(Sn,{}),t,e.jsx("div",{className:"h-16 md:h-0"}),e.jsx(Tn,{})]}),e.jsx(qr,{}),e.jsx(Pn,{}),e.jsx(_n,{panel:b,setPanel:y}),b==="cart"&&e.jsx(On,{open:!0,onClose:()=>y(null),items:g,total:x,locale:s,t:typeof window<"u"&&window.t?window.t:(l=>l),updateQuantity:v})]})})})},Ms=a.createContext(null);function Un(t="my-store-chat"){try{return new BroadcastChannel(t)}catch{return null}}function zn({children:t}){const[s,r]=a.useState([]),[i,o]=a.useState(null),[n,u]=a.useState([]),[d,b]=a.useState({}),[y,g]=a.useState({}),v=a.useRef(null),x=a.useRef(null),l=($,h={})=>{r(D=>D.find(E=>E.id===$)?D.map(E=>E.id===$?{...E,lastMessage:h.lastMessage||E.lastMessage,lastMessageAt:new Date().toISOString()}:E):[{id:$,title:h.title||"Ø§Ù„Ø¯Ø¹Ù…",lastMessage:h.lastMessage||"",lastMessageAt:new Date().toISOString()},...D])};a.useEffect(()=>{try{const $="/api/events",h=new EventSource($,{withCredentials:!0}),D=R=>{try{const E=JSON.parse(R.data);if(R.type==="message"||R.type==="chat.message"){const M=E.threadId||"default";l(M,{lastMessage:E.message?.content||E.text}),M===i?.id?u(q=>[...q,E.message||{id:E.id,from:E.from,text:E.text,ts:E.ts}]):b(q=>({...q,[M]:(q[M]||0)+1}))}}catch{}};return h.addEventListener("chat.message",D),h.addEventListener("message",D),v.current=h,()=>{try{h.close()}catch{}}}catch{}},[i?.id]),a.useEffect(()=>{const $=Un();x.current=$;const h=R=>{if(!R)return;const E=R.threadId||"default";R.type==="message"?(l(E,{lastMessage:R.text}),E===i?.id?u(M=>[...M,{id:R.id,from:R.from,text:R.text,ts:R.ts}]):b(M=>({...M,[E]:(M[E]||0)+1}))):R.type==="typing"&&(g(M=>{const q=new Set(M[E]||[]);return q.add(R.from),{...M,[E]:Array.from(q)}}),setTimeout(()=>{g(M=>{const q=new Set(M[E]||[]);return q.delete(R.from),{...M,[E]:Array.from(q)}})},2500))};if($){const R=E=>h(E.data);return $.addEventListener("message",R),()=>$.removeEventListener("message",R)}const D=R=>{try{if(!R.key||!R.key.startsWith("chat-msg:"))return;const E=JSON.parse(R.newValue);h(E)}catch{}};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[i?.id]);const c=({text:$,from:h,threadId:D="default"})=>{const R={type:"message",id:Date.now()+"-"+Math.random().toString(36).slice(2,8),ts:new Date().toISOString(),from:h,text:$,threadId:D};try{if(x.current)x.current.postMessage(R);else{const E=`chat-msg:${Date.now()}`;localStorage.setItem(E,JSON.stringify(R)),setTimeout(()=>{try{localStorage.removeItem(E)}catch{}},15e3)}}catch{}return l(D,{lastMessage:R.text}),D===i?.id?u(E=>[...E,{id:R.id,from:R.from,text:R.text,ts:R.ts}]):b(E=>({...E,[D]:(E[D]||0)+1})),R},w=({from:$,threadId:h="default"})=>{const D={type:"typing",from:$,threadId:h,ts:new Date().toISOString()};try{if(x.current)x.current.postMessage(D);else{const R=`chat-typing:${Date.now()}`;localStorage.setItem(R,JSON.stringify(D)),setTimeout(()=>{try{localStorage.removeItem(R)}catch{}},2e3)}}catch{}g(R=>{const E=new Set(R[h]||[]);return E.add($),{...R,[h]:Array.from(E)}}),setTimeout(()=>{g(R=>{const E=new Set(R[h]||[]);return E.delete($),{...R,[h]:Array.from(E)}})},2500)},I=$=>{b(h=>({...h,[$]:0}))},j=Object.values(d).reduce(($,h)=>$+(h||0),0),z=a.useMemo(()=>({threads:s,setThreads:r,currentThread:i,setCurrentThread:o,messages:n,setMessages:u,unreadCounts:d,unreadTotal:j,typing:y,sendMessage:c,sendTyping:w,markThreadRead:I}),[s,i,n,d,y]);return e.jsx(Ms.Provider,{value:z,children:t})}function tc(){const t=a.useContext(Ms);if(!t)throw new Error("useChat must be used within ChatProvider");return t}class Mn extends P.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){window&&window.console&&console.error("Route boundary error",s,r)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{marginBottom:16},children:"âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",direction:"ltr",textAlign:"left",background:"#f8f8f8",padding:12,borderRadius:8,maxWidth:600,margin:"0 auto"},children:String(this.state.error)}),e.jsx("button",{style:{marginTop:20},onClick:()=>window.location.reload(),children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„"})]}):this.props.children}}const $n=()=>e.jsxs("div",{style:{padding:"60px 24px",textAlign:"center"},children:[e.jsx("div",{className:"spinner",style:{width:42,height:42,border:"5px solid #eee",borderTop:"5px solid #69be3c",borderRadius:"50%",margin:"0 auto 24px",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{opacity:.7},children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©..."}),e.jsx("style",{children:"@keyframes spin {from{transform:rotate(0)} to{transform:rotate(360deg)}}"})]});function W({isAuthed:t,redirectTo:s="/login",element:r,children:i,userRole:o,requiredRoles:n,onDenied:u,mode:d="redirect",forbiddenMessage:b}){const y=r||i||null,v=!(Array.isArray(n)&&n.length>0)||o&&n.includes(o);return t?v?y:(u&&u({userRole:o,requiredRoles:n}),e.jsxs("div",{className:"forbidden-block",role:"alert",style:ds,children:[e.jsxs("h2",{style:Wn,children:["ðŸš« ",b||"ØµÙ„Ø§Ø­ÙŠØ§Øª ØºÙŠØ± ÙƒØ§ÙÙŠØ©"]}),e.jsx("p",{style:us,children:o?`Ø¯ÙˆØ±Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${o}. Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡Ø§: ${n.join(", ")}`:"Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ¯ Ø¯ÙˆØ± Ø­Ø³Ø§Ø¨Ùƒ."}),e.jsx("a",{href:"/",style:Fn,children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})):d==="redirect"?e.jsx(de,{to:s,replace:!0}):e.jsxs("div",{className:"auth-block",role:"alert",style:ds,children:[e.jsx("p",{style:us,children:b||"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("a",{href:s,className:"btn btn-primary",style:Bn,children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]})}const ds={maxWidth:560,margin:"3rem auto",background:"var(--color-surface, #fff)",border:"1px solid var(--color-border, #e4e7eb)",padding:"2rem 1.75rem",borderRadius:"18px",textAlign:"center",boxShadow:"0 8px 34px -12px rgba(0,0,0,.12)"},Wn={fontSize:"1.05rem",margin:"0 0 1rem",lineHeight:1.35},us={fontSize:".8rem",margin:"0 0 1.25rem",lineHeight:1.6,color:"#475569"},Bn={display:"inline-flex",alignItems:"center",gap:".4rem",background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",padding:".65rem 1rem",borderRadius:10,textDecoration:"none",fontSize:".75rem",fontWeight:600},Fn={display:"inline-block",fontSize:".7rem",marginTop:".5rem",color:"#69be3c",textDecoration:"none",fontWeight:600};async function oe(t,s={}){let r="/api";try{const d=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(d&&d.startsWith("/"))r=d;else if(typeof window<"u"&&/^https?:\/\//i.test(d)){const b=new URL(d);b.origin===window.location.origin&&(r=b.pathname||"/api")}}catch{}let i=null;try{i=localStorage.getItem("my_store_token")}catch{}const o={"Content-Type":"application/json",...s.headers||{}};i&&(o.Authorization=`Bearer ${i}`);const n=await fetch(r+t,{...s,headers:o});let u=null;try{u=await n.json()}catch{}if(!n.ok){const d=new Error(u?.error||n.statusText||"REQUEST_FAILED");throw d.status=n.status,d.body=u,d}return u}const xe={listUsers:(t={})=>{const s=new URLSearchParams,r=t.page||1,i=t.pageSize||1e3;return s.set("page",r),s.set("pageSize",i),oe("/admin/users"+(s.toString()?`?${s.toString()}`:""))},createUser:t=>oe("/admin/users",{method:"POST",body:JSON.stringify(t)}),updateUser:(t,s)=>oe("/admin/users/"+t,{method:"PATCH",body:JSON.stringify(s)}),deleteUser:t=>oe("/admin/users/"+t,{method:"DELETE"}),activateUser:t=>oe(`/admin/users/${t}/activate`,{method:"POST"}),deactivateUser:t=>oe(`/admin/users/${t}/deactivate`,{method:"POST"}),listAudit:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,i)}),oe("/admin/audit"+(s.toString()?`?${s.toString()}`:""))},listOrders:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,i)}),oe("/orders"+(s.toString()?`?${s.toString()}`:""))},statsOverview:()=>oe("/admin/stats/overview"),statsFinancials:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,i])=>{i!=null&&i!==""&&s.append(r,i)}),oe("/admin/stats/financials"+(s.toString()?`?${s.toString()}`:""))},exportOrdersCsv:(t={})=>{const s=new URLSearchParams;Object.entries(t).forEach(([n,u])=>{u!=null&&u!==""&&s.append(n,u)});let r="/api";try{const n=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(n&&n.startsWith("/"))r=n;else if(typeof window<"u"&&/^https?:\/\//i.test(n)){const u=new URL(n);u.origin===window.location.origin&&(r=u.pathname||"/api")}}catch{}let i=null;try{i=localStorage.getItem("my_store_token")}catch{}const o={};return i&&(o.Authorization=`Bearer ${i}`),fetch(r+"/admin/stats/orders/export/csv"+(s.toString()?`?${s.toString()}`:""),{headers:o}).then(n=>n.text())},exportOrdersXlsx:(t={})=>{const s=new URLSearchParams;Object.entries(t).forEach(([n,u])=>{u!=null&&u!==""&&s.append(n,u)});let r="/api";try{const n=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(n&&n.startsWith("/"))r=n;else if(typeof window<"u"&&/^https?:\/\//i.test(n)){const u=new URL(n);u.origin===window.location.origin&&(r=u.pathname||"/api")}}catch{}let i=null;try{i=localStorage.getItem("my_store_token")}catch{}const o={};return i&&(o.Authorization=`Bearer ${i}`),fetch(r+"/admin/stats/orders/export/xlsx"+(s.toString()?`?${s.toString()}`:""),{headers:o}).then(n=>n.blob())},bulkUpdateOrdersStatus:(t=[],s)=>oe("/orders/bulk/status",{method:"POST",body:JSON.stringify({ids:t,status:s})}),deliveryAssignBulk:(t=[],s,r="assigned")=>oe("/delivery/assign/bulk",{method:"POST",body:JSON.stringify({ids:t,driverId:s,status:r})}),deliveryAssignAuto:(t={})=>oe("/delivery/assign/auto",{method:"POST",body:JSON.stringify(t||{})}),panel:()=>oe("/admin/panel")},sc=Object.freeze(Object.defineProperty({__proto__:null,adminApi:xe,default:xe},Symbol.toStringTag,{value:"Module"}));function qn(t,s){a.useEffect(()=>{const r=i=>{!t.current||t.current.contains(i.target)||s(i)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[t,s])}function $s(){const t=ue(),[s,r]=a.useState(!1),i=a.useRef(null);qn(i,()=>r(!1)),a.useEffect(()=>{r(!1)},[t.pathname,t.search]);const o=d=>{const y=new URLSearchParams(t.search).get("view");return d==="overview"?t.pathname.endsWith("/admin")&&!y:y===d},n=[{to:"/admin",label:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©",icon:e.jsx(sr,{size:17}),view:"overview"},{to:"/admin/users",label:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†",icon:e.jsx(ks,{size:17}),view:"users"},{to:"/admin/customers",label:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",icon:e.jsx(rr,{size:17}),view:"customers"},{to:"/admin?view=products",label:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",icon:e.jsx(Ie,{size:17}),view:"products"},{to:"/admin?view=orders",label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",icon:e.jsx(nr,{size:17}),view:"orders"},{to:"/admin?view=audit",label:"Ø§Ù„Ø³Ø¬Ù„Ø§Øª",icon:e.jsx(ar,{size:17}),view:"audit"},{to:"/admin?view=reviews",label:"Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª",icon:e.jsx(ir,{size:17}),view:"reviews"},{to:"/admin?view=brands",label:"Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª",icon:e.jsx(As,{size:17}),view:"brands"},{to:"/admin?view=offers",label:"Ø§Ù„Ø¹Ø±ÙˆØ¶",icon:e.jsx(or,{size:17}),view:"offers"},{to:"/admin?view=ads",label:"Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª",icon:e.jsx(as,{size:17}),view:"ads"},{to:"/admin?view=marketing",label:"Ø§Ù„ØªØ³ÙˆÙŠÙ‚",icon:e.jsx(as,{size:17}),view:"marketing"},{to:"/admin?view=settings",label:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",icon:e.jsx(Re,{size:17}),view:"settings"},{to:"/admin?view=cats",label:"Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª",icon:e.jsx(lr,{size:17}),view:"cats"}],u=t.pathname.startsWith("/admin");return e.jsx("header",{className:"w-full bg-white border-b border-slate-200 shadow-sm sticky top-0 z-40",dir:"rtl",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto flex items-center justify-between px-4 py-2",children:[e.jsx(ze,{to:"/admin",className:"flex items-center gap-2","aria-label":"Go to Admin Dashboard",children:e.jsx("h1",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"})}),e.jsx("button",{className:"sm:hidden p-2 rounded-md text-slate-600 hover:bg-slate-100","aria-label":s?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©","aria-expanded":s,onClick:()=>r(d=>!d),children:s?e.jsx(Le,{size:20}):e.jsx(Ss,{size:20})}),e.jsx("nav",{className:"hidden sm:flex items-center gap-3 overflow-x-auto scrollbar-none",role:"navigation","aria-label":"Admin navigation",children:n.map((d,b)=>{const y=d.view?o(d.view):t.pathname.includes(d.to),g=u&&y;return e.jsxs(ze,{to:d.to,className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-[0.85rem] transition-all duration-200 whitespace-nowrap ${g?"bg-slate-900 text-white font-semibold shadow-sm":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,"aria-current":g?"page":void 0,children:[e.jsx("span",{className:"opacity-90",children:d.icon}),e.jsx("span",{children:d.label})]},b)})}),s&&e.jsx("div",{ref:i,className:"absolute left-4 right-4 top-full mt-2 bg-white border rounded-lg shadow-lg p-3 sm:hidden z-50",children:e.jsxs("ul",{className:"grid gap-2",children:[e.jsx("li",{className:"px-3 py-2 border-b mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin",alt:"Admin avatar",className:"w-8 h-8 rounded-full border border-slate-200"}),e.jsx("div",{className:"text-sm text-slate-600",children:e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ù…Ø´Ø±Ù"})})]})}),n.map((d,b)=>{const y=d.view?o(d.view):t.pathname.includes(d.to),g=u&&y;return e.jsx("li",{children:e.jsxs(ze,{to:d.to,className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${g?"bg-slate-900 text-white":"text-slate-700 hover:bg-slate-100"}`,children:[e.jsx("span",{className:"opacity-90",children:d.icon}),e.jsx("span",{children:d.label})]})},b)})]})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[e.jsx("div",{className:"text-sm text-slate-600",children:e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ù…Ø´Ø±Ù"})}),e.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin",alt:"Admin avatar",className:"w-8 h-8 rounded-full border border-slate-200 shadow-sm"})]})]})})}const Ce={padding:".55rem .75rem",border:"1px solid #e2e8f0",borderRadius:10,minWidth:160,fontSize:".8rem",background:"#fff"},Vn={width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:14,overflow:"hidden",boxShadow:"0 4px 14px -6px rgba(0,0,0,.06)"},Hn={display:"flex",gap:".35rem",alignItems:"center"},Kn={textAlign:"center",padding:"1rem",fontSize:".75rem",color:"#64748b"};function qe(){const{user:t}=ye()||{},s=t?.role==="admin",[r,i]=a.useState(!1),[o,n]=a.useState(null),[u,d]=a.useState([]),[b,y]=a.useState(0),[g,v]=a.useState(1),[x,l]=a.useState(20),[c,w]=a.useState(""),[I,j]=a.useState(""),[z,$]=a.useState(!0),[h,D]=a.useState(""),[R,E]=a.useState({id:null,name:"",email:"",phone:"",role:"admin",active:!0,password:"",sendInvite:!0}),[M,q]=a.useState(!1),F=g*x<Math.max(b,0),B=g>1,T=async()=>{i(!0),n(null);try{const f=await xe.listUsers({page:1,pageSize:x}),S=Array.isArray(f)?f:f?.users||[];d(S),y(S.length)}catch(f){n(f.message)}finally{i(!1)}};a.useEffect(()=>{s&&T()},[s]);const A=a.useMemo(()=>{const f=c.trim().toLowerCase();return u.filter(S=>!(z&&S.role==="user"||f&&!((S.name||"").toLowerCase().includes(f)||(S.email||"").toLowerCase().includes(f)||(S.phone||"").toLowerCase().includes(f))||I&&S.role!==I||h==="1"&&S.active===!1||h==="0"&&S.active!==!1))},[u,c,I,h,z]),O=a.useMemo(()=>{const f=(g-1)*x;return A.slice(f,f+x)},[A,g,x]),_=()=>E({id:null,name:"",email:"",phone:"",role:"admin",active:!0,password:"",sendInvite:!0}),N=async f=>{f.preventDefault(),q(!0),n(null);try{if(R.id){const S={name:R.name,role:R.role,phone:R.phone},V=await xe.updateUser(R.id,S),K=V?.user||V;d(Q=>Q.map(se=>se.id===K.id?{...se,...K}:se))}else{const S={email:R.email,name:R.name||null,phone:R.phone||null,role:R.role,sendInvite:!!R.sendInvite};S.sendInvite||(S.password=R.password);const V=await xe.createUser(S),K=V?.user||V;d(Q=>[{...K,active:!0},...Q])}_(),await T()}catch(S){n(S.message)}finally{q(!1)}},U=async f=>{if(window.confirm("Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ"))try{await xe.deleteUser(f),d(S=>S.filter(V=>V.id!==f))}catch(S){alert("ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù: "+S.message)}},p=async(f,S)=>{try{S?await xe.activateUser(f.id):await xe.deactivateUser(f.id),d(V=>V.map(K=>K.id===f.id?{...K,active:!!S}:K))}catch(V){alert("ÙØ´Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: "+V.message)}};return s?e.jsxs("div",{style:{direction:"rtl",padding:"1.25rem 0",fontSize:".85rem"},children:[e.jsx("h1",{style:{margin:"0 0 1rem",fontSize:"1.4rem",fontWeight:700},children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:16},children:[e.jsx($s,{}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[e.jsx("input",{placeholder:"Ø¨Ø­Ø« (Ø§Ø³Ù…/Ø¥ÙŠÙ…ÙŠÙ„/Ù‡Ø§ØªÙ)",value:c,onChange:f=>w(f.target.value),style:Ce}),e.jsxs("select",{value:I,onChange:f=>{j(f.target.value),v(1)},style:Ce,children:[e.jsx("option",{value:"",children:"ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±"}),e.jsx("option",{value:"user",children:"Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("option",{value:"seller",children:"Ø¨Ø§Ø¦Ø¹"}),e.jsx("option",{value:"delivery",children:"Ù…ÙˆØµÙ„"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"})]}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:".8rem",padding:".45rem .6rem",background:"#fff",border:"1px solid #e2e8f0",borderRadius:10},children:[e.jsx("input",{type:"checkbox",checked:z,onChange:f=>{$(f.target.checked),v(1)}})," Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø·Ø§Ù‚Ù… ÙÙ‚Ø· (Ù…Ø¯Ø±Ø§Ø¡/Ø¨Ø§Ø¦Ø¹ÙŠÙ†)"]}),e.jsxs("select",{value:h,onChange:f=>{D(f.target.value),v(1)},style:Ce,children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"1",children:"Ù…ÙØ¹Ù„"}),e.jsx("option",{value:"0",children:"Ù…ÙˆÙ‚ÙˆÙ"})]}),e.jsx("select",{value:x,onChange:f=>{l(+f.target.value||20),v(1)},style:Ce,children:[10,20,50,100].map(f=>e.jsxs("option",{value:f,children:[f," / ØµÙØ­Ø©"]},f))}),e.jsx(Z,{type:"button",variant:"ghost",onClick:T,children:"ØªØ­Ø¯ÙŠØ«"}),r&&e.jsx("span",{style:{fontSize:".7rem",color:"#64748b"},children:"...ØªØ­Ù…ÙŠÙ„"}),o&&e.jsxs("span",{style:{fontSize:".7rem",color:"#b91c1c"},children:["Ø®Ø·Ø£: ",o]})]}),e.jsxs("form",{onSubmit:N,style:{background:"#fff",padding:"1rem",borderRadius:12,boxShadow:"0 4px 14px -6px rgba(0,0,0,.08)",display:"grid",gap:10,marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:".95rem"},children:R.id?"ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…":"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit,minmax(160px,1fr))"},children:[!R.id&&e.jsxs(e.Fragment,{children:[e.jsx("input",{placeholder:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",required:!0,value:R.email,onChange:f=>E(S=>({...S,email:f.target.value}))}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:".8rem"},children:[e.jsx("input",{type:"checkbox",checked:!!R.sendInvite,onChange:f=>E(S=>({...S,sendInvite:f.target.checked}))})," Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"]}),!R.sendInvite&&e.jsx("input",{placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",required:!R.sendInvite,type:"password",value:R.password,onChange:f=>E(S=>({...S,password:f.target.value}))})]}),e.jsx("input",{placeholder:"Ø§Ù„Ø§Ø³Ù…",value:R.name,onChange:f=>E(S=>({...S,name:f.target.value}))}),e.jsx("input",{placeholder:"Ø§Ù„Ù‡Ø§ØªÙ",value:R.phone,onChange:f=>E(S=>({...S,phone:f.target.value}))}),e.jsxs("select",{value:R.role,onChange:f=>E(S=>({...S,role:f.target.value})),children:[e.jsx("option",{value:"user",children:"Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("option",{value:"seller",children:"Ø¨Ø§Ø¦Ø¹"}),e.jsx("option",{value:"delivery",children:"Ù…ÙˆØµÙ„"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"})]}),R.id&&e.jsxs("select",{value:R.active?"1":"0",onChange:f=>E(S=>({...S,active:f.target.value==="1"})),children:[e.jsx("option",{value:"1",children:"Ù…ÙØ¹Ù„"}),e.jsx("option",{value:"0",children:"Ù…ÙˆÙ‚ÙˆÙ"})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx(Z,{type:"submit",disabled:M,variant:"primary",children:R.id?"Ø­ÙØ¸":"Ø¥Ø¶Ø§ÙØ©"}),R.id&&e.jsx(Z,{type:"button",variant:"ghost",onClick:()=>_(),children:"Ø¥Ù„ØºØ§Ø¡"})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:Vn,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„"}),e.jsx("th",{children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{children:"Ø§Ù„Ø¯ÙˆØ±"}),e.jsx("th",{children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{children:"Ø¥Ù†Ø´Ø§Ø¡"}),e.jsx("th",{children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsxs("tbody",{children:[O.map(f=>e.jsxs("tr",{children:[e.jsx("td",{children:f.name||"â€”"}),e.jsx("td",{style:{fontSize:".75rem"},children:f.email}),e.jsx("td",{style:{fontSize:".75rem"},children:f.phone||"â€”"}),e.jsx("td",{children:f.role}),e.jsx("td",{children:f.active===!1?"Ù…ÙˆÙ‚ÙˆÙ":"Ù…ÙØ¹Ù„"}),e.jsx("td",{children:f.createdAt?new Date(f.createdAt).toLocaleDateString():"â€”"}),e.jsxs("td",{style:Hn,children:[e.jsx(Z,{title:"ØªØ¹Ø¯ÙŠÙ„",size:"sm",variant:"ghost",onClick:()=>E({id:f.id,name:f.name||"",email:f.email||"",phone:f.phone||"",role:f.role||"user",active:f.active!==!1,sendInvite:!1,password:""}),children:"âœŽ"}),f.role!=="delivery"&&e.jsx(Z,{title:"ØªØ¹ÙŠÙŠÙ† ÙƒÙ…ÙˆØµÙ„",size:"sm",variant:"outline",onClick:async()=>{try{await xe.updateUser(f.id,{role:"delivery"}),T()}catch(S){alert("ÙØ´Ù„ Ø§Ù„ØªØ¹ÙŠÙŠÙ†: "+S.message)}},children:"ðŸšš"}),f.active===!1?e.jsx(Z,{title:"ØªÙØ¹ÙŠÙ„",size:"sm",variant:"primary",onClick:()=>p(f,!0),children:"âœ“"}):e.jsx(Z,{title:"Ø¥ÙŠÙ‚Ø§Ù",size:"sm",variant:"danger",onClick:()=>p(f,!1),children:"â¸"}),e.jsx(Z,{title:"Ø­Ø°Ù",size:"sm",variant:"danger",onClick:()=>U(f.id),children:"ðŸ—‘"})]})]},f.id)),!O.length&&!r&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:Kn,children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})})]})]})}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",marginTop:10},children:[e.jsx(Z,{disabled:!B,variant:B?"primary":"ghost",onClick:()=>v(f=>Math.max(1,f-1)),children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{style:{fontSize:".7rem"},children:["ØµÙØ­Ø© ",g," / ",Math.max(1,Math.ceil(A.length/x))]}),e.jsx(Z,{disabled:!F,variant:F?"primary":"ghost",onClick:()=>v(f=>f+1),children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})]}):e.jsxs("div",{style:{direction:"rtl",padding:"2rem",maxWidth:520,margin:"2rem auto",background:"#fff",border:"1px solid #e2e8f0",borderRadius:16,boxShadow:"0 6px 28px -8px rgba(0,0,0,.12)"},children:[e.jsx("h2",{style:{marginTop:0,fontSize:"1.1rem"},children:"ðŸš« ØµÙ„Ø§Ø­ÙŠØ§Øª ØºÙŠØ± ÙƒØ§ÙÙŠØ©"}),e.jsx("p",{style:{fontSize:".75rem",lineHeight:1.7,color:"#475569"},children:"Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù…ØªØ§Ø­Ø© Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·."}),e.jsx("a",{href:"/",style:{display:"inline-block",marginTop:12,fontSize:".7rem",fontWeight:600,color:"#69be3c",textDecoration:"none"},children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})}const he=(t,s,r="name")=>{try{if(!s)return;const i=`${r}="${t}"`;let o=document.head.querySelector(`[${r}="${t}"]`);o||(o=document.createElement("meta"),o.setAttribute(r,t),document.head.appendChild(o)),o.setAttribute("content",s)}catch{}},Ne=({title:t,description:s,image:r,url:i})=>{const{setting:o}=Se()||{};return a.useEffect(()=>{const n=o?.siteNameAr||o?.siteNameEn||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",u=t||n;document.title=u,he("description",s,"name"),he("og:title",u,"property"),he("og:description",s,"property"),r&&(he("og:image",r,"property"),he("twitter:image",r,"name")),i&&he("og:url",i,"property"),he("twitter:card",r?"summary_large_image":"summary","name"),he("twitter:title",u,"name"),s&&he("twitter:description",s,"name"),he("og:site_name",n,"property")},[t,s,r,i,o?.siteNameAr,o?.siteNameEn]),null};function Gn(){const[t,s]=P.useState(null),[r,i]=P.useState(!0),[o,n]=P.useState(null);return P.useEffect(()=>{let u=!0;return(async()=>{i(!0),n(null);try{const d=await Y.adminStatsOverview();if(!u)return;s(d?.stats||null)}catch(d){if(!u)return;n(d.message||"Failed")}finally{u&&i(!1)}})(),()=>{u=!1}},[]),{data:t,loading:r,error:o}}function ps({points:t=[],width:s=280,height:r=60,stroke:i="#111827",fill:o="rgba(17,24,39,0.08)"}){const n=P.useRef(null);return P.useEffect(()=>{const u=n.current;if(!u)return;const d=u.getContext("2d");if(d.clearRect(0,0,s,r),!t.length)return;t.map((c,w)=>w);const b=t.map(c=>c),y=Math.min(...b),g=Math.max(...b),v=6,x=c=>v+c/(t.length-1)*(s-v*2),l=c=>{const w=g-y||1;return r-v-(c-y)/w*(r-v*2)};d.beginPath(),d.moveTo(x(0),l(t[0]));for(let c=1;c<t.length;c++)d.lineTo(x(c),l(t[c]));d.strokeStyle=i,d.lineWidth=2,d.stroke(),d.lineTo(x(t.length-1),r-v),d.lineTo(x(0),r-v),d.closePath(),d.fillStyle=o,d.fill()},[t,s,r,i,o]),e.jsx("canvas",{ref:n,width:s,height:r,style:{width:s,height:r}})}const Jn=[{key:"7",label:"7 Ø£ÙŠØ§Ù…"},{key:"14",label:"14 ÙŠÙˆÙ…"},{key:"30",label:"30 ÙŠÙˆÙ…"}],Ve=()=>{const{data:t,loading:s,error:r}=Gn(),[i,o]=P.useState("7"),[n,u]=P.useState(()=>new Date(Date.now()-6*864e5).toISOString().slice(0,10)),[d,b]=P.useState(()=>new Date().toISOString().slice(0,10)),[y,g]=P.useState([]),[v,x]=P.useState([]),[l,c]=P.useState(!1),[w,I]=P.useState(null),[j,z]=P.useState(""),[$,h]=P.useState(""),[D,R]=P.useState({totalOrders:0,totalRevenue:0,avgOrder:0,byStatus:{},byMethod:{},topProducts:[]}),E=P.useCallback(async()=>{c(!0),I(null);try{const T={from:n,to:d,page:1,pageSize:500};j&&(T.status=j),$&&(T.paymentMethod=$);const O=(await Y.listOrdersAdmin(T))?.orders||[],_=new Date(n),N=new Date(d),U=Math.max(1,Math.round((N-_)/864e5)+1),p=new Map,f=new Map;for(let ne=0;ne<U;ne++){const ie=new Date(_);ie.setDate(_.getDate()+ne);const ee=ie.toISOString().slice(0,10);p.set(ee,0),f.set(ee,0)}let S=0;const V={},K={},Q=new Map;for(const ne of O){S+=ne.grandTotal||0,V[ne.status]=(V[ne.status]||0)+1;const ie=ne.paymentMethod||"unknown";K[ie]=(K[ie]||0)+1;const ee=new Date(ne.createdAt).toISOString().slice(0,10);p.has(ee)&&p.set(ee,(p.get(ee)||0)+(ne.grandTotal||0)),f.has(ee)&&f.set(ee,(f.get(ee)||0)+1),(ne.items||[]).forEach(te=>{const C=te.productId||te.name?.ar||te.name?.en||"Ù…Ù†ØªØ¬",H=Q.get(C)||{name:te.name?.ar||te.name?.en||C,qty:0,revenue:0};H.qty+=te.quantity||0,H.revenue+=(te.price||0)*(te.quantity||0),Q.set(C,H)})}const se=O.length,re=se?S/se:0,je=Array.from(Q.values()).sort((ne,ie)=>ie.revenue-ne.revenue).slice(0,10);R({totalOrders:se,totalRevenue:S,avgOrder:re,byStatus:V,byMethod:K,topProducts:je}),g(Array.from(p.values())),x(Array.from(f.values()))}catch(T){I(T.message||"Failed to load analytics")}finally{c(!1)}},[n,d,j,$]);P.useEffect(()=>{E()},[E]);const M=T=>{o(T);const A=Number(T),O=new Date,_=new Date;_.setDate(O.getDate()-(A-1)),u(_.toISOString().slice(0,10)),b(O.toISOString().slice(0,10))},q="https://my-store-backend-production.up.railway.app/api",F=T=>{const A=new URLSearchParams;return n&&A.set("from",n),d&&A.set("to",d),j&&A.set("status",j),$&&A.set("paymentMethod",$),`${q}/admin/stats/orders/export/${T}?${A.toString()}`},B=async T=>{let A=null;try{A=localStorage.getItem("my_store_token")}catch{}const O={};A&&(O.Authorization=`Bearer ${A}`);const _=await fetch(F(T),{headers:O});if(!_.ok)throw new Error(`Export failed: ${_.status}`);const N=await _.blob(),U=URL.createObjectURL(N),p=document.createElement("a");p.href=U,p.download=T==="csv"?"orders_export.csv":"orders_export.xlsx",document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(U)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ne,{title:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± | Reports",description:"Reports overview"}),e.jsx("h1",{className:"page-title",children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± / Reports"}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsx("div",{style:{fontSize:28,fontWeight:700},children:t?.todayOrders??0})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙŠÙˆÙ…"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsxs("div",{style:{fontSize:28,fontWeight:700},children:[(t?.todayRevenue??0).toFixed?.(2)||0," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsxs("div",{style:{fontSize:28,fontWeight:700},children:[(t?.avgOrderValueToday??0).toFixed?.(2)||0," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsx("div",{style:{fontSize:28,fontWeight:700},children:t?.pendingBankCount??0})]})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("strong",{children:"Ø§Ù„ÙØªØ±Ø©:"}),Jn.map(T=>e.jsx(Z,{size:"sm",variant:i===T.key?"primary":"secondary",onClick:()=>M(T.key),children:T.label},T.key)),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:n,onChange:T=>u(T.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:d,onChange:T=>b(T.target.value)})]}),e.jsxs("label",{children:["Ø§Ù„Ø­Ø§Ù„Ø©:",e.jsxs("select",{value:j,onChange:T=>z(T.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"pending",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("option",{value:"processing",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}),e.jsx("option",{value:"paid",children:"Ù…Ø¯ÙÙˆØ¹"}),e.jsx("option",{value:"shipped",children:"ØªÙ… Ø§Ù„Ø´Ø­Ù†"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙŠ"})]})]}),e.jsxs("label",{children:["Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:",e.jsxs("select",{value:$,onChange:T=>h(T.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"}),e.jsx("option",{value:"cod",children:"Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("option",{value:"stc",children:"STC Pay"})]})]}),e.jsx(Z,{onClick:()=>E(),variant:"secondary",children:"ØªØ­Ø¯ÙŠØ«"})]}),e.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[e.jsx(Z,{onClick:()=>B("csv"),variant:"outline",children:"ØªØµØ¯ÙŠØ± CSV"}),e.jsx(Z,{onClick:()=>B("xlsx"),variant:"outline",children:"ØªØµØ¯ÙŠØ± Excel"})]})]}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„ÙØªØ±Ø©)"}),l?e.jsx("div",{children:"..."}):w?e.jsx("div",{className:"error",children:String(w)}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:D.totalOrders})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (Ø§Ù„ÙØªØ±Ø©)"}),l?e.jsx("div",{children:"..."}):w?e.jsx("div",{className:"error",children:String(w)}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[D.totalRevenue.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨ (Ø§Ù„ÙØªØ±Ø©)"}),l?e.jsx("div",{children:"..."}):w?e.jsx("div",{className:"error",children:String(w)}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[D.avgOrder.toFixed(2)," SAR"]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0},children:["Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ù…Ù† ",n," Ø¥Ù„Ù‰ ",d,")"]}),l?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):w?e.jsx("span",{className:"error",children:String(w)}):null]}),e.jsxs("div",{style:{marginTop:8,display:"grid",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsx(ps,{points:y,width:560,height:100})]}),e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(ps,{points:v,width:560,height:70,stroke:"#0ea5e9",fill:"rgba(14,165,233,0.12)"})]})]}),e.jsxs("div",{className:"muted",style:{marginTop:8,display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯: ",y.reduce((T,A)=>T+A,0).toFixed(2)," SAR"]}),e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ",v.reduce((T,A)=>T+A,0)]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©"}),l?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(D.byStatus).sort((T,A)=>A[1]-T[1]).map(([T,A])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:T}),e.jsx("td",{style:{textAlign:"end"},children:A})]},T)),Object.keys(D.byStatus).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),l?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(D.byMethod).sort((T,A)=>A[1]-T[1]).map(([T,A])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:T}),e.jsx("td",{style:{textAlign:"end"},children:A})]},T)),Object.keys(D.byMethod).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),l?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("th",{children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[D.topProducts.map((T,A)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:T.name}),e.jsx("td",{style:{textAlign:"center"},children:T.qty}),e.jsxs("td",{style:{textAlign:"end"},children:[T.revenue.toFixed(2)," SAR"]})]},A)),D.topProducts.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]})]})};function Xn(t,s,r){const[i,o]=P.useState({orders:[],total:0,page:1,totalPages:1}),[n,u]=P.useState(!1),[d,b]=P.useState(null);return P.useEffect(()=>{let y=!0;return(async()=>{u(!0),b(null);try{const g={status:"pending_bank_review",paymentMethod:"bank",page:r||1,pageSize:50};t&&(g.from=t),s&&(g.to=s);const v=await Y.listOrdersAdmin(g);if(!y)return;o({orders:v.orders||[],total:v.total||(v.orders||[]).length,page:v.page||1,totalPages:v.totalPages||1})}catch(g){if(!y)return;b(g.message||"Failed to load")}finally{y&&u(!1)}})(),()=>{y=!1}},[t,s,r]),{...i,loading:n,error:d}}const Qn=({o:t,onConfirm:s,onReject:r})=>{const o=(t.paymentMeta||{}).bank||{},n=o.receiptUrl,u=o.reference,[d,b]=P.useState("");return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontFamily:"monospace",fontSize:12},children:t.id}),e.jsx("div",{className:"muted",children:new Date(t.createdAt).toLocaleString()})]}),e.jsx("td",{children:t.userId}),e.jsxs("td",{children:[t.grandTotal?.toFixed?.(2)||t.grandTotal," ",t.currency||"SAR"]}),e.jsxs("td",{children:[n?e.jsx("a",{href:n,target:"_blank",rel:"noreferrer",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±ÙÙ‚"}):e.jsx("span",{className:"muted",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯"}),e.jsxs("div",{className:"muted",children:["Ø§Ù„Ù…Ø±Ø¬Ø¹: ",u||"â€”"]})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>s(t.id,u),className:"btn",style:{padding:"6px 10px",border:"1px solid #0a0",color:"#0a0",borderRadius:6},children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹"}),e.jsx("input",{type:"text",value:d,onChange:y=>b(y.target.value),placeholder:"Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",style:{minWidth:180}}),e.jsx("button",{onClick:()=>r(t.id,d),className:"btn",style:{padding:"6px 10px",border:"1px solid #a00",color:"#a00",borderRadius:6},children:"Ø±ÙØ¶"})]})})]})},He=()=>{const[t,s]=P.useState(""),[r,i]=P.useState(""),[o,n]=P.useState(1),{orders:u,loading:d,error:b,total:y,totalPages:g}=Xn(t,r,o),v=P.useCallback(()=>{n(1)},[]),x=async(c,w)=>{try{await Y.bankConfirm(c,w),v(),alert("ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯")}catch(I){alert(I.message||"ÙØ´Ù„ Ø§Ù„ØªØ£ÙƒÙŠØ¯")}},l=async(c,w)=>{if(window.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±ÙØ¶ØŸ"))try{await Y.bankReject(c,w||void 0),v(),alert("ØªÙ… Ø§Ù„Ø±ÙØ¶")}catch(I){alert(I.message||"ÙØ´Ù„ Ø§Ù„Ø±ÙØ¶")}};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ne,{title:"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©",description:"Bank transfers review"}),e.jsx("h1",{className:"page-title",children:"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",margin:"8px 0",flexWrap:"wrap"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:t,onChange:c=>s(c.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:r,onChange:c=>i(c.target.value)})]}),e.jsx("button",{onClick:()=>n(1),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØ·Ø¨ÙŠÙ‚"})]}),e.jsxs("div",{className:"card",style:{padding:0,border:"1px solid #eee",borderRadius:8},children:[e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("strong",{children:["Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©: ",y]}),d?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):b?e.jsx("span",{className:"error",children:String(b)}):null]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"right",background:"#fafafa"},children:[e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ù…Ø±ÙÙ‚/Ø§Ù„Ù…Ø±Ø¬Ø¹"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡"})]})}),e.jsxs("tbody",{children:[u.map(c=>e.jsx(Qn,{o:c,onConfirm:x,onReject:l},c.id)),!d&&u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{padding:16},className:"muted",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©."})})]})]})}),g>1&&e.jsxs("div",{style:{padding:12,display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid #eee"},children:[e.jsx("button",{disabled:o<=1,onClick:()=>n(c=>Math.max(1,c-1)),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{className:"muted",children:["ØµÙØ­Ø© ",o," Ù…Ù† ",g]}),e.jsx("button",{disabled:o>=g,onClick:()=>n(c=>Math.min(g,c+1)),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})};function ms({points:t=[],width:s=560,height:r=100,stroke:i="#111827",fill:o="rgba(17,24,39,0.08)"}){const n=P.useRef(null);return P.useEffect(()=>{const u=n.current;if(!u)return;const d=u.getContext("2d");if(d.clearRect(0,0,s,r),!t.length)return;t.map((c,w)=>w);const b=t.map(c=>c),y=Math.min(...b),g=Math.max(...b),v=6,x=c=>v+c/(t.length-1)*(s-v*2),l=c=>{const w=g-y||1;return r-v-(c-y)/w*(r-v*2)};d.beginPath(),d.moveTo(x(0),l(t[0]));for(let c=1;c<t.length;c++)d.lineTo(x(c),l(t[c]));d.strokeStyle=i,d.lineWidth=2,d.stroke(),d.lineTo(x(t.length-1),r-v),d.lineTo(x(0),r-v),d.closePath(),d.fillStyle=o,d.fill()},[t,s,r,i,o]),e.jsx("canvas",{ref:n,width:s,height:r,style:{width:s,height:r}})}const Yn=[{key:"7",label:"7 Ø£ÙŠØ§Ù…"},{key:"14",label:"14 ÙŠÙˆÙ…"},{key:"30",label:"30 ÙŠÙˆÙ…"}],Ke=()=>{const[t,s]=P.useState("7"),[r,i]=P.useState(()=>new Date(Date.now()-6*864e5).toISOString().slice(0,10)),[o,n]=P.useState(()=>new Date().toISOString().slice(0,10)),[u,d]=P.useState(""),[b,y]=P.useState(""),[g,v]=P.useState(!1),[x,l]=P.useState(null),[c,w]=P.useState({totalOrders:0,totalRevenue:0,avgOrder:0,uniqueCustomers:0,byStatus:{},byMethod:{},topProducts:[],topCustomers:[]}),[I,j]=P.useState([]),[z,$]=P.useState([]),[h,D]=P.useState(null),R=A=>{s(A);const O=Number(A),_=new Date,N=new Date;N.setDate(_.getDate()-(O-1)),i(N.toISOString().slice(0,10)),n(_.toISOString().slice(0,10))},E=P.useCallback(async()=>{const A={from:r,to:o,page:1,pageSize:250};u&&(A.status=u),b&&(A.paymentMethod=b);const O=[],_=await Y.listOrdersAdmin(A);(_?.orders||[]).forEach(U=>O.push(U));const N=_?.totalPages||1;for(let U=2;U<=Math.min(N,8);U++)((await Y.listOrdersAdmin({...A,page:U}))?.orders||[]).forEach(f=>O.push(f));return O},[r,o,u,b]),M=P.useCallback(A=>{const O=new Date(r),_=new Date(o),N=Math.max(1,Math.round((_-O)/864e5)+1),U=new Map,p=new Map;for(let ee=0;ee<N;ee++){const te=new Date(O);te.setDate(O.getDate()+ee);const C=te.toISOString().slice(0,10);U.set(C,0),p.set(C,0)}let f=0;const S={},V={},K=new Map,Q=new Map;for(const ee of A){f+=ee.grandTotal||0,S[ee.status]=(S[ee.status]||0)+1;const te=ee.paymentMethod||"unknown";V[te]=(V[te]||0)+1;const C=new Date(ee.createdAt).toISOString().slice(0,10);U.has(C)&&U.set(C,(U.get(C)||0)+(ee.grandTotal||0)),p.has(C)&&p.set(C,(p.get(C)||0)+1);const H=ee.userId||"guest",ae=Q.get(H)||{id:H,revenue:0,orders:0};ae.revenue+=ee.grandTotal||0,ae.orders+=1,Q.set(H,ae),(ee.items||[]).forEach(m=>{const G=m.productId||m.name?.ar||m.name?.en||"Ù…Ù†ØªØ¬",X=K.get(G)||{name:m.name?.ar||m.name?.en||G,qty:0,revenue:0};X.qty+=m.quantity||0,X.revenue+=(m.price||0)*(m.quantity||0),K.set(G,X)})}const se=A.length,re=se?f/se:0,je=Q.size,ne=Array.from(K.values()).sort((ee,te)=>te.revenue-ee.revenue).slice(0,10),ie=Array.from(Q.values()).sort((ee,te)=>te.revenue-ee.revenue).slice(0,10);w({totalOrders:se,totalRevenue:f,avgOrder:re,uniqueCustomers:je,byStatus:S,byMethod:V,topProducts:ne,topCustomers:ie}),j(Array.from(U.values())),$(Array.from(p.values()))},[r,o]),q=P.useCallback(async()=>{v(!0),l(null);try{const A=await E();M(A);const O=Math.max(1,Math.round((new Date(o)-new Date(r))/864e5)+1),_=await Y.adminStatsFinancials({from:r,to:o,days:O});D(_)}catch(A){l(A.message||"Failed to load analytics")}finally{v(!1)}},[E,M]);P.useEffect(()=>{q()},[q]);const F="https://my-store-backend-production.up.railway.app/api",B=A=>{const O=new URLSearchParams;return r&&O.set("from",r),o&&O.set("to",o),u&&O.set("status",u),b&&O.set("paymentMethod",b),`${F}/admin/stats/orders/export/${A}?${O.toString()}`},T=async A=>{let O=null;try{O=localStorage.getItem("my_store_token")}catch{}const _={};O&&(_.Authorization=`Bearer ${O}`);const N=await fetch(B(A),{headers:_});if(!N.ok)throw new Error(`Export failed: ${N.status}`);const U=await N.blob(),p=URL.createObjectURL(U),f=document.createElement("a");f.href=p,f.download=A==="csv"?"analytics_orders.csv":"analytics_orders.xlsx",document.body.appendChild(f),f.click(),f.remove(),URL.revokeObjectURL(p)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ne,{title:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª | Analytics",description:"Analytics overview"}),e.jsx("h1",{className:"page-title",children:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª / Analytics"}),x&&e.jsx("div",{className:"error",style:{marginTop:8},children:String(x)}),e.jsxs("div",{style:{marginTop:16,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("strong",{children:"Ø§Ù„ÙØªØ±Ø©:"}),Yn.map(A=>e.jsx("button",{onClick:()=>R(A.key),className:t===A.key?"btn btn-primary":"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:t===A.key?"#111827":"#fff",color:t===A.key?"#fff":"#111"},children:A.label},A.key)),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:r,onChange:A=>i(A.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:o,onChange:A=>n(A.target.value)})]}),e.jsxs("label",{children:["Ø§Ù„Ø­Ø§Ù„Ø©:",e.jsxs("select",{value:u,onChange:A=>d(A.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"pending",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("option",{value:"processing",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}),e.jsx("option",{value:"paid",children:"Ù…Ø¯ÙÙˆØ¹"}),e.jsx("option",{value:"shipped",children:"ØªÙ… Ø§Ù„Ø´Ø­Ù†"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙŠ"})]})]}),e.jsxs("label",{children:["Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:",e.jsxs("select",{value:b,onChange:A=>y(A.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"}),e.jsx("option",{value:"cod",children:"Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("option",{value:"stc",children:"STC Pay"})]})]}),e.jsx("button",{onClick:q,className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:g?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦":"ØªØ­Ø¯ÙŠØ«"})]}),e.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{onClick:()=>T("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV"}),e.jsx("button",{onClick:()=>T("xlsx"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± Excel"})]})]}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„ÙØªØ±Ø©)"}),g?e.jsx("div",{children:"..."}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:c.totalOrders})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (Ø§Ù„ÙØªØ±Ø©)"}),g?e.jsx("div",{children:"..."}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[c.totalRevenue.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨"}),g?e.jsx("div",{children:"..."}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[c.avgOrder.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„ÙØ±ÙŠØ¯ÙˆÙ†"}),g?e.jsx("div",{children:"..."}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:c.uniqueCustomers})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0},children:["Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ù…Ù† ",r," Ø¥Ù„Ù‰ ",o,")"]}),g?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):null]}),e.jsxs("div",{style:{marginTop:8,display:"grid",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsx(ms,{points:I,width:560,height:100})]}),e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(ms,{points:z,width:560,height:70,stroke:"#0ea5e9",fill:"rgba(14,165,233,0.12)"})]})]}),e.jsxs("div",{className:"muted",style:{marginTop:8,display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯: ",I.reduce((A,O)=>A+O,0).toFixed(2)," SAR"]}),e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ",z.reduce((A,O)=>A+O,0)]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0},children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© (ØªØ¬Ù…ÙŠØ¹ÙŠ)"}),e.jsx("div",{style:{display:"flex",gap:8},children:e.jsx("button",{onClick:()=>T("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV (Ø·Ù„Ø¨Ø§Øª)"})})]}),g?e.jsx("div",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsxs("div",{style:{fontWeight:700,fontSize:22},children:[(h?.totals?.totalRevenue||0).toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("div",{style:{fontWeight:700,fontSize:22},children:h?.totals?.totalOrders||0})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨"}),e.jsxs("div",{style:{fontWeight:700,fontSize:22},children:[(h?.totals?.overallAov||0).toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙˆÙ† (Ø§Ù„ÙØªØ±Ø©)"}),e.jsx("div",{style:{fontWeight:700,fontSize:22},children:h?.totals?.activeCustomersWindow||0})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©"}),g?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(c.byStatus).sort((A,O)=>O[1]-A[1]).map(([A,O])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:A}),e.jsx("td",{style:{textAlign:"end"},children:O})]},A)),Object.keys(c.byStatus).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),g?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(c.byMethod).sort((A,O)=>O[1]-A[1]).map(([A,O])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:A}),e.jsx("td",{style:{textAlign:"end"},children:O})]},A)),Object.keys(c.byMethod).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),g?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("th",{children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[c.topProducts.map((A,O)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:A.name}),e.jsx("td",{style:{textAlign:"center"},children:A.qty}),e.jsxs("td",{style:{textAlign:"end"},children:[A.revenue.toFixed(2)," SAR"]})]},O)),c.topProducts.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),g?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("th",{children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[c.topCustomers.map((A,O)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:A.id==="guest"?"Ø¶ÙŠÙ":A.id}),e.jsx("td",{style:{textAlign:"center"},children:A.orders}),e.jsxs("td",{style:{textAlign:"end"},children:[A.revenue.toFixed(2)," SAR"]})]},O)),c.topCustomers.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]})]})};function Zn({title:t,children:s}){return e.jsxs("div",{dir:"rtl",className:"min-h-screen bg-slate-50 text-slate-800",children:[e.jsx($s,{}),e.jsxs("main",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[t?e.jsx("header",{className:"mb-4",children:e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:t})}):null,s]})]})}const ea=({rows:t=8,cols:s=6})=>e.jsx("div",{role:"status","aria-live":"polite",className:"w-full",children:e.jsxs("table",{className:"w-full",style:{borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:Array.from({length:s}).map((r,i)=>e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #eee",textAlign:"start"},children:e.jsx(ls,{className:"h-4 w-24"})},i))})}),e.jsx("tbody",{children:Array.from({length:t}).map((r,i)=>e.jsx("tr",{children:Array.from({length:s}).map((o,n)=>e.jsx("td",{style:{padding:"10px 8px",borderBottom:"1px solid #f8f8f8"},children:e.jsx(ls,{className:"h-4 w-32"})},n))},i))})]})}),ve=P.forwardRef(function({className:s,type:r,icon:i,label:o,...n},u){return e.jsxs("div",{className:"w-full",children:[o&&e.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:o}),e.jsxs("div",{className:"relative",children:[i&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i}),e.jsx(Dr,{ref:u,type:r,className:i?`pr-10 ${s||""}`:s,...n})]})]})});ve.displayName="Input";const we=P.forwardRef(({className:t,options:s,...r},i)=>e.jsx("select",{className:Wr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:i,...r,children:s.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}));we.displayName="Select";const ta=({label:t,value:s,help:r})=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm",children:[e.jsx("p",{className:"text-sm text-slate-500",children:t}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:s}),r&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:r})]}),sa=({onUserAdded:t,onCancel:s})=>{const[r,i]=a.useState({name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",sendInvite:!0,showPassword:!1}),[o,n]=a.useState(!1),[u,d]=a.useState(null),b=ke(),y=(l,c)=>i(w=>({...w,[l]:c})),g=()=>{const l="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$%^&*()_+";let c="";for(let w=0;w<12;w++)c+=l[Math.floor(Math.random()*l.length)];i(w=>({...w,password:c,confirmPassword:c,showPassword:!0,sendInvite:!1}))},v=async l=>{l.preventDefault(),d(null),n(!0);try{const c={email:r.email.trim(),password:r.sendInvite?void 0:r.password,name:r.name.trim()||void 0,role:r.role,phone:r.phone.trim()||void 0,sendInvite:r.sendInvite};if(!c.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email))throw new Error("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­");if(!r.sendInvite){if(!c.password||c.password.length<6)throw new Error("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 6 Ø£Ø­Ø±Ù");if(r.password!==r.confirmPassword)throw new Error("ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚")}const w=await Y.adminUserCreate(c);w.user&&t(w.user)}catch(c){const w=c.message||"ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…";d(w.includes("EMAIL_EXISTS")?"Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„":w),b.error("ÙØ´Ù„ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡",w)}finally{n(!1)}},x=[{value:"user",label:"Ù…Ø³ØªØ®Ø¯Ù…"},{value:"admin",label:"Ù…Ø¯ÙŠØ±"},{value:"seller",label:"Ø¨Ø§Ø¦Ø¹"}];return e.jsxs("form",{onSubmit:v,className:"p-4 my-4 bg-slate-50 border rounded-lg space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯"}),u&&e.jsx("div",{className:"bg-red-100 border border-red-200 text-red-700 p-3 rounded-md text-sm",children:u}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ve,{label:"Ø§Ù„Ø§Ø³Ù…",value:r.name,onChange:l=>y("name",l.target.value),placeholder:"Ø§Ø®ØªÙŠØ§Ø±ÙŠ"}),e.jsx(ve,{label:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",type:"email",value:r.email,onChange:l=>y("email",l.target.value),required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{type:r.showPassword?"text":"password",value:r.password,onChange:l=>y("password",l.target.value),disabled:r.sendInvite,minLength:r.sendInvite?0:6,placeholder:r.sendInvite?"Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ØªØ¹ÙŠÙŠÙ†":""}),e.jsx(Z,{type:"button",variant:"outline",onClick:()=>y("showPassword",!r.showPassword),children:r.showPassword?"Ø¥Ø®ÙØ§Ø¡":"Ø¥Ø¸Ù‡Ø§Ø±"}),e.jsx(Z,{type:"button",variant:"outline",onClick:g,disabled:r.sendInvite,children:"ØªÙˆÙ„ÙŠØ¯"})]})]}),!r.sendInvite&&e.jsx(ve,{label:"ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",type:r.showPassword?"text":"password",value:r.confirmPassword,onChange:l=>y("confirmPassword",l.target.value),minLength:6}),e.jsx(we,{label:"Ø§Ù„Ø¯ÙˆØ±",value:r.role,onChange:l=>y("role",l.target.value),options:x}),e.jsx(ve,{label:"Ø§Ù„Ø¬ÙˆØ§Ù„",type:"tel",value:r.phone,onChange:l=>y("phone",l.target.value),placeholder:"Ø§Ø®ØªÙŠØ§Ø±ÙŠ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"sendInvite",checked:r.sendInvite,onChange:l=>y("sendInvite",l.target.checked)}),e.jsx("label",{htmlFor:"sendInvite",className:"text-sm",children:"Ø¥Ø±Ø³Ø§Ù„ Ø¯Ø¹ÙˆØ© Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù„ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Z,{type:"button",variant:"ghost",onClick:s,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(Z,{type:"submit",disabled:o,children:o?"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø¶Ø§ÙØ©â€¦":"Ø­ÙØ¸"})]})]})},ra=({user:t,onUserUpdated:s,onUserDeleted:r})=>{const[i,o]=a.useState(!1),[n,u]=a.useState(t.role),[d,b]=a.useState(!1),y=ke(),g=async()=>{try{await Y.adminUserUpdate(t.id,{role:n}),s({...t,role:n}),o(!1),y.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­")}catch(w){y.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ±",w.message)}},v=async()=>{const w=!t.active;try{w?await Y.adminUserActivate(t.id):await Y.adminUserDeactivate(t.id),s({...t,active:w}),y.success(`ØªÙ… ${w?"ØªÙØ¹ÙŠÙ„":"ØªØ¹Ø·ÙŠÙ„"} Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…`)}catch(I){y.error("ÙØ´Ù„ ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",I.message)}},x=async()=>{if(window.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${t.name||t.email}ØŸ`))try{await Y.adminUserDelete(t.id),r(t.id),y.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­")}catch(w){y.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",w.message)}},l=[{value:"user",label:"Ù…Ø³ØªØ®Ø¯Ù…"},{value:"admin",label:"Ù…Ø¯ÙŠØ±"},{value:"seller",label:"Ø¨Ø§Ø¦Ø¹"}],c=l.find(w=>w.value===t.role);return e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.avatarUrl||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name||"U")}&background=random`,alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}),e.jsx("span",{className:"font-medium text-slate-800",children:t.name||"â€”"})]})}),e.jsx("td",{className:"p-3 text-slate-600",children:t.email}),e.jsx("td",{className:"p-3",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{value:n,onChange:w=>u(w.target.value),options:l,className:"h-8"}),e.jsx(Z,{size:"sm",onClick:g,children:"Ø­ÙØ¸"}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:"Ø¥Ù„ØºØ§Ø¡"})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.role==="admin"?"bg-green-100 text-green-800":t.role==="seller"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:c?.label||t.role})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.active?"Ù…ÙØ¹Ù„":"ØºÙŠØ± Ù…ÙØ¹Ù„"})}),e.jsx("td",{className:"p-3 text-slate-500",children:new Date(t.createdAt).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"})}),e.jsxs("td",{className:"p-3 text-left relative",children:[e.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>b(w=>!w),children:e.jsx(cr,{size:16})}),d&&e.jsx("div",{className:"absolute left-0 top-10 mt-2 w-48 bg-white border rounded-md shadow-lg z-10",onMouseLeave:()=>b(!1),children:e.jsxs("ul",{className:"py-1",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>{o(!0),b(!1)},className:"w-full text-right px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±"})}),e.jsx("li",{children:e.jsxs("button",{onClick:v,className:"w-full text-right px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 flex items-center gap-2",children:[t.active?e.jsx(dr,{size:14}):e.jsx(ur,{size:14}),t.active?"ØªØ¹Ø·ÙŠÙ„":"ØªÙØ¹ÙŠÙ„"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:x,className:"w-full text-right px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[e.jsx(pr,{size:14}),"Ø­Ø°Ù"]})})]})})]})]})},Ge=()=>{const[t,s]=a.useState({search:"",role:"",status:"",from:"",to:""}),[r]=mr(t.search,300),[i,o]=a.useState(1),[n,u]=a.useState(10),[d,b]=a.useState({by:"createdAt",dir:"desc"}),[y,g]=a.useState(!1),[v,x]=a.useState(null),[l,c]=a.useState([]),[w,I]=a.useState(0),j=ke(),[z,$]=a.useState(!1),h=a.useCallback(async()=>{g(!0),x(null);try{const _={page:i,pageSize:n,search:r||void 0,role:t.role||void 0,status:t.status||void 0,from:t.from||void 0,to:t.to||void 0,sortBy:d.by,sortDir:d.dir},N=await Y.listUsers(_);c(N.users||[]),I(N.total||0)}catch(_){x(_.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"),j.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",_.message)}finally{g(!1)}},[i,n,r,t.role,t.status,t.from,t.to,d.by,d.dir,j]);a.useEffect(()=>{h()},[h]);const D=(_,N)=>{s(U=>({...U,[_]:N})),o(1)},R=_=>{d.by===_?b(N=>({...N,dir:N.dir==="asc"?"desc":"asc"})):b({by:_,dir:"desc"})},E=_=>{c(N=>[_,...N]),I(N=>N+1),$(!1),j.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­")},M=_=>{c(N=>N.map(U=>U.id===_.id?_:U))},q=_=>{c(N=>N.filter(U=>U.id!==_)),I(N=>N-1)},F=Math.max(1,Math.ceil(w/n)),B=a.useMemo(()=>[{label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",value:w},{label:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙˆÙ†",value:l.filter(_=>_.active).length,help:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ø°ÙŠÙ† Ø³Ø¬Ù„ÙˆØ§ Ø¯Ø®ÙˆÙ„Ø§Ù‹ Ø®Ù„Ø§Ù„ Ø¢Ø®Ø± 30 ÙŠÙˆÙ…Ù‹Ø§"},{label:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡",value:l.filter(_=>_.role==="admin").length},{label:"Ù…Ø³Ø¬Ù‘Ù„ÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±",value:l.filter(_=>new Date(_.createdAt)>new Date(new Date().setDate(new Date().getDate()-30))).length}],[l,w]),T=[{value:"",label:"ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±"},{value:"user",label:"Ù…Ø³ØªØ®Ø¯Ù…"},{value:"admin",label:"Ù…Ø¯ÙŠØ±"},{value:"seller",label:"Ø¨Ø§Ø¦Ø¹"}],A=[{value:"",label:"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª"},{value:"active",label:"Ù…ÙØ¹Ù„"},{value:"inactive",label:"ØºÙŠØ± Ù…ÙØ¹Ù„"}],O=_=>d.by!==_?null:d.dir==="asc"?e.jsx(yr,{size:14}):e.jsx(vr,{size:14});return e.jsxs(Zn,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",children:[e.jsx(Ne,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",description:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:B.map(_=>e.jsx(ta,{..._},_.label))}),e.jsxs(Ur,{children:[e.jsxs(zr,{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs(Mr,{children:["Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (",w,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{variant:"outline",size:"sm",onClick:h,disabled:y,children:[e.jsx(hr,{size:14,className:`mr-2 ${y?"animate-spin":""}`}),"ØªØ­Ø¯ÙŠØ«"]}),e.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{},children:[e.jsx(gr,{size:14,className:"mr-2"}),"ØªØµØ¯ÙŠØ±"]}),e.jsxs(Z,{size:"sm",onClick:()=>$(!0),children:[e.jsx(xr,{size:14,className:"mr-2"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…"]})]})]}),e.jsxs($r,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ve,{placeholder:"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ØŒ Ø£Ùˆ Ø§Ù„Ø¬ÙˆØ§Ù„...",value:t.search,onChange:_=>D("search",_.target.value),icon:e.jsx(fr,{size:16,className:"text-slate-400"})})}),e.jsx(we,{value:t.role,onChange:_=>D("role",_.target.value),options:T}),e.jsx(we,{value:t.status,onChange:_=>D("status",_.target.value),options:A}),e.jsx(ve,{type:"date",value:t.from,onChange:_=>D("from",_.target.value),label:"Ù…Ù† ØªØ§Ø±ÙŠØ®"})]}),z&&e.jsx(sa,{onUserAdded:E,onCancel:()=>$(!1)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"text-slate-500 bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>R("name"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Ø§Ù„Ø§Ø³Ù… ",O("name")]})}),e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>R("email"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Ø§Ù„Ø¨Ø±ÙŠØ¯ ",O("email")]})}),e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>R("role"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Ø§Ù„Ø¯ÙˆØ± ",O("role")]})}),e.jsx("th",{className:"p-3 font-semibold",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"p-3 font-semibold cursor-pointer",onClick:()=>R("createdAt"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… ",O("createdAt")]})}),e.jsx("th",{className:"p-3 font-semibold text-left",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{children:y?e.jsx(ea,{rows:n,cols:6}):v?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-12 text-red-500",children:v})}):l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-12 text-slate-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ."})}):l.map(_=>e.jsx(ra,{user:_,onUserUpdated:M,onUserDeleted:q},_.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t mt-4",children:[e.jsxs("span",{className:"text-sm text-slate-500",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",w," | ØµÙØ­Ø© ",i," Ù…Ù† ",F]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>o(_=>Math.max(1,_-1)),disabled:i<=1,children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>o(_=>Math.min(F,_+1)),disabled:i>=F,children:"Ø§Ù„ØªØ§Ù„ÙŠ"}),e.jsx(we,{value:n,onChange:_=>u(Number(_.target.value)),options:[{value:10,label:"10 / ØµÙØ­Ø©"},{value:20,label:"20 / ØµÙØ­Ø©"},{value:50,label:"50 / ØµÙØ­Ø©"}]})]})]})]})]})]})]})},Te=async()=>(await J(async()=>{const{default:t}=await Promise.resolve().then(()=>qt);return{default:t}},void 0)).default,Je=()=>{const{setting:t,loading:s,error:r,update:i,uploadLogo:o}=Se(),[n,u]=a.useState({siteNameAr:"",siteNameEn:"",colorPrimary:"#69be3c",colorSecondary:"#2eafff",colorAccent:"#2eafff",taxNumber:"",supportPhone:"",supportMobile:"",supportWhatsapp:"",supportEmail:"",supportHours:"",footerAboutAr:"",footerAboutEn:"",linkBlog:"",linkSocial:"",linkReturns:"",linkPrivacy:"",appStoreUrl:"",playStoreUrl:"",companyNameAr:"",companyNameEn:"",commercialRegNo:"",addressAr:"",addressEn:"",heroBackgroundImage:"",heroBackgroundGradient:"",heroCenterImage:"",heroAutoplayInterval:"",topStripEnabled:!1,topStripAutoscroll:!0,topStripBackground:"#fde68a",shippingBase:"",shippingPerKm:"",shippingMin:"",shippingMax:"",shippingFallback:"",originLat:"",originLng:"",payPaypalEnabled:!1,payStcEnabled:!0,payCodEnabled:!0,payBankEnabled:!0,whatsappEnabled:!1,aramexEnabled:!1,aramexApiUrl:"",aramexApiKey:"",aramexApiUser:"",aramexApiPass:"",aramexWebhookSecret:"",smsaEnabled:!1,smsaApiUrl:"",smsaApiKey:"",smsaWebhookSecret:""}),[d,b]=a.useState(null),[y,g]=a.useState(null),[v,x]=a.useState(!1),[l,c]=a.useState(!1),[w,I]=a.useState(""),[j,z]=a.useState({}),$=a.useRef(null);a.useEffect(()=>{t&&u(m=>({...m,siteNameAr:t.siteNameAr||"",siteNameEn:t.siteNameEn||"",colorPrimary:t.colorPrimary||m.colorPrimary,colorSecondary:t.colorSecondary||m.colorSecondary,colorAccent:t.colorAccent||m.colorAccent,taxNumber:t.taxNumber||"",supportPhone:t.supportPhone||"",supportMobile:t.supportMobile||"",supportWhatsapp:t.supportWhatsapp||"",supportEmail:t.supportEmail||"",supportHours:t.supportHours||"",footerAboutAr:t.footerAboutAr||"",footerAboutEn:t.footerAboutEn||"",linkBlog:t.linkBlog||"",linkSocial:t.linkSocial||"",linkReturns:t.linkReturns||"",linkPrivacy:t.linkPrivacy||"",appStoreUrl:t.appStoreUrl||"",playStoreUrl:t.playStoreUrl||"",companyNameAr:t.companyNameAr||"",companyNameEn:t.companyNameEn||"",commercialRegNo:t.commercialRegNo||"",addressAr:t.addressAr||"",addressEn:t.addressEn||"",heroBackgroundImage:t.heroBackgroundImage||"",heroBackgroundGradient:t.heroBackgroundGradient||"",heroCenterImage:t.heroCenterImage||"",heroAutoplayInterval:t.heroAutoplayInterval??"",topStripEnabled:!!t.topStripEnabled,topStripAutoscroll:t.topStripAutoscroll!==0&&t.topStripAutoscroll!==!1,topStripBackground:t.topStripBackground||"#fde68a",shippingBase:t.shippingBase??"",shippingPerKm:t.shippingPerKm??"",shippingMin:t.shippingMin??"",shippingMax:t.shippingMax??"",shippingFallback:t.shippingFallback??"",originLat:t.originLat??"",originLng:t.originLng??"",payPaypalEnabled:!!t.payPaypalEnabled,payStcEnabled:t.payStcEnabled!==0&&t.payStcEnabled!==!1,payCodEnabled:t.payCodEnabled!==0&&t.payCodEnabled!==!1,payBankEnabled:t.payBankEnabled!==0&&t.payBankEnabled!==!1,whatsappEnabled:t.whatsappEnabled!==0&&t.whatsappEnabled!==!1,aramexEnabled:!!t.aramexEnabled,aramexApiUrl:t.aramexApiUrl||"",aramexApiKey:t.aramexApiKey||"",aramexApiUser:t.aramexApiUser||"",aramexApiPass:t.aramexApiPass||"",aramexWebhookSecret:t.aramexWebhookSecret||"",smsaEnabled:!!t.smsaEnabled,smsaApiUrl:t.smsaApiUrl||"",smsaApiKey:t.smsaApiKey||"",smsaWebhookSecret:t.smsaWebhookSecret||""}))},[t]);const h=(m,G)=>u(X=>({...X,[m]:G})),D=m=>/^#([0-9a-fA-F]{6})$/.test(String(m||"")),R=m=>!m||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(m)),E=m=>{if(!m)return!0;try{return new URL(m),!0}catch{return!1}},M=m=>!m||/^[0-9+\s-]+$/.test(String(m)),q=()=>{const m={};!n.siteNameAr&&!n.siteNameEn&&(m.siteNameEn="ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±"),D(n.colorPrimary)||(m.colorPrimary="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),D(n.colorSecondary)||(m.colorSecondary="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),D(n.colorAccent)||(m.colorAccent="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),n.topStripBackground&&!D(n.topStripBackground)&&(m.topStripBackground="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),R(n.supportEmail)||(m.supportEmail="ØµÙŠØºØ© Ø¨Ø±ÙŠØ¯ ØºÙŠØ± ØµØ­ÙŠØ­Ø©"),E(n.linkBlog)||(m.linkBlog="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),E(n.linkSocial)||(m.linkSocial="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),E(n.linkReturns)||(m.linkReturns="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),E(n.linkPrivacy)||(m.linkPrivacy="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),E(n.appStoreUrl)||(m.appStoreUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),E(n.playStoreUrl)||(m.playStoreUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),E(n.heroBackgroundImage)||(m.heroBackgroundImage="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),E(n.heroCenterImage)||(m.heroCenterImage="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),n.heroAutoplayInterval&&isNaN(+n.heroAutoplayInterval)&&(m.heroAutoplayInterval="Ù‚ÙŠÙ…Ø© Ø±Ù‚Ù…ÙŠØ© Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©");const G=X=>X===""||!isNaN(+X);return G(n.shippingBase)||(m.shippingBase="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),G(n.shippingPerKm)||(m.shippingPerKm="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),G(n.shippingMin)||(m.shippingMin="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),G(n.shippingMax)||(m.shippingMax="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),G(n.shippingFallback)||(m.shippingFallback="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),G(n.originLat)||(m.originLat="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),G(n.originLng)||(m.originLng="Ø±Ù‚Ù… ØµØ­ÙŠØ­"),n.aramexApiUrl&&!E(n.aramexApiUrl)&&(m.aramexApiUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),n.smsaApiUrl&&!E(n.smsaApiUrl)&&(m.smsaApiUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),M(n.supportPhone)||(m.supportPhone="Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· Ù…Ø³Ù…ÙˆØ­Ø©"),M(n.supportMobile)||(m.supportMobile="Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· Ù…Ø³Ù…ÙˆØ­Ø©"),z(m),Object.keys(m).length===0},F=async m=>{m.preventDefault(),x(!0),I("");try{if(!q()){I("ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø¸Ù„Ù„Ø©"),x(!1);return}const G={};if(t?Object.keys(n).forEach(X=>{n[X]!==t[X]&&(n[X]!==""||t[X]!==void 0&&t[X]!==null&&t[X]!=="")&&(G[X]=n[X])}):Object.assign(G,n),Object.keys(G).length===0&&!d){I("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª Ù„Ù„Ø­ÙØ¸"),x(!1);return}Object.keys(G).length,Object.keys(G).length>0&&await i(G),d&&(await o(d),b(null),y&&(URL.revokeObjectURL(y),g(null))),I("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­")}catch(G){let X="";const ce=G&&G.message?String(G.message):"",ge=G&&G.data&&G.data.message?String(G.data.message):"";ce.includes("connect ECONNREFUSED")||ge.includes("connect ECONNREFUSED")?X="ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ Ø§Ù„Ù…Ù„Ù‚Ù… Ø§Ù„Ø¨Ø¹ÙŠØ¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.":ce.includes("FORBIDDEN")||ge.includes("Admin only")?X="Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø£Ø¯Ù…Ù†.":ce.includes("UPDATE_FAILED")&&ge.includes("does not exist")?X="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ù…Ø²Ø§Ù…Ù†Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.":ce.includes("UNAUTHENTICATED")||ge.includes("UNAUTHENTICATED")?X="ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.":ce.includes("NOT_FOUND")||ge.includes("NOT_FOUND")?X="Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.":ce.includes("INVALID")||ge.includes("INVALID")?X="ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.":ce.includes("password")||ge.includes("password")?X="ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.":ge?X="ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: "+ge:ce?X="ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: "+ce:X="Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸.",I(X)}finally{x(!1)}},B=a.useMemo(()=>({"--color-primary":n.colorPrimary,"--color-primary-alt":n.colorSecondary,"--color-accent":n.colorAccent}),[n.colorPrimary,n.colorSecondary,n.colorAccent]),T=async()=>{if(!d){I("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø´Ø¹Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹");return}c(!0),I("");try{await o(d),b(null),y&&(URL.revokeObjectURL(y),g(null)),I("ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­")}catch(m){const G=m?.code?` (${m.code})`:"",X=m?.data?.message||m?.message||"";I("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±"+G+": "+X)}finally{c(!1)}},A=()=>{try{const m=document.documentElement;m.style.setProperty("--color-primary",n.colorPrimary),m.style.setProperty("--color-secondary",n.colorSecondary),m.style.setProperty("--color-accent",n.colorAccent),I("ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©")}catch{}},O=()=>{try{const m=document.documentElement;m.style.setProperty("--color-primary",t?.colorPrimary||"#69be3c"),m.style.setProperty("--color-secondary",t?.colorSecondary||"#2eafff"),m.style.setProperty("--color-accent",t?.colorAccent||"#2eafff"),I("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¥Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ©")}catch{}},[_,N]=a.useState(null),[U,p]=a.useState(!1),f=async()=>{p(!0),I("");try{const G=await(await J(async()=>{const{default:X}=await Promise.resolve().then(()=>qt);return{default:X}},void 0)).default.whatsappHealth({suppressLog:!0});N(G?.health||G||null)}catch(m){N({ok:!1,error:m?.message||"ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„"})}finally{p(!1)}},[S,V]=a.useState(""),[K,Q]=a.useState(!1),[se,re]=a.useState(null),je=async()=>{re(null);const m=String(S||"").trim();if(!m){re({ok:!1,message:"ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨"});return}Q(!0);try{const X=await(await J(async()=>{const{default:ce}=await Promise.resolve().then(()=>qt);return{default:ce}},void 0)).default.whatsappSendInvoiceByOrder(m);re(X?.result||X||{ok:!0})}catch(G){re({ok:!1,message:G?.data?.message||G?.message||"ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"})}finally{Q(!1)}},ne=m=>{if(!m){b(null),y&&URL.revokeObjectURL(y),g(null);return}const G=/image\/(png|jpe?g|webp|svg\+xml)/.test(m.type),X=m.size<=2*1024*1024;if(!G){I("ØµÙŠØºØ© Ø§Ù„Ø´Ø¹Ø§Ø± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† PNG/JPG/WebP/SVG");return}if(!X){I("Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø± ÙŠØ¬Ø¨ Ø£Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 2MB");return}b(m),y&&URL.revokeObjectURL(y),g(URL.createObjectURL(m))},[ie,ee]=a.useState(!1),[te,C]=a.useState("store-info"),H=[{id:"store-info",label:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±"},{id:"brand-colors",label:"Ø§Ù„Ø£Ù„ÙˆØ§Ù†"},{id:"logo-preview",label:"Ø§Ù„Ø´Ø¹Ø§Ø±"},{id:"contact-info",label:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„"},{id:"company-footer",label:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„ÙÙˆØªØ±"},{id:"top-strip",label:"Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ"},{id:"hero",label:"Ø¨Ø·Ù„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"},{id:"whatsapp",label:"Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"},{id:"env-db",label:"Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"},{id:"shipping-payment",label:"Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø¯ÙØ¹"},{id:"shipping-providers",label:"Ù…Ø²ÙˆØ¯Ùˆ Ø§Ù„Ø´Ø­Ù†"},{id:"links-apps",label:"Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª"}],ae=m=>{C(m),ee(!1),setTimeout(()=>{document.getElementById(m)?.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ne,{title:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª | Settings",description:"Store settings"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between"},children:[e.jsx("h1",{className:"page-title",style:{margin:0},children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª / Settings"}),e.jsx(Z,{type:"button",variant:"secondary",size:"sm",onClick:()=>ee(!0),children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…"})]}),ie&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>ee(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,.35)",zIndex:50}}),e.jsxs("aside",{role:"dialog","aria-label":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…",style:{position:"fixed",insetBlockStart:0,insetInlineEnd:0,blockSize:"100dvh",inlineSize:"min(80vw, 320px)",background:"#fff",borderInlineStart:"1px solid #e2e8f0",zIndex:60,display:"grid",gridTemplateRows:"auto 1fr",boxShadow:"-12px 0 24px -16px rgba(0,0,0,.25)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBlockEnd:"1px solid #e2e8f0"},children:[e.jsx("strong",{children:"Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"}),e.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:()=>ee(!1),children:"Ø¥ØºÙ„Ø§Ù‚"})]}),e.jsx("nav",{style:{padding:8,overflow:"auto"},children:e.jsx("ul",{style:{listStyle:"none",margin:0,padding:0,display:"grid",gap:6},children:H.map(m=>e.jsx("li",{children:e.jsx(Z,{type:"button",variant:"ghost",size:"sm",style:{width:"100%",justifyContent:"flex-start"},onClick:()=>ae(m.id),children:m.label})},m.id))})})]})]}),e.jsx("div",{"aria-live":"polite",style:{minHeight:24,marginBottom:8,color:w?.startsWith("ÙØ´Ù„")?"#dc2626":"#0f766e"},children:w}),s?e.jsx("p",{children:"ÙŠØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):r?e.jsxs("p",{className:"error",children:["Ø®Ø·Ø£: ",r]}):e.jsxs("form",{onSubmit:F,className:"settings-form",style:{display:"grid",gap:12,maxWidth:880},children:[e.jsx("section",{id:"store-info",style:{scrollMarginTop:80},hidden:te!=="store-info",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"siteNameAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± (AR)"}),e.jsx("input",{id:"siteNameAr",value:n.siteNameAr,onChange:m=>h("siteNameAr",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ù…ØªØ¬Ø± Ø§Ù„Ù†Ø®Ø¨Ø©"})]}),e.jsxs("label",{htmlFor:"siteNameEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Store Name (EN)"}),e.jsx("input",{id:"siteNameEn",value:n.siteNameEn,onChange:m=>h("siteNameEn",m.target.value),placeholder:"e.g., Elite Store"}),j.siteNameEn&&e.jsx("small",{style:{color:"#dc2626"},children:j.siteNameEn})]})]})]})}),e.jsx("section",{id:"brand-colors",style:{scrollMarginTop:80},hidden:te!=="brand-colors",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù‡ÙˆÙŠØ©"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-3)",gap:8},children:[e.jsxs("label",{htmlFor:"colorPrimary",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ"}),e.jsx("input",{id:"colorPrimary",type:"color",value:n.colorPrimary,onChange:m=>h("colorPrimary",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:n.colorPrimary,onChange:m=>h("colorPrimary",m.target.value)}),j.colorPrimary&&e.jsx("small",{style:{color:"#dc2626"},children:j.colorPrimary})]}),e.jsxs("label",{htmlFor:"colorSecondary",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ"}),e.jsx("input",{id:"colorSecondary",type:"color",value:n.colorSecondary,onChange:m=>h("colorSecondary",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:n.colorSecondary,onChange:m=>h("colorSecondary",m.target.value)}),j.colorSecondary&&e.jsx("small",{style:{color:"#dc2626"},children:j.colorSecondary})]}),e.jsxs("label",{htmlFor:"colorAccent",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù„ÙˆÙ† Ù…Ù…ÙŠØ²"}),e.jsx("input",{id:"colorAccent",type:"color",value:n.colorAccent,onChange:m=>h("colorAccent",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:n.colorAccent,onChange:m=>h("colorAccent",m.target.value)}),j.colorAccent&&e.jsx("small",{style:{color:"#dc2626"},children:j.colorAccent})]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(Z,{type:"button",variant:"success",onClick:A,children:"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©"}),e.jsx(Z,{type:"button",variant:"secondary",onClick:O,children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©"})]})]})}),e.jsxs("section",{id:"logo-preview",style:{scrollMarginTop:80},hidden:te!=="logo-preview",children:[e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø´Ø¹Ø§Ø±"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(y||t?.logoUrl||t?.logo)&&e.jsx("img",{src:y||t.logoUrl||t.logo,alt:"logo",style:{height:48,objectFit:"contain"}}),e.jsx("input",{ref:$,type:"file",accept:"image/png,image/jpeg,image/webp,image/svg+xml",onChange:m=>ne(m.target.files?.[0]||null),style:{display:"none"}}),e.jsx(Z,{type:"button",variant:"secondary",onClick:()=>$.current?.click(),children:"Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ"}),d&&e.jsx("span",{style:{fontSize:".6rem"},children:d.name}),e.jsx(Z,{type:"button",variant:"primary",onClick:T,disabled:!d||l,children:l?"ÙŠØ±ÙØ¹...":"Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±"})]})]}),e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø¨Ø§Ø´Ø±Ø©"}),e.jsxs("div",{style:{...B,display:"flex",alignItems:"center",gap:12,padding:12,border:"1px dashed #e2e8f0",borderRadius:8},children:[e.jsx("div",{style:{width:56,height:56,background:"var(--color-primary)",borderRadius:8}}),e.jsx("div",{style:{width:56,height:56,background:"var(--color-primary-alt)",borderRadius:8}}),e.jsx("div",{style:{width:56,height:56,background:"var(--color-accent)",borderRadius:8}}),e.jsx("span",{style:{fontWeight:700},children:n.siteNameAr||n.siteNameEn||"Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsx(Z,{type:"button",variant:"primary",style:{marginInlineStart:"auto"},children:"Ø²Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ"})]})]})]}),e.jsx("section",{id:"contact-info",style:{scrollMarginTop:80},hidden:te!=="contact-info",children:e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"supportPhone",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù‡Ø§ØªÙ)"}),e.jsx("input",{id:"supportPhone",value:n.supportPhone,onChange:m=>h("supportPhone",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 920000000"}),j.supportPhone&&e.jsx("small",{style:{color:"#dc2626"},children:j.supportPhone})]}),e.jsxs("label",{htmlFor:"supportMobile",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (Mobile)"}),e.jsx("input",{id:"supportMobile",value:n.supportMobile,onChange:m=>h("supportMobile",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: +9665XXXXXXXX"}),j.supportMobile&&e.jsx("small",{style:{color:"#dc2626"},children:j.supportMobile})]}),e.jsxs("label",{htmlFor:"supportWhatsapp",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ÙˆØ§ØªØ³Ø§Ø¨ (Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)"}),e.jsx("input",{id:"supportWhatsapp",value:n.supportWhatsapp,onChange:m=>h("supportWhatsapp",m.target.value),onBlur:m=>h("supportWhatsapp",m.target.value.replace(/\D+/g,"")),placeholder:"Ù…Ø«Ø§Ù„: 9665XXXXXXXX"}),e.jsx("small",{style:{opacity:.7},children:"Ø³ÙŠØ³ØªØ®Ø¯Ù… ÙƒØ±Ø§Ø¨Ø· wa.me/Ø§Ù„Ø±Ù‚Ù…"})]}),e.jsxs("label",{htmlFor:"supportEmail",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("input",{id:"supportEmail",type:"email",value:n.supportEmail,onChange:m=>h("supportEmail",m.target.value),placeholder:"support@example.com"}),j.supportEmail&&e.jsx("small",{style:{color:"#dc2626"},children:j.supportEmail})]}),e.jsxs("label",{htmlFor:"supportHours",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"supportHours",value:n.supportHours,onChange:m=>h("supportHours",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 9Øµ - 6Ù… (Ø§Ù„Ø³Ø¨Øª-Ø§Ù„Ø®Ù…ÙŠØ³)"})]}),e.jsxs("label",{htmlFor:"taxNumber",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"taxNumber",value:n.taxNumber,onChange:m=>h("taxNumber",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 311307460300003"})]})]})]})}),e.jsxs("section",{id:"company-footer",style:{display:"grid",gap:12,scrollMarginTop:80},hidden:te!=="company-footer",children:[e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"ÙˆØµÙ Ø§Ù„ÙÙˆØªØ±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"footerAboutAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù†Ø¨Ø°Ø© (AR)"}),e.jsx("textarea",{id:"footerAboutAr",rows:4,value:n.footerAboutAr,onChange:m=>h("footerAboutAr",m.target.value),placeholder:`Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¨Ø§Ù„Ø­Ø¨Ø©
ÙˆØ¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ Ù…Ù† Ù…Ù†Ø¸ÙØ§Øª Ùˆ ÙƒÙ…Ø§Ù„ÙŠØ§Øª
Ø£ÙŠØ¶Ù‹Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙ†Ø§ Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª ÙˆØ¬Ù…ÙŠØ¹
Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø±Ù†Ø§ Ø¬Ù…Ù„Ø© ÙˆØ¬ÙˆØ¯ØªÙ†Ø§
Ø£ØµÙ„ÙŠØ©`}),e.jsx("small",{style:{opacity:.7},children:"ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø© Ø£Ø³Ø·Ø±Ø› Ø³ØªØ¸Ù‡Ø± ÙƒÙÙ‚Ø±Ø§Øª Ù…Ù†ÙØµÙ„Ø©."})]}),e.jsxs("label",{htmlFor:"footerAboutEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"About (EN)"}),e.jsx("textarea",{id:"footerAboutEn",rows:4,value:n.footerAboutEn,onChange:m=>h("footerAboutEn",m.target.value),placeholder:"We specialize in wholesale and retail food products and home essentials."})]})]})]}),e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"companyNameAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© (AR)"}),e.jsx("input",{id:"companyNameAr",value:n.companyNameAr,onChange:m=>h("companyNameAr",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø¢Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©"})]}),e.jsxs("label",{htmlFor:"companyNameEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Company Name (EN)"}),e.jsx("input",{id:"companyNameEn",value:n.companyNameEn,onChange:m=>h("companyNameEn",m.target.value),placeholder:"e.g., Asia Outlet Co."})]}),e.jsxs("label",{htmlFor:"commercialRegNo",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ"}),e.jsx("input",{id:"commercialRegNo",value:n.commercialRegNo,onChange:m=>h("commercialRegNo",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 1010xxxxxx"})]}),e.jsxs("label",{htmlFor:"taxNumber2",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ"}),e.jsx("input",{id:"taxNumber2",value:n.taxNumber,onChange:m=>h("taxNumber",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 311307460300003"})]}),e.jsxs("label",{htmlFor:"addressAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (AR)"}),e.jsx("textarea",{id:"addressAr",rows:2,value:n.addressAr,onChange:m=>h("addressAr",m.target.value),placeholder:"Ø§Ù„Ø±ÙŠØ§Ø¶ - Ø­ÙŠ ... Ø´Ø§Ø±Ø¹ ..."})]}),e.jsxs("label",{htmlFor:"addressEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Address (EN)"}),e.jsx("textarea",{id:"addressEn",rows:2,value:n.addressEn,onChange:m=>h("addressEn",m.target.value),placeholder:"Riyadh, District..., Street..."})]})]})]})]}),e.jsx("section",{id:"top-strip",style:{scrollMarginTop:80},hidden:te!=="top-strip",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ (Top Strip)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8,alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!n.topStripEnabled,onChange:m=>h("topStripEnabled",m.target.checked)}),e.jsx("span",{style:{fontSize:".8rem",fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ"})]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!n.topStripAutoscroll,onChange:m=>h("topStripAutoscroll",m.target.checked)}),e.jsx("span",{style:{fontSize:".8rem",fontWeight:700},children:"ØªØ­Ø±ÙŠÙƒ ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]}),e.jsxs("label",{htmlFor:"topStripBackground",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©"}),e.jsx("input",{id:"topStripBackground",type:"color",value:n.topStripBackground,onChange:m=>h("topStripBackground",m.target.value)}),e.jsx("input",{"aria-label":"Hex",value:n.topStripBackground,onChange:m=>h("topStripBackground",m.target.value)}),j.topStripBackground&&e.jsx("small",{style:{color:"#dc2626"},children:j.topStripBackground})]}),e.jsx("div",{style:{fontSize:".65rem",opacity:.7},children:"Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ÙŠÙØ¯Ø§Ø± Ù…Ù† Ù‚Ø³Ù… Ø§Ù„ØªØ³ÙˆÙŠÙ‚ (Ø¨Ø§Ù†Ø±Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ - Ù…ÙˆÙ‚Ø¹ topStrip)."})]})]})}),e.jsx("section",{id:"hero",style:{scrollMarginTop:80},hidden:te!=="hero",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø¨Ø·Ù„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Hero)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"heroBackgroundImage",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© (Ø±Ø§Ø¨Ø·)"}),e.jsx("input",{id:"heroBackgroundImage",type:"url",value:n.heroBackgroundImage,onChange:m=>h("heroBackgroundImage",m.target.value),placeholder:"https://.../hero.jpg"}),j.heroBackgroundImage&&e.jsx("small",{style:{color:"#dc2626"},children:j.heroBackgroundImage})]}),e.jsxs("label",{htmlFor:"heroCenterImage",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØµÙˆØ±Ø© ÙˆØ³Ø·ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - Ø±Ø§Ø¨Ø·)"}),e.jsx("input",{id:"heroCenterImage",type:"url",value:n.heroCenterImage,onChange:m=>h("heroCenterImage",m.target.value),placeholder:"https://.../center.webp"}),j.heroCenterImage&&e.jsx("small",{style:{color:"#dc2626"},children:j.heroCenterImage})]}),e.jsxs("label",{htmlFor:"heroBackgroundGradient",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØªØ¯Ø±Ù‘Ø¬ Ø§Ù„ØªØ¹ØªÙŠÙ… (CSS)"}),e.jsx("input",{id:"heroBackgroundGradient",value:n.heroBackgroundGradient,onChange:m=>h("heroBackgroundGradient",m.target.value),placeholder:"linear-gradient(135deg, rgba(16,185,129,0.6), rgba(5,150,105,0.6))"})]}),e.jsxs("label",{htmlFor:"heroAutoplayInterval",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©)"}),e.jsx("input",{id:"heroAutoplayInterval",type:"number",min:"1000",step:"500",value:n.heroAutoplayInterval,onChange:m=>h("heroAutoplayInterval",m.target.value),placeholder:"5000"}),j.heroAutoplayInterval&&e.jsx("small",{style:{color:"#dc2626"},children:j.heroAutoplayInterval})]})]})]})}),e.jsx("section",{id:"whatsapp",style:{scrollMarginTop:80},hidden:te!=="whatsapp",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!n.whatsappEnabled,onChange:m=>h("whatsappEnabled",m.target.checked)}),e.jsx("span",{style:{fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(Z,{type:"button",variant:"outline",onClick:f,disabled:U,children:U?"ÙŠÙØ­Øµ...":"ØªØ´Ø®ÙŠØµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯"}),_&&e.jsxs("div",{className:"text-xs",style:{display:"grid",gap:4},children:[e.jsxs("div",{children:["Ø§Ù„Ù…Ø²ÙˆÙ‘Ø¯: ",e.jsx("strong",{children:_.provider||"â€”"})]}),e.jsxs("div",{children:["Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„ØªÙ‡ÙŠØ¦Ø©: ",e.jsx("strong",{style:{color:_.configured&&_.enabled?"#065f46":"#991b1b"},children:_.configured&&_.enabled?"Ø¬Ø§Ù‡Ø²":"ØºÙŠØ± Ù…ÙƒØªÙ…Ù„"})]}),(_.meta||_.twilio)&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(120px,1fr))",gap:6},children:Object.entries(_.meta||_.twilio).map(([m,G])=>e.jsxs("div",{className:"text-[11px]",style:{opacity:.85},children:[e.jsx("span",{style:{fontWeight:700},children:m}),": ",e.jsx("span",{style:{color:G?"#065f46":"#991b1b"},children:String(G)})]},m))}),_.error&&e.jsxs("div",{className:"text-[11px] text-red-700",children:["Ø®Ø·Ø£: ",_.error]})]})]}),e.jsxs("div",{style:{display:"grid",gap:6,borderTop:"1px dashed #e2e8f0",paddingTop:8},children:[e.jsxs("label",{htmlFor:"waOrderId",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ø®ØªØ¨Ø§Ø±: Ø¥Ø±Ø³Ø§Ù„ ÙØ§ØªÙˆØ±Ø© Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ (Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(140px, 220px) auto",gap:8,alignItems:"center"},children:[e.jsx("input",{id:"waOrderId",value:S,onChange:m=>V(m.target.value),placeholder:"Ù…Ø«Ø§Ù„: ord_123..."}),e.jsx(Z,{type:"button",variant:"success",size:"sm",onClick:je,disabled:K||!S,children:K?"ÙŠØ±Ø³Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),se&&e.jsx("div",{className:"text-[12px]",style:{color:se.ok!==!1?"#065f46":"#991b1b"},children:se.ok!==!1?"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„/Ø§Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ).":`ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${se.message||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`}),e.jsx("small",{style:{opacity:.7},children:"Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØªØ·Ù„Ø¨ Ø°Ù„Ùƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø£Ø¯Ù…Ù† ÙˆØªÙ‡ÙŠØ¦Ø© Ù…Ø²ÙˆØ¯ ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­. Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ù„ÙŠØŒ ÙØ¹Ù‘Ù„ Ø±Ø¤ÙˆØ³ Ø§Ù„ØªØ·ÙˆÙŠØ± ALLOW_DEV_HEADERS."})]}),e.jsx("small",{style:{opacity:.7},children:"ÙŠØªØ·Ù„Ø¨ Ø¶Ø¨Ø· Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø²ÙˆÙ‘Ø¯ (Twilio Ø£Ùˆ Meta). Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø± ÙŠØªÙŠØ­/ÙŠØ¹Ø·Ù‘Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±."})]})]})}),e.jsx("section",{id:"env-db",style:{scrollMarginTop:80},hidden:te!=="env-db",children:e.jsxs("fieldset",{style:{display:"grid",gap:12,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx(na,{})]})}),e.jsx("section",{id:"shipping-payment",style:{scrollMarginTop:80},hidden:te!=="shipping-payment",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø¯ÙØ¹"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-3)",gap:8},children:[e.jsxs("label",{htmlFor:"shippingBase",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø³ÙˆÙ… Ø£Ø³Ø§Ø³ÙŠØ© (SAR)"}),e.jsx("input",{id:"shippingBase",type:"number",step:"0.01",value:n.shippingBase,onChange:m=>h("shippingBase",m.target.value),placeholder:"Ù…Ø«Ø§Ù„: 10"}),j.shippingBase&&e.jsx("small",{style:{color:"#dc2626"},children:j.shippingBase})]}),e.jsxs("label",{htmlFor:"shippingPerKm",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù„ÙƒÙ„ ÙƒÙ… (SAR/km)"}),e.jsx("input",{id:"shippingPerKm",type:"number",step:"0.01",value:n.shippingPerKm,onChange:m=>h("shippingPerKm",m.target.value),placeholder:"0.7"}),j.shippingPerKm&&e.jsx("small",{style:{color:"#dc2626"},children:j.shippingPerKm})]}),e.jsxs("label",{htmlFor:"shippingMin",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰"}),e.jsx("input",{id:"shippingMin",type:"number",step:"0.01",value:n.shippingMin,onChange:m=>h("shippingMin",m.target.value),placeholder:"15"}),j.shippingMin&&e.jsx("small",{style:{color:"#dc2626"},children:j.shippingMin})]}),e.jsxs("label",{htmlFor:"shippingMax",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰"}),e.jsx("input",{id:"shippingMax",type:"number",step:"0.01",value:n.shippingMax,onChange:m=>h("shippingMax",m.target.value),placeholder:"60"}),j.shippingMax&&e.jsx("small",{style:{color:"#dc2626"},children:j.shippingMax})]}),e.jsxs("label",{htmlFor:"shippingFallback",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ØªØ¹Ø±ÙØ© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©"}),e.jsx("input",{id:"shippingFallback",type:"number",step:"0.01",value:n.shippingFallback,onChange:m=>h("shippingFallback",m.target.value),placeholder:"25"}),j.shippingFallback&&e.jsx("small",{style:{color:"#dc2626"},children:j.shippingFallback})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"originLat",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø¥Ø­Ø¯Ø§Ø«ÙŠ Ø§Ù„Ù…ØªØ¬Ø± (Lat)"}),e.jsx("input",{id:"originLat",type:"number",step:"0.0001",value:n.originLat,onChange:m=>h("originLat",m.target.value),placeholder:"24.7136"}),j.originLat&&e.jsx("small",{style:{color:"#dc2626"},children:j.originLat})]}),e.jsxs("label",{htmlFor:"originLng",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø¥Ø­Ø¯Ø§Ø«ÙŠ Ø§Ù„Ù…ØªØ¬Ø± (Lng)"}),e.jsx("input",{id:"originLng",type:"number",step:"0.0001",value:n.originLng,onChange:m=>h("originLng",m.target.value),placeholder:"46.6753"}),j.originLng&&e.jsx("small",{style:{color:"#dc2626"},children:j.originLng})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-4-min)",gap:8,marginTop:8},children:[e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!n.payPaypalEnabled,onChange:m=>h("payPaypalEnabled",m.target.checked)})," PayPal"]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!n.payStcEnabled,onChange:m=>h("payStcEnabled",m.target.checked)})," STC Pay"]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!n.payCodEnabled,onChange:m=>h("payCodEnabled",m.target.checked)})," Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"]}),e.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"checkbox",checked:!!n.payBankEnabled,onChange:m=>h("payBankEnabled",m.target.checked)})," Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ"]})]})]})}),e.jsx("section",{id:"shipping-providers",style:{scrollMarginTop:80},hidden:te!=="shipping-providers",children:e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ù…Ø²ÙˆØ¯Ùˆ Ø§Ù„Ø´Ø­Ù† (Aramex / SMSA)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:12},children:[e.jsxs("div",{style:{display:"grid",gap:8,alignContent:"start"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{id:"aramexEnabled",type:"checkbox",checked:!!n.aramexEnabled,onChange:m=>h("aramexEnabled",m.target.checked)}),e.jsx("label",{htmlFor:"aramexEnabled",style:{fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ Aramex"})]}),e.jsxs("label",{htmlFor:"aramexApiUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Aramex API URL"}),e.jsx("input",{id:"aramexApiUrl",type:"url",value:n.aramexApiUrl,onChange:m=>h("aramexApiUrl",m.target.value),placeholder:"https://api.aramex.com/..."}),j.aramexApiUrl&&e.jsx("small",{style:{color:"#dc2626"},children:j.aramexApiUrl})]}),e.jsxs("label",{htmlFor:"aramexApiKey",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"API Key"}),e.jsx("input",{id:"aramexApiKey",value:n.aramexApiKey,onChange:m=>h("aramexApiKey",m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"aramexApiUser",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Username"}),e.jsx("input",{id:"aramexApiUser",value:n.aramexApiUser,onChange:m=>h("aramexApiUser",m.target.value),placeholder:"user"})]}),e.jsxs("label",{htmlFor:"aramexApiPass",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Password"}),e.jsx("input",{id:"aramexApiPass",type:"password",value:n.aramexApiPass,onChange:m=>h("aramexApiPass",m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),e.jsxs("label",{htmlFor:"aramexWebhookSecret",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Webhook Secret (ØªÙˆÙ‚ÙŠØ¹)"}),e.jsx("input",{id:"aramexWebhookSecret",value:n.aramexWebhookSecret,onChange:m=>h("aramexWebhookSecret",m.target.value),placeholder:"secret"})]})]}),e.jsxs("div",{style:{display:"grid",gap:8,alignContent:"start"},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{id:"smsaEnabled",type:"checkbox",checked:!!n.smsaEnabled,onChange:m=>h("smsaEnabled",m.target.checked)}),e.jsx("label",{htmlFor:"smsaEnabled",style:{fontWeight:700},children:"ØªÙØ¹ÙŠÙ„ SMSA"})]}),e.jsxs("label",{htmlFor:"smsaApiUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"SMSA API URL"}),e.jsx("input",{id:"smsaApiUrl",type:"url",value:n.smsaApiUrl,onChange:m=>h("smsaApiUrl",m.target.value),placeholder:"https://api.smsaexpress.com/..."}),j.smsaApiUrl&&e.jsx("small",{style:{color:"#dc2626"},children:j.smsaApiUrl})]}),e.jsxs("label",{htmlFor:"smsaApiKey",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"API Key"}),e.jsx("input",{id:"smsaApiKey",value:n.smsaApiKey,onChange:m=>h("smsaApiKey",m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsxs("label",{htmlFor:"smsaWebhookSecret",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Webhook Secret (ØªÙˆÙ‚ÙŠØ¹)"}),e.jsx("input",{id:"smsaWebhookSecret",value:n.smsaWebhookSecret,onChange:m=>h("smsaWebhookSecret",m.target.value),placeholder:"secret"})]})]})]}),e.jsx("small",{style:{opacity:.7},children:"Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ø³ÙŠÙ‚Ø±Ø£ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ÙˆÙŠØ¨ Ù‡ÙˆÙƒ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ÙƒÙ„ Ù…Ø²ÙˆØ¯."})]})}),e.jsx("section",{id:"links-apps",style:{scrollMarginTop:80},hidden:te!=="links-apps",children:e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"linkBlog",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø¯ÙˆÙ†Ø© (Blog)"}),e.jsx("input",{id:"linkBlog",type:"url",value:n.linkBlog,onChange:m=>h("linkBlog",m.target.value),placeholder:"https://example.com/blog"}),j.linkBlog&&e.jsx("small",{style:{color:"#dc2626"},children:j.linkBlog})]}),e.jsxs("label",{htmlFor:"linkSocial",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ"}),e.jsx("input",{id:"linkSocial",type:"url",value:n.linkSocial,onChange:m=>h("linkSocial",m.target.value),placeholder:"https://instagram.com/yourbrand"}),j.linkSocial&&e.jsx("small",{style:{color:"#dc2626"},children:j.linkSocial})]}),e.jsxs("label",{htmlFor:"linkReturns",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹"}),e.jsx("input",{id:"linkReturns",type:"url",value:n.linkReturns,onChange:m=>h("linkReturns",m.target.value),placeholder:"https://example.com/returns"}),j.linkReturns&&e.jsx("small",{style:{color:"#dc2626"},children:j.linkReturns})]}),e.jsxs("label",{htmlFor:"linkPrivacy",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©"}),e.jsx("input",{id:"linkPrivacy",type:"url",value:n.linkPrivacy,onChange:m=>h("linkPrivacy",m.target.value),placeholder:"https://example.com/privacy"}),j.linkPrivacy&&e.jsx("small",{style:{color:"#dc2626"},children:j.linkPrivacy})]}),e.jsxs("label",{htmlFor:"appStoreUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· ØªØ·Ø¨ÙŠÙ‚ iOS (App Store)"}),e.jsx("input",{id:"appStoreUrl",type:"url",value:n.appStoreUrl,onChange:m=>h("appStoreUrl",m.target.value),placeholder:"https://apps.apple.com/app/idXXXXXXXXX"}),e.jsx("small",{style:{opacity:.7},children:"Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· App Store Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚."}),j.appStoreUrl&&e.jsx("small",{style:{color:"#dc2626"},children:j.appStoreUrl})]}),e.jsxs("label",{htmlFor:"playStoreUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· ØªØ·Ø¨ÙŠÙ‚ Android (Google Play)"}),e.jsx("input",{id:"playStoreUrl",type:"url",value:n.playStoreUrl,onChange:m=>h("playStoreUrl",m.target.value),placeholder:"https://play.google.com/store/apps/details?id=your.app"}),e.jsx("small",{style:{opacity:.7},children:"Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· Google Play Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚."}),j.playStoreUrl&&e.jsx("small",{style:{color:"#dc2626"},children:j.playStoreUrl})]})]})]})}),e.jsxs("div",{style:{position:"sticky",bottom:0,background:"rgba(255,255,255,0.7)",backdropFilter:"saturate(180%) blur(8px)",padding:"10px 0",borderTop:"1px solid #e2e8f0",display:"flex",gap:8,alignItems:"center"},children:[e.jsx(Z,{type:"submit",variant:"primary",disabled:v,children:v?"ÙŠØ­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"}),e.jsx("span",{style:{fontSize:".75rem",opacity:.8},children:"Ù„Ù† ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø²ÙˆØ§Ø± Ø­ØªÙ‰ ØªØ­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª."})]})]})]})};function na(){const[t,s]=a.useState(!0),[r,i]=a.useState(!1),[o,n]=a.useState(!1),[u,d]=a.useState(!1),[b,y]=a.useState(""),[g,v]=a.useState({serverEnv:"",clientEnv:""}),[x,l]=a.useState(!1),[c,w]=a.useState(""),[I,j]=a.useState(""),[z,$]=a.useState(""),[h,D]=a.useState(""),[R,E]=a.useState(""),[M,q]=a.useState("3306"),[F,B]=a.useState(""),[T,A]=a.useState(""),[O,_]=a.useState("");a.useEffect(()=>{(async()=>{try{const V=await(await Te()).envGet();v(V?.files||{}),l(!!V?.prod);const K=V?.env?.client||{},Q=V?.env?.server||{};w(K.VITE_PROXY_TARGET||""),j(K.VITE_API_URL||""),$(K.VITE_API_TIMEOUT_MS||""),D(Q.DATABASE_URL||""),E(Q.DB_HOST||""),q(Q.DB_PORT||"3306"),B(Q.DB_USER||""),A(""),_(Q.DB_NAME||"")}catch(S){const K=S?.status===404||/\(GET \/env\)/.test(String(S?.message||""))?" â€” Ù…Ø³Ø§Ø± /api/env ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";y("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©: "+(S?.data?.message||S?.message||"")+K)}finally{s(!1)}})()},[]);const N=a.useMemo(()=>{if(!R||!F||!O)return"";const S=M||"3306",V=T?`:${encodeURIComponent(T)}`:"";return`mysql://${encodeURIComponent(F)}${V}@${R}:${S}/${O}`},[R,M,F,T,O]),U=async()=>{i(!0),y("");try{const S=await Te(),V={};c!==void 0&&(V.VITE_PROXY_TARGET=c),I!==void 0&&(V.VITE_API_URL=I),z!==void 0&&(V.VITE_API_TIMEOUT_MS=String(z||""));const K=await S.envUpdate("client",V);y(`ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (${K.updatedKeys.length} Ù…ÙØªØ§Ø­) ÙÙŠ ${K.file}`)}catch(S){const K=S?.status===404||/\(PATCH \/env\)/.test(String(S?.message||""))?" â€” Ù…Ø³Ø§Ø± /api/env ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";y("ÙØ´Ù„ Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©: "+(S?.data?.message||S?.message||"")+K)}finally{i(!1)}},p=async()=>{d(!0),y("");try{const S=await Te(),V=h?{databaseUrl:h}:{host:R,port:M,user:F,pass:T,name:O},K=await S.envDbTest(V);y(`Ù†Ø¬Ø­ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${K.version||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}catch(S){const K=S?.status===404||/\(POST \/env\/db\/test\)/.test(String(S?.message||""))?" â€” Ù…Ø³Ø§Ø± /api/env/db/test ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";y("ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: "+(S?.data?.message||S?.message||"")+K)}finally{d(!1)}},f=async()=>{n(!0),y("");try{const S=await Te(),V={};h?V.DATABASE_URL=h:(R!==void 0&&(V.DB_HOST=R),M!==void 0&&(V.DB_PORT=String(M||"3306")),F!==void 0&&(V.DB_USER=F),T&&(V.DB_PASS=T),O!==void 0&&(V.DB_NAME=O));const K=await S.envUpdate("server",V);y(`ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù… (${K.updatedKeys.length} Ù…ÙØªØ§Ø­) ÙÙŠ ${K.file}. Ù‚Ø¯ ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ø£Ù…Ø± Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.`)}catch(S){const K=S?.status===404||/\(PATCH \/env\)/.test(String(S?.message||""))?" â€” Ù…Ø³Ø§Ø± /api/env ØºÙŠØ± Ù…ØªØ§Ø­. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ«Ù‡.":"";y("ÙØ´Ù„ Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù…: "+(S?.data?.message||S?.message||"")+K)}finally{n(!1)}};return t?e.jsx("div",{children:"ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©..."}):e.jsxs("div",{style:{display:"grid",gap:16},children:[e.jsxs("div",{className:"text-xs",style:{opacity:.75},children:[e.jsx("div",{children:"Ù…Ù„ÙØ§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©:"}),e.jsxs("div",{children:["Ø§Ù„Ø®Ø§Ø¯Ù…: ",e.jsx("code",{children:g.serverEnv||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsxs("div",{children:["Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©: ",e.jsx("code",{children:g.clientEnv||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),x&&e.jsx("div",{style:{color:"#991b1b"},children:"ØªÙ†Ø¨ÙŠÙ‡: ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ â€” Ù‚Ø¯ ÙŠØªÙ… ØªØ¹Ø·ÙŠÙ„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ¦Ø©."})]}),e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:700,fontSize:".8rem"},children:"Ø¨ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Vite)"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("label",{htmlFor:"viteProxyTarget",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"VITE_PROXY_TARGET"}),e.jsx("input",{id:"viteProxyTarget",value:c,onChange:S=>w(S.target.value),placeholder:"http://localhost:8842"})]}),e.jsxs("label",{htmlFor:"viteApiUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"VITE_API_URL (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"viteApiUrl",value:I,onChange:S=>j(S.target.value),placeholder:"http://localhost:8842/api"})]}),e.jsxs("label",{htmlFor:"viteTimeout",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"VITE_API_TIMEOUT_MS (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"viteTimeout",value:z,onChange:S=>$(S.target.value),placeholder:"12000"})]}),e.jsx("div",{style:{display:"flex",gap:8},children:e.jsx(Z,{type:"button",variant:"primary",onClick:U,disabled:r,children:r?"ÙŠØ­ÙØ¸...":"Ø­ÙØ¸ Ø¨ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©"})})]})]}),e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:700,fontSize:".8rem"},children:"Ø¨ÙŠØ¦Ø© Ø§Ù„Ø®Ø§Ø¯Ù… (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("label",{htmlFor:"dbUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DATABASE_URL (Ø¨Ø¯ÙŠÙ„ Ø¹Ù† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©)"}),e.jsx("input",{id:"dbUrl",value:h,onChange:S=>D(S.target.value),placeholder:"mysql://user:pass@host:3306/dbname"})]}),e.jsx("div",{className:"text-xs",style:{opacity:.7},children:"Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© Ø£Ø¯Ù†Ø§Ù‡ (Ø¥Ø°Ø§ ØªÙ… ØªØ­Ø¯ÙŠØ¯ DATABASE_URL Ø³ÙŠØªÙ… ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸)."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"var(--cols-2)",gap:8},children:[e.jsxs("label",{htmlFor:"dbHost",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_HOST"}),e.jsx("input",{id:"dbHost",value:R,onChange:S=>E(S.target.value),placeholder:"localhost Ø£Ùˆ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±"})]}),e.jsxs("label",{htmlFor:"dbPort",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_PORT"}),e.jsx("input",{id:"dbPort",value:M,onChange:S=>q(S.target.value),placeholder:"3306"})]}),e.jsxs("label",{htmlFor:"dbUser",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_USER"}),e.jsx("input",{id:"dbUser",value:F,onChange:S=>B(S.target.value),placeholder:"root Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"})]}),e.jsxs("label",{htmlFor:"dbPass",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_PASS"}),e.jsx("input",{id:"dbPass",type:"password",value:T,onChange:S=>A(S.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢ (Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø¹Ø¯Ù… Ø§Ù„ØªØºÙŠÙŠØ±)"})]}),e.jsxs("label",{htmlFor:"dbName",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"DB_NAME"}),e.jsx("input",{id:"dbName",value:O,onChange:S=>_(S.target.value),placeholder:"Ø§Ø³Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"})]})]}),e.jsx("div",{className:"text-xs",style:{opacity:.75},children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ù†ÙŠØ© Ù…Ù† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©:"}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:12,background:"#f8fafc",padding:"6px 8px",borderRadius:6,direction:"ltr"},children:N||"(Ø£Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ… Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©)"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx(Z,{type:"button",variant:"success",onClick:p,disabled:u,children:u?"ÙŠÙØ­Øµ...":"Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsx(Z,{type:"button",variant:"primary",onClick:f,disabled:o,children:o?"ÙŠØ­ÙØ¸...":"Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù…"})]})]})]}),e.jsx("div",{"aria-live":"polite",className:"text-xs",style:{color:b?.startsWith("ÙØ´Ù„")?"#991b1b":"#065f46"},children:b}),e.jsx("small",{style:{opacity:.7},children:"Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… API ÙˆØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Vite Ø­ØªÙ‰ ØªÙØ·Ø¨Ù‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª."})]})}function Xe(){const[t,s]=a.useState(null),[r,i]=a.useState(!0),[o,n]=a.useState(null),[u,d]=a.useState(""),[b,y]=a.useState(""),[g,v]=a.useState("");async function x(){try{i(!0);const j=await Y.request?Y.request("/auth/me"):fetch("/api/auth/me").then($=>$.json()),z=j.ok?j:await fetch("/api/auth/me").then($=>$.json());if(!z.ok)throw new Error(z.error||"LOAD_FAILED");s(z.user),d(z.user?.phone||"")}catch(j){n(j.message||"ERR")}finally{i(!1)}}a.useEffect(()=>{x()},[]);async function l(){try{n(null),v("");const j=await fetch("/api/auth/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:u})}),z=await j.json();if(!j.ok||!z.ok)throw new Error(z.error||j.statusText);v("ØªÙ… Ø­ÙØ¸ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"),await x()}catch(j){n(j.message||"ÙØ´Ù„")}}async function c(){try{n(null),v("");const j=await fetch("/api/auth/verify-email/request",{method:"POST"}),z=await j.json();if(!j.ok||!z.ok)throw new Error(z.error||j.statusText);v("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ø¨Ø±ÙŠØ¯ (Ù…Ø­Ø§ÙƒØ§Ø©)")}catch(j){n(j.message||"ÙØ´Ù„")}}async function w(){try{n(null),v("");const j=await fetch("/api/auth/verify-phone/request",{method:"POST"}),z=await j.json();if(!j.ok||!z.ok)throw new Error(z.error||j.statusText);v("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ù‡Ø§ØªÙ (Ù…Ø­Ø§ÙƒØ§Ø©)")}catch(j){n(j.message||"ÙØ´Ù„")}}async function I(){try{n(null),v("");const j=await fetch("/api/auth/verify-phone/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:b})}),z=await j.json();if(!j.ok||!z.ok)throw new Error(z.error||j.statusText);v("ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù‡Ø§ØªÙ"),await x()}catch(j){n(j.message||"ÙØ´Ù„")}}return r?e.jsx("div",{style:Qe,children:"...ØªØ­Ù…ÙŠÙ„"}):o?e.jsx("div",{style:Qe,children:e.jsx("div",{style:ys,children:o})}):e.jsx("div",{style:Qe,children:e.jsxs("div",{style:aa,children:[e.jsx("h1",{style:{margin:0,fontSize:"1.25rem",fontWeight:700},children:"Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨"}),g&&e.jsx("div",{style:oa,children:g}),o&&e.jsx("div",{style:ys,children:o}),e.jsxs("section",{style:hs,children:[e.jsx("h2",{style:gs,children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsxs("p",{style:xs,children:["Ø§Ù„Ø¨Ø±ÙŠØ¯: ",e.jsx("b",{children:t?.email})," â€” Ø§Ù„Ø­Ø§Ù„Ø©: ",t?.emailVerifiedAt?"Ù…ÙÙØ¹Ù„":"ØºÙŠØ± Ù…ÙÙØ¹Ù„"]}),!t?.emailVerifiedAt&&e.jsx("button",{style:Ye,onClick:c,children:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚"})]}),e.jsxs("section",{style:hs,children:[e.jsx("h2",{style:gs,children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsxs("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx("input",{style:fs,placeholder:"05xxxxxxxx",value:u,onChange:j=>d(j.target.value)}),e.jsx("button",{style:ia,onClick:l,children:"Ø­ÙØ¸"})]}),e.jsxs("p",{style:xs,children:["Ø§Ù„Ø­Ø§Ù„Ø©: ",t?.phoneVerifiedAt?"Ù…ÙÙØ¹Ù„":"ØºÙŠØ± Ù…ÙÙØ¹Ù„"]}),!t?.phoneVerifiedAt&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:".5rem"},children:[e.jsx("button",{style:Ye,onClick:w,children:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚"}),e.jsxs("div",{style:{display:"flex",gap:".5rem"},children:[e.jsx("input",{style:fs,placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²",value:b,onChange:j=>y(j.target.value)}),e.jsx("button",{style:Ye,onClick:I,children:"ØªØ£ÙƒÙŠØ¯"})]})]})]})]})})}const Qe={direction:"rtl",display:"flex",justifyContent:"center",padding:"2rem"},aa={background:"#fff",padding:"1.5rem",border:"1px solid #e2e8f0",borderRadius:18,display:"flex",flexDirection:"column",gap:"1rem",width:"100%",maxWidth:640,boxShadow:"0 8px 34px -12px rgba(0,0,0,.15)"},hs={borderTop:"1px solid #f1f5f9",paddingTop:".75rem"},gs={margin:"0 0 .25rem",fontSize:"1rem"},xs={margin:0,fontSize:".8rem",color:"#475569"},Ye={padding:".6rem .9rem",border:0,borderRadius:12,background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",fontSize:".8rem",fontWeight:600,cursor:"pointer"},ia={padding:".55rem .85rem",border:"1px solid #e2e8f0",borderRadius:12,background:"#fff",color:"#334155",fontSize:".8rem",fontWeight:600,cursor:"pointer"},fs={padding:".6rem .8rem",border:"1px solid #e2e8f0",borderRadius:12,fontSize:".8rem"},ys={background:"#fee2e2",color:"#b91c1c",padding:".5rem .7rem",borderRadius:12,fontSize:".75rem",lineHeight:1.5},oa={background:"#dcfce7",color:"#166534",padding:".5rem .7rem",borderRadius:12,fontSize:".75rem",lineHeight:1.5},la={},Ze=la?.VITE_PUBLIC_DOMAIN||typeof window<"u"&&window.__APP_CANONICAL_DOMAIN__||"https://jomlah.app";function et(t,s={}){const r=Object.entries(s).map(([o,n])=>`[${o}="${n}"]`).join("");let i=document.head.querySelector(`${t}${r}`);return i||(i=document.createElement(t),Object.entries(s).forEach(([o,n])=>i.setAttribute(o,n)),document.head.appendChild(i)),i}const ca=({alternates:t=["ar","en"]})=>{const s=ue(),r=me();return a.useEffect(()=>{const i=s.pathname.split("/").filter(Boolean);let o=r?.locale||"ar";r?.locale||i[0]&&t.includes(i[0])&&(o=i[0]);let n;o==="ar"?n="/"+i.filter(g=>g!=="ar").join("/"):n="/"+[o,...i.slice(1)].join("/"),n==="/"&&(n="/");const u=`${Ze}${n}`.replace(/\/+$/,"/");et("link",{rel:"canonical"}).setAttribute("href",u),t.forEach(g=>{let v;g==="ar"?v="/"+i.filter(c=>c!=="ar"&&c!=="en").join("/"):v="/"+[g,...i.filter((c,w)=>!(w===0&&t.includes(c)))].join("/"),v==="/"&&(v="/");const x=`${Ze}${v}`.replace(/\/+$/,"/");et("link",{rel:"alternate",hreflang:g}).setAttribute("href",x)}),et("link",{rel:"alternate",hreflang:"x-default"}).setAttribute("href",`${Ze}/`),Array.from(document.head.querySelectorAll('meta[property="og:locale:alternate"]')).forEach(g=>g.parentNode.removeChild(g)),t.forEach(g=>{const v=document.createElement("meta");v.setAttribute("property","og:locale:alternate"),v.setAttribute("content",g==="ar"?"ar_AR":"en_US"),document.head.appendChild(v)})},[s,t,r?.locale]),null},Ws={};let vs=!1;function da(){if(vs)return;const t=Ws?.VITE_GA_ID;if(t)try{let s=function(){window.dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||s,s("js",new Date),s("config",t,{send_page_view:!1});const r=document.createElement("script");r.async=!0,r.src=`https://www.googletagmanager.com/gtag/js?id=${encodeURIComponent(t)}`,document.head.appendChild(r),vs=!0}catch{}}function ua(t,s){if(!(!Ws?.VITE_GA_ID||typeof window.gtag!="function"))try{window.gtag("event","page_view",{page_path:t||window.location.pathname,page_title:s||document.title,page_location:window.location.href})}catch{}}const tt=P.lazy(()=>J(()=>import("./Home-kvrYEkTf.js").then(t=>t.a),__vite__mapDeps([8,6,1,2,3,4,5,7,9,10,11]))),st=P.lazy(()=>J(()=>import("./Cart-kXnZL2Nx.js"),__vite__mapDeps([12,6,1,2,3,4,5,7,10,13]))),rt=P.lazy(()=>J(()=>import("./CheckoutPage-DRiqVrda.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16,17,13]))),nt=P.lazy(()=>J(()=>import("./index-D2Vvpq6p.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,13])).then(t=>({default:t.LoginPage}))),at=P.lazy(()=>J(()=>import("./index-D2Vvpq6p.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,13])).then(t=>({default:t.RegisterPage}))),it=P.lazy(()=>J(()=>import("./index-D2Vvpq6p.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,13])).then(t=>({default:t.ForgotPasswordPage}))),ot=P.lazy(()=>J(()=>import("./ResetPasswordPage-as82_sdc.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,13]))),lt=P.lazy(()=>J(()=>import("./VerifyEmailPage-DiyvGywP.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,13]))),ct=P.lazy(()=>J(()=>import("./Orders-BBFsvwNg.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,22,17,13]))),dt=P.lazy(()=>J(()=>import("./MyOrders-tfo6ISpQ.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,22,17,13]))),ut=P.lazy(()=>J(()=>import("./OrderDetails-DJ6-QLKY.js"),__vite__mapDeps([24,6,1,2,3,4,5,7,16,17,22,13]))),pa=P.lazy(()=>J(()=>import("./AdminDashboard-CUKKkqjq.js"),__vite__mapDeps([25,6,1,2,3,4,5,7,26,13]))),pt=P.lazy(()=>J(()=>import("./ProductInventory-BGXW66fr.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,13]))),mt=P.lazy(()=>J(()=>import("./Orders-xUzC4QRl.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,29,13]))),ht=P.lazy(()=>J(()=>import("./Products-CxdD7As7.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,29,31,13]))),gt=P.lazy(()=>J(()=>import("./Invoices-00C2vYCh.js"),__vite__mapDeps([32,1,2,3,4,5,6,7]))),xt=P.lazy(()=>J(()=>import("./Marketing-BmPtW4HI.js"),__vite__mapDeps([33,1,2,3,4,5,6,7]))),ft=P.lazy(()=>J(()=>import("./Apps-89Umikuw.js"),__vite__mapDeps([34,1,2,3,4,5,6,7]))),yt=P.lazy(()=>J(()=>import("./Integrations-B4fZ643P.js"),__vite__mapDeps([35,1,2,3,4,5,6,7]))),vt=P.lazy(()=>J(()=>import("./SellerDashboard-BogZn74X.js"),__vite__mapDeps([36,6,1,2,3,4,5,7,37,26,13]))),bt=P.lazy(()=>J(()=>import("./DeliveryDashboard-CXhuqHHm.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,39,40,26,13]))),jt=P.lazy(()=>J(()=>import("./ProductDetailPage-CPEqGpz1.js"),__vite__mapDeps([41,1,2,3,4,5,6,7,42,13]))),wt=P.lazy(()=>J(()=>import("./StoresPage-yQPTtoNl.js"),__vite__mapDeps([43,1,2,3,4,5,6,7]))),St=P.lazy(()=>J(()=>import("./OffersPage-BEaPlnJO.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,45,9,10,13]))),kt=P.lazy(()=>J(()=>import("./InvoiceViewer-CvtvDGLa.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,13]))),Et=P.lazy(()=>J(()=>import("./CatalogPage-mya5ggdK.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,13]))),At=P.lazy(()=>J(()=>import("./Legal-CNix48uC.js"),__vite__mapDeps([48,1,2,3,4,5,6,7,13]))),Nt=P.lazy(()=>J(()=>import("./Products-D8FsC3yY.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,45,9,10,31,13]))),Ct=P.lazy(()=>J(()=>import("./Chat-DRt3a8rt.js"),__vite__mapDeps([50,1,2,3,4,5,6,7,13]))),Tt=P.lazy(()=>J(()=>import("./StyleGuide-DPnm2PRD.js"),__vite__mapDeps([51,1,2,3,4,5,6,7,39,13]))),_t=P.lazy(()=>J(()=>import("./Profile-D86MXkCJ.js"),__vite__mapDeps([52,1,2,3,4,5,6,7,13]))),Rt=P.lazy(()=>J(()=>import("./ProductManager-DMA1rNX6.js"),__vite__mapDeps([53,1,2,3,4,5,6,7,37,13]))),Pt=P.lazy(()=>J(()=>import("./OrderTracker-BuEq9DzH.js"),__vite__mapDeps([54,1,2,3,4,5,6,7,13]))),Ot=P.lazy(()=>J(()=>import("./Addresses-CJ7a4bMD.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,13]))),It=P.lazy(()=>J(()=>import("./SellerKyc-Dv48CDP3.js"),__vite__mapDeps([56,1,2,3,4,5,6,7,13]))),Lt=P.lazy(()=>J(()=>import("./AdminKycReview-D-HqS27M.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,13]))),Dt=P.lazy(()=>J(()=>import("./Map-Dy-CKcbN.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,15,39,13]))),Ut=P.lazy(()=>J(()=>import("./History-DxQsNUoi.js"),__vite__mapDeps([59,1,2,3,4,5,6,7,39,13]))),zt=P.lazy(()=>J(()=>import("./Availability-1fdX9DSB.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,13]))),Mt=P.lazy(()=>J(()=>import("./DeliverySummary-Dypzti_O.js"),__vite__mapDeps([61,1,2,3,4,5,6,7,40]))),$t=P.lazy(()=>J(()=>import("./UIPreview-XtWlGabF.js"),__vite__mapDeps([62,1,2,3,4,5,6,7,39,63,13]))),ma=()=>{const t=ue();return a.useEffect(()=>{try{da()}catch{}try{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"page_view",path:t.pathname,timestamp:Date.now()}),ua(t.pathname);const s=new CustomEvent("reinit:home",{detail:{path:t.pathname,ts:Date.now()}});requestAnimationFrame(()=>{try{document.dispatchEvent(s)}catch{}})}catch{}},[t]),null},ha=()=>{const{pathname:t}=ue();return a.useEffect(()=>{try{window.scrollY>2e3?window.scrollTo({top:0,left:0,behavior:"auto"}):window.scrollTo({top:0,left:0,behavior:"smooth"})}catch{}},[t]),null},ga=({children:t})=>{const r=ue().pathname.split("/").filter(Boolean);return r[0]&&r[0].length===2&&!["ar","en","fr"].includes(r[0])?e.jsx(de,{to:"/",replace:!0}):t},Wt=({prefix:t=""})=>{const{user:s}=ye()||{},r=s?.role,i=ue(),n=new URLSearchParams(i.search).get("view");return n==="users"?e.jsx(de,{to:`${t}/admin/users`,replace:!0}):n==="customers"?e.jsx(de,{to:`${t}/admin/customers`,replace:!0}):e.jsx(W,{isAuthed:!!s,userRole:r,requiredRoles:["admin"],element:e.jsx(pa,{}),redirectTo:`${t}/login`})},xa=()=>{const{user:t}=ye()||{};t?.role;const s=t?.role;return e.jsx(zn,{children:e.jsxs(Dn,{children:[e.jsx(ca,{}),e.jsxs(ga,{children:[e.jsx(ha,{}),e.jsx(ma,{}),e.jsx(Mn,{children:e.jsx(a.Suspense,{fallback:e.jsx($n,{}),children:e.jsx(De,{mode:"wait",children:e.jsx(fa,{children:e.jsxs(br,{children:[e.jsx(k,{path:"/",element:e.jsx(tt,{})}),e.jsx(k,{path:"/admin/inventory",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(pt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/chat",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Ct,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin",element:e.jsx(Wt,{prefix:""})}),e.jsx(k,{path:"/catalog",element:e.jsx(Et,{})}),e.jsx(k,{path:"/products",element:e.jsx(Nt,{})}),e.jsx(k,{path:"/product/:id",element:e.jsx(jt,{})}),e.jsx(k,{path:"/stores",element:e.jsx(wt,{})}),e.jsx(k,{path:"/offers",element:e.jsx(St,{})}),e.jsx(k,{path:"/style-guide",element:e.jsx(Tt,{})}),e.jsx(k,{path:"/ui",element:e.jsx($t,{})}),e.jsx(k,{path:"/cart",element:e.jsx(st,{})}),e.jsx(k,{path:"/checkout",element:e.jsx(rt,{})}),e.jsx(k,{path:"/orders",element:e.jsx(ct,{})}),e.jsx(k,{path:"/legal/:slug",element:e.jsx(At,{})}),e.jsx(k,{path:"/my-orders",element:e.jsx(dt,{})}),e.jsx(k,{path:"/order/:id",element:e.jsx(ut,{})}),e.jsx(k,{path:"/order/:id/track",element:e.jsx(Pt,{})}),e.jsx(k,{path:"/account/addresses",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Ot,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/invoice/:id",element:e.jsx(kt,{})}),e.jsx(k,{path:"/seller/kyc",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(It,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/sellers/kyc",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Lt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/seller/products",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(Rt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/delivery",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(bt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/delivery/map",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Dt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/delivery/history",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Ut,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/delivery/availability",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(zt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/delivery/summary",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Mt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/DeliveryDashboard",element:e.jsx(de,{to:"/delivery",replace:!0})}),e.jsx(k,{path:"/seller",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(vt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/SellerDashboard",element:e.jsx(de,{to:"/seller",replace:!0})}),e.jsx(k,{path:"/account/security",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Xe,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/account/profile",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(_t,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/users",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(qe,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/categories",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(de,{to:"/admin?view=cats",replace:!0}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/reports",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ve,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/bank-transfers",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/analytics",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/customers",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/settings",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/orders",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(mt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/products",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ht,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/invoices",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(gt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/marketing",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(xt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/apps",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ft,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/admin/integrations",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(yt,{}),redirectTo:"/login"})}),e.jsx(k,{path:"/login",element:e.jsx(nt,{})}),e.jsx(k,{path:"/register",element:e.jsx(at,{})}),e.jsx(k,{path:"/forgot",element:e.jsx(it,{})}),e.jsx(k,{path:"/reset-password",element:e.jsx(ot,{})}),e.jsx(k,{path:"/verify-email",element:e.jsx(lt,{})}),e.jsx(k,{path:"/en",element:e.jsx(tt,{})}),e.jsx(k,{path:"/en/admin/inventory",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(pt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/chat",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Ct,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/catalog",element:e.jsx(Et,{})}),e.jsx(k,{path:"/en/products",element:e.jsx(Nt,{})}),e.jsx(k,{path:"/en/product/:id",element:e.jsx(jt,{})}),e.jsx(k,{path:"/en/stores",element:e.jsx(wt,{})}),e.jsx(k,{path:"/en/offers",element:e.jsx(St,{})}),e.jsx(k,{path:"/en/style-guide",element:e.jsx(Tt,{})}),e.jsx(k,{path:"/en/ui",element:e.jsx($t,{})}),e.jsx(k,{path:"/en/cart",element:e.jsx(st,{})}),e.jsx(k,{path:"/en/checkout",element:e.jsx(rt,{})}),e.jsx(k,{path:"/en/orders",element:e.jsx(ct,{})}),e.jsx(k,{path:"/en/legal/:slug",element:e.jsx(At,{})}),e.jsx(k,{path:"/en/my-orders",element:e.jsx(dt,{})}),e.jsx(k,{path:"/en/order/:id",element:e.jsx(ut,{})}),e.jsx(k,{path:"/en/order/:id/track",element:e.jsx(Pt,{})}),e.jsx(k,{path:"/en/account/addresses",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Ot,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/invoice/:id",element:e.jsx(kt,{})}),e.jsx(k,{path:"/en/seller/kyc",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(It,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/sellers/kyc",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Lt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/seller/products",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(Rt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/delivery",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(bt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/delivery/map",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Dt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/delivery/history",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Ut,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/delivery/availability",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(zt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/delivery/summary",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Mt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/DeliveryDashboard",element:e.jsx(de,{to:"/en/delivery",replace:!0})}),e.jsx(k,{path:"/en/seller",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(vt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/SellerDashboard",element:e.jsx(de,{to:"/en/seller",replace:!0})}),e.jsx(k,{path:"/en/account/security",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Xe,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/account/profile",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(_t,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin",element:e.jsx(Wt,{prefix:"/en"})}),e.jsx(k,{path:"/en/admin/users",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(qe,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/categories",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(de,{to:"/en/admin?view=cats",replace:!0}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/reports",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ve,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/bank-transfers",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/analytics",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/customers",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/settings",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/orders",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(mt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/products",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ht,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/invoices",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(gt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/marketing",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(xt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/apps",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ft,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/admin/integrations",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(yt,{}),redirectTo:"/en/login"})}),e.jsx(k,{path:"/en/login",element:e.jsx(nt,{})}),e.jsx(k,{path:"/en/register",element:e.jsx(at,{})}),e.jsx(k,{path:"/en/forgot",element:e.jsx(it,{})}),e.jsx(k,{path:"/en/reset-password",element:e.jsx(ot,{})}),e.jsx(k,{path:"/en/verify-email",element:e.jsx(lt,{})}),e.jsx(k,{path:"/fr",element:e.jsx(tt,{})}),e.jsx(k,{path:"/fr/admin/inventory",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(pt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/chat",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Ct,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/catalog",element:e.jsx(Et,{})}),e.jsx(k,{path:"/fr/products",element:e.jsx(Nt,{})}),e.jsx(k,{path:"/fr/product/:id",element:e.jsx(jt,{})}),e.jsx(k,{path:"/fr/stores",element:e.jsx(wt,{})}),e.jsx(k,{path:"/fr/offers",element:e.jsx(St,{})}),e.jsx(k,{path:"/fr/style-guide",element:e.jsx(Tt,{})}),e.jsx(k,{path:"/fr/ui",element:e.jsx($t,{})}),e.jsx(k,{path:"/fr/cart",element:e.jsx(st,{})}),e.jsx(k,{path:"/fr/checkout",element:e.jsx(rt,{})}),e.jsx(k,{path:"/fr/orders",element:e.jsx(ct,{})}),e.jsx(k,{path:"/fr/legal/:slug",element:e.jsx(At,{})}),e.jsx(k,{path:"/fr/my-orders",element:e.jsx(dt,{})}),e.jsx(k,{path:"/fr/order/:id",element:e.jsx(ut,{})}),e.jsx(k,{path:"/fr/order/:id/track",element:e.jsx(Pt,{})}),e.jsx(k,{path:"/fr/account/addresses",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Ot,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/invoice/:id",element:e.jsx(kt,{})}),e.jsx(k,{path:"/fr/seller/kyc",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(It,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/sellers/kyc",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Lt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/seller/products",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(Rt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/delivery",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(bt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/delivery/map",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Dt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/delivery/history",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Ut,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/delivery/availability",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(zt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/delivery/summary",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Mt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/DeliveryDashboard",element:e.jsx(de,{to:"/fr/delivery",replace:!0})}),e.jsx(k,{path:"/fr/seller",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(vt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/SellerDashboard",element:e.jsx(de,{to:"/fr/seller",replace:!0})}),e.jsx(k,{path:"/fr/account/security",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(Xe,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/account/profile",element:e.jsx(W,{isAuthed:!!t,element:e.jsx(_t,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin",element:e.jsx(Wt,{prefix:"/fr"})}),e.jsx(k,{path:"/fr/admin/users",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(qe,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/categories",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(de,{to:"/fr/admin?view=cats",replace:!0}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/reports",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ve,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/bank-transfers",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/analytics",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/customers",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/settings",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/orders",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(mt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/products",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ht,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/invoices",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(gt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/marketing",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(xt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/apps",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(ft,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/admin/integrations",element:e.jsx(W,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(yt,{}),redirectTo:"/fr/login"})}),e.jsx(k,{path:"/fr/login",element:e.jsx(nt,{})}),e.jsx(k,{path:"/fr/register",element:e.jsx(at,{})}),e.jsx(k,{path:"/fr/forgot",element:e.jsx(it,{})}),e.jsx(k,{path:"/fr/reset-password",element:e.jsx(ot,{})}),e.jsx(k,{path:"/fr/verify-email",element:e.jsx(lt,{})})]})})})})})]})]})})};function fa({children:t}){const s=ue();return e.jsx(fe.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18,ease:"easeOut"},children:t},s.pathname)}const Bs=a.createContext(null),ya=Array.from({length:6}).map((t,s)=>{const r=(s+1).toString();return{id:r,slug:`product-${r}`,name:{ar:`Ù…Ù†ØªØ¬ ${r}`,en:`Product ${r}`},short:{ar:"ÙˆØµÙ Ù…Ø¤Ù‚Øª",en:"Temp description"},price:25+s*2,oldPrice:s%2===0?30+s*2:null,image:"/vite.svg",rating:s%5+1,stock:5+s}}),va=({children:t})=>{const[s,r]=a.useState(ya),[i,o]=a.useState(!1),[n,u]=a.useState(null);a.useEffect(()=>{let b=!0;return o(!0),u(null),Y.listProducts().then(y=>{if(b&&Array.isArray(y)){const g=y.map(v=>{const x=v.name||{ar:v.nameAr,en:v.nameEn},l=x?.ar||v.nameAr||"",c=x?.en||v.nameEn||"",w=v.imageVariants||null,I=Array.isArray(v.gallery)?v.gallery:[];let j=v.image;if(w&&(j=w.thumb||w.medium||w.original||v.image),!j&&I.length){const z=I[0];z?.variants?j=z.variants.thumb||z.variants.medium||z.variants.original||z.url:j=z.url}return{...v,name:l,nameAr:l,nameEn:c,originalPrice:v.oldPrice||v.originalPrice||null,images:Array.isArray(v.images)?v.images:v.image?[v.image]:[],gallery:I,displayImage:j}});r(g)}}).catch(y=>{b&&u(y.message||"fetch_error")}).finally(()=>{b&&o(!1)}),()=>{b=!1}},[]);const d=a.useMemo(()=>({products:s,loading:i,error:n,list:()=>s,getProductById:b=>s.find(y=>y.id===b),getProductBySlug:b=>s.find(y=>y.slug===b)}),[s,i,n]);return e.jsx(Bs.Provider,{value:d,children:t})},rc=()=>a.useContext(Bs),ba=a.createContext(null),ja=({children:t})=>{const{user:s}=ye()||{},[r,i]=a.useState(!1),[o,n]=a.useState(null),[u,d]=a.useState(()=>{try{const l=localStorage.getItem("my_store_wishlist");return l?JSON.parse(l):[]}catch{return[]}}),b=a.useRef(!1);a.useEffect(()=>{try{localStorage.setItem("my_store_wishlist",JSON.stringify(u))}catch{}},[u]),a.useEffect(()=>{(async()=>{let c=!1;try{c=!!localStorage.getItem("my_store_token")}catch{}if(!(!s||!c||b.current)){i(!0),n(null);try{const w=await Y.wishlistList(),I=Array.isArray(w)?w:w.items||[];d(I.map(j=>({...j,id:j.productId||j.id}))),b.current=!0}catch(w){n(w.message)}finally{i(!1)}}})()},[s]);const x={wishlistItems:u,addToWishlist:async l=>{if(!(!l||!l.id)&&(d(c=>c.find(w=>w.id===l.id)?c:[...c,l]),s))try{await Y.wishlistAdd(l.id)}catch(c){n(c.message)}},removeFromWishlist:async l=>{if(d(c=>c.filter(w=>w.id!==l)),s)try{await Y.wishlistRemove(l)}catch(c){n(c.message)}},clearWishlist:async()=>{const l=u.map(c=>c.id);if(d([]),s)for(const c of l)try{await Y.wishlistRemove(c)}catch{}},loading:r,error:o};return e.jsx(ba.Provider,{value:x,children:t})};function wa(t,{onEvent:s,withAuthToken:r=!0}={}){const i=a.useRef(null);a.useEffect(()=>{const o=r&&localStorage.getItem("my_store_token")||"",n=o?`${t}${t.includes("?")?"&":"?"}token=${encodeURIComponent(o)}`:t,u=new EventSource(n);i.current=u;const d=b=>{const{type:y,data:g}=b;let v=null;try{v=g?JSON.parse(g):null}catch{}s&&s(y,v)};return u.addEventListener("order.created",d),u.addEventListener("order.updated",d),u.addEventListener("heartbeat",d),u.addEventListener("hello",d),()=>{try{u.close()}catch{}}},[t,s,r])}function Sa({onOrderEvent:t}){return wa("/api/events",{onEvent:(s,r)=>{r&&(s==="order.created"||s==="order.updated")&&t&&t(s,r)}}),null}const Fs=a.createContext(null),ka=({children:t})=>{const[s,r]=a.useState([]),[i,o]=a.useState(null),[n,u]=a.useState(!0),[d,b]=a.useState(1),y=20,{user:g}=ye()||{},v=jr(),[x,l]=a.useState(()=>{try{const T=localStorage.getItem("my_store_orders");return T?JSON.parse(T):[]}catch{return[]}});a.useEffect(()=>{try{localStorage.setItem("my_store_orders",JSON.stringify(x))}catch{}},[x]);const c=["orders",{scope:g?.role==="admin"?"all":g?.id||"guest"}],{data:w,isLoading:I,isFetching:j,isError:z,error:$,refetch:h}=wr({queryKey:c,queryFn:async()=>{const T=await Y.listOrders();return Array.isArray(T?.orders)?T.orders:[]},enabled:n,staleTime:6e4,gcTime:5*6e4,retry:1});a.useEffect(()=>{n&&Array.isArray(w)&&(r(w),o(null))},[w,n]),a.useEffect(()=>{z&&(u(!1),r(x),o($?.message||"Failed to load orders"))},[z,$,x]),a.useEffect(()=>{n&&h()},[g?.id]);const D=async T=>{const A={createdAt:new Date().toISOString(),status:"pending",...T};if(n)try{const N=await Y.createOrder(A);if(N?.order)return r(U=>[N.order,...U]),v.setQueriesData({queryKey:["orders"]},U=>Array.isArray(U)?[N.order,...U]:[N.order]),N.order}catch{u(!1)}const O=A.id||`ord_${Date.now()}`,_={...A,id:O};return l(N=>[_,...N]),r(N=>[_,...N]),v.setQueriesData({queryKey:["orders"]},N=>Array.isArray(N)?[_,...N]:[_]),_},R=async(T,A)=>{if(n)try{await Y.updateOrder(T,{status:A})}catch{u(!1)}r(O=>O.map(_=>_.id===T?{..._,status:A}:_)),l(O=>O.map(_=>_.id===T?{..._,status:A}:_)),v.setQueriesData({queryKey:["orders"]},O=>Array.isArray(O)?O.map(_=>_.id===T?{..._,status:A}:_):O)},E=T=>{!T||!T.id||(r(A=>A.some(_=>_.id===T.id)?A.map(_=>_.id===T.id?{..._,...T}:_):[T,...A]),l(A=>A.some(_=>_.id===T.id)?A.map(_=>_.id===T.id?{..._,...T}:_):[T,...A]))},M=()=>s,q=T=>s.find(A=>A.id===T),F=s.slice((d-1)*y,d*y),B=Math.ceil(s.length/y)||1;return e.jsxs(Fs.Provider,{value:{orders:s,addOrder:D,updateOrderStatus:R,mergeOrder:E,getOrders:M,getOrderById:q,loading:I||j,error:i,refresh:()=>n?h():null,page:d,setPage:b,totalPages:B,paged:F,useRemote:n},children:[e.jsx(Sa,{onOrderEvent:(T,A)=>{if(!A?.orderId)return;const{orderId:O,status:_}=A;r(N=>N.map(U=>U.id===O?{...U,status:_}:U)),l(N=>N.map(U=>U.id===O?{...U,status:_}:U)),v.setQueriesData({queryKey:["orders"]},N=>{if(!Array.isArray(N))return N;let U=!1;const p=N.map(f=>f.id===O?(U=!0,{...f,status:_}):f);return!U&&T==="order.created"?[{id:O,status:_,createdAt:new Date().toISOString(),items:[],userId:A.userId},...p]:p})}}),t]})},nc=()=>a.useContext(Fs),qs=a.createContext(null),ac=()=>a.useContext(qs),Bt="adminConsoleData_v1",Ea={products:[],users:[],orders:[]};function Aa(t,s){switch(s.type){case"INIT":return{...t,...s.payload};case"ADD_PRODUCT":return{...t,products:[s.payload,...t.products]};case"UPDATE_PRODUCT":return{...t,products:t.products.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_PRODUCT":return{...t,products:t.products.filter(r=>r.id!==s.id)};case"ADD_USER":return{...t,users:[s.payload,...t.users]};case"UPDATE_USER":return{...t,users:t.users.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_USER":return{...t,users:t.users.filter(r=>r.id!==s.id)};case"ADD_ORDER":return{...t,orders:[s.payload,...t.orders]};case"UPDATE_ORDER":return{...t,orders:t.orders.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_ORDER":return{...t,orders:t.orders.filter(r=>r.id!==s.id)};default:return t}}function Na({children:t}){const[s,r]=a.useReducer(Aa,Ea);a.useEffect(()=>{try{const l=localStorage.getItem(Bt);if(l)r({type:"INIT",payload:JSON.parse(l)});else{const c={products:[{id:"p1",name:"Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ",price:120,stock:50,status:"active"},{id:"p2",name:"Ø­Ù‚ÙŠØ¨Ø© Ø¬Ù„Ø¯",price:340,stock:8,status:"draft"}],users:[{id:"u1",name:"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…",role:"admin",active:!0},{id:"u2",name:"Ø¨Ø§Ø¦Ø¹ Ø£Ø­Ù…Ø¯",role:"seller",active:!0}],orders:[{id:"o1",total:450.75,status:"pending",customer:"Ù…Ø´ØªØ±ÙŠ 1",items:3},{id:"o2",total:90,status:"paid",customer:"Ù…Ø´ØªØ±ÙŠ 2",items:1}]};localStorage.setItem(Bt,JSON.stringify(c)),r({type:"INIT",payload:c})}}catch{}},[]),a.useEffect(()=>{localStorage.setItem(Bt,JSON.stringify(s))},[s]);const i=a.useCallback(l=>{let c;if(l&&typeof l.name=="object"&&l.name!==null&&!(l.name instanceof Date)){const I=(l.name.ar||"").toString().trim(),j=(l.name.en||"").toString().trim();c={ar:I||j||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…",en:j||I||"Product"}}else typeof l?.name=="string"?c=l.name.trim()||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…":c="Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";const w={id:"p"+Date.now(),name:c,price:+l?.price||0,stock:+l?.stock||0,status:l?.status||"active"};return r({type:"ADD_PRODUCT",payload:w}),w},[]),o=a.useCallback((l,c)=>{r({type:"UPDATE_PRODUCT",payload:{id:l,...c}})},[]),n=a.useCallback(l=>r({type:"DELETE_PRODUCT",id:l}),[]),u=a.useCallback(l=>{let c;if(l&&typeof l.name=="object"&&l.name!==null){const I=(l.name.ar||"").toString().trim(),j=(l.name.en||"").toString().trim();c=I||j||"Ù…Ø³ØªØ®Ø¯Ù…"}else typeof l?.name=="string"?c=l.name.trim()||"Ù…Ø³ØªØ®Ø¯Ù…":c="Ù…Ø³ØªØ®Ø¯Ù…";const w={id:"u"+Date.now(),name:c,role:l?.role||"user",active:l?.active??!0};return r({type:"ADD_USER",payload:w}),w},[]),d=a.useCallback((l,c)=>{r({type:"UPDATE_USER",payload:{id:l,...c}})},[]),b=a.useCallback(l=>r({type:"DELETE_USER",id:l}),[]),y=a.useCallback(l=>{const c={id:"o"+Date.now(),total:+l.total||0,status:l.status||"pending",customer:l.customer||"Ø¹Ù…ÙŠÙ„",items:+l.items||1};return r({type:"ADD_ORDER",payload:c}),c},[]),g=a.useCallback((l,c)=>{r({type:"UPDATE_ORDER",payload:{id:l,...c}})},[]),v=a.useCallback(l=>r({type:"DELETE_ORDER",id:l}),[]),x={...s,addProduct:i,updateProduct:o,deleteProduct:n,addUser:u,updateUser:d,deleteUser:b,addOrder:y,updateOrder:g,deleteOrder:v};return e.jsx(qs.Provider,{value:x,children:t})}const Ca=new Tr({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:"always",networkMode:"online"},mutations:{retry:0}}}),Ta="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",_a={home:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",about:"Ù…Ù† Ù†Ø­Ù†",products:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",contact:"Ø§ØªØµÙ„ Ø¨Ù†Ø§",catalog:"Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",offers:"Ø§Ù„Ø¹Ø±ÙˆØ¶",account:"Ø­Ø³Ø§Ø¨ÙŠ",stores:"Ø§Ù„Ù…ØªØ§Ø¬Ø±",myOrders:"Ø·Ù„Ø¨Ø§ØªÙŠ",sellerKyc:"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹",admin:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",orders:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",dashboard:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"},Ra="Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",Pa="Ø§Ù„Ø¹Ø±ÙˆØ¶",Oa="Ø§Ù„Ù…ØªØ§Ø¬Ø±",Ia="Ø§Ù„Ø³Ù„Ø©",La="Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª",Da="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ù„Ø©",Ua="Ø§Ù„Ø¯ÙØ¹",za="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡",Ma="ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©",$a="Ø§Ù„Ø«ÙŠÙ…",Wa="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…",Ba="ÙØ§ØªØ­",Fa="Ø¯Ø§ÙƒÙ†",qa="Ø§Ù„Ù†Ø¸Ø§Ù… (ØªÙ„Ù‚Ø§Ø¦ÙŠ)",Va="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",Ha="Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",Ka="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...",Ga="Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©",Ja="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±.",Xa="Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©",Qa="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…ÙØ¶Ù„Ø©",Ya="Ø§Ù„Ù…ÙØ¶Ù„Ø©",Za="Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©",ei="Ø§Ù„Ø³Ø¹Ø±",ti="ØºÙŠØ± Ù…ØªÙˆÙØ±",si="ØªÙØ§ØµÙŠÙ„",ri="Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",ni="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",ai="Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",ii="Ø¹Ø±Ø¶ Ø³Ø±ÙŠØ¹",oi="Ø¥ØºÙ„Ø§Ù‚",li="Ø­Ø³Ø§Ø¨ÙŠ",ci="Ù…Ø±Ø­Ø¨Ø§",di="Ø®Ø±ÙˆØ¬",ui="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©",pi="Ø¨Ø­Ø«",mi="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹",hi="Ø§Ù„Ø´Ø­Ù†",gi="Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©",xi="Ø§Ù„Ø®ØµÙ…",fi="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",yi="ÙƒÙˆØ¯ Ø®ØµÙ…",vi="ØªØ·Ø¨ÙŠÙ‚",bi="Ø¥Ø²Ø§Ù„Ø© {{code}}",ji="Ø£Ø¶ÙÙ {{amount}} Ø±.Ø³ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ",wi="Ø§Ù„ØªØ§Ù„ÙŠ",Si="Ø§Ù„Ø³Ø§Ø¨Ù‚",ki="ØµÙØ­Ø©",Ei="Ù…Ù†",Ai="Ù…Ù†ÙØ° Ø¢Ø³ÙŠØ§",Ni="Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø¨Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¬Ù…Ù„Ø©",Ci="Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ© Ù…Ù† Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŒ ÙƒÙˆØ±ÙŠØ§ØŒ Ø§Ù„ØµÙŠÙ† ÙˆØ§Ù„Ù…Ø²ÙŠØ¯",Ti="ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†",_i="ØªØ¹Ø±Ù Ø¹Ù„ÙŠÙ†Ø§",Ri="ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†",Pi="ØªØµÙØ­ Ø§Ù„Ø¹Ø±ÙˆØ¶",Oi="Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ",Ii="Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 500 Ø±ÙŠØ§Ù„",Li="Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©",Di="Ù…Ù†ØªØ¬Ø§Øª Ø£ØµÙ„ÙŠØ© 100%",Ui="ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹",zi="Ø®Ù„Ø§Ù„ 2-3 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„",Mi="Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©",$i="Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©",Wi="Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",Bi="Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",Fi="Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",qi="Ø¹Ø±ÙˆØ¶ ÙˆØ®ØµÙˆÙ…Ø§Øª",Vi="Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",Hi="Ù…Ù† Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",Ki="Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ø²ÙŠØ¯",Gi="Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...",Ji="Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",Xi="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù„Ø§Ù…Ø©",Qi="Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ù†ØªØ¬Ø§Øª",Yi="Ø§Ù„Ø£Ù‚Ù„ Ù…Ù†ØªØ¬Ø§Øª",Zi="Ø§Ù„Ø§Ø³Ù… (Ø¹Ø±Ø¨ÙŠ)",eo="Ø§Ù„Ø§Ø³Ù… (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)",to="Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",so="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬",ro="{{count}} Ù…Ù†ØªØ¬",no="Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§ØªÙƒ",ao="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†",io="Ø·Ù„Ø¨Ø§ØªÙŠ",oo="ØªØ­Ø¯ÙŠØ«",lo="ÙØ§ØªÙˆØ±Ø©",co="Ø¹Ù†Ø§ØµØ± Ø¥Ø¶Ø§ÙÙŠØ©",uo="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",po="Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ",mo={home:Ta,nav:_a,catalog:Ra,offers:Pa,stores:Oa,cart:Ia,cartTitle:La,cartDetails:Da,checkout:Ua,proceedCheckout:za,changeLanguage:Ma,theme:$a,toggleTheme:Wa,themeLight:Ba,themeDark:Fa,themeSystemAuto:qa,login:Va,register:Ha,searchPlaceholder:Ka,addToCart:Ga,noItems:Ja,emptyCart:Xa,emptyWishlist:Qa,wishlist:Ya,viewWishlist:Za,new:"Ø¬Ø¯ÙŠØ¯",price:ei,outOfStock:ti,details:si,products:ri,breadcrumbHome:ni,breadcrumbCatalog:ai,quickView:ii,close:oi,account:li,greet:ci,logout:di,sidebar:ui,search:pi,itemsTotal:mi,shipping:hi,tax:gi,discount:xi,grandTotal:fi,coupon:yi,apply:vi,removeCoupon:bi,freeShippingHint:ji,next:wi,prev:Si,page:ki,of:Ei,heroTitle:Ai,heroSubtitle:Ni,heroLead:Ci,heroCtaShop:Ti,heroCtaAbout:_i,shop_now:Ri,view_offers:Pi,featureFreeShippingTitle:Oi,featureFreeShippingDesc:Ii,featureQualityTitle:Li,featureQualityDesc:Di,featureFastDeliveryTitle:Ui,featureFastDeliveryDesc:zi,featuredProducts:Mi,featuredSubtitle:$i,viewAllProducts:Wi,rating:Bi,latestProducts:Fi,discountProducts:qi,blog:Vi,fromBlog:Hi,readMore:Ki,loading:Gi,brandsTitle:Ji,searchBrand:Xi,mostProducts:Qi,fewestProducts:Yi,nameAR:Zi,nameEN:eo,viewProducts:to,noResults:so,productsCount:ro,pleaseLoginToViewOrders:no,noOrdersYet:ao,myOrders:io,refresh:oo,invoice:lo,additionalItems:co,totalLabel:uo,mobileNavigation:po},ho="Home",go={home:"Home",about:"About",actions:{add:"Add",add_to_cart:"Add to cart",added:"Added",apply:"Apply",back:"Back",choose:"Choose",clear:"Clear",clear_all:"Clear all",close:"Close",open:"Open",continue_shopping:"Continue shopping",enter_password:"Enter password",log_in_html:'Have an account? <a href="{{ link }}">Log in</a> to check out faster.',log_in:"Sign in",log_out:"Sign out",open_image_in_full_screen:"Open image in full screen",remove:"Remove",remove_discount:"Remove discount {{ code }}",show_all_options:"Show all options",see_items:{one:"See {{ count }} item",other:"See {{ count }} items"},show_filters:"Filter",show_less:"Show less",show_more:"Show more",sign_in_options:"Other sign in options",view_in_your_space:"View in your space",view_all:"View all",more:"More",zoom:"Zoom",close_dialog:"Close dialog",reset:"Reset",enter_using_password:"Enter using password",sign_up:"Sign up",submit:"Submit",view_store_information:"View store information",sort:"Sort"},account:"Account",cart:"Cart"},xo="Coupon",fo="Apply",yo="Remove {{code}}",vo="Add {{amount}} SAR for free shipping",bo="Next",jo="Previous",wo="Page",So="of",ko="Asia Outlet",Eo="Asian quality at wholesale prices",Ao="Discover the best carefully selected Asian products from Japan, Korea, China and more",No="Shop Now",Co="About Us",To="Shop Now",_o="View Offers",Ro="Free Shipping",Po="For orders above 500 SAR",Oo="Quality Guarantee",Io="100% Authentic Products",Lo="Fast Delivery",Do="Within 2-3 business days",Uo="Featured Products",zo="Top selected Asian products",Mo="View all products",$o="Rating",Wo="Latest Products",Bo="Discounts & Offers",Fo="Blog",qo="From the Blog",Vo="Read more",Ho="Loading...",Ko="Brands",Go="Search brand",Jo="Most Products",Xo="Fewest Products",Qo="Name (AR)",Yo="Name (EN)",Zo="View products",el="No results",tl="{{count}} products",sl="Please log in to view your orders",rl="No orders yet",nl="My Orders",al="Refresh",il="Invoice",ol="additional items",ll="Total",cl="Mobile navigation",dl={home:ho,nav:go,coupon:xo,apply:fo,removeCoupon:yo,freeShippingHint:vo,next:bo,prev:jo,page:wo,of:So,heroTitle:ko,heroSubtitle:Eo,heroLead:Ao,heroCtaShop:No,heroCtaAbout:Co,shop_now:To,view_offers:_o,featureFreeShippingTitle:Ro,featureFreeShippingDesc:Po,featureQualityTitle:Oo,featureQualityDesc:Io,featureFastDeliveryTitle:Lo,featureFastDeliveryDesc:Do,featuredProducts:Uo,featuredSubtitle:zo,viewAllProducts:Mo,rating:$o,latestProducts:Wo,discountProducts:Bo,blog:Fo,fromBlog:qo,readMore:Vo,loading:Ho,brandsTitle:Ko,searchBrand:Go,mostProducts:Jo,fewestProducts:Xo,nameAR:Qo,nameEN:Yo,viewProducts:Zo,noResults:el,productsCount:tl,pleaseLoginToViewOrders:sl,noOrdersYet:rl,myOrders:nl,refresh:al,invoice:il,additionalItems:ol,totalLabel:ll,mobileNavigation:cl},ul={title:"Ma Boutique",searchPlaceholder:"Rechercher des produitsâ€¦",noResults:"Aucun rÃ©sultat",loading:"Chargementâ€¦"},pl={home:"Accueil",products:"Produits",orders:"Commandes",admin:"Admin",catalog:"Catalogue",offers:"Offres",stores:"Magasins",myOrders:"Mes commandes",sellerKyc:"KYC Vendeur",dashboard:"Tableau de bord"},ml="Catalogue",hl="Offres",gl="Magasins",xl="Panier",fl="Panier",yl="Panier vide",vl="Passer au paiement",bl="Changer la langue",jl="ThÃ¨me",wl="Basculer le thÃ¨me",Sl="Clair",kl="Sombre",El="SystÃ¨me (Auto)",Al="Total",Nl="Navigation mobile",Cl={customers:{title:"Clients",add:"Ajouter",name:"Nom",email:"E-mail",role:"RÃ´le",status:"Statut",active:"Actif",inactive:"Inactif"}},Tl="Acheter",_l="Voir les offres",Rl={app:ul,nav:pl,catalog:ml,offers:hl,stores:gl,cart:xl,cartTitle:fl,emptyCart:yl,proceedCheckout:vl,changeLanguage:bl,theme:jl,toggleTheme:wl,themeLight:Sl,themeDark:kl,themeSystemAuto:El,totalLabel:Al,mobileNavigation:Nl,admin:Cl,shop_now:Tl,view_offers:_l},Pl={ar:{translation:mo},en:{translation:dl},fr:{translation:Rl}},Ol=()=>{try{const t=localStorage.getItem("lang"),s=document?.documentElement?.lang,r=navigator?.language||navigator?.languages?.[0],i=(t||s||r||"ar").slice(0,2).toLowerCase();return["ar","en","fr"].includes(i)?i:"en"}catch{return"ar"}};Ns.use(Sr).init({resources:Pl,lng:Ol(),fallbackLng:"en",interpolation:{escapeValue:!1},returnNull:!1});function Il(t={}){const{immediate:s=!1,onNeedRefresh:r,onOfflineReady:i,onRegistered:o,onRegisteredSW:n,onRegisterError:u}=t;let d,b;const y=async(v=!0)=>{await b};async function g(){if("serviceWorker"in navigator){if(d=await J(async()=>{const{Workbox:v}=await import("./vendor-B1AZ7KNd.js").then(x=>x.c3);return{Workbox:v}},__vite__mapDeps([2,1,3,4,5,6,7])).then(({Workbox:v})=>new v("/sw.js",{scope:"/",type:"classic"})).catch(v=>{u?.(v)}),!d)return;d.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),d.addEventListener("installed",v=>{v.isUpdate||i?.()}),d.register({immediate:s}).then(v=>{n?n("/sw.js",v):o?.(v)}).catch(v=>{u?.(v)})}}return b=g(),y}function Ll(t={}){const{immediate:s=!0,onNeedRefresh:r,onOfflineReady:i,onRegistered:o,onRegisteredSW:n,onRegisterError:u}=t,[d,b]=a.useState(!1),[y,g]=a.useState(!1),[v]=a.useState(()=>Il({immediate:s,onOfflineReady(){g(!0),i?.()},onNeedRefresh(){b(!0),r?.()},onRegistered:o,onRegisteredSW:n,onRegisterError:u}));return{needRefresh:[d,b],offlineReady:[y,g],updateServiceWorker:v}}function Dl(){const[t,s]=P.useState(!1);return P.useEffect(()=>{const r=()=>{const i=window.scrollY||document.documentElement.scrollTop;s(i>500)};return window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)},[]),t?e.jsx("button",{type:"button",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-5 inset-inline-end-5 z-50 rounded-full bg-slate-900 text-white shadow-lg hover:bg-slate-800 transition p-3","aria-label":"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰",children:"â†‘"}):null}if(typeof window<"u"&&window.AOS&&typeof window.AOS.init=="function")try{window.AOS.init({duration:600,once:!0})}catch{}const Ul=()=>{const{locale:t}=me();return P.useEffect(()=>{const s=document.documentElement;s.setAttribute("lang",["ar","en","fr"].includes(t)?t:t==="ar"?"ar":"en"),s.setAttribute("dir",t==="ar"?"rtl":"ltr")},[t]),null},zl=()=>{const t=ke();return P.useEffect(()=>{const s=r=>{const{type:i="info",title:o,description:n,duration:u}=r.detail||{};(i==="success"?t.success:i==="error"?t.error:i==="warn"?t.warn:t.info)(o,n,u)};return window.addEventListener("toast:show",s),()=>window.removeEventListener("toast:show",s)},[t]),null},Ml=({children:t})=>e.jsx(Cr,{i18n:Ns,children:e.jsx(Qr,{children:e.jsx(Br,{children:e.jsx(en,{children:e.jsx(va,{children:e.jsx(hn,{children:e.jsx(ja,{children:e.jsx(ka,{children:e.jsx(Na,{children:e.jsx(Or,{children:e.jsxs(Zr,{children:[e.jsx(Ul,{}),e.jsx(zl,{}),e.jsx(Bl,{}),e.jsx(Wl,{}),e.jsx(Dl,{}),t]})})})})})})})})})})}),$l=kr([{path:"*",element:e.jsx(Ml,{children:e.jsx(xa,{})})}],{future:{v7_startTransition:!0,v7_relativeSplatPath:!0}});Er.createRoot(document.getElementById("root")).render(e.jsxs(Ar,{client:Ca,children:[e.jsx(Nr,{router:$l,future:{v7_startTransition:!0,v7_relativeSplatPath:!0}}),null]}));function Wl(){return P.useEffect(()=>{const t=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!(typeof navigator<"u"&&typeof navigator.vibrate=="function"))return;const r=()=>{if(!t)try{navigator.vibrate(12)}catch{}};return window.addEventListener("cart:add",r),()=>window.removeEventListener("cart:add",r)},[]),null}function Bl(){const t=ke(),s=P.useRef(null),{updateServiceWorker:r}=Ll({onNeedRefresh(){if(!t?.show||s.current)return;const i=t.show({type:"info",title:"ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯ Ø¬Ø§Ù‡Ø²",description:"Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¢Ø®Ø± Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª.",duration:0,action:{label:"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†",onClick:()=>{if(s.current=null,typeof r=="function")try{r(!0)}catch{}else window.location.reload()}}});s.current=i},onOfflineReady(){t?.success?.("Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„","ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØµÙØ­ Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª",4e3)},onRegisterError(i){console.warn("[PWA] register error",i)}});return P.useEffect(()=>()=>{s.current=null},[]),null}export{De as A,Ql as B,Ur as C,be as D,Yt as E,qt as F,sc as G,Dr as I,Gr as P,Ne as S,Se as a,rc as b,pn as c,Zt as d,ye as e,nc as f,Y as g,zr as h,Mr as i,Yl as j,$r as k,Zl as l,fe as m,Z as n,ea as o,ac as p,xe as q,le as r,$s as s,ke as t,me as u,ls as v,Wr as w,Zn as x,ec as y,tc as z};
