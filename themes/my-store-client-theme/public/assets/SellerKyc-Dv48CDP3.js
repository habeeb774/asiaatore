import{r as o,j as t}from"./vendor.react-BYd2qOD7.js";import{g as i}from"./index-KQCI4LeS.js";import"./vendor-B1AZ7KNd.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-DeoKySpZ.js";/* empty css                     */function k(){const[s,r]=o.useState({companyName:"",crNumber:"",iban:"",bankName:"",addressText:"",documents:[],notes:""}),[n,m]=o.useState("none"),[d,c]=o.useState(!1),[p,l]=o.useState("");o.useEffect(()=>{(async()=>{try{const a=await i.sellerProfileGet();if(a?.profile){const e=a.profile;r({companyName:e.companyName||"",crNumber:e.crNumber||"",iban:e.iban||"",bankName:e.bankName||"",addressText:e.addressText||"",documents:e.documents||[],notes:""}),m(e.kycStatus||"none")}}catch(a){l(a.message)}})()},[]);const u=async a=>{a.preventDefault(),c(!0),l("");try{const e={...s},x=await i.sellerProfileSubmit(e);m(x?.profile?.kycStatus||"pending")}catch(e){l(e.data?.error||e.message)}finally{c(!1)}};return t.jsxs("div",{className:"container-custom p-4",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"توثيق البائع (KYC)"}),n!=="approved"&&t.jsxs("div",{className:"text-sm mb-3",children:["الحالة الحالية: ",t.jsx("strong",{children:n})]}),n==="rejected"&&t.jsx("div",{className:"text-sm text-red-600 mb-2",children:"تم الرفض — يرجى التعديل وإعادة الإرسال."}),p&&t.jsxs("div",{className:"text-sm text-red-600 mb-2",children:["خطأ: ",String(p)]}),t.jsxs("form",{onSubmit:u,className:"grid gap-3 max-w-xl",children:[t.jsx("input",{className:"border px-3 py-2",placeholder:"اسم الشركة",value:s.companyName,onChange:a=>r(e=>({...e,companyName:a.target.value}))}),t.jsx("input",{className:"border px-3 py-2",placeholder:"رقم السجل التجاري",value:s.crNumber,onChange:a=>r(e=>({...e,crNumber:a.target.value}))}),t.jsx("input",{className:"border px-3 py-2",placeholder:"IBAN",value:s.iban,onChange:a=>r(e=>({...e,iban:a.target.value}))}),t.jsx("input",{className:"border px-3 py-2",placeholder:"اسم البنك",value:s.bankName,onChange:a=>r(e=>({...e,bankName:a.target.value}))}),t.jsx("textarea",{className:"border px-3 py-2",placeholder:"عنوان الشركة (وصف)",value:s.addressText,onChange:a=>r(e=>({...e,addressText:a.target.value}))}),t.jsx("textarea",{className:"border px-3 py-2",placeholder:"ملاحظات",value:s.notes,onChange:a=>r(e=>({...e,notes:a.target.value}))}),t.jsx("button",{className:"btn-primary",disabled:d||n==="approved",type:"submit",children:"إرسال للمراجعة"})]}),n==="approved"&&t.jsx("div",{className:"text-green-700 font-semibold mt-3",children:"تمت الموافقة — شكراً لك."})]})}export{k as default};
