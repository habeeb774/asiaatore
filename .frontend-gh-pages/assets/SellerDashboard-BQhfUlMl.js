const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductManager-CuVg5OhD.js","assets/vendor.react-BIXKTxlu.js","assets/vendor-CKneRQof.js","assets/vendor.router-BdFOcp8q.js","assets/vendor.i18next-COqwnjR1.js","assets/vendor.zustand-BuMo4m-J.js","assets/vendor.tanstack-K6OTystZ.js","assets/vendor.leaflet-Dl6I9sMh.js","assets/index-B9WgXUd4.js","assets/index-DyYrs08G.css","assets/vendor-B1-rhOTE.css","assets/StoreContext-DUYNBm8M.js"])))=>i.map(i=>d[i]);
import{_ as w}from"./vendor.tanstack-K6OTystZ.js";import{r as a,j as e,L as m,R as C}from"./vendor.react-BIXKTxlu.js";import{e as A,f as S,u as L,l as I}from"./index-B9WgXUd4.js";import{u as M}from"./StoreContext-DUYNBm8M.js";/* empty css                  */import"./vendor-CKneRQof.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.leaflet-Dl6I9sMh.js";/* empty css                     */const D=C.lazy(()=>w(()=>import("./ProductManager-CuVg5OhD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),G=()=>{const f=A()||{},{user:t,devLoginAs:h}=f,{orders:x}=S()||{},b=M(),u=L()?.locale||"ar",g=!t||t.role!=="seller",c=a.useMemo(()=>(b?.products||[]).filter(r=>r.sellerId===t.id),[b?.products,t?.id]),N=r=>{if(!r)return!1;if(r.productId&&c.some(o=>o.id===r.productId))return!0;const s=typeof r.name=="string"?r.name:r.name?.[u]||r.name?.ar||r.name?.en||"";if(!s)return!1;const y=String(s).trim().toLowerCase();return c.some(o=>String(I({name:o.name},u)).trim().toLowerCase()===y)},p=a.useMemo(()=>(Array.isArray(x)?x:[]).map(s=>{const o=(Array.isArray(s.items)?s.items:[]).filter(N),_=o.reduce((v,i)=>v+(Number(i.quantity)||1),0),k=o.reduce((v,i)=>v+(Number(i.price)||0)*(Number(i.quantity)||1),0);return{...s,_mineCount:o.length,_mineQty:_,_mineAmount:k}}),[x,c,u]),l=a.useMemo(()=>p.filter(r=>r.sellerId?r.sellerId===t.id:r._mineCount>0||!r.items),[p,t?.id]),n=a.useMemo(()=>({products:c.length,orders:l.length,itemsSold:l.reduce((r,s)=>r+(s._mineQty||0),0),revenue:l.reduce((r,s)=>r+(s._mineAmount||0),0)}),[c.length,l]),[d,j]=a.useState("overview");return e.jsx("div",{className:"container-custom px-4 py-12",children:g?e.jsxs("div",{children:[e.jsx("div",{children:"لا تملك صلاحية الدخول إلى لوحة البائع"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"لأغراض التجربة، يمكنك تسجيل دخول تجريبي كبائع من قائمة الحساب في الهيدر."}),typeof h=="function"&&e.jsx("button",{className:"btn-primary mt-4",onClick:()=>h("seller"),children:"تسجيل دخول تجريبي كبائع الآن"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:"لوحة البائع"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{to:"/seller/products",className:"btn-primary",style:{background:"linear-gradient(90deg, var(--color-primary), var(--color-primary-alt))"},children:"إدارة المنتجات"}),e.jsx(m,{to:`/vendor/${t.id}`,className:"btn-secondary",style:{background:"var(--color-bg-alt)",color:"var(--color-text)"},children:"متجرى العام"})]})]}),e.jsxs("p",{className:"mb-6",children:["مرحباً، ",t.name]}),e.jsxs("div",{className:"mb-6 flex items-center gap-2 text-sm",children:[e.jsx("button",{className:`btn-chip ${d==="overview"?"bg-primary-red text-white":"bg-gray-100"}`,onClick:()=>j("overview"),children:"نظرة عامة"}),e.jsx("button",{className:`btn-chip ${d==="products"?"bg-primary-red text-white":"bg-gray-100"}`,onClick:()=>j("products"),children:"منتجاتي"})]}),d==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 border rounded",style:{background:"var(--color-surface)",borderColor:"var(--color-border-soft)"},children:[e.jsx("div",{className:"text-sm",style:{color:"var(--color-text-faint)"},children:"منتجاتي"}),e.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:n.products})]}),e.jsxs("div",{className:"p-4 border rounded",style:{background:"var(--color-surface)",borderColor:"var(--color-border-soft)"},children:[e.jsx("div",{className:"text-sm",style:{color:"var(--color-text-faint)"},children:"طلبات"}),e.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:n.orders})]}),e.jsxs("div",{className:"p-4 border rounded",style:{background:"var(--color-surface)",borderColor:"var(--color-border-soft)"},children:[e.jsx("div",{className:"text-sm",style:{color:"var(--color-text-faint)"},children:"قطع مباعة (تقريباً)"}),e.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:n.itemsSold})]}),e.jsxs("div",{className:"p-4 border rounded",style:{background:"var(--color-surface)",borderColor:"var(--color-border-soft)"},children:[e.jsx("div",{className:"text-sm",style:{color:"var(--color-text-faint)"},children:"إيراد تقديري"}),e.jsxs("div",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:[n.revenue.toFixed(2)," ر.س"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"أحدث الطلبات"}),e.jsxs("div",{className:"space-y-3",children:[l.slice(0,10).map(r=>e.jsxs("div",{className:"p-4 border rounded flex items-center justify-between gap-4",style:{background:"var(--color-surface)",borderColor:"var(--color-border-soft)"},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",style:{color:"var(--color-text)"},children:["#",r.id," — ",r.status||"pending"]}),e.jsxs("div",{className:"text-xs",style:{color:"var(--color-text-faint)"},children:["بتاريخ: ",r.createdAt?new Date(r.createdAt).toLocaleString():"—"]})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("div",{style:{color:"var(--color-text)"},children:["عناصر لي: ",e.jsx("strong",{children:r._mineQty||0})]}),e.jsxs("div",{style:{color:"var(--color-text)"},children:["إجمالي تقديري: ",e.jsxs("strong",{children:[(r._mineAmount||0).toFixed(2)," ر.س"]})]})]})]},r.id)),l.length===0&&e.jsx("div",{className:"text-gray-600",children:"لا توجد طلبات مرتبطة بك حالياً"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"إجراءات سريعة"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(m,{to:"/seller/products",className:"btn-outline",children:"إضافة منتج جديد"}),e.jsx(m,{to:"/products",className:"btn-outline",children:"استعراض المتجر"}),e.jsx("a",{href:"#",className:"btn-outline",onClick:r=>r.preventDefault(),children:"إعدادات الشحن (قريباً)"})]})]})]}),d==="products"&&e.jsx("div",{className:"bg-white border rounded p-4",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"text-sm text-gray-500",children:"جاري تحميل إدارة المنتجات…"}),children:e.jsx(D,{embedded:!0})})})]})})};export{G as default};
