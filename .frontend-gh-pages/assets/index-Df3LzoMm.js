const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor.motion-YCPQEdLH.js","assets/vendor.react-C0fmYGW5.js","assets/vendor-CF_-ATCh.js","assets/vendor.router-2GzHiivc.js","assets/vendor.i18next-COqwnjR1.js","assets/vendor.zustand-BuMo4m-J.js","assets/vendor.tanstack-K6OTystZ.js","assets/vendor.leaflet-U7UpOlxs.js","assets/Home-BXgQZUDN.js","assets/QuickViewModal-ChoSaOUT.js","assets/LazyImage-SqLtajCp.js","assets/Chip-N2ClS2D-.js","assets/Home-CW4S-YIy.css","assets/Cart-Diie_lf2.js","assets/vendor-B1-rhOTE.css","assets/CheckoutPage-vEJRMeLN.js","assets/reactLeafletCompat-Bj-8Vu1M.js","assets/paymentService-BEp1tRVd.js","assets/index-B2fJ0QWL.js","assets/Button-DeEIw2lQ.js","assets/label-B8EBXIVn.js","assets/Card-CFi2J0az.js","assets/ResetPasswordPage-DpTYs6MM.js","assets/VerifyEmailPage-BbnYflVV.js","assets/Orders-Dtf5zzxB.js","assets/MyOrders-BPO-ihWe.js","assets/OrderDetails-Z6Gc7Pfa.js","assets/AdminDashboard-Bq3dtn20.js","assets/AdminDashboard-C4R61CBF.css","assets/ProductInventory-DkWokYI3.js","assets/SellerDashboard-CjjavJx4.js","assets/StoreContext-B5IXdHW_.js","assets/DeliveryDashboard-BbtAu7iK.js","assets/badge-US5Tt8Ec.js","assets/RoutePlanner-Ds5jK6F4.js","assets/ProductDetailPage-C6IVzYYZ.js","assets/ProductDetailPage-NRQonmFA.css","assets/StoresPage-CAHGD4Qu.js","assets/OffersPage-B3hdAGE8.js","assets/ProductGridSkeleton-BedwXj5z.js","assets/InvoiceViewer-ClIJr0Ff.js","assets/CatalogPage-D3sIj9dF.js","assets/Products-DQqmrBgP.js","assets/Chat-ydhdr85H.js","assets/StyleGuide-Bwi_CcBO.js","assets/Profile-BZKXQNuh.js","assets/ProductManager-B_yTteHg.js","assets/OrderTracker-B1pa4j1C.js","assets/Addresses-B9-E9BSj.js","assets/SellerKyc-Cq5yDSZz.js","assets/AdminKycReview-DSUL2sfQ.js","assets/Map-Cl-B1hVp.js","assets/History-C7QW6E50.js","assets/Availability-jrSEXECc.js","assets/DeliverySummary-CZRigR2v.js","assets/UIPreview-1GOpbmw_.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,R,u as pe,b as Ie,c as Ps,L as he,H as us,P as Ut,B as ms,d as zt,S as Mt,e as Le,C as Dt,f as $t,X as Ft,M as _s,h as Ls,i as Os,k as Ht,U as Is,l as Ds,m as Oe,n as $s,o as Us,p as zs,T as Ms,q as $e,t as Jt,v as Kt,w as Gt,x as Xt,y as Fs,z as Ws,A as Bs,D as qs,E as Vs,G as Hs,N as me,F as Js,I as S,J as Ks,K as Gs,O as Xs,Q as Qs,V as Ys,W as Zs,Y as er,Z as tr}from"./vendor.react-C0fmYGW5.js";import{_ as G,b as sr}from"./vendor.tanstack-K6OTystZ.js";import{p as rr}from"./vendor.zustand-BuMo4m-J.js";/* empty css                     */import{i as ps}from"./vendor.i18next-COqwnjR1.js";import"./vendor-CF_-ATCh.js";import"./vendor.router-2GzHiivc.js";import"./vendor.leaflet-U7UpOlxs.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();const Qt="https://my-store-backend-production.up.railway.app/api";let Ne="/api";if(Qt.trim()){const t=Qt.replace(/\/$/,"");if(t.startsWith("/"))Ne=t;else try{const s=new URL(t),r=(s.pathname||"").replace(/\/$/,"");Ne=s.origin+r}catch{Ne=t}}async function I(t,s={}){const r=Ne+t;let o,a=null;try{a=localStorage.getItem("my_store_token")}catch{}const d={...s.body instanceof FormData?{}:{"Content-Type":"application/json"},...s.headers||{}};a&&(d.Authorization=`Bearer ${a}`);try{const l=t.startsWith("/auth");o=await fetch(r,{headers:d,...s,...l?{credentials:"include"}:{}})}catch(l){throw new Error("Network error: "+l.message)}if(o.status===401&&!s._retry)try{const l=await fetch(Ne+"/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(l.ok){const g=await l.json();if(g?.accessToken){try{localStorage.setItem("my_store_token",g.accessToken)}catch{}const k={...d,Authorization:`Bearer ${g.accessToken}`},x=await fetch(r,{headers:k,...s,_retry:!0});if(!x.ok)throw new Error(`API Error ${x.status} after refresh`);return x.json()}}}catch{}if(!o.ok){let l="",g;try{l=await o.text()}catch{}if(l)try{g=JSON.parse(l)}catch{}const k=(s.method||"GET").toUpperCase(),x=`API Error ${o.status} ${o.statusText} (${k} ${t})`+(g?.error?` code=${g.error}`:"");if(g&&typeof g=="object")return Promise.reject(Object.assign(new Error(x),{code:g.error,data:g,status:o.status}));throw new Error(x)}return o.json()}const K={request:I,listProducts:()=>I("/products"),getProduct:t=>I(`/products/${t}`),searchProducts:t=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,o)}),I("/products"+(s.toString()?`?${s.toString()}`:""))},createProduct:t=>I("/products",{method:"POST",body:JSON.stringify(t)}),updateProduct:(t,s)=>I(`/products/${t}`,{method:"PUT",body:JSON.stringify(s)}),deleteProduct:t=>I(`/products/${t}`,{method:"DELETE"}),listOffers:()=>I("/products/offers"),createProductForm:t=>I("/products",{method:"POST",body:t}),updateProductForm:(t,s)=>I(`/products/${encodeURIComponent(t)}`,{method:"PUT",body:s}),listOrders:t=>I("/orders"+(t?`?userId=${encodeURIComponent(t)}`:"")),getOrder:t=>I(`/orders/${t}`),createOrder:t=>I("/orders",{method:"POST",body:JSON.stringify(t)}),updateOrder:(t,s)=>I(`/orders/${t}`,{method:"PATCH",body:JSON.stringify(s||{})}),authLogin:(t,s)=>I("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:s}),credentials:"include"}),authRegister:(t,s,r)=>I("/auth/register",{method:"POST",body:JSON.stringify({email:t,password:s,name:r}),credentials:"include"}),authLogout:()=>I("/auth/logout",{method:"POST",credentials:"include"}),me:()=>I("/auth/me"),meUpdate:t=>I("/auth/me",{method:"PATCH",body:JSON.stringify(t||{})}),wishlistList:()=>I("/wishlist"),wishlistAdd:t=>I("/wishlist",{method:"POST",body:JSON.stringify({productId:t})}),wishlistRemove:t=>I(`/wishlist/${t}`,{method:"DELETE"}),reviewsModerationList:()=>I("/reviews/moderation"),reviewModerate:(t,s)=>I(`/reviews/${encodeURIComponent(t)}/moderate`,{method:"POST",body:JSON.stringify({action:s})}),reviewsListForProduct:t=>I(`/reviews?productId=${encodeURIComponent(t)}`),cartList:()=>I("/cart"),cartSet:(t,s)=>I("/cart/set",{method:"POST",body:JSON.stringify({productId:t,quantity:s})}),cartRemoveItem:t=>I(`/cart/item/${encodeURIComponent(t)}`,{method:"DELETE"}),cartMerge:t=>I("/cart/merge",{method:"POST",body:JSON.stringify({items:t})}),cartClear:()=>I("/cart",{method:"DELETE"}),bankConfirm:(t,s)=>I("/pay/bank/confirm",{method:"POST",body:JSON.stringify({orderId:t,reference:s})}),bankReject:(t,s)=>I("/pay/bank/reject",{method:"POST",body:JSON.stringify({orderId:t,reason:s})}),listCategories:t=>{const s=new URLSearchParams,r=t||{};return r.withCounts&&s.append("withCounts",String(r.withCounts)),I("/categories"+(s.toString()?`?${s.toString()}`:""))},getCategoryBySlug:t=>I(`/categories/slug/${encodeURIComponent(t)}`),categoryCreate:t=>t instanceof FormData?I("/categories",{method:"POST",body:t}):I("/categories",{method:"POST",body:JSON.stringify(t)}),categoryUpdate:(t,s)=>s instanceof FormData?I(`/categories/${encodeURIComponent(t)}`,{method:"PUT",body:s}):I(`/categories/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(s)}),categoryDelete:t=>I(`/categories/${encodeURIComponent(t)}`,{method:"DELETE"}),createCategory:function(t){return this.categoryCreate(t)},createCategoryForm:function(t){return this.categoryCreate(t)},updateCategory:function(t,s){return this.categoryUpdate(t,s)},updateCategoryForm:function(t,s){return this.categoryUpdate(t,s)},deleteCategory:function(t){return this.categoryDelete(t)},settingsGet:()=>I("/settings"),settingsUpdate:t=>I("/settings",{method:"PATCH",body:JSON.stringify(t||{})}),settingsUploadLogo:t=>{const s=new FormData;return s.append("logo",t),I("/settings/logo",{method:"POST",body:s})},brandsList:()=>I("/brands"),marketingFeatures:()=>I("/marketing/features"),marketingBanners:()=>I("/marketing/banners"),marketingAppLinks:()=>I("/marketing/app-links"),marketingTrack:t=>I("/marketing/track",{method:"POST",body:JSON.stringify(t||{})}),marketingMetrics:(t=30)=>I(`/marketing/metrics?days=${encodeURIComponent(t)}`),marketingFeatureCreate:t=>I("/marketing/features",{method:"POST",body:JSON.stringify(t||{})}),marketingFeatureUpdate:(t,s)=>I(`/marketing/features/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingFeatureDelete:t=>I(`/marketing/features/${encodeURIComponent(t)}`,{method:"DELETE"}),marketingBannerCreate:t=>I("/marketing/banners",{method:"POST",body:JSON.stringify(t||{})}),marketingBannerUpdate:(t,s)=>I(`/marketing/banners/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingBannerDelete:t=>I(`/marketing/banners/${encodeURIComponent(t)}`,{method:"DELETE"}),marketingAppLinkCreate:t=>I("/marketing/app-links",{method:"POST",body:JSON.stringify(t||{})}),marketingAppLinkUpdate:(t,s)=>I(`/marketing/app-links/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),marketingAppLinkDelete:t=>I(`/marketing/app-links/${encodeURIComponent(t)}`,{method:"DELETE"}),listAds:()=>I("/ads"),createAd:t=>I("/ads",{method:"POST",body:JSON.stringify(t)}),updateAd:(t,s)=>I(`/ads/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s)}),deleteAd:t=>I(`/ads/${encodeURIComponent(t)}`,{method:"DELETE"}),searchTypeahead:t=>I(`/search/typeahead?q=${encodeURIComponent(t||"")}`),catalogSummary:()=>I("/products/catalog/summary"),tierList:t=>I(`/tier-prices/products/${encodeURIComponent(t)}/tier-prices`),tierCreate:(t,s)=>I(`/tier-prices/products/${encodeURIComponent(t)}/tier-prices`,{method:"POST",body:JSON.stringify(s||{})}),tierUpdate:(t,s)=>I(`/tier-prices/tier-prices/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(s||{})}),tierDelete:t=>I(`/tier-prices/tier-prices/${encodeURIComponent(t)}`,{method:"DELETE"}),deliveryList:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,String(o))}),I("/delivery/orders"+(s.toString()?`?${s.toString()}`:""))},deliveryAccept:t=>I(`/delivery/orders/${encodeURIComponent(t)}/accept`,{method:"POST"}),deliveryReject:t=>I(`/delivery/orders/${encodeURIComponent(t)}/reject`,{method:"POST"}),deliveryStart:t=>I(`/delivery/orders/${encodeURIComponent(t)}/start`,{method:"POST"}),deliveryComplete:(t,s)=>s instanceof FormData?I(`/delivery/orders/${encodeURIComponent(t)}/complete`,{method:"POST",body:s}):I(`/delivery/orders/${encodeURIComponent(t)}/complete`,{method:"POST",body:JSON.stringify(s||{})}),deliveryFail:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/fail`,{method:"POST",body:JSON.stringify({reason:s})}),deliveryLocation:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/location`,{method:"POST",body:JSON.stringify(s||{})}),deliveryStatusPatch:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/status`,{method:"PATCH",body:JSON.stringify({status:s})}),deliveryOtpGenerate:t=>I(`/delivery/orders/${encodeURIComponent(t)}/otp/generate`,{method:"POST"}),deliveryOtpConfirm:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/otp/confirm`,{method:"POST",body:JSON.stringify({code:s})}),deliverySignature:(t,s)=>I(`/delivery/orders/${encodeURIComponent(t)}/signature`,{method:"POST",body:s}),deliveryProfileGet:()=>I("/delivery/me/profile"),deliveryProfileUpdate:t=>I("/delivery/me/profile",{method:"PATCH",body:JSON.stringify(t||{})}),deliveryHistory:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,String(o))}),I("/delivery/orders/history"+(s.toString()?`?${s.toString()}`:""))},inventoryList:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,String(o))}),I("/inventory"+(s.toString()?`?${s.toString()}`:""))},inventoryByProduct:t=>I(`/inventory/${encodeURIComponent(t)}`),inventoryLowStock:()=>I("/inventory/low-stock"),inventoryAdjust:(t,s)=>I(`/inventory/${encodeURIComponent(t)}/update`,{method:"POST",body:JSON.stringify(s||{})}),inventoryReserve:(t,s,r=null)=>I("/inventory/reserve",{method:"POST",body:JSON.stringify({order_id:t,items:s,warehouse_id:r})}),inventoryRelease:t=>I("/inventory/release",{method:"POST",body:JSON.stringify({order_id:t})}),reportInventoryMovement:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,String(o))}),I("/reports/inventory-movement"+(s.toString()?`?${s.toString()}`:""))},reportTopSelling:(t={})=>{const s=new URLSearchParams;return Object.entries(t||{}).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,String(o))}),I("/reports/top-selling"+(s.toString()?`?${s.toString()}`:""))},reportStockValuation:()=>I("/reports/stock-valuation")},Ue={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_TIMEOUT_MS:"6000",VITE_API_URL:"https://my-store-backend-production.up.railway.app/api",VITE_PROXY_TARGET:"https://my-store-backend-production.up.railway.app"},hs=i.createContext(null),nr=({children:t})=>{const[s,r]=i.useState(null),[o,a]=i.useState(!0),[n,d]=i.useState(null);i.useEffect(()=>{let x=!0;return(async()=>{try{const j=await K.settingsGet();if(!x)return;let p=j.setting||null;if(p&&p.logo&&typeof p.logo=="string"&&p.logo.startsWith("/api/uploads")&&(p.logo=p.logo.replace(/^\/api/,"")),p&&p.logo&&typeof p.logo=="string"&&p.logo.startsWith("/")){const u=Ue&&"https://my-store-backend-production.up.railway.app/api";let m=window.location.origin;if(u&&typeof u=="string"&&u.trim())try{const $=new URL(u,window.location.origin).origin;p.logoUrl=new URL(p.logo,$).href}catch{const A=String(u).replace(/\/$/,"");p.logoUrl=A.replace(/\/(api)(?:$|\/)/,"/")+p.logo}else p.logoUrl=m+p.logo,m.includes(":517")&&(async()=>{const A=[4e3,4001,3e3,3001];for(let $ of A){const b=m.replace(/:\d+$/,":"+$)+p.logo;try{const U=await fetch(b,{method:"HEAD"});if(U&&U.ok){if(!x)return;r(L=>L?{...L,logoUrl:b}:{...p,logoUrl:b});return}}catch{}}})()}r(p)}catch(j){d(j.message)}finally{a(!1)}})(),()=>{x=!1}},[]),i.useEffect(()=>{if(!s)return;console.log("[SettingsContext] logo:",s.logo,"logoUrl:",s.logoUrl);const x=document.documentElement,j=(u,m)=>{try{if(!m)return;let A=document.head.querySelector(`link[rel="${u}"]`);A||(A=document.createElement("link"),A.setAttribute("rel",u),document.head.appendChild(A)),A.setAttribute("href",m)}catch{}};s.logo&&(j("icon",s.logo),j("shortcut icon",s.logo),j("apple-touch-icon",s.logo));const p=(u,m)=>{if(m){if(u==="colorPrimary"){x.style.setProperty("--color-primary",m);const A=Yt(m);A&&x.style.setProperty("--color-primary-rgb",A)}if(u==="colorSecondary"&&(x.style.setProperty("--color-primary-alt",m),x.style.setProperty("--color-secondary",m)),u==="colorAccent"){x.style.setProperty("--color-accent",m);const A=Yt(m);A&&x.style.setProperty("--color-accent-rgb",A)}}};p("colorPrimary",s.colorPrimary),p("colorSecondary",s.colorSecondary),p("colorAccent",s.colorAccent),s.colorPrimary&&s.colorSecondary&&x.style.setProperty("--grad-primary",`linear-gradient(90deg, ${s.colorPrimary}, ${s.colorSecondary})`),console.log("[SettingsContext] colorPrimary:",s.colorPrimary);try{const u=s.siteNameAr||s.siteNameEn;if(u){let m=document.head.querySelector('meta[property="og:site_name"]');m||(m=document.createElement("meta"),m.setAttribute("property","og:site_name"),document.head.appendChild(m)),m.setAttribute("content",u)}}catch{}},[s]);const l=async x=>{let p=(await K.settingsUpdate(x)).setting;if(p&&p.logo&&typeof p.logo=="string"&&p.logo.startsWith("/api/uploads")&&(p.logo=p.logo.replace(/^\/api/,"")),p&&p.logo&&typeof p.logo=="string"&&p.logo.startsWith("/")){const u=Ue&&"https://my-store-backend-production.up.railway.app/api";if(u&&typeof u=="string"&&u.trim())try{const A=new URL(u,window.location.origin).origin;p.logoUrl=new URL(p.logo,A).href}catch{p.logoUrl=u.replace(/\/$/,"").replace(/\/(api)(?:$|\/)/,"/")+p.logo}else{let m=window.location.origin;m.includes(":517")&&(m=m.replace(/:\d+$/,":4000")),p.logoUrl=m+p.logo}}return r(p),p},g=async x=>{let p=(await K.settingsUploadLogo(x)).setting;if(p&&p.logo&&typeof p.logo=="string"&&p.logo.startsWith("/api/uploads")&&(p.logo=p.logo.replace(/^\/api/,"")),p&&p.logo&&typeof p.logo=="string"&&p.logo.startsWith("/")){const u=Ue&&"https://my-store-backend-production.up.railway.app/api";if(u&&typeof u=="string"&&u.trim())try{const A=new URL(u,window.location.origin).origin;p.logoUrl=new URL(p.logo,A).href}catch{p.logoUrl=u.replace(/\/$/,"").replace(/\/(api)(?:$|\/)/,"/")+p.logo}else{let m=window.location.origin;m.includes(":517")&&(m=m.replace(/:\d+$/,":4000")),p.logoUrl=m+p.logo}}return p&&r(p),p||null},k=i.useMemo(()=>({setting:s,loading:o,error:n,update:l,uploadLogo:g}),[s,o,n]);return e.jsx(hs.Provider,{value:k,children:t})},Ae=()=>i.useContext(hs);function Yt(t){try{const s=t.replace("#",""),r=parseInt(s.length===3?s.split("").map(d=>d+d).join(""):s,16),o=r>>16&255,a=r>>8&255,n=r&255;return`${o},${a},${n}`}catch{return null}}let ze=null;function fs(){return ze||(ze=G(()=>import("./vendor.motion-YCPQEdLH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(t=>t).catch(()=>null)),ze}function ar(t){return function(r){const[o,a]=R.useState(()=>null);if(R.useEffect(()=>{let d=!0;return fs().then(l=>{if(!d)return;if(!l)return a(()=>null);const g=l[t];a(()=>g||null)}),()=>{d=!1}},[]),!o)return r.fallback||null;const n=o;return e.jsx(n,{...r})}}const je=new Proxy({},{get(t,s){const r=String(s),o=function(n){const[d,l]=R.useState(null);if(R.useEffect(()=>{let k=!0;return fs().then(x=>{if(!k)return;if(!x)return l(()=>null);const j=x.motion||x,p=j&&j[r];l(()=>p||null)}),()=>{k=!1}},[]),!d)return n.fallback||null;const g=d;return e.jsx(g,{...n})};return o.displayName=`LazyMotion.${r}`,o}}),De=ar("AnimatePresence"),gs=i.createContext(),or=({children:t,initialLocale:s})=>{pe?.();const r=Ie?.(),{i18n:o,t:a}=Ps(),n=typeof window<"u"?window.location.pathname.split("/").filter(Boolean)[0]:null,d=n&&["ar","en","fr"].includes(n)?n:s||o?.language||"ar",[l,g]=i.useState(d),k=i.useCallback(p=>{g(p);try{o?.changeLanguage(p)}catch{}try{localStorage.setItem("lang",p)}catch{}if(typeof window>"u"||!r)return;const u=window.location.pathname.split("/").filter(Boolean);u[0]&&["ar","en","fr"].includes(u[0])&&u.shift(),p!=="ar"&&u.unshift(p);const m="/"+u.join("/");r(m+window.location.search,{replace:!0})},[r,o]),x=i.useCallback(p=>a(p),[a]),j=i.useMemo(()=>({locale:l,setLocale:k,t:x,available:["ar","en","fr"]}),[l,x,k]);return i.useEffect(()=>{try{typeof document<"u"&&(document.documentElement.lang=l||"ar",document.documentElement.dir=l==="ar"?"rtl":"ltr",l==="ar"?document.documentElement.classList.add("is-rtl"):document.documentElement.classList.remove("is-rtl"))}catch{}},[l]),e.jsx(gs.Provider,{value:j,children:t})},xe=()=>{const t=i.useContext(gs);return t||{t:s=>s,locale:"ar",setLocale:()=>{},available:["ar","en","fr"]}},xs=i.createContext({theme:"system",setTheme:()=>{}}),ir=t=>{if(t==="dark")return"dark";if(t==="light")return"light";try{return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}},Me=t=>{if(typeof document>"u")return;const s=document.documentElement,r=ir(t);s.classList.remove("theme-light","theme-dark"),r==="light"&&t!=="system"&&s.classList.add("theme-light"),r==="dark"&&t!=="system"&&s.classList.add("theme-dark");try{s.setAttribute("data-theme",r)}catch{}},lr=()=>{try{const t=localStorage.getItem("theme");if(t&&["light","dark","system"].includes(t))return t}catch{}return"system"},cr=({children:t})=>{const[s,r]=i.useState(lr),o=i.useRef(null);i.useEffect(()=>{Me(s)},[s]),i.useEffect(()=>{try{localStorage.setItem("theme",s)}catch{}},[s]),i.useEffect(()=>{Me(s)},[]),i.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;if(o.current&&o.current.removeEventListener)try{o.current.removeEventListener("change",l)}catch{}const d=window.matchMedia("(prefers-color-scheme: dark)");o.current=d;function l(){s==="system"&&Me("system")}try{d.addEventListener("change",l)}catch{}return()=>{try{d.removeEventListener("change",l)}catch{}}},[s]);const a=i.useCallback(d=>{["light","dark","system"].includes(d)&&r(d)},[]),n=i.useMemo(()=>({theme:s,setTheme:a}),[s,a]);return e.jsx(xs.Provider,{value:n,children:t})},Wt=()=>i.useContext(xs),ys=i.createContext(null);let dr=1;const ur=({children:t})=>{const[s,r]=i.useState([]),o=i.useCallback(d=>{r(l=>l.filter(g=>g.id!==d))},[]),a=i.useCallback(d=>{const l=dr++,{type:g="info",title:k,description:x,duration:j=3500}=d||{},p={id:l,type:g,title:k,description:x,createdAt:Date.now()};return r(u=>[...u,p]),j>0&&setTimeout(()=>o(l),j),l},[o]),n=i.useMemo(()=>({show:a,success:(d,l,g)=>a({type:"success",title:d,description:l,duration:g}),error:(d,l,g)=>a({type:"error",title:d,description:l,duration:g}),info:(d,l,g)=>a({type:"info",title:d,description:l,duration:g}),warn:(d,l,g)=>a({type:"warn",title:d,description:l,duration:g})}),[a]);return e.jsxs(ys.Provider,{value:n,children:[t,e.jsx("div",{className:"toaster","aria-live":"polite","aria-atomic":"true",children:s.map(d=>e.jsxs("div",{className:`toast toast-${d.type}`,role:"status",onClick:()=>o(d.id),children:[d.title&&e.jsx("div",{className:"toast-title",children:d.title}),d.description&&e.jsx("div",{className:"toast-desc",children:d.description})]},d.id))})]})},Bt=()=>i.useContext(ys),bs=i.createContext(null),mr=({children:t})=>{const s=Bt?.(),[r,o]=i.useState(()=>{try{const l=localStorage.getItem("my_store_user");return l?JSON.parse(l):null}catch{return null}});i.useEffect(()=>{try{r?localStorage.setItem("my_store_user",JSON.stringify(r)):localStorage.removeItem("my_store_user")}catch{}},[r]);const a=async(l,g)=>{try{const k=await K.authLogin(l,g);if(k.ok&&(k.accessToken||k.token)){const j=k.accessToken||k.token;try{localStorage.setItem("my_store_token",j)}catch{}o(k.user);try{s?.success?.("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",k.user?.email||"")}catch{}return{ok:!0}}const x=k?.error;return x==="USER_NOT_FOUND"?s?.warn?.("Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯","ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ù‚Ù… Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„"):x==="WRONG_PASSWORD"?s?.error?.("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©","Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø®ÙŠØ§Ø± Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"):x==="DB_UNAVAILABLE"?s?.error?.("Ø®Ø¯Ù…Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± Ù…ØªØ§Ø­Ø©","Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹ØŒ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ Ø¥Ù† ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹"):x==="MISSING_CREDENTIALS"?s?.warn?.("Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©","ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"):s?.error?.("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",x||"ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"),{ok:!1,error:x||"LOGIN_FAILED"}}catch(k){const x=k?.message?.includes("Network error")?"ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…":"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹";return s?.error?.("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",x),{ok:!1,error:"NETWORK_OR_UNKNOWN"}}},n=(l="user")=>{const k={id:{seller:"seller-1",admin:"admin-1",user:"user-1",delivery:"delivery-1"}[l]||l+"-mock",role:l,name:l};o(k)},d=async()=>{try{await K.request("/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})}catch{}o(null);try{localStorage.removeItem("my_store_token")}catch{}try{s?.info?.("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬")}catch{}};return e.jsx(bs.Provider,{value:{user:r,login:a,logout:d,devLoginAs:n},children:t})},ve=()=>i.useContext(bs);function pr(t,s,r=typeof window<"u"?window:null){const o=i.useRef();i.useEffect(()=>{o.current=s},[s]),i.useEffect(()=>{if(!r||!r.addEventListener)return;const a=n=>o.current&&o.current(n);return r.addEventListener(t,a),()=>r.removeEventListener(t,a)},[t,r])}const js=i.createContext({open:!1,setOpen:()=>{},toggle:()=>{}}),hr=({children:t,defaultOpen:s=!1})=>{const[r,o]=i.useState(!!s),a=i.useCallback(d=>o(!!d),[]),n=i.useCallback(()=>o(d=>!d),[]);return e.jsx(js.Provider,{value:{open:r,setOpen:a,toggle:n},children:t})},vs=()=>i.useContext(js),fr=[{to:"/",labelAr:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",labelEn:"Home",navKey:"home",icon:us},{to:"/products",labelAr:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",labelEn:"Products",navKey:"products",icon:Ut},{to:"/catalog",labelAr:"Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",labelEn:"Catalog",navKey:"catalog",icon:ms},{to:"/offers",labelAr:"Ø§Ù„Ø¹Ø±ÙˆØ¶",labelEn:"Offers",navKey:"offers",icon:zt},{to:"/cart",labelAr:"Ø§Ù„Ø³Ù„Ø©",labelEn:"Cart",navKey:"cart",icon:Mt},{to:"/stores",labelAr:"Ø§Ù„Ù…ØªØ§Ø¬Ø±",labelEn:"Stores",navKey:"stores",icon:Le}],gr=[{to:"/admin",labelAr:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",labelEn:"Dashboard",icon:Ht},{to:"/admin/reports",labelAr:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",labelEn:"Reports",icon:Dt},{to:"/admin/analytics",labelAr:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª",labelEn:"Analytics",icon:Ht},{to:"/admin/customers",labelAr:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",labelEn:"Customers",icon:Is},{to:"/admin/settings",labelAr:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",labelEn:"Settings",icon:$t}],xr=()=>{const{pathname:t}=pe(),{locale:s,t:r,setLocale:o}=xe(),{theme:a,setTheme:n}=Wt(),{user:d}=ve()||{},{setting:l}=Ae()||{},g=d?.role==="admin";function k(){try{return vs()}catch{return{}}}const{open:x,toggle:j,setOpen:p}=k(),[u,m]=i.useState(!1),[A,$]=i.useState(!!x),[b,U]=i.useState(!1),L=i.useRef(null),v=i.useRef(null),D=i.useRef(0);i.useEffect(()=>{try{const c=window.matchMedia("(prefers-reduced-motion: reduce)");U(!!c.matches);const h=E=>U(!!E.matches);return c.addEventListener?c.addEventListener("change",h):c.addListener&&c.addListener(h),()=>{c.removeEventListener?c.removeEventListener("change",h):c.removeListener&&c.removeListener(h)}}catch{}},[]),i.useEffect(()=>{if(!C())return;let c=!1;const h=()=>{A&&($(!1),p&&p(!1))};if(A){try{window.history.pushState({sidebar:!0},""),c=!0}catch{}window.addEventListener("popstate",h)}return()=>{if(c)try{window.removeEventListener("popstate",h)}catch{}}},[A,p]);const C=()=>typeof window<"u"&&window.innerWidth<=980;i.useEffect(()=>{try{const c=localStorage.getItem("sb_collapsed");c!=null&&!C()&&m(c==="1")}catch{}$(!1)},[]),i.useEffect(()=>{if(!C())try{localStorage.setItem("sb_collapsed",u?"1":"0")}catch{}},[u]),i.useEffect(()=>{try{document.body.style.overflow=A?"hidden":""}catch{}try{const h=document.getElementById("main");h&&(A?h.setAttribute("aria-hidden","true"):h.removeAttribute("aria-hidden"))}catch{}const c=h=>{h.key==="Escape"&&A&&$(!1)};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c);try{document.body.style.overflow=""}catch{}try{const h=document.getElementById("main");h&&h.removeAttribute("aria-hidden")}catch{}}},[A]),i.useEffect(()=>{if(!A)return;const c=L.current;if(!c)return;const h=c.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'),E=h[0],O=h[h.length-1];try{E&&E.focus()}catch{}const f=z=>{z.key==="Tab"&&h.length!==0&&(z.shiftKey?document.activeElement===E&&(z.preventDefault(),O&&O.focus()):document.activeElement===O&&(z.preventDefault(),E&&E.focus()))};return c.addEventListener("keydown",f),()=>c.removeEventListener("keydown",f)},[A]),i.useEffect(()=>{if(!A)return;const c=L.current;if(!c)return;const h=f=>{const z=f.touches?.[0];z&&(v.current=z.clientX,D.current=0)},E=f=>{if(v.current==null)return;const z=f.touches?.[0];if(!z)return;const N=z.clientX-v.current;if(D.current=N,N<0){const y=Math.max(N,-120);c.style.transform=`translate3d(${y}px,0,0)`,c.style.transition=b?"none":"transform 0s"}},O=()=>{const f=D.current||0;c.style.transition="",c.style.transform="",v.current=null,D.current=0,f<-60&&$(!1)};return c.addEventListener("touchstart",h,{passive:!0}),c.addEventListener("touchmove",E,{passive:!0}),c.addEventListener("touchend",O),c.addEventListener("touchcancel",O),()=>{c.removeEventListener("touchstart",h),c.removeEventListener("touchmove",E),c.removeEventListener("touchend",O),c.removeEventListener("touchcancel",O),c.style.transition="",c.style.transform=""}},[A]),i.useEffect(()=>{$(!1)},[t]),i.useEffect(()=>{typeof x=="boolean"&&$(!!x)},[x]),pr("sidebar:toggle",c=>{if(p||j)return;const h=c&&c.detail!=null&&typeof c.detail=="object"&&"cmd"in c.detail?c.detail.cmd:c?.detail;h==="toggle"?$(E=>!E):h==="open"?$(!0):h==="close"&&$(!1)}),i.useEffect(()=>{p&&p(A);try{window.dispatchEvent(new CustomEvent("sidebar:state",{detail:{open:A}}))}catch{}},[A,p]);const T=i.useCallback(c=>{const E=[c.to,`/en${c.to}`,`/fr${c.to}`].some(N=>t===N||t.startsWith(`${N}/`));let O;try{const N=c.navKey?`nav.${c.navKey}`:null;if(N){const y=r(N);y&&y!==N&&(O=y)}}catch{}O||(O=s==="ar"?c.labelAr:c.labelEn);const f=c.icon,z=typeof f=="string"?e.jsx("span",{style:{fontSize:"1.7rem"},children:f}):f?e.jsx(f,{size:28,style:{filter:E?"drop-shadow(0 2px 8px #f6ad55)":"none",marginBottom:"2px"}}):null;return e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsxs(he,{to:c.to,className:"nav-link","data-active":E,"aria-current":E?"page":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",minHeight:"64px",borderRadius:"14px",margin:"0 auto",background:E?"rgba(255,255,255,0.12)":"transparent",border:E?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:E?"0 2px 8px -2px #f6ad55":"none",color:E?"#f6ad55":"#fff",fontSize:"1.08rem",transition:"all 0.18s",cursor:"pointer",outline:"none",padding:"0 8px",gap:"2px"},onMouseEnter:N=>N.currentTarget.style.background="rgba(255,255,255,0.18)",onMouseLeave:N=>N.currentTarget.style.background=E?"rgba(255,255,255,0.12)":"transparent",onKeyDown:N=>{try{if(N.key==="ArrowDown"||N.key==="ArrowRight"){N.preventDefault();const y=N.currentTarget.parentElement.nextElementSibling;y&&y.querySelector(".nav-link")?.focus()}else if(N.key==="ArrowUp"||N.key==="ArrowLeft"){N.preventDefault();const y=N.currentTarget.parentElement.previousElementSibling;y&&y.querySelector(".nav-link")?.focus()}else N.key==="Home"?(N.preventDefault(),N.currentTarget.closest(".sidebar-modern__nav")?.firstElementChild?.querySelector(".nav-link")?.focus()):N.key==="End"&&(N.preventDefault(),N.currentTarget.closest(".sidebar-modern__nav")?.lastElementChild?.querySelector(".nav-link")?.focus())}catch{}},onClick:()=>{C()&&($(!1),p&&p(!1))},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:z}),e.jsx("span",{className:"nav-label",style:{fontSize:".5rem",fontWeight:E?700:500,opacity:E?1:.88,whiteSpace:"nowrap",marginTop:"2px",textAlign:"center",lineHeight:"1.15"},children:O})]})},c.to)},[t,s,u]),W=R.useMemo(()=>{const c=[...fr];return d&&(c.push({to:"/my-orders",labelAr:"Ø·Ù„Ø¨Ø§ØªÙŠ",labelEn:"My Orders",navKey:"myOrders",icon:Dt}),(d.role==="seller"||d.role==="admin")&&c.push({to:"/seller/kyc",labelAr:"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹",labelEn:"Seller KYC",navKey:"sellerKyc",icon:$t}),(d.role==="delivery"||d.role==="admin")&&(c.push({to:"/delivery",labelAr:"Ø§Ù„ØªÙˆØµÙŠÙ„",labelEn:"Delivery",icon:Dt}),c.push({to:"/delivery/map",labelAr:"Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªØªØ¨Ø¹",labelEn:"Delivery Map",icon:"ðŸ—ºï¸"}),c.push({to:"/delivery/history",labelAr:"Ø³Ø¬Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„",labelEn:"History",icon:"ðŸ•˜"}),c.push({to:"/delivery/availability",labelAr:"Ø§Ù„ØªÙˆÙØ±",labelEn:"Availability",icon:"âœ…"}))),c},[d]),_=()=>{C()?$(c=>{const h=!c;return p&&p(h),h}):m(c=>!c)},V=C()?A:!u,M=i.useRef(null);return e.jsxs(e.Fragment,{children:[null,C()&&!A&&e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",top:0,bottom:0,left:0,width:14,zIndex:1020,touchAction:"pan-y",pointerEvents:"auto",userSelect:"none",background:"transparent"},onTouchStart:c=>{const h=c.touches?.[0];h&&h.clientX<=14&&($(!0),p&&p(!0))}}),e.jsx(De,{children:(!C()||A)&&e.jsx(je.aside,{initial:C()?{x:"-100%"}:!1,animate:C()?{x:0}:!1,exit:C()?{x:"-100%"}:!1,transition:{type:"spring",stiffness:400,damping:38},className:`sidebar-modern ${g?"has-admin":""}`,id:"app-sidebar","data-collapsed":u,"data-open":A,role:C()?"dialog":void 0,"aria-modal":C()?"true":void 0,tabIndex:C()?-1:void 0,ref:L,"aria-label":"Main sidebar navigation",style:{background:"linear-gradient(180deg,#178a3d 0%,#0f3c1e 100%)",minHeight:"100vh",boxShadow:"2px 0 16px -8px rgba(0,0,0,0.10)",borderRadius:"0 18px 18px 0",width:u?"68px":"88px",transition:b?"none":"width 0.18s",zIndex:1301,position:C()?"fixed":void 0,top:0,left:0},children:e.jsxs("div",{className:"sidebar-modern__inner",ref:M,style:{paddingBottom:"calc(12px + env(safe-area-inset-bottom))"},children:[e.jsxs("div",{className:"sidebar-modern__head",children:[e.jsx("span",{className:"sidebar-modern__brand",style:{fontWeight:700,fontSize:".95rem",color:"#fff",letterSpacing:".5px"},children:s==="ar"?l?.siteNameAr||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":l?.siteNameEn||"My Store"}),e.jsxs("button",{type:"button",className:"sidebar-modern__toggle",onClick:_,"aria-expanded":V,"aria-controls":"app-sidebar","aria-label":C()?A?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":u?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar",title:C()?A?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":u?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar",style:{background:"rgba(255,255,255,0.08)",border:"none",borderRadius:"8px",padding:"6px",color:"#fff",marginTop:"6px",cursor:"pointer"},children:[C()?A?e.jsx(Ft,{size:18,"aria-hidden":"true"}):e.jsx(_s,{size:18,"aria-hidden":"true"}):u?e.jsx(Ls,{size:18,"aria-hidden":"true"}):e.jsx(Os,{size:18,"aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:C()?A?s==="ar"?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Close menu":s==="ar"?"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Open menu":u?s==="ar"?"ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Expand sidebar":s==="ar"?"Ø·ÙŠÙ‘ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ":"Collapse sidebar"})]})]}),e.jsxs("ul",{className:"sidebar-modern__nav",role:"list","aria-label":"Main navigation",style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"18px"},children:[e.jsx("li",{className:"nav-section-label",style:{color:"#f6ad55",fontWeight:700,fontSize:".75rem",marginBottom:"2px"},children:s==="ar"?"Ø§Ù„ØªØµÙØ­":"Browse"}),W.map(T),g&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"nav-section-label",style:{color:"#f6ad55",fontWeight:700,fontSize:".75rem",marginTop:"12px"},children:r("nav.admin")!=="nav.admin"?r("nav.admin"):s==="ar"?"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©":"Admin"}),e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsxs(he,{to:"/orders",className:"nav-link","data-active":["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`)),"aria-current":["/orders","/en/orders","/fr/orders"].some(c=>t===c)?"page":void 0,"data-tip":u?s==="ar"?"ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª":"All Orders":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",borderRadius:"14px",margin:"0 auto",background:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"rgba(255,255,255,0.12)":"transparent",border:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"0 2px 8px -2px #f6ad55":"none",color:["/orders","/en/orders","/fr/orders"].some(c=>t===c||t.startsWith(`${c}/`))?"#f6ad55":"#fff",fontSize:"1.7rem",transition:"all 0.18s",cursor:"pointer",outline:"none"},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:e.jsx(Ds,{size:28})}),e.jsx("span",{className:"nav-label",style:{fontSize:".72rem",marginTop:"2px",fontWeight:700,opacity:1},children:r("nav.orders")!=="nav.orders"?r("nav.orders"):s==="ar"?"Ø§Ù„Ø·Ù„Ø¨Ø§Øª":"Orders"})]})}),e.jsx("li",{className:"nav-item",style:{width:"100%"},children:e.jsxs(he,{to:"/admin/sellers/kyc",className:"nav-link","data-active":["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c),"aria-current":["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"page":void 0,"data-tip":u?s==="ar"?"Ù…Ø±Ø§Ø¬Ø¹Ø© KYC":"KYC Review":void 0,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",borderRadius:"14px",margin:"0 auto",background:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"rgba(255,255,255,0.12)":"transparent",border:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"2px solid #f6ad55":"1.5px solid rgba(255,255,255,0.08)",boxShadow:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"0 2px 8px -2px #f6ad55":"none",color:["/admin/sellers/kyc","/en/admin/sellers/kyc","/fr/admin/sellers/kyc"].some(c=>t===c)?"#f6ad55":"#fff",fontSize:"1.7rem",transition:"all 0.18s",cursor:"pointer",outline:"none"},children:[e.jsx("span",{className:"nav-icon","aria-hidden":"true",children:e.jsx($t,{size:28})}),e.jsx("span",{className:"nav-label",style:{fontSize:".72rem",marginTop:"2px",fontWeight:700,opacity:1},children:r("nav.sellerKyc")!=="nav.sellerKyc"?r("nav.sellerKyc"):s==="ar"?"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹":"Seller KYC"})]})}),gr.map(T)]})]}),e.jsxs("div",{className:"sidebar-modern__footer",style:{marginTop:"auto",padding:"10px 0",textAlign:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"18px",marginBottom:"10px",marginTop:"2px"},children:e.jsx("button",{onClick:()=>{const c=["ar","en","fr"],h=c.indexOf(s);o(c[(h+1)%c.length])},"aria-label":s==="ar"?"ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©":"Change language",title:s==="ar"?"ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©":"Change language",style:{background:"#f6ad55",border:"none",borderRadius:"50%",padding:"9px",color:"#fff",fontWeight:700,cursor:"pointer",transition:"background 0.2s",width:"38px",height:"38px",fontSize:"1.1rem",boxShadow:"0 1px 8px 0 #f6ad55",display:"flex",alignItems:"center",justifyContent:"center"},children:s==="ar"?"Ø¹":s==="en"?"E":"F"})}),e.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:"10px",marginTop:"0",gap:"0"},children:e.jsx("button",{onClick:()=>n(a==="dark"?"light":a==="light"?"system":"dark"),"aria-label":a==="dark"?s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­":"Light mode":a==="light"?s==="ar"?"Ø§Ù„Ù†Ø¸Ø§Ù…":"System":s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†":"Dark mode",title:a==="dark"?s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­":"Light mode":a==="light"?s==="ar"?"Ø§Ù„Ù†Ø¸Ø§Ù…":"System":s==="ar"?"Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†":"Dark mode",style:{background:"#fff",border:"2px solid #f6ad55",borderRadius:"50%",padding:"7px",color:"#222",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 12px 0 rgba(0,0,0,0.18)",width:"34px",height:"34px",zIndex:99,position:"relative",marginInlineEnd:"2px",marginTop:"2px",marginBottom:"2px"},children:a==="dark"?e.jsxs("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-sun",children:[e.jsx("circle",{cx:"6.5",cy:"6.5",r:"3"}),e.jsx("path",{d:"M6.5 0v1.5m5 5H13m-1.5 5V13m-5-1.5H0m1.5-5H0m1.36-4.57l1.1 1.1m6.68 0l-1.1 1.1m1.1 6.68l-1.1-1.1m-6.68 0l1.1-1.1"})]}):a==="light"?e.jsxs("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-monitor",children:[e.jsx("rect",{x:"1",y:"2",width:"11",height:"8",rx:"2"}),e.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),e.jsx("line",{x1:"6.5",y1:"10",x2:"6.5",y2:"12"})]}):e.jsx("svg",{width:"13",height:"13",fill:"none",stroke:"#222",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-moon",children:e.jsx("path",{d:"M12 8.5A5.5 5.5 0 1 1 6.5 1a4.2 4.2 0 0 0 5.5 7.5Z"})})})}),e.jsx("span",{className:"sidebar-mini-badge",style:{background:"#f6ad55",color:"#fff",borderRadius:"8px",padding:"2px 10px",fontWeight:700,fontSize:".7rem"},children:"v1.0"}),d&&e.jsxs("span",{style:{fontSize:".55rem",fontWeight:600,opacity:.75,display:"block",marginTop:"4px",color:"#fff"},children:[s==="ar"?"Ø¯ÙˆØ±:":"Role:"," ",d.role]}),e.jsx("small",{style:{fontSize:".55rem",opacity:.55,display:"block",marginTop:"2px",color:"#fff"},children:s==="ar"?"ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ":"Preview mode"})]})]})})}),e.jsx("div",{className:"sidebar-modern__backdrop","data-open":A,role:"button",tabIndex:A?0:-1,"aria-label":"Close menu",onClick:()=>{$(!1),p&&p(!1)},onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),$(!1),p&&p(!1))}})]})},Fe=(t,s="en")=>{try{return new Intl.NumberFormat(s,{style:"currency",currency:"SAR",maximumFractionDigits:2}).format(t||0)}catch{return(t||0).toFixed(2)+" SAR"}};function ws({onClose:t,items:s,total:r,locale:o,t:a,updateQuantity:n}){const l=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches?{initial:!1,animate:{},exit:{}}:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8}};return e.jsxs(je.aside,{id:"cart-panel",...l,transition:{duration:.22},className:"fixed right-4 top-20 w-96 bg-white dark:bg-slate-900 border rounded-lg shadow-xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-slate-800 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:a("cartTitle")||"Cart"}),e.jsx("button",{onClick:t,className:"p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":a("close")||"Close",children:e.jsx(Ft,{size:16})})]}),e.jsx("div",{className:"p-4 max-h-64 overflow-auto",children:s&&s.length?e.jsx("ul",{className:"flex flex-col gap-3",children:s.map(g=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("img",{src:g.images?.[0]||g.image||"/images/hero-image.svg",alt:g.name||"",className:"w-14 h-14 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:g.name||g.title}),e.jsxs("div",{className:"text-xs text-slate-500",children:[Fe(g.price||g.salePrice||0,o)," Ã— ",g.quantity||1]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("div",{className:"text-sm font-semibold",children:Fe((g.price||g.salePrice||0)*(g.quantity||1),o)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>n&&n(g.id,Math.max(1,(g.quantity||1)-1)),className:"px-2 py-1 border rounded","aria-label":"Decrease quantity",children:"-"}),e.jsx("span",{className:"px-2 py-1 border rounded",children:g.quantity||1}),e.jsx("button",{onClick:()=>n&&n(g.id,(g.quantity||1)+1),className:"px-2 py-1 border rounded","aria-label":"Increase quantity",children:"+"})]})]})]},g.id))}):e.jsx("div",{className:"text-sm text-slate-500",children:a("emptyCart")||"Cart is empty"})}),e.jsxs("div",{className:"p-4 border-t dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm text-slate-600",children:a("totalLabel")||"Total"}),e.jsx("div",{className:"font-semibold",children:Fe(r,o)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{to:"/cart",onClick:t,className:"w-1/2 text-center py-2 border rounded",children:a("cart")||"View cart"}),e.jsx(he,{to:"/checkout",onClick:t,className:"w-1/2 text-center py-2 bg-amber-500 text-white rounded",children:a("proceedCheckout")||"Checkout"})]})]})]})}const yr=[{to:"/catalog",label:"catalog",icon:ms},{to:"/products",label:"products",icon:Ut},{to:"/offers",label:"offers",icon:zt},{to:"/stores",label:"stores",icon:Le}];function br({t,isActive:s}){return e.jsx("div",{style:{width:"100vw",position:"relative",left:"50%",right:"50%",marginLeft:"-50vw",marginRight:"-50vw"},children:e.jsx("nav",{className:"top-nav flex items-center justify-center gap-2 sm:gap-4 md:gap-6 px-2 py-2 rounded-xl bg-white/80 dark:bg-slate-900/80 shadow-md border border-slate-200 dark:border-slate-800 transition-all duration-300",style:{width:"100%"},children:yr.map(r=>e.jsxs(he,{to:r.to,className:`top-nav-link flex items-center gap-1 px-3 py-2 rounded-lg font-semibold text-slate-700 dark:text-slate-100 hover:bg-emerald-50 dark:hover:bg-emerald-900 transition-colors duration-200 ${s(r.to)?"bg-emerald-100 dark:bg-emerald-800 text-emerald-700 dark:text-emerald-200 shadow":""}`,children:[r.icon&&e.jsx(r.icon,{size:18,className:"mr-1"}),e.jsx("span",{children:t(r.label)})]},r.to))})})}function jr(){try{return Wt()}catch{return{theme:"system",setTheme:()=>{}}}}function vr({t,locale:s,setLocale:r,panel:o,setPanel:a,cartItems:n,cartTotal:d,updateQuantity:l,user:g}){const k=i.useRef(null),x=Array.isArray(n)?n.reduce((u,m)=>u+(m.quantity||1),0):0;i.useEffect(()=>{const u=k.current;if(!(!u||typeof u.animate!="function"))try{u.animate([{transform:"scale(1)"},{transform:"scale(1.08)"},{transform:"scale(1)"}],{duration:280,easing:"cubic-bezier(.2,.9,.3,1)"})}catch{}},[x]);const{theme:j,setTheme:p}=jr();return i.useMemo(()=>j==="system"?"light":j==="light"?"dark":"system",[j]),j==="dark"?t?.("themeDark"):j==="light"?t?.("themeLight"):t?.("themeSystemAuto"),e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 transition-colors duration-300",children:g?e.jsxs(he,{to:"/account/profile",className:"flex items-center gap-2 px-3 py-1 border rounded text-sm bg-white/90 dark:bg-slate-950/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 transition-colors duration-300",children:[e.jsx(Oe,{size:16}),e.jsx("span",{className:"hidden sm:inline-block",children:g.name||(g.email||"").split("@")[0]})]}):e.jsxs(he,{to:"/login",className:"border rounded bg-white/90 dark:bg-slate-950/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 transition-colors duration-300 flex items-center justify-center",style:{minWidth:0,minHeight:0,padding:0},children:[e.jsx(Oe,{size:18,className:"block sm:hidden"}),e.jsx("span",{className:"hidden sm:inline-block text-sm px-3 py-1",children:t("login")||"Login"})]})})}const wr=i.createContext(null),Sr=()=>i.useContext(wr);function qt({src:t,alt:s,className:r="",style:o={},...a}){const n=p=>{if(!p||typeof p!="string")return"";let u=p.trim();return u.startsWith("/api/uploads")&&(u=u.replace(/^\/api/,"")),u.startsWith("uploads/")&&(u="/"+u),/^\d{2,4}x\d{2,4}(\?.*)?$/.test(u)&&(u=`https://via.placeholder.com/${u}`),u},d=n(t),[l,g]=i.useState(d||""),k=i.useRef(d||""),x=i.useRef(null);i.useEffect(()=>{if(!t)return;const p=n(t);if(p===l)return;x.current&&(x.current.onload=null,x.current.onerror=null,x.current=null);const u=new Image;return x.current=u,u.onload=()=>{k.current=p,g(p),x.current=null},u.onerror=()=>{x.current=null},u.src=p,()=>{x.current&&(x.current.onload=null,x.current.onerror=null,x.current=null)}},[t,l]);const j=l||n(t)||"";return e.jsx("img",{src:j,alt:s,className:r,style:o,...a})}function kr(){const{byLocation:t}=Sr()||{byLocation:{topStrip:[]}},{setting:s}=Ae()||{},r=t&&t.topStrip||[],o=i.useRef(null);return i.useEffect(()=>{if(!o.current||!s?.topStripAutoscroll)return;const a=o.current;let n,d=0;const l=.4,g=()=>{a&&(d=(d+l)%a.scrollWidth,a.scrollLeft=d,n=requestAnimationFrame(g))};return n=requestAnimationFrame(g),()=>cancelAnimationFrame(n)},[s?.topStripAutoscroll,r.length]),!s?.topStripEnabled||!r||r.length===0?null:e.jsx("div",{className:"w-full bg-white/90 dark:bg-slate-900/90 border-b dark:border-slate-800",children:e.jsx("div",{className:"max-w-full sm:max-w-[1200px] mx-auto px-2 sm:px-6 md:px-10",children:e.jsx("div",{ref:o,className:"w-full flex gap-4 overflow-x-auto no-scrollbar py-2 items-center smooth-scroll",style:{scrollBehavior:"smooth"},"aria-label":"Top promotions",children:r.map(a=>e.jsxs("a",{href:a.linkUrl||"#",className:"flex-shrink-0 min-w-[220px] sm:min-w-[260px] bg-white/95 dark:bg-slate-800/80 rounded-lg p-2 shadow-sm hover:shadow-md transition-shadow flex items-center gap-3","aria-label":a.titleEn||a.titleAr,children:[a.image?e.jsx("div",{className:"w-14 h-10 rounded-md overflow-hidden flex-shrink-0",children:e.jsx(qt,{src:a.image,alt:a.titleEn||a.titleAr,className:"w-full h-full object-cover"})}):null,e.jsxs("div",{className:"flex-1 text-sm leading-tight",children:[e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-100",children:a.titleAr||a.titleEn}),a.bodyAr||a.bodyEn?e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.bodyAr||a.bodyEn}):null]})]},a.id))})})})}function de(t,s,r=["ar","en"]){if(t==null)return"";if(typeof t=="string"||typeof t=="number")return String(t);if(typeof t=="object"){if(t[s])return String(t[s]);for(const a of r)if(t[a])return String(t[a]);const o=Object.values(t).find(a=>typeof a=="string"||typeof a=="number");return o?String(o):""}return""}function ol(t,s,r="name"){return de(t?.[r],s)}function il(t,s,r,o){return de(t?.[s],r,o)}const Ss=i.createContext(null),Ar=({children:t})=>{const{user:s}=ve()||{},o=xe()?.locale??"ar",[a,n]=i.useState(()=>{try{const v=localStorage.getItem("my_store_cart");return v?JSON.parse(v):[]}catch{return[]}}),[d,l]=i.useState(!1),[g,k]=i.useState(null),x=i.useRef(!1),j=i.useRef(new Map);i.useEffect(()=>()=>{try{j.current.forEach(v=>clearTimeout(v)),j.current.clear()}catch{}},[]),i.useEffect(()=>{try{localStorage.setItem("my_store_cart",JSON.stringify(a))}catch{}},[a]);const p=10;function u(v,D){const C=v?.price||0;if(!Array.isArray(v?.tierPrices)||!v.tierPrices.length)return C;const T=[...v.tierPrices].sort((_,V)=>_.minQty-V.minQty);let W=C;for(const _ of T)if(D>=_.minQty)W=_.price;else break;return W}const m=i.useCallback((v,D=1)=>{if(!v||!v.id)return{ok:!1,reason:"INVALID_PRODUCT"};if(!s){k("AUTH_REQUIRED");try{window.dispatchEvent(new CustomEvent("auth:required",{detail:{action:"add_to_cart",productId:v.id}})),window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"warn",title:"ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",description:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©"}}))}catch{}return{ok:!1,reason:"AUTH_REQUIRED"}}let C,T=D;n(W=>{const _=W.findIndex(M=>M.id===v.id);if(_>-1){const M=[...W],c=M[_].quantity||1,h=Math.min(p,c+D);return T=h,M[_].quantity=h,M[_].price=u(v,h),C={type:"increment",quantity:h},M}const V=u(v,D);return C={type:"new",quantity:D},[...W,{...v,quantity:D,price:V}]});try{const W={productId:v.id,name:de(v?.name??v?.title,o)||(typeof v?.name=="string"?v.name:v?.title)||"Ù…Ù†ØªØ¬",image:Array.isArray(v.images)&&v.images[0]||v.image||null,quantity:D};window.dispatchEvent(new CustomEvent("cart:add",{detail:W})),window.dispatchEvent(new Event("cart:icon-bump")),window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"success",title:"ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",description:W.name}}))}catch{}return(async()=>{try{await K.cartSet(v.id,T)}catch(W){if(W?.code==="INSUFFICIENT_STOCK"||/INSUFFICIENT_STOCK/.test(W?.message||"")){const _=Number(W?.data?.available??0);n(V=>V.map(M=>{if(M.id!==v.id)return M;const c=Math.min(M.quantity||0,_),h=u(v,c);return{...M,quantity:c,price:h}}));try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"error",title:"Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©",description:`Ø§Ù„Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†: ${_}`}}))}catch{}}else k(W.message)}})(),{ok:!0,...C}},[s,o]),A=v=>{n(D=>D.filter(C=>C.id!==v)),s&&(async()=>{try{await K.cartRemoveItem(v)}catch(D){k(D.message)}})()},$=(v,D)=>{let C=0;if(n(T=>T.map(W=>{if(W.id!==v)return W;C=W.quantity||0;const _=u(W,D);return{...W,quantity:D,price:_}})),s)try{const T=j.current;T.has(v)&&clearTimeout(T.get(v));const W=setTimeout(async()=>{try{await K.cartSet(v,D)}catch(_){if(_?.code==="INSUFFICIENT_STOCK"||/INSUFFICIENT_STOCK/.test(_?.message||"")){const V=Number(_?.data?.available??0);n(M=>M.map(c=>{if(c.id!==v)return c;const h=Math.min(V,C),E=u(c,h);return{...c,quantity:h,price:E}}));try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"error",title:"Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªØ§Ø­Ø©",description:`Ø§Ù„Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†: ${V}`}}))}catch{}}else k(_.message)}finally{try{T.delete(v)}catch{}}},300);T.set(v,W)}catch{}},b=()=>{n([]),s&&(async()=>{try{await K.cartClear()}catch(v){k(v.message)}})()};i.useEffect(()=>{(async()=>{if(s&&!x.current){l(!0),k(null);try{const D=await K.cartList(),C=Array.isArray(D)?D:D.items||[],T=new Map;C.forEach(_=>{T.set(_.productId||_.id,{id:_.productId||_.id,quantity:_.quantity||1,price:_.price||_.salePrice||0,..._})}),a.forEach(_=>{if(!T.has(_.id))T.set(_.id,_);else{const V=T.get(_.id);V.quantity=Math.max(V.quantity||1,_.quantity||1),T.set(_.id,V)}});const W=Array.from(T.values());if(n(W),a.length){try{const _=await K.cartMerge(W.map(M=>({productId:M.id,quantity:M.quantity}))),V=Array.isArray(_?.skipped)?_.skipped:[];if(V.length){const M=o==="ar"?`ØªØ¹Ø°Ø± Ø¥Ø¶Ø§ÙØ© ${V.length} Ø¹Ù†ØµØ± Ø¨Ø³Ø¨Ø¨ Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†`:`${V.length} items were skipped (out of stock)`;try{window.dispatchEvent(new CustomEvent("toast:show",{detail:{type:"warn",title:"Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",description:M}}))}catch{}}}catch{}try{const _=await K.cartList(),V=Array.isArray(_)?_:_.items||[];n(V.map(M=>({id:M.productId||M.id,quantity:M.quantity||1,price:M.price||M.salePrice||0,...M})))}catch{}}x.current=!0}catch(D){k(D.message)}finally{l(!1)}}})()},[s]);const U=a.reduce((v,D)=>v+(D.price||0)*(D.quantity||1),0),L={cartItems:a,addToCart:m,removeFromCart:A,updateQuantity:$,clearCart:b,cartTotal:U,maxPerItem:p,loading:d,error:g};return e.jsx(Ss.Provider,{value:L,children:t})},Vt=()=>i.useContext(Ss),Cr=({size:t=24,className:s=""})=>e.jsx("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Nr=({size:t=24,className:s=""})=>e.jsx("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Er=({size:t=20,className:s=""})=>e.jsxs("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("circle",{cx:"11",cy:"11",r:"6",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),Rr=()=>({t:t=>t,locale:"en",setLocale:()=>{}}),Tr=()=>({user:null,logout:()=>{}}),Pr=()=>({cartItems:[],updateQuantity:()=>{},removeFromCart:()=>{}}),We=(t,s)=>{try{const r=typeof window<"u"?window[t]:void 0;if(!r)return s();if(typeof r=="function")try{const o=r();if(o)return o}catch{}return typeof r=="object"?r:s()}catch{return s()}},_r=R.memo(function({className:s=""}){const r=pe(),o=xe()||We("__useLanguage__",Rr),a=ve()||We("__useAuth__",Tr),n=Vt()||We("__useCart__",Pr),d=vs(),{t:l,locale:g,setLocale:k}=o,{user:x}=a,{cartItems:j=[],updateQuantity:p}=n,{setting:u}=Ae()||{},m=i.useMemo(()=>u?.logoUrl||u?.logo||"/images/site-logo.png",[u]),[A,$]=i.useState(null),[b,U]=i.useState(!1),[L,v]=i.useState(!1),[D,C]=i.useState("");i.useEffect(()=>{if(!D)return;v(!0);const N=setTimeout(()=>{v(!1)},600);return()=>clearTimeout(N)},[D]),i.useEffect(()=>{const N=localStorage.getItem("dark-mode")==="true";U(N),document.body.classList.toggle("dark-mode",N),document.body.classList.toggle("light-mode",!N)},[]),i.useEffect(()=>{localStorage.setItem("dark-mode",b),document.body.classList.toggle("dark-mode",b),document.body.classList.toggle("light-mode",!b)},[b]),i.useCallback(()=>U(N=>!N),[]),i.useRef(null),i.useMemo(()=>j.reduce((N,y)=>N+(y.quantity||1),0),[j]);const T=i.useMemo(()=>j.reduce((N,y)=>N+(y.price||y.salePrice||0)*(y.quantity||1),0),[j]);i.useCallback(()=>$("cart"),[]);const W=i.useCallback(()=>$(null),[]),[_,V]=i.useState(!1),M=i.useCallback(()=>{if(d&&typeof d.toggle=="function")d.toggle();else try{window.dispatchEvent(new CustomEvent("sidebar:toggle",{detail:{cmd:"toggle"}}))}catch{}},[d]);i.useEffect(()=>{if(d&&typeof d.open=="boolean"){V(!!d.open);return}const N=y=>{y?.detail&&typeof y.detail.open=="boolean"&&V(y.detail.open)};return window.addEventListener("sidebar:state",N),()=>window.removeEventListener("sidebar:state",N)},[d]);const[c,h]=i.useState(!1);i.useEffect(()=>{const N=()=>h(window.scrollY>6);return N(),window.addEventListener("scroll",N,{passive:!0}),()=>window.removeEventListener("scroll",N)},[]);const{pathname:E}=r,O=i.useCallback(N=>E===N||E.startsWith(N+"/"),[E]),z=["/","/en","/fr"].includes(E)?"h-14 md:h-16":"h-16";return e.jsxs(e.Fragment,{children:[e.jsx(kr,{}),e.jsxs("header",{className:`w-full sticky top-0 z-[1200] ${z} bg-gradient-to-b from-white/95 via-white/90 to-slate-100/80 dark:from-slate-950 dark:via-slate-900 dark:to-slate-900/90 backdrop-blur border-b dark:border-slate-800 transition-shadow transition-colors duration-300 ${c?"shadow-2xl":"shadow"} ${s}`,dir:"rtl",children:[L&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 z-[1300]",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 via-emerald-600 to-emerald-400 animate-pulse rounded-b",style:{width:"100%"}})}),e.jsx("a",{href:"#main",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 px-3 py-1 rounded bg-amber-500 text-white",children:l("Skip to content")}),e.jsxs("div",{className:"relative max-w-full sm:max-w-[1200px] mx-auto w-full h-full px-2 sm:px-6 md:px-10 grid grid-cols-3 items-center gap-3 sm:gap-6 transition-colors duration-300",children:[e.jsxs("div",{className:"col-start-1 col-end-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-full max-w-[420px] flex items-center group relative",style:{background:"rgba(255,255,255,0.65)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:"2rem",boxShadow:"0 4px 24px 0 rgba(16,38,57,0.08)",border:"none",padding:"0.25rem 0.5rem",minHeight:"48px",transition:"box-shadow .25s cubic-bezier(.4,1.3,.5,1), background .25s"},children:e.jsxs("div",{className:"relative flex-1 flex items-center items-stretch gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{try{window.dispatchEvent(new CustomEvent("search:focus"))}catch{window.dispatchEvent(new Event("search:focus"))}},className:"flex items-center justify-center p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":l("ÙØªØ­ Ø§Ù„Ø¨Ø­Ø«")||"ÙØªØ­ Ø§Ù„Ø¨Ø­Ø«",children:e.jsx(Er,{size:20,className:"text-slate-500"})}),e.jsx(he,{to:x?"/account/profile":"/login","aria-label":x?l("profile")||"Profile":l("login")||"Login",className:"flex items-center justify-center p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(Oe,{size:18,className:"text-slate-600 dark:text-slate-200"})})]})}),e.jsx("div",{className:"ml-3 hidden sm:flex",children:e.jsx(vr,{t:l,locale:g,setLocale:k,panel:A,setPanel:$,cartItems:j,cartTotal:T,updateQuantity:p,user:x})})]}),e.jsx("div",{className:"col-start-2 col-end-3 flex justify-center",children:e.jsx(he,{to:"/",className:"block","aria-label":u?.siteNameAr||u?.siteNameEn||"Home",children:e.jsx("div",{className:"w-[150px] h-[48px] flex items-center justify-center overflow-hidden",style:{minWidth:150},children:e.jsx(qt,{src:m,alt:u?.siteNameAr||u?.siteNameEn||"Logo",className:"h-[40px] w-auto object-contain drop-shadow cursor-pointer"})})})}),e.jsx("div",{className:"col-start-2 col-end-3 hidden sm:flex justify-center mt-12",children:e.jsx("nav",{className:"w-full flex items-center justify-center",children:e.jsx(br,{t:l,isActive:O})})}),e.jsx("div",{className:"col-start-3 col-end-4 flex items-center justify-end gap-2 sm:gap-4",children:e.jsx("button",{onClick:M,"aria-expanded":_,"aria-label":l(_?"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©":"Ø§ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"),"aria-controls":"site-sidebar",className:"p-3 rounded-xl md:hidden bg-slate-50 dark:bg-slate-800 border shadow-sm hover:bg-emerald-50 dark:hover:bg-emerald-900 focus-visible:ring-2 focus-visible:ring-emerald-500 min-w-[44px] min-h-[44px] transition-all duration-300",children:_?e.jsx(Nr,{size:22}):e.jsx(Cr,{size:22})})})]}),typeof document<"u"&&$s.createPortal(e.jsx(De,{children:A==="cart"&&e.jsx(ws,{onClose:W,items:j,total:T,locale:g,t:l,updateQuantity:p})}),document.body)]})]})}),Lr=()=>{const{locale:t}=xe(),s=t==="ar"?"Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ ÙˆØ®ÙŠØ§Ø±Ø§Øª Ø¯ÙØ¹ Ù…ØªØ¹Ø¯Ø¯Ø©":"Split your purchases via Tabby & Tamara â€“ Fast shipping & flexible payments";return e.jsx("div",{className:"announcement-bar-modern",role:"note",children:e.jsx("div",{className:"announcement-inner",children:e.jsx("span",{className:"announcement-text",children:s})})})},Or=()=>{const{locale:t}=xe(),{pathname:s,search:r}=pe(),o=Ie(),[a,n]=i.useState([]),[d,l]=i.useState(!1),[g,k]=i.useState(null),x=i.useRef(null),[j,p]=i.useState(!1),u=12;i.useEffect(()=>{l(!0);try{const b=localStorage.getItem("cats_cache"),U=Number(localStorage.getItem("cats_cache_ts")||0),L=Date.now()-U<3600*1e3;if(b&&L){const v=JSON.parse(b);Array.isArray(v)&&n(v)}}catch{}K.listCategories({withCounts:1}).then(b=>{if(b?.categories){n(b.categories);try{localStorage.setItem("cats_cache",JSON.stringify(b.categories)),localStorage.setItem("cats_cache_ts",String(Date.now()))}catch{}}}).catch(b=>k(b.message)).finally(()=>l(!1))},[]);const m=i.useMemo(()=>{const b=new Map;for(const L of a){const v=L.slug||L.id||L.name?.ar||L.name?.en||JSON.stringify(L);b.has(v)||b.set(v,L)}const U=Array.from(b.values());return U.sort((L,v)=>(v.productCount||0)-(L.productCount||0)||(L.name?.ar||"").localeCompare(v.name?.ar||"","ar")),U},[a]),A=i.useMemo(()=>{const b=new URLSearchParams(r).get("category");if(b)return b;const U=s.split("/").filter(Boolean),L=U.findIndex(v=>v==="category");return L>=0?U[L+1]:null},[s,r]),$=b=>{const U=x.current;if(!U)return;const L=Math.round(U.clientWidth*.8)*(b==="left"?-1:1);U.scrollBy({left:L,behavior:"smooth"})};return e.jsxs("div",{className:"category-scroller",role:"navigation","aria-label":t==="ar"?"Ø§Ù„Ø£Ù‚Ø³Ø§Ù…":"Categories",children:[e.jsx("button",{type:"button","aria-label":"Scroll right",onClick:()=>$("right"),className:"absolute left-2 top-[calc(var(--header-height,72px)+10px)] z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden md:inline-flex",children:e.jsx(Us,{size:18})}),e.jsx("button",{type:"button","aria-label":"Scroll left",onClick:()=>$("left"),className:"absolute right-2 top-[calc(var(--header-height,72px)+10px)] z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden md:inline-flex",children:e.jsx(zs,{size:18})}),e.jsxs("div",{ref:x,className:"category-track",children:[d&&e.jsx("span",{className:"text-xs opacity-70 px-2",children:"â€¦"}),g&&e.jsx("span",{className:"text-xs text-red-600 px-2",children:"Ø®Ø·Ø£"}),!d&&(j?m:m.slice(0,u)).map(b=>{const U=A&&A===b.slug,L=(b?.name?.ar||b?.name?.en||b?.slug||"").toLowerCase(),D=(()=>{switch((b.icon||"").toLowerCase().trim()){case"cup-soda":case"soda":case"drink":case"drinks":return Xt;case"coffee":case"tea":return Gt;case"cookie":case"cookies":case"biscuit":case"biscuits":return Kt;case"candy":case"sugar":return Jt;case"utensils":case"pasta":case"rice":return $e;case"store":case"supermarket":return Le;case"tag":return Ms}return/(Ù…Ø§Ø¡|Ù…Ø´Ø±ÙˆØ¨|Ù…Ø´Ø±ÙˆØ¨Ø§Øª|drinks?|beverages?|water)/.test(L)?Xt:/(Ø´Ø§ÙŠ|Ù‚Ù‡ÙˆØ©|coffee|tea)/.test(L)?Gt:/(Ø¨Ø³ÙƒÙˆÙŠØª|ÙƒÙˆÙƒÙŠ|ÙƒÙˆÙƒÙŠØ²|biscuits?|cookies?)/.test(L)?Kt:/(Ø³ÙƒØ±|sugar)/.test(L)?Jt:/(Ù…ÙƒØ±ÙˆÙ†Ø©|Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©|Ø£Ø±Ø²|Ø§Ø±Ø²|pasta|rice)/.test(L)?$e:/(ØµÙ„ØµØ§Øª|Ù…Ø®Ù„Ù„Ø§Øª|sauces?|pickles?)/.test(L)?$e:/(Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª|supermarket)/.test(L)?Le:null})(),C=T=>{const W=new URLSearchParams(r||"");W.set("category",T),W.set("page","1");const _=W.toString();o(`${s}${_?`?${_}`:""}`,{replace:!1})};return e.jsxs("button",{type:"button",onClick:()=>C(b.slug),className:`cat-pill ${U?"active":""}`,"aria-current":U?"page":void 0,children:[D&&e.jsx(D,{size:14,className:"opacity-70"}),e.jsx("span",{children:t==="ar"?b.name?.ar||b.slug:b.name?.en||b.slug}),typeof b.productCount=="number"&&b.productCount>0&&e.jsx("span",{className:"count",children:b.productCount})]},b.id||b.slug)}),m.length>u&&e.jsx("button",{type:"button",onClick:()=>p(b=>!b),className:"cat-pill",children:j?t==="ar"?"Ø¥Ø®ÙØ§Ø¡":"Hide":t==="ar"?"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯":"Show more"})]})]})},Ir=i.createContext(null);let Dr=0;const $r=({children:t})=>{const[s,r]=i.useState([]),o=i.useCallback(n=>{r(d=>d.filter(l=>l.id!==n))},[]),a=i.useCallback((n,d={})=>{const l=++Dr,g={id:l,msg:n,type:d.type||"info",ttl:d.ttl||3e3};return r(k=>[...k,g]),g.ttl>0&&setTimeout(()=>o(l),g.ttl),l},[o]);return i.useEffect(()=>{const n=d=>{const l=d?.detail||{},g=l.name||"Ù…Ù†ØªØ¬",k=a({title:"ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",name:g,image:l.image||null,type:"success",action:{label:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡",href:"/checkout"}},{ttl:2600});try{window.dispatchEvent(new CustomEvent("cart:icon-bump"))}catch{}return k};return window.addEventListener("cart:add",n),()=>window.removeEventListener("cart:add",n)},[a]),i.useEffect(()=>{const n=d=>{a("Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",{type:"error",ttl:2500})};return window.addEventListener("auth:required",n),()=>window.removeEventListener("auth:required",n)},[a]),e.jsxs(Ir.Provider,{value:{push:a,remove:o},children:[t,e.jsx("div",{className:"toast-region","aria-live":"polite","aria-atomic":"true",children:s.map(n=>{const l=typeof n.msg=="object"&&n.msg!==null?n.msg:{title:n.msg};if(l&&l.name&&typeof l.name=="object")try{l.name=JSON.stringify(l.name)}catch{l.name=String(l.name)}return e.jsxs("div",{className:`toast toast-${n.type}`,role:"status",children:[l.image&&e.jsx("div",{className:"toast-media",children:e.jsx("img",{src:l.image,alt:""})}),e.jsxs("div",{className:"toast-body",children:[e.jsx("div",{className:"toast-title",children:l.title}),l.name&&e.jsx("div",{className:"toast-sub",children:l.name})]}),l.action?.href&&e.jsx("a",{className:"toast-cta",href:l.action.href,children:l.action.label||"ÙØªØ­"}),e.jsx("button",{onClick:()=>o(n.id),"aria-label":"Ø¥ØºÙ„Ø§Ù‚",className:"toast-close",children:"Ã—"})]},n.id)})}),e.jsx("style",{children:`
        .toast-region { position: fixed; top: 1rem; inset-inline-end: 1rem; display: flex; flex-direction: column; gap: .5rem; z-index: 2000; }
        .toast { background: #111827; color:#fff; padding:.65rem .75rem; border-radius: 12px; box-shadow:0 10px 30px -10px rgba(9,9,11,.5); font-size:.85rem; display:flex; align-items:center; gap:.65rem; animation: toast-in .28s var(--ease-standard, ease); min-width: 240px; }
        .toast-success { background: linear-gradient(90deg, var(--color-primary), var(--color-primary-alt)); }
        .toast-error { background:#b91c1c; }
        .toast-media { width: 38px; height: 38px; border-radius: 8px; overflow: hidden; background: rgba(255,255,255,.15); flex-shrink:0; display:flex; align-items:center; justify-content:center; }
        .toast-media img { width:100%; height:100%; object-fit: cover; display:block; }
        .toast-body { display:flex; flex-direction:column; gap:2px; min-width:0; }
        .toast-title { font-weight: 700; font-size: .82rem; }
        .toast-sub { font-size: .72rem; opacity: .95; }
        .toast-cta { margin-inline-start: .35rem; font-weight:700; font-size:.72rem; background: #fff; color:#0f172a; text-decoration:none; padding:.4rem .6rem; border-radius: 8px; box-shadow:0 3px 8px rgba(0,0,0,.15); }
        .toast-close { background:transparent; border:0; color:#fff; cursor:pointer; font-size:1rem; line-height:1; padding: .1rem .2rem; }
        @keyframes toast-in { from { opacity:0; transform: translateY(-6px); } to { opacity:1; transform: translateY(0);} }
      `})]})};function Ur({isAr:t,storeName:s,logo:r,aboutLines:o}){return e.jsxs("ul",{className:`footer-about text-slate-700 ${t?"text-right":"text-left"} flex-shrink-0 min-w-[280px] snap-start`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(qt,{src:r,alt:s,className:"h-10 w-auto"}),e.jsx("span",{className:"sr-only",children:s})]}),e.jsx("div",{className:"text-sm leading-7 space-y-1",children:o.map((a,n)=>e.jsx("p",{children:a},n))})]})}function zr({t,linkBlog:s,linkSocial:r,linkReturns:o,linkPrivacy:a}){return e.jsxs("ul",{className:"footer-links text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[220px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.links}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:s,className:"footer-link hover:text-slate-900",children:t.blog})}),e.jsx("li",{children:e.jsx("a",{href:r,className:"footer-link hover:text-slate-900",children:t.social})}),e.jsx("li",{children:e.jsx("a",{href:o,className:"footer-link hover:text-slate-900",children:t.returns})}),e.jsx("li",{children:e.jsx("a",{href:a,className:"footer-link hover:text-slate-900",children:t.privacy})})]})]})}function Mr({t,chatPath:s,supportMobile:r,supportPhone:o,supportEmail:a}){return e.jsxs("div",{className:"footer-support text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[220px] sm:min-w-[260px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.support}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 justify-items-center md:flex md:flex-wrap md:justify-center",children:[e.jsxs(he,{to:s,"aria-label":t.chat,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(Fs,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.chat})]}),e.jsxs("a",{href:`tel:${r}`,"aria-label":t.mobile,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(Ws,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.mobile})]}),e.jsxs("a",{href:`tel:${o}`,"aria-label":t.phone,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(Bs,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.phone})]}),e.jsxs("a",{href:`mailto:${a}`,"aria-label":t.email,className:"footer-support-link inline-flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm leading-none text-slate-800 whitespace-nowrap rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-sm",children:[e.jsx("span",{className:"footer-icon flex items-center justify-center rounded-md bg-slate-100 hover:bg-slate-200 w-8 h-8 sm:w-9 sm:h-9 transition-colors",children:e.jsx(qs,{size:16})}),e.jsx("span",{className:"hidden sm:inline",children:t.email})]})]})]})}function Fr({t,appStoreUrl:s,playStoreUrl:r,isRtl:o,taxNumber:a}){return e.jsxs("div",{className:"footer-app-badges text-slate-700 text-center border-s border-slate-200 ps-6 md:ps-8 flex-shrink-0 min-w-[260px] snap-start",children:[e.jsx("h3",{className:"mb-3 text-base font-extrabold",style:{color:"var(--brand-orange)"},children:t.appTitle}),e.jsx(Wr,{appStoreUrl:s,playStoreUrl:r,playBadgeAlt:t.playBadgeAlt,appStoreBadgeAlt:t.appStoreBadgeAlt,isRtl:o}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-slate-700 mb-1",children:o?"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ":"Tax number"}),e.jsx("div",{className:"text-sm font-semibold tracking-wide",children:a})]})]})}function Wr({appStoreUrl:t,playStoreUrl:s,playBadgeAlt:r,appStoreBadgeAlt:o,isRtl:a}){const[n,d]=R.useState(!0),[l,g]=R.useState(!0);return e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-4",children:[e.jsx("a",{href:s,target:"_blank",rel:"noreferrer noopener",className:"group inline-flex items-center justify-center rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-md active:shadow","aria-label":r,children:n?e.jsx("img",{src:"/assets/badges/google-play-badge.svg",alt:r,className:"h-11 md:h-12 object-contain transition-transform duration-150 group-hover:-translate-y-0.5 group-active:translate-y-0 group-hover:brightness-110",loading:"lazy",onError:()=>d(!1)}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-black px-3 py-2 text-white transition-colors hover:border-slate-400",children:[e.jsx("span",{className:"text-[10px] leading-3 opacity-80",children:"GET IT ON"}),e.jsx("span",{className:"text-sm font-semibold",children:"Google Play"})]})}),e.jsx("a",{href:t,target:"_blank",rel:"noreferrer noopener",className:"group inline-flex items-center justify-center rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white transition-shadow hover:shadow-md active:shadow","aria-label":o,children:l?e.jsx("img",{src:"/assets/badges/app-store-badge.svg",alt:o,className:"h-11 md:h-12 object-contain transition-transform duration-150 group-hover:-translate-y-0.5 group-active:translate-y-0 group-hover:brightness-110",loading:"lazy",onError:()=>g(!1)}):e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-black px-3 py-2 text-white transition-colors hover:border-slate-400",children:[e.jsx("span",{className:"text-[10px] leading-3 opacity-80",children:"Download on the"}),e.jsx("span",{className:"text-sm font-semibold",children:"App Store"})]})})]})}const Br=()=>{const{locale:t}=xe(),{setting:s}=Ae()||{},r=t==="ar",o=de(s?.siteName,t)||(r?s?.siteNameAr||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":s?.siteNameEn||"My Store"),a=s?.taxNumber||"311307460300003",n=s?.supportPhone||"920000000",d=s?.supportMobile||"+966500000000";s?.supportWhatsapp;const l=s?.supportEmail||"support@example.com",g=s?.linkBlog||"#",k=s?.linkSocial||"#",x=s?.linkReturns||"#",j=s?.linkPrivacy||"#",p=s?.appStoreUrl||"#",u=s?.playStoreUrl||"#",m=r?"/chat":t==="en"?"/en/chat":"/fr/chat",A={appTitle:r?`ØªØ·Ø¨ÙŠÙ‚ ${o}`:`${o} App`,support:r?"Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡":"Customer Service",links:r?"Ø±ÙˆØ§Ø¨Ø· ØªÙ‡Ù…Ùƒ":"Useful Links",blog:r?"Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©":"Blog",social:r?"Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ":"Social Media",returns:r?"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø³ØªØ¨Ø¯Ø§Ù„ ÙˆØ§Ù„Ø¥Ø³ØªØ±Ø¬Ø§Ø¹":"Return & Exchange Policy",privacy:r?"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©":"Privacy & Terms",phone:r?"Ù‡Ø§ØªÙ":"Phone",mobile:r?"Ø¬ÙˆØ§Ù„":"Mobile",whatsapp:r?"ÙˆØ§ØªØ³Ø§Ø¨":"WhatsApp",chat:r?"Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©":"Chat",email:r?"Ø¥ÙŠÙ…ÙŠÙ„":"Email",playBadgeAlt:r?"Ø§Ø­ØµÙ„ Ø¹Ù„ÙŠÙ‡ Ù…Ù† Google Play":"Get it on Google Play",appStoreBadgeAlt:r?"Ø­Ù…Ù‘Ù„ Ù…Ù† App Store":"Download on the App Store"},$=s?.footerAbout??(r?s?.footerAboutAr:s?.footerAboutEn)??"",b=de($,t),U=b?.trim()?r?b.split(/\r?\n/).filter(Boolean):[b]:r?["Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¨Ø§Ù„Ø­Ø¨Ø©","ÙˆØ¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ Ù…Ù† Ù…Ù†Ø¸ÙØ§Øª Ùˆ ÙƒÙ…Ø§Ù„ÙŠØ§Øª","Ø£ÙŠØ¶Ù‹Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙ†Ø§ Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª ÙˆØ¬Ù…ÙŠØ¹","Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø±Ù†Ø§ Ø¬Ù…Ù„Ø© ÙˆØ¬ÙˆØ¯ØªÙ†Ø§","Ø£ØµÙ„ÙŠØ©"]:["We specialize in wholesale and retail food products and home essentials. We also have a supermarket section to cover family needs with genuine quality at great prices."];return e.jsx("footer",{className:"site-footer mt-12 bg-gradient-to-r from-white/90 via-[#F6FFF0] to-white/90 border-t border-slate-200",children:e.jsxs("div",{className:"container-custom px-4 py-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 items-start",children:[e.jsx("div",{className:"md:col-span-4",children:e.jsx(Ur,{isAr:r,storeName:o,logo:s?.logoUrl||s?.logo||"/logo.svg",aboutLines:U})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(zr,{t:A,linkBlog:g,linkSocial:k,linkReturns:x,linkPrivacy:j})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(Mr,{t:A,chatPath:m,supportMobile:d,supportPhone:n,supportEmail:l})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(Fr,{t:A,appStoreUrl:p,playStoreUrl:u,isRtl:r,taxNumber:a})})]}),e.jsx("div",{className:"mt-8 border-t border-slate-200 pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-700",children:[e.jsxs("span",{className:"block md:inline",children:["Â© ",new Date().getFullYear()," ",o,"."]}),e.jsxs("span",{className:"hidden md:inline",children:["Â ",r?"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©":"All rights reserved","."]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:k,className:"inline-flex items-center gap-2 text-sm text-slate-700 hover:text-primary focus:outline-none focus:ring-2 focus:ring-amber-500/40 rounded-md px-2 py-1",children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"opacity-90",children:e.jsx("path",{d:"M22 5.924c-.68.302-1.412.505-2.183.597.786-.47 1.39-1.213 1.674-2.1-.734.435-1.549.75-2.415.921C18.5 4.17 17.45 3.7 16.273 3.7c-2.06 0-3.735 1.674-3.735 3.735 0 .293.034.578.096.85C9.69 7.947 7.12 6.53 5.07 4.368c-.321.55-.505 1.19-.505 1.87 0 1.29.656 2.427 1.654 3.092-.61-.02-1.188-.188-1.69-.47v.05c0 1.8 1.28 3.297 2.978 3.64-.312.084-.64.129-.978.129-.24 0-.474-.024-.699-.066.475 1.486 1.854 2.57 3.488 2.6-1.279 1.003-2.892 1.602-4.645 1.602-.302 0-.6-.018-.895-.053C6.467 21.04 8.244 21.7 10.17 21.7c6.444 0 9.968-5.34 9.968-9.97 0-.152-.004-.304-.01-.455.68-.49 1.27-1.1 1.74-1.8-.626.28-1.3.468-2 .573z"})}),e.jsx("span",{className:"sr-only",children:r?"Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„":"Social"})]}),e.jsx("a",{href:j,className:"text-sm text-slate-700 hover:text-slate-900 underline",children:r?"Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©":"Privacy & Terms"})]})]})})]})})},qr=Vs(rr((t,s)=>({items:[],addItem:(r,o=1)=>t(a=>a.items.find(d=>d.id===r.id)?{items:a.items.map(d=>d.id===r.id?{...d,quantity:d.quantity+o}:d)}:{items:[...a.items,{...r,quantity:o}]}),removeItem:r=>t(o=>({items:o.items.filter(a=>a.id!==r)})),updateQuantity:(r,o)=>t(a=>({items:a.items.map(n=>n.id===r?{...n,quantity:Math.max(0,o)}:n).filter(n=>n.quantity>0)})),clearCart:()=>t({items:[]}),getTotal:()=>s().items.reduce((r,o)=>r+o.price*o.quantity,0),getItemCount:()=>s().items.reduce((r,o)=>r+o.quantity,0)}),{name:"cart-storage"})),Vr=()=>{const t=qr(s=>s.getItemCount());return t===0?null:e.jsxs(he,{to:"/cart",className:"fixed bottom-4 left-4 z-50 flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-white shadow-lg transition hover:bg-primary/90 md:bottom-6 md:left-6",children:[e.jsx(Mt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:t})]})};function Hr(){function t(){try{return xe()}catch{return{locale:"ar",t:M=>M}}}function s(){try{return ve()}catch{return{user:null}}}function r(){try{return Vt()}catch{return{cartItems:[]}}}function o(){try{return pe()}catch{return{pathname:"/"}}}function a(){try{return Ie()}catch{return()=>{}}}const{panel:n,setPanel:d}=arguments[0]&&typeof arguments[0]=="object"?arguments[0]:{},{locale:l,t:g}=t(),{user:k}=s(),x=o(),j=a(),{cartItems:p=[]}=r(),[u,m]=i.useState(!1),[A,$]=i.useState(!1),b=i.useRef(0),[U,L]=i.useState(!1),v=l==="ar"?"":`/${l}`,D=x?.pathname||"/",C=i.useMemo(()=>Array.isArray(p)?p.reduce((M,c)=>M+(c.quantity||1),0):0,[p]),T=i.useCallback(M=>j(M),[j]),W=i.useCallback(()=>{typeof d=="function"&&(d(n==="cart"?null:"cart"),navigator?.vibrate&&navigator.vibrate(10))},[n,d]);i.useEffect(()=>{if(C>0){L(!0);const M=setTimeout(()=>L(!1),320);return()=>clearTimeout(M)}},[C]),i.useEffect(()=>{try{const E=window.matchMedia("(prefers-reduced-motion: reduce)");m(!!E.matches);const O=f=>m(!!f.matches);E.addEventListener?E.addEventListener("change",O):E.addListener(O)}catch{}const M=()=>{const E=window.scrollY||0;Math.abs(E-b.current)>8&&($(E>b.current&&E>120),b.current=E)};window.addEventListener("scroll",M,{passive:!0});let c,h;try{if(c=window.visualViewport,c){const E=c.height;h=()=>$(E-c.height>120),c.addEventListener("resize",h)}}catch{}return()=>{window.removeEventListener("scroll",M);try{c&&c.removeEventListener&&h&&c.removeEventListener("resize",h)}catch{}}},[]);const _=i.useMemo(()=>[{key:"home",label:g?.("nav.home")||"Home",icon:us,isActive:D==="/"||D==="/en"||D==="/fr",onClick:()=>T(v||"/")},{key:"categories",label:l==="ar"?"Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª":g?.("nav.catalog")||"Categories",icon:Hs,isActive:D.startsWith(`${v}/catalog`),onClick:()=>T(`${v}/catalog`)},{key:"products",label:l==="ar"?"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª":g?.("nav.products")||"Products",icon:Ut,isActive:D.startsWith(`${v}/products`),onClick:()=>T(`${v}/products`)},{key:"offers",label:g?.("nav.offers")||"Offers",icon:zt,isActive:D.startsWith(`${v}/offers`),onClick:()=>T(`${v}/offers`)},{key:"cart",label:g?.("cart")||"Cart",icon:Mt,isActive:!1,onClick:()=>W()},{key:"account",label:g?.("nav.account")||"Account",icon:Oe,isActive:D.startsWith(`${v}/account`)||D.startsWith(`${v}/login`),onClick:()=>T(k?`${v}/account/profile`:`${v}/login`)}],[g,v,D,T,k,W,l]),V=({item:M})=>{const{key:c,label:h,icon:E,isActive:O,onClick:f}=M,N=(y=>{if(typeof y=="string")return y;if(!y)return"";try{return typeof y=="object"?(y[l]||y.en||y.ar||Object.values(y)[0]||"")+"":String(y)}catch{return""+y}})(h);return e.jsxs(je.button,{type:"button",whileTap:{scale:.92},"aria-label":N||c,"aria-current":O?"page":void 0,onClick:f,className:`flex-1 h-14 flex flex-col items-center justify-center gap-1 text-[11px] font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 ${O?"text-amber-600":"text-slate-700 dark:text-slate-300"}`,children:[e.jsx(E,{size:18}),e.jsx("span",{className:"leading-none",children:N})]})};return e.jsx(je.nav,{dir:"rtl",role:"navigation","aria-label":g?.("mobileNavigation")||"Mobile navigation",initial:!1,animate:{y:A?84:0,opacity:1},transition:u?{duration:0}:{type:"spring",stiffness:260,damping:24},className:"md:hidden fixed bottom-0 left-0 right-0 w-full z-[1050] pointer-events-none",style:{paddingBottom:"max(0px, env(safe-area-inset-bottom))"},children:e.jsxs("div",{className:"relative w-full px-2",style:{pointerEvents:"auto"},children:[e.jsx("div",{className:"flex flex-row justify-between items-center gap-2 relative rounded-2xl shadow-2xl border border-white/60 dark:border-slate-800 bg-white/70 dark:bg-slate-900/80 backdrop-blur-xl w-full",children:_.filter(M=>M.key!=="cart").map(M=>e.jsx(V,{item:M},M.key))}),(()=>{const M=_.find(h=>h.key==="cart"),c=M.icon;return e.jsxs(je.button,{type:"button",whileTap:{scale:.92},whileHover:{scale:1.08},"aria-label":(function(){try{return typeof M.label=="string"?M.label:M.label&&typeof M.label=="object"?M.label[l]||M.label.en||M.label.ar||"cart":String(M.label||"cart")}catch{return"cart"}})(),onClick:()=>{M.onClick(),L(!0),setTimeout(()=>L(!1),320)},animate:U?{boxShadow:"0 0 0 12px rgba(251, 191, 36, 0.4)"}:{boxShadow:"0 2px 16px rgba(0,0,0,0.18)"},transition:{duration:.32},className:"absolute md:hidden left-1/2 -translate-x-1/2 z-[1101] bg-emerald-500 text-white shadow-2xl rounded-full w-20 h-20 flex items-center justify-center border-4 border-emerald-500 dark:border-emerald-500 transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400 hover:shadow-2xl active:scale-95",style:{bottom:"calc(100% + 12px)",pointerEvents:"auto"},children:[e.jsx(c,{size:38,color:"#10b981"}),C>0&&e.jsx(je.span,{className:"absolute -top-2 -right-2 min-w-7 h-7 px-2 rounded-full bg-amber-500 text-white text-[13px] font-bold shadow-lg border-2 border-white dark:border-slate-900",children:C})]})})()]})})}function Jr(){try{return xe()}catch{return{locale:"ar",t:s=>s,setLocale:()=>{}}}}function Kr(){const{locale:t,t:s}=Jr(),[r,o]=i.useState(!1),[a,n]=i.useState(""),[d,l]=i.useState(!1),[g,k]=i.useState(null),[x,j]=i.useState({products:[],categories:[],brands:[]}),[p,u]=i.useState([]),[m,A]=i.useState(!1),[$,b]=i.useState(!1),[U,L]=i.useState(1),[v,D]=i.useState(0),[C,T]=i.useState([]),[W,_]=i.useState([]),[V,M]=i.useState(-1),[c,h]=i.useState(()=>{try{const w=localStorage.getItem("my_store_recent_searches");return w?JSON.parse(w):[]}catch{return[]}}),E=i.useRef(null),O=t==="ar",f=Ie(),z=i.useRef(null),N=i.useCallback(()=>o(!0),[]),y=i.useCallback(()=>o(!1),[]);i.useEffect(()=>{const w=()=>N();return window.addEventListener("search:focus",w),()=>window.removeEventListener("search:focus",w)},[N]),i.useEffect(()=>{if(r){const w=setTimeout(()=>{try{E.current?.focus()}catch{}},60);return()=>clearTimeout(w)}},[r]),i.useEffect(()=>{const w=B=>{B.key==="Escape"&&y()};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[y]),i.useEffect(()=>{if(!r)return;let w=!1;return(async()=>{try{const B=await K.catalogSummary().catch(()=>({categories:[]}));w||T(Array.isArray(B?.categories)?B.categories.slice(0,6):[])}catch{}try{const B=await K.searchProducts({page:1,pageSize:8}).catch(()=>[]),re=Array.isArray(B)?B:Array.isArray(B?.items)?B.items:[];w||_(re.slice(0,8))}catch{}})(),()=>{w=!0}},[r]),i.useEffect(()=>{M(-1)},[x,r,a]);const F=i.useCallback(w=>{w&&h(B=>{const re=[w,...B.filter(oe=>oe!==w)].slice(0,8);try{localStorage.setItem("my_store_recent_searches",JSON.stringify(re))}catch{}return re})},[]),Q=i.useCallback(async w=>{if(!w||w.trim().length<2){j({products:[],categories:[]});return}l(!0),k(null);try{const B=await K.searchTypeahead(w.trim());j({products:Array.isArray(B?.products)?B.products:[],categories:Array.isArray(B?.categories)?B.categories:[],brands:Array.isArray(B?.brands)?B.brands:[]})}catch(B){k(B?.message||"Error")}finally{l(!1)}},[]),Y=i.useCallback(async(w,B=1,re=24)=>{const oe=(w||"").trim();if(oe){A(!0),b(!0),k(null);try{const ne=await K.searchProducts({q:oe,page:B,pageSize:re}),fe=Array.isArray(ne)?ne:Array.isArray(ne?.items)?ne.items:Array.isArray(ne?.products)?ne.products:[],P=Number(ne?.total||ne?.count||(Array.isArray(fe)?fe.length:0));u(fe),D(P),L(Number(ne?.page||B))}catch(ne){k(ne?.message||"Error")}finally{A(!1)}}},[]);i.useEffect(()=>{if(r)return z.current&&clearTimeout(z.current),z.current=setTimeout(()=>Q(a),280),()=>clearTimeout(z.current)},[a,Q,r]);const ee=(a||"").trim().length>=2,ie=r&&!ee,ae=i.useMemo(()=>{const w=[];return ee&&((x.categories||[]).slice(0,6).forEach(B=>w.push({type:"category",data:B})),(x.brands||[]).slice(0,6).forEach(B=>w.push({type:"brand",data:B})),(x.products||[]).slice(0,8).forEach(B=>w.push({type:"product",data:B}))),w},[x,ee]),ye=w=>ae.length===0?-1:w<0?ae.length-1:w>=ae.length?0:w,se=i.useCallback(w=>{if(ee){if(w.key==="ArrowDown"||w.key==="ArrowUp")w.preventDefault(),M(B=>ye(B+(w.key==="ArrowDown"?1:-1)));else if(w.key==="Enter"&&V>=0&&ae[V]){w.preventDefault();const B=ae[V];B.type==="product"?(F(a.trim()),y(),f(`/products/${B.data.slug||B.data.id}`)):B.type==="category"?(F(a.trim()),y(),f(`/products?category=${encodeURIComponent(B.data.slug||B.data.id||"")}`)):B.type==="brand"&&(F(a.trim()),y(),f(`/products?brand=${encodeURIComponent(B.data.slug||B.data.id||"")}`))}}},[ee,V,ae,a,y,f,F]),le=(w,B)=>{if(!B)return w;try{const re=String(w||"").toLowerCase().indexOf(B.toLowerCase());if(re===-1)return w;const oe=w.slice(0,re),ne=w.slice(re,re+B.length),fe=w.slice(re+B.length);return e.jsxs("span",{children:[oe,e.jsx("span",{className:"bg-amber-200/60 px-0.5",children:ne}),fe]})}catch{return w}},X=i.useCallback(w=>{w?.preventDefault?.();const B=(a||"").trim();B&&(F(B),Y(B,1,24))},[a,y,f,F]),Z=i.useMemo(()=>O?"rtl":"ltr",[O]);return e.jsx(De,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(je.div,{initial:{opacity:0},animate:{opacity:.35},exit:{opacity:0},transition:{duration:.18},className:"fixed inset-0 bg-black z-[1200]",onClick:y},"search-overlay"),e.jsx(je.div,{dir:O?"rtl":"ltr",initial:{opacity:0,scale:.98,y:-6},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:-6},transition:{duration:.18},className:"fixed inset-0 z-[1201] flex items-start justify-center pt-20 sm:pt-24","aria-modal":"true",role:"dialog","aria-label":s&&(s("search")||"Search"),children:e.jsx("div",{className:"relative w-full px-4 max-w-2xl z-[1202]",children:e.jsxs("div",{className:"bg-white/95 dark:bg-slate-900/90 rounded-xl shadow-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:s&&(s("search")||"Search")}),e.jsx("button",{onClick:y,className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500","aria-label":s?.("close")||"Close",children:e.jsx(Ft,{size:18})})]}),e.jsxs("form",{onSubmit:X,className:"relative",children:[e.jsx("input",{ref:E,type:"search",value:a,onChange:w=>n(w.target.value),onKeyDown:w=>{if(se(w),w.key==="Enter"){const B=(a||"").trim();if(!B)return;V<0&&(w.preventDefault(),F(B),y(),f(`/search?q=${encodeURIComponent(B)}`))}},placeholder:s&&(s("searchPlaceholder")||"Search..."),className:"w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-800 border dark:border-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500"}),e.jsx("button",{type:"submit",className:"absolute end-2 top-1/2 -translate-y-1/2 text-sm font-semibold text-emerald-600 disabled:opacity-50",disabled:!a.trim(),children:t==="ar"?"Ø¨Ø­Ø«":"Search"})]}),$?e.jsxs("div",{className:"mt-4",children:[m&&e.jsx("div",{className:"text-sm text-slate-500",children:t==="ar"?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...":"Searching..."}),!m&&p&&p.length===0&&e.jsx("div",{className:"text-sm text-slate-500",children:t==="ar"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«":"No search results"}),!m&&p&&p.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:p.map(w=>e.jsx("button",{className:"text-start p-2 bg-transparent rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800",onClick:()=>{F(a.trim()),y(),f(`/products/${w.slug||w.id}`)},children:e.jsxs("div",{className:"w-full flex gap-3 items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded overflow-hidden bg-slate-100 dark:bg-slate-800 flex-shrink-0",children:e.jsx("img",{src:w.image,alt:de(w.name,t)||w.name||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold truncate",children:de(w.name,t)||w.name||w.title}),e.jsxs("div",{className:"text-xs text-slate-500",children:[Number(w.price||0).toFixed(2)," Ø±.Ø³"]})]})]})},w.id))}),v>p.length&&e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx("button",{disabled:U<=1||m,onClick:()=>{const w=Math.max(1,U-1);Y(a,w)},className:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-800",children:t==="ar"?"Ø§Ù„Ø³Ø§Ø¨Ù‚":"Prev"}),e.jsx("div",{className:"text-sm opacity-80",children:U}),e.jsx("button",{disabled:m,onClick:()=>{const w=U+1;Y(a,w)},className:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-800",children:t==="ar"?"Ø§Ù„ØªØ§Ù„ÙŠ":"Next"})]})]})]}):ee?e.jsxs("div",{className:"mt-3 space-y-2",children:[d&&e.jsx("div",{className:"text-xs text-slate-500",children:t==="ar"?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...":"Loading..."}),g&&e.jsx("div",{className:"text-xs text-red-600",children:g}),!d&&!g&&(x.products.length>0||x.categories.length>0)&&e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[x.categories.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø§Ù„ÙØ¦Ø§Øª":"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.categories.map((w,B)=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>{F(a.trim()),y(),f(`/products?category=${encodeURIComponent(w.slug||w.id||"")}`)},children:le(de(w.name,t)||w.nameAr||w.nameEn||w.slug,a)},w.slug||B))})]}),x.brands&&x.brands.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":"Brands"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.brands.slice(0,6).map((w,B)=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>{F(a.trim()),y(),f(`/products?brand=${encodeURIComponent(w.slug||w.id||"")}`)},children:le(de(w.name,t)||w.nameAr||w.nameEn||w.slug,a)},w.id||w.slug||B))})]}),x.products.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ù…Ù†ØªØ¬Ø§Øª":"Products"}),e.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800",children:x.products.slice(0,8).map(w=>e.jsxs("li",{className:`p-2 flex items-center gap-3 hover:bg-slate-50/60 dark:hover:bg-slate-800 cursor-pointer ${ae[V]?.type==="product"&&ae[V]?.data?.id===w.id?"bg-amber-50 dark:bg-amber-900/10":""}`,onClick:()=>{F(a.trim()),y(),f(`/products/${w.slug||w.id}`)},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:w.image&&e.jsx("img",{src:w.image,alt:de(w.name,t)||w.nameAr||w.nameEn||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-[12px] font-semibold truncate",children:le(de(w.name,t)||w.nameAr||w.nameEn||"",a)}),e.jsxs("div",{className:"text-[11px] text-slate-500 flex gap-3",children:[e.jsxs("span",{children:[Number(w.price||0).toFixed(2)," Ø±.Ø³"]}),w.category&&e.jsx("span",{className:"opacity-70",children:de(w.category,t)||w.category})]})]})]},w.id))})]})]}),!d&&!g&&x.products.length===0&&x.categories.length===0&&e.jsx("div",{className:"text-xs text-slate-500",children:t==="ar"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬":"No results"})]}):ie?e.jsxs("div",{className:"mt-3 space-y-4",dir:Z,children:[c&&c.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø­Ø« Ø­Ø¯ÙŠØ«Ø©":"Recent Searches"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(w=>e.jsx("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700",onClick:()=>n(w),children:w},w))})]}),C&&C.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"ØªØµÙ†ÙŠÙØ§Øª Ø´Ø§Ø¦Ø¹Ø©":"Popular Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(w=>e.jsxs("button",{className:"px-3 py-1.5 rounded-full text-[11px] bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/30",onClick:()=>{y(),f(`/products?category=${encodeURIComponent(w.category)}`)},children:[w.category," ",w.count!=null&&e.jsxs("span",{className:"opacity-60",children:["(",w.count,")"]})]},w.category))})]}),W&&W.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold uppercase tracking-wide opacity-70 mb-1",children:t==="ar"?"Ù…Ù†ØªØ¬Ø§Øª Ø­Ø¯ÙŠØ«Ø©":"Recent Products"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:W.slice(0,6).map(w=>e.jsxs("button",{className:"text-start",onClick:()=>{y(),f(`/products/${w.slug||w.id}`)},children:[e.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800",children:w.image&&e.jsx("img",{src:w.image,alt:de(w.name,t)||w.nameAr||w.nameEn||"",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"mt-1 text-[11px] font-medium truncate",children:de(w.name,t)||w.nameAr||w.nameEn||""})]},w.id))})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:t==="ar"?"Ø§ÙƒØªØ¨ Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª":"Type to search products"})]}):null]})})},"search-panel")]})})}function Gr({open:t,onClose:s,...r}){return i.useEffect(()=>{if(!t)return;const o=a=>{a.key==="Escape"&&s()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,s]),t?e.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-end justify-end",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30",onClick:s}),e.jsx(ws,{...r,onClose:s})]}):null}function Xr({timeout:t=1200}){const[s,r]=i.useState(!0);return i.useEffect(()=>{let o=null;function a(){r(!1),window.removeEventListener("load",a)}return document.readyState==="complete"?o=setTimeout(a,t):(window.addEventListener("load",a),o=setTimeout(a,t+800)),()=>{window.removeEventListener("load",a),o&&clearTimeout(o)}},[t]),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loader-init","aria-hidden":!s}),e.jsx("div",{className:"content-loading",role:"status","aria-hidden":!s,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"lds-spinner","aria-hidden":!0,children:Array.from({length:12}).map((o,a)=>e.jsx("div",{},a))})})})]}):null}const Qr=({children:t})=>{R.useEffect(()=>{const u=()=>k("cart");return window.addEventListener("cart:open",u),()=>window.removeEventListener("cart:open",u)},[]);const{locale:s,setLocale:r,available:o}=xe(),{theme:a,setTheme:n}=Wt(),{pathname:d}=pe(),l=d==="/"||d==="/en",[g,k]=R.useState(null),{cartItems:x=[],updateQuantity:j}=Vt(),p=Array.isArray(x)?x.reduce((u,m)=>u+(m.price||m.salePrice||0)*(m.quantity||1),0):0;return e.jsx($r,{children:e.jsx(hr,{children:e.jsxs("div",{className:"app-layout professional-layout theme-minimal",children:[e.jsx(Xr,{}),e.jsx(xr,{}),e.jsxs("div",{className:"content-with-sidebar",children:[e.jsx(Lr,{}),e.jsx(_r,{}),!l&&e.jsx(Or,{}),t,e.jsx("div",{className:"h-16 md:h-0"}),e.jsx(Br,{})]}),e.jsx(Vr,{}),e.jsx(Kr,{}),e.jsx(Hr,{panel:g,setPanel:k}),g==="cart"&&e.jsx(Gr,{open:!0,onClose:()=>k(null),items:x,total:p,locale:s,t:typeof window<"u"&&window.t?window.t:(u=>u),updateQuantity:j})]})})})},ks=i.createContext(null);function Yr(t="my-store-chat"){try{return new BroadcastChannel(t)}catch{return null}}function Zr({children:t}){const[s,r]=i.useState([]),[o,a]=i.useState(null),[n,d]=i.useState([]),[l,g]=i.useState({}),[k,x]=i.useState({}),j=i.useRef(null),p=i.useRef(null),u=(L,v={})=>{r(D=>D.find(T=>T.id===L)?D.map(T=>T.id===L?{...T,lastMessage:v.lastMessage||T.lastMessage,lastMessageAt:new Date().toISOString()}:T):[{id:L,title:v.title||"Ø§Ù„Ø¯Ø¹Ù…",lastMessage:v.lastMessage||"",lastMessageAt:new Date().toISOString()},...D])};i.useEffect(()=>{try{const L="/api/events",v=new EventSource(L,{withCredentials:!0}),D=C=>{try{const T=JSON.parse(C.data);if(C.type==="message"||C.type==="chat.message"){const W=T.threadId||"default";u(W,{lastMessage:T.message?.content||T.text}),W===o?.id?d(_=>[..._,T.message||{id:T.id,from:T.from,text:T.text,ts:T.ts}]):g(_=>({..._,[W]:(_[W]||0)+1}))}}catch{}};return v.addEventListener("chat.message",D),v.addEventListener("message",D),j.current=v,()=>{try{v.close()}catch{}}}catch{}},[o?.id]),i.useEffect(()=>{const L=Yr();p.current=L;const v=C=>{if(!C)return;const T=C.threadId||"default";C.type==="message"?(u(T,{lastMessage:C.text}),T===o?.id?d(W=>[...W,{id:C.id,from:C.from,text:C.text,ts:C.ts}]):g(W=>({...W,[T]:(W[T]||0)+1}))):C.type==="typing"&&(x(W=>{const _=new Set(W[T]||[]);return _.add(C.from),{...W,[T]:Array.from(_)}}),setTimeout(()=>{x(W=>{const _=new Set(W[T]||[]);return _.delete(C.from),{...W,[T]:Array.from(_)}})},2500))};if(L){const C=T=>v(T.data);return L.addEventListener("message",C),()=>L.removeEventListener("message",C)}const D=C=>{try{if(!C.key||!C.key.startsWith("chat-msg:"))return;const T=JSON.parse(C.newValue);v(T)}catch{}};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[o?.id]);const m=({text:L,from:v,threadId:D="default"})=>{const C={type:"message",id:Date.now()+"-"+Math.random().toString(36).slice(2,8),ts:new Date().toISOString(),from:v,text:L,threadId:D};try{if(p.current)p.current.postMessage(C);else{const T=`chat-msg:${Date.now()}`;localStorage.setItem(T,JSON.stringify(C)),setTimeout(()=>{try{localStorage.removeItem(T)}catch{}},15e3)}}catch{}return u(D,{lastMessage:C.text}),D===o?.id?d(T=>[...T,{id:C.id,from:C.from,text:C.text,ts:C.ts}]):g(T=>({...T,[D]:(T[D]||0)+1})),C},A=({from:L,threadId:v="default"})=>{const D={type:"typing",from:L,threadId:v,ts:new Date().toISOString()};try{if(p.current)p.current.postMessage(D);else{const C=`chat-typing:${Date.now()}`;localStorage.setItem(C,JSON.stringify(D)),setTimeout(()=>{try{localStorage.removeItem(C)}catch{}},2e3)}}catch{}x(C=>{const T=new Set(C[v]||[]);return T.add(L),{...C,[v]:Array.from(T)}}),setTimeout(()=>{x(C=>{const T=new Set(C[v]||[]);return T.delete(L),{...C,[v]:Array.from(T)}})},2500)},$=L=>{g(v=>({...v,[L]:0}))},b=Object.values(l).reduce((L,v)=>L+(v||0),0),U=i.useMemo(()=>({threads:s,setThreads:r,currentThread:o,setCurrentThread:a,messages:n,setMessages:d,unreadCounts:l,unreadTotal:b,typing:k,sendMessage:m,sendTyping:A,markThreadRead:$}),[s,o,n,l,k]);return e.jsx(ks.Provider,{value:U,children:t})}function ll(){const t=i.useContext(ks);if(!t)throw new Error("useChat must be used within ChatProvider");return t}class en extends R.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){window&&window.console&&console.error("Route boundary error",s,r)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{marginBottom:16},children:"âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",direction:"ltr",textAlign:"left",background:"#f8f8f8",padding:12,borderRadius:8,maxWidth:600,margin:"0 auto"},children:String(this.state.error)}),e.jsx("button",{style:{marginTop:20},onClick:()=>window.location.reload(),children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„"})]}):this.props.children}}const tn=()=>e.jsxs("div",{style:{padding:"60px 24px",textAlign:"center"},children:[e.jsx("div",{className:"spinner",style:{width:42,height:42,border:"5px solid #eee",borderTop:"5px solid #69be3c",borderRadius:"50%",margin:"0 auto 24px",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{opacity:.7},children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©..."}),e.jsx("style",{children:"@keyframes spin {from{transform:rotate(0)} to{transform:rotate(360deg)}}"})]});function q({isAuthed:t,redirectTo:s="/login",element:r,children:o,userRole:a,requiredRoles:n,onDenied:d,mode:l="redirect",forbiddenMessage:g}){const k=r||o||null,j=!(Array.isArray(n)&&n.length>0)||a&&n.includes(a);return t?j?k:(d&&d({userRole:a,requiredRoles:n}),e.jsxs("div",{className:"forbidden-block",role:"alert",style:Zt,children:[e.jsxs("h2",{style:sn,children:["ðŸš« ",g||"ØµÙ„Ø§Ø­ÙŠØ§Øª ØºÙŠØ± ÙƒØ§ÙÙŠØ©"]}),e.jsx("p",{style:es,children:a?`Ø¯ÙˆØ±Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${a}. Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡Ø§: ${n.join(", ")}`:"Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ¯ Ø¯ÙˆØ± Ø­Ø³Ø§Ø¨Ùƒ."}),e.jsx("a",{href:"/",style:nn,children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})):l==="redirect"?e.jsx(me,{to:s,replace:!0}):e.jsxs("div",{className:"auth-block",role:"alert",style:Zt,children:[e.jsx("p",{style:es,children:g||"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("a",{href:s,className:"btn btn-primary",style:rn,children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]})}const Zt={maxWidth:560,margin:"3rem auto",background:"var(--color-surface, #fff)",border:"1px solid var(--color-border, #e4e7eb)",padding:"2rem 1.75rem",borderRadius:"18px",textAlign:"center",boxShadow:"0 8px 34px -12px rgba(0,0,0,.12)"},sn={fontSize:"1.05rem",margin:"0 0 1rem",lineHeight:1.35},es={fontSize:".8rem",margin:"0 0 1.25rem",lineHeight:1.6,color:"#475569"},rn={display:"inline-flex",alignItems:"center",gap:".4rem",background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",padding:".65rem 1rem",borderRadius:10,textDecoration:"none",fontSize:".75rem",fontWeight:600},nn={display:"inline-block",fontSize:".7rem",marginTop:".5rem",color:"#69be3c",textDecoration:"none",fontWeight:600};async function ge(t,s={}){let r="/api";try{const l=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(l&&l.startsWith("/"))r=l;else if(typeof window<"u"&&/^https?:\/\//i.test(l)){const g=new URL(l);g.origin===window.location.origin&&(r=g.pathname||"/api")}}catch{}let o=null;try{o=localStorage.getItem("my_store_token")}catch{}const a={"Content-Type":"application/json",...s.headers||{}};o&&(a.Authorization=`Bearer ${o}`);const n=await fetch(r+t,{...s,headers:a});let d=null;try{d=await n.json()}catch{}if(!n.ok){const l=new Error(d?.error||n.statusText||"REQUEST_FAILED");throw l.status=n.status,l.body=d,l}return d}const ke={listUsers:(t={})=>{const s=new URLSearchParams,r=t.page||1,o=t.pageSize||1e3;return s.set("page",r),s.set("pageSize",o),ge("/admin/users"+(s.toString()?`?${s.toString()}`:""))},createUser:t=>ge("/admin/users",{method:"POST",body:JSON.stringify(t)}),updateUser:(t,s)=>ge("/admin/users/"+t,{method:"PATCH",body:JSON.stringify(s)}),deleteUser:t=>ge("/admin/users/"+t,{method:"DELETE"}),activateUser:t=>ge(`/admin/users/${t}/activate`,{method:"POST"}),deactivateUser:t=>ge(`/admin/users/${t}/deactivate`,{method:"POST"}),listAudit:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,o)}),ge("/admin/audit"+(s.toString()?`?${s.toString()}`:""))},listOrders:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,o)}),ge("/orders"+(s.toString()?`?${s.toString()}`:""))},statsOverview:()=>ge("/admin/stats/overview"),statsFinancials:(t={})=>{const s=new URLSearchParams;return Object.entries(t).forEach(([r,o])=>{o!=null&&o!==""&&s.append(r,o)}),ge("/admin/stats/financials"+(s.toString()?`?${s.toString()}`:""))},exportOrdersCsv:(t={})=>{const s=new URLSearchParams;Object.entries(t).forEach(([n,d])=>{d!=null&&d!==""&&s.append(n,d)});let r="/api";try{const n=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(n&&n.startsWith("/"))r=n;else if(typeof window<"u"&&/^https?:\/\//i.test(n)){const d=new URL(n);d.origin===window.location.origin&&(r=d.pathname||"/api")}}catch{}let o=null;try{o=localStorage.getItem("my_store_token")}catch{}const a={};return o&&(a.Authorization=`Bearer ${o}`),fetch(r+"/admin/stats/orders/export/csv"+(s.toString()?`?${s.toString()}`:""),{headers:a}).then(n=>n.text())},exportOrdersXlsx:(t={})=>{const s=new URLSearchParams;Object.entries(t).forEach(([n,d])=>{d!=null&&d!==""&&s.append(n,d)});let r="/api";try{const n=typeof import.meta<"u"&&"https://my-store-backend-production.up.railway.app/api"||"";if(n&&n.startsWith("/"))r=n;else if(typeof window<"u"&&/^https?:\/\//i.test(n)){const d=new URL(n);d.origin===window.location.origin&&(r=d.pathname||"/api")}}catch{}let o=null;try{o=localStorage.getItem("my_store_token")}catch{}const a={};return o&&(a.Authorization=`Bearer ${o}`),fetch(r+"/admin/stats/orders/export/xlsx"+(s.toString()?`?${s.toString()}`:""),{headers:a}).then(n=>n.blob())},panel:()=>ge("/admin/panel")},an={minWidth:200,alignSelf:"flex-start",position:"sticky",top:12,background:"#fff",border:"1px solid #e2e8f0",borderRadius:12,padding:".5rem",boxShadow:"0 4px 14px -6px rgba(0,0,0,.06)"},Be={fontSize:".7rem",fontWeight:700,color:"#64748b",padding:".25rem .5rem",margin:".25rem 0"},ce={display:"block",textDecoration:"none",color:"#0f172a",padding:".5rem .6rem",borderRadius:8,fontSize:".8rem"},ue={...ce,background:"#f1f5f9",fontWeight:600};function As(){const t=pe(),s=t.pathname,o=new URLSearchParams(t.search||"").get("view")||"overview",a=s.startsWith("/en")?"/en":s.startsWith("/fr")?"/fr":"",n=g=>s===g,d=s===`${a}/admin`||s===`${a}/admin/`,l=g=>d&&o===(g||"overview");return e.jsxs("nav",{style:an,"aria-label":"Admin navigation",children:[e.jsx("div",{style:Be,children:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"}),e.jsx("a",{href:`${a}/admin`,style:l("overview")?ue:ce,children:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"}),e.jsx("div",{style:Be,children:"Ø§Ù„Ø£Ø´Ø®Ø§Øµ"}),e.jsx("a",{href:`${a}/admin/users`,style:n(`${a}/admin/users`)?ue:ce,children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† (Ø§Ù„Ø·Ø§Ù‚Ù…)"}),e.jsx("a",{href:`${a}/admin/customers`,style:n(`${a}/admin/customers`)?ue:ce,children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"}),e.jsx("div",{style:Be,children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("a",{href:`${a}/admin?view=products`,style:l("products")?ue:ce,children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsx("a",{href:`${a}/admin?view=orders`,style:l("orders")?ue:ce,children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("a",{href:`${a}/admin?view=audit`,style:l("audit")?ue:ce,children:"Ø§Ù„Ø³Ø¬Ù„Ø§Øª"}),e.jsx("a",{href:`${a}/admin?view=reviews`,style:l("reviews")?ue:ce,children:"Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª"}),e.jsx("a",{href:`${a}/admin?view=brands`,style:l("brands")?ue:ce,children:"Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª"}),e.jsx("a",{href:`${a}/admin?view=offers`,style:l("offers")?ue:ce,children:"Ø§Ù„Ø¹Ø±ÙˆØ¶"}),e.jsx("a",{href:`${a}/admin?view=ads`,style:l("ads")?ue:ce,children:"Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"}),e.jsx("a",{href:`${a}/admin?view=marketing`,style:l("marketing")?ue:ce,children:"Ø§Ù„ØªØ³ÙˆÙŠÙ‚"}),e.jsx("a",{href:`${a}/admin?view=settings`,style:l("settings")?ue:ce,children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"}),e.jsx("a",{href:`${a}/admin?view=cats`,style:l("cats")?ue:ce,children:"Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª"})]})}const Re={padding:".55rem .75rem",border:"1px solid #e2e8f0",borderRadius:10,minWidth:160,fontSize:".8rem",background:"#fff"},Pe={display:"inline-flex",alignItems:"center",gap:".4rem",border:0,background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",padding:".6rem .95rem",borderRadius:10,cursor:"pointer",fontSize:".75rem",fontWeight:600},Te={...Pe,background:"#f1f5f9",color:"#334155"},_e={background:"#f1f5f9",border:0,width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8,cursor:"pointer",color:"#0f172a"},ts={..._e,background:"#fee2e2",color:"#b91c1c"},on={width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:14,overflow:"hidden",boxShadow:"0 4px 14px -6px rgba(0,0,0,.06)"},ln={display:"flex",gap:".35rem",alignItems:"center"},cn={textAlign:"center",padding:"1rem",fontSize:".75rem",color:"#64748b"};function qe(){const{user:t}=ve()||{},s=t?.role==="admin",[r,o]=i.useState(!1),[a,n]=i.useState(null),[d,l]=i.useState([]),[g,k]=i.useState(0),[x,j]=i.useState(1),[p,u]=i.useState(20),[m,A]=i.useState(""),[$,b]=i.useState(""),[U,L]=i.useState(!0),[v,D]=i.useState(""),[C,T]=i.useState({id:null,name:"",email:"",phone:"",role:"admin",active:!0,password:"",sendInvite:!0}),[W,_]=i.useState(!1),V=x*p<Math.max(g,0),M=x>1,c=async()=>{o(!0),n(null);try{const y=await ke.listUsers({page:1,pageSize:p}),F=Array.isArray(y)?y:y?.users||[];l(F),k(F.length)}catch(y){n(y.message)}finally{o(!1)}};i.useEffect(()=>{s&&c()},[s]);const h=i.useMemo(()=>{const y=m.trim().toLowerCase();return d.filter(F=>!(U&&F.role==="user"||y&&!((F.name||"").toLowerCase().includes(y)||(F.email||"").toLowerCase().includes(y)||(F.phone||"").toLowerCase().includes(y))||$&&F.role!==$||v==="1"&&F.active===!1||v==="0"&&F.active!==!1))},[d,m,$,v,U]),E=i.useMemo(()=>{const y=(x-1)*p;return h.slice(y,y+p)},[h,x,p]),O=()=>T({id:null,name:"",email:"",phone:"",role:"admin",active:!0,password:"",sendInvite:!0}),f=async y=>{y.preventDefault(),_(!0),n(null);try{if(C.id){const F={name:C.name,role:C.role,phone:C.phone},Q=await ke.updateUser(C.id,F),Y=Q?.user||Q;l(ee=>ee.map(ie=>ie.id===Y.id?{...ie,...Y}:ie))}else{const F={email:C.email,name:C.name||null,phone:C.phone||null,role:C.role,sendInvite:!!C.sendInvite};F.sendInvite||(F.password=C.password);const Q=await ke.createUser(F),Y=Q?.user||Q;l(ee=>[{...Y,active:!0},...ee])}O(),await c()}catch(F){n(F.message)}finally{_(!1)}},z=async y=>{if(window.confirm("Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ"))try{await ke.deleteUser(y),l(F=>F.filter(Q=>Q.id!==y))}catch(F){alert("ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù: "+F.message)}},N=async(y,F)=>{try{F?await ke.activateUser(y.id):await ke.deactivateUser(y.id),l(Q=>Q.map(Y=>Y.id===y.id?{...Y,active:!!F}:Y))}catch(Q){alert("ÙØ´Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: "+Q.message)}};return s?e.jsxs("div",{style:{direction:"rtl",padding:"1.25rem 0",fontSize:".85rem"},children:[e.jsx("h1",{style:{margin:"0 0 1rem",fontSize:"1.4rem",fontWeight:700},children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:16},children:[e.jsx(As,{}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[e.jsx("input",{placeholder:"Ø¨Ø­Ø« (Ø§Ø³Ù…/Ø¥ÙŠÙ…ÙŠÙ„/Ù‡Ø§ØªÙ)",value:m,onChange:y=>A(y.target.value),style:Re}),e.jsxs("select",{value:$,onChange:y=>{b(y.target.value),j(1)},style:Re,children:[e.jsx("option",{value:"",children:"ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±"}),e.jsx("option",{value:"user",children:"Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("option",{value:"seller",children:"Ø¨Ø§Ø¦Ø¹"}),e.jsx("option",{value:"delivery",children:"Ù…ÙˆØµÙ„"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"})]}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:".8rem",padding:".45rem .6rem",background:"#fff",border:"1px solid #e2e8f0",borderRadius:10},children:[e.jsx("input",{type:"checkbox",checked:U,onChange:y=>{L(y.target.checked),j(1)}})," Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø·Ø§Ù‚Ù… ÙÙ‚Ø· (Ù…Ø¯Ø±Ø§Ø¡/Ø¨Ø§Ø¦Ø¹ÙŠÙ†)"]}),e.jsxs("select",{value:v,onChange:y=>{D(y.target.value),j(1)},style:Re,children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"1",children:"Ù…ÙØ¹Ù„"}),e.jsx("option",{value:"0",children:"Ù…ÙˆÙ‚ÙˆÙ"})]}),e.jsx("select",{value:p,onChange:y=>{u(+y.target.value||20),j(1)},style:Re,children:[10,20,50,100].map(y=>e.jsxs("option",{value:y,children:[y," / ØµÙØ­Ø©"]},y))}),e.jsx("button",{type:"button",onClick:c,style:Te,children:"ØªØ­Ø¯ÙŠØ«"}),r&&e.jsx("span",{style:{fontSize:".7rem",color:"#64748b"},children:"...ØªØ­Ù…ÙŠÙ„"}),a&&e.jsxs("span",{style:{fontSize:".7rem",color:"#b91c1c"},children:["Ø®Ø·Ø£: ",a]})]}),e.jsxs("form",{onSubmit:f,style:{background:"#fff",padding:"1rem",borderRadius:12,boxShadow:"0 4px 14px -6px rgba(0,0,0,.08)",display:"grid",gap:10,marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:".95rem"},children:C.id?"ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…":"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit,minmax(160px,1fr))"},children:[!C.id&&e.jsxs(e.Fragment,{children:[e.jsx("input",{placeholder:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",required:!0,value:C.email,onChange:y=>T(F=>({...F,email:y.target.value}))}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:".8rem"},children:[e.jsx("input",{type:"checkbox",checked:!!C.sendInvite,onChange:y=>T(F=>({...F,sendInvite:y.target.checked}))})," Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"]}),!C.sendInvite&&e.jsx("input",{placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",required:!C.sendInvite,type:"password",value:C.password,onChange:y=>T(F=>({...F,password:y.target.value}))})]}),e.jsx("input",{placeholder:"Ø§Ù„Ø§Ø³Ù…",value:C.name,onChange:y=>T(F=>({...F,name:y.target.value}))}),e.jsx("input",{placeholder:"Ø§Ù„Ù‡Ø§ØªÙ",value:C.phone,onChange:y=>T(F=>({...F,phone:y.target.value}))}),e.jsxs("select",{value:C.role,onChange:y=>T(F=>({...F,role:y.target.value})),children:[e.jsx("option",{value:"user",children:"Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("option",{value:"seller",children:"Ø¨Ø§Ø¦Ø¹"}),e.jsx("option",{value:"delivery",children:"Ù…ÙˆØµÙ„"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"})]}),C.id&&e.jsxs("select",{value:C.active?"1":"0",onChange:y=>T(F=>({...F,active:y.target.value==="1"})),children:[e.jsx("option",{value:"1",children:"Ù…ÙØ¹Ù„"}),e.jsx("option",{value:"0",children:"Ù…ÙˆÙ‚ÙˆÙ"})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx("button",{type:"submit",disabled:W,style:Pe,children:C.id?"Ø­ÙØ¸":"Ø¥Ø¶Ø§ÙØ©"}),C.id&&e.jsx("button",{type:"button",onClick:()=>O(),style:Te,children:"Ø¥Ù„ØºØ§Ø¡"})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:on,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„"}),e.jsx("th",{children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{children:"Ø§Ù„Ø¯ÙˆØ±"}),e.jsx("th",{children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{children:"Ø¥Ù†Ø´Ø§Ø¡"}),e.jsx("th",{children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsxs("tbody",{children:[E.map(y=>e.jsxs("tr",{children:[e.jsx("td",{children:y.name||"â€”"}),e.jsx("td",{style:{fontSize:".75rem"},children:y.email}),e.jsx("td",{style:{fontSize:".75rem"},children:y.phone||"â€”"}),e.jsx("td",{children:y.role}),e.jsx("td",{children:y.active===!1?"Ù…ÙˆÙ‚ÙˆÙ":"Ù…ÙØ¹Ù„"}),e.jsx("td",{children:y.createdAt?new Date(y.createdAt).toLocaleDateString():"â€”"}),e.jsxs("td",{style:ln,children:[e.jsx("button",{title:"ØªØ¹Ø¯ÙŠÙ„",onClick:()=>T({id:y.id,name:y.name||"",email:y.email||"",phone:y.phone||"",role:y.role||"user",active:y.active!==!1,sendInvite:!1,password:""}),style:_e,children:"âœŽ"}),y.role!=="delivery"&&e.jsx("button",{title:"ØªØ¹ÙŠÙŠÙ† ÙƒÙ…ÙˆØµÙ„",onClick:async()=>{try{await ke.updateUser(y.id,{role:"delivery"}),c()}catch(F){alert("ÙØ´Ù„ Ø§Ù„ØªØ¹ÙŠÙŠÙ†: "+F.message)}},style:_e,children:"ðŸšš"}),y.active===!1?e.jsx("button",{title:"ØªÙØ¹ÙŠÙ„",onClick:()=>N(y,!0),style:_e,children:"âœ“"}):e.jsx("button",{title:"Ø¥ÙŠÙ‚Ø§Ù",onClick:()=>N(y,!1),style:ts,children:"â¸"}),e.jsx("button",{title:"Ø­Ø°Ù",onClick:()=>z(y.id),style:ts,children:"ðŸ—‘"})]})]},y.id)),!E.length&&!r&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:cn,children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})})]})]})}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",marginTop:10},children:[e.jsx("button",{disabled:!M,onClick:()=>j(y=>Math.max(1,y-1)),style:M?Pe:Te,children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{style:{fontSize:".7rem"},children:["ØµÙØ­Ø© ",x," / ",Math.max(1,Math.ceil(h.length/p))]}),e.jsx("button",{disabled:!V,onClick:()=>j(y=>y+1),style:V?Pe:Te,children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})]}):e.jsxs("div",{style:{direction:"rtl",padding:"2rem",maxWidth:520,margin:"2rem auto",background:"#fff",border:"1px solid #e2e8f0",borderRadius:16,boxShadow:"0 6px 28px -8px rgba(0,0,0,.12)"},children:[e.jsx("h2",{style:{marginTop:0,fontSize:"1.1rem"},children:"ðŸš« ØµÙ„Ø§Ø­ÙŠØ§Øª ØºÙŠØ± ÙƒØ§ÙÙŠØ©"}),e.jsx("p",{style:{fontSize:".75rem",lineHeight:1.7,color:"#475569"},children:"Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù…ØªØ§Ø­Ø© Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·."}),e.jsx("a",{href:"/",style:{display:"inline-block",marginTop:12,fontSize:".7rem",fontWeight:600,color:"#69be3c",textDecoration:"none"},children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})}const be=(t,s,r="name")=>{try{if(!s)return;const o=`${r}="${t}"`;let a=document.head.querySelector(`[${r}="${t}"]`);a||(a=document.createElement("meta"),a.setAttribute(r,t),document.head.appendChild(a)),a.setAttribute("content",s)}catch{}},Ee=({title:t,description:s,image:r,url:o})=>{const{setting:a}=Ae()||{};return i.useEffect(()=>{const n=a?.siteNameAr||a?.siteNameEn||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",d=t||n;document.title=d,be("description",s,"name"),be("og:title",d,"property"),be("og:description",s,"property"),r&&(be("og:image",r,"property"),be("twitter:image",r,"name")),o&&be("og:url",o,"property"),be("twitter:card",r?"summary_large_image":"summary","name"),be("twitter:title",d,"name"),s&&be("twitter:description",s,"name"),be("og:site_name",n,"property")},[t,s,r,o,a?.siteNameAr,a?.siteNameEn]),null};function dn(){const[t,s]=R.useState(null),[r,o]=R.useState(!0),[a,n]=R.useState(null);return R.useEffect(()=>{let d=!0;return(async()=>{o(!0),n(null);try{const l=await K.adminStatsOverview();if(!d)return;s(l?.stats||null)}catch(l){if(!d)return;n(l.message||"Failed")}finally{d&&o(!1)}})(),()=>{d=!1}},[]),{data:t,loading:r,error:a}}function ss({points:t=[],width:s=280,height:r=60,stroke:o="#111827",fill:a="rgba(17,24,39,0.08)"}){const n=R.useRef(null);return R.useEffect(()=>{const d=n.current;if(!d)return;const l=d.getContext("2d");if(l.clearRect(0,0,s,r),!t.length)return;t.map((m,A)=>A);const g=t.map(m=>m),k=Math.min(...g),x=Math.max(...g),j=6,p=m=>j+m/(t.length-1)*(s-j*2),u=m=>{const A=x-k||1;return r-j-(m-k)/A*(r-j*2)};l.beginPath(),l.moveTo(p(0),u(t[0]));for(let m=1;m<t.length;m++)l.lineTo(p(m),u(t[m]));l.strokeStyle=o,l.lineWidth=2,l.stroke(),l.lineTo(p(t.length-1),r-j),l.lineTo(p(0),r-j),l.closePath(),l.fillStyle=a,l.fill()},[t,s,r,o,a]),e.jsx("canvas",{ref:n,width:s,height:r,style:{width:s,height:r}})}const un=[{key:"7",label:"7 Ø£ÙŠØ§Ù…"},{key:"14",label:"14 ÙŠÙˆÙ…"},{key:"30",label:"30 ÙŠÙˆÙ…"}],Ve=()=>{const{data:t,loading:s,error:r}=dn(),[o,a]=R.useState("7"),[n,d]=R.useState(()=>new Date(Date.now()-6*864e5).toISOString().slice(0,10)),[l,g]=R.useState(()=>new Date().toISOString().slice(0,10)),[k,x]=R.useState([]),[j,p]=R.useState([]),[u,m]=R.useState(!1),[A,$]=R.useState(null),[b,U]=R.useState(""),[L,v]=R.useState(""),[D,C]=R.useState({totalOrders:0,totalRevenue:0,avgOrder:0,byStatus:{},byMethod:{},topProducts:[]}),T=R.useCallback(async()=>{m(!0),$(null);try{const c={from:n,to:l,page:1,pageSize:500};b&&(c.status=b),L&&(c.paymentMethod=L);const E=(await K.listOrdersAdmin(c))?.orders||[],O=new Date(n),f=new Date(l),z=Math.max(1,Math.round((f-O)/864e5)+1),N=new Map,y=new Map;for(let se=0;se<z;se++){const le=new Date(O);le.setDate(O.getDate()+se);const X=le.toISOString().slice(0,10);N.set(X,0),y.set(X,0)}let F=0;const Q={},Y={},ee=new Map;for(const se of E){F+=se.grandTotal||0,Q[se.status]=(Q[se.status]||0)+1;const le=se.paymentMethod||"unknown";Y[le]=(Y[le]||0)+1;const X=new Date(se.createdAt).toISOString().slice(0,10);N.has(X)&&N.set(X,(N.get(X)||0)+(se.grandTotal||0)),y.has(X)&&y.set(X,(y.get(X)||0)+1),(se.items||[]).forEach(Z=>{const w=Z.productId||Z.name?.ar||Z.name?.en||"Ù…Ù†ØªØ¬",B=ee.get(w)||{name:Z.name?.ar||Z.name?.en||w,qty:0,revenue:0};B.qty+=Z.quantity||0,B.revenue+=(Z.price||0)*(Z.quantity||0),ee.set(w,B)})}const ie=E.length,ae=ie?F/ie:0,ye=Array.from(ee.values()).sort((se,le)=>le.revenue-se.revenue).slice(0,10);C({totalOrders:ie,totalRevenue:F,avgOrder:ae,byStatus:Q,byMethod:Y,topProducts:ye}),x(Array.from(N.values())),p(Array.from(y.values()))}catch(c){$(c.message||"Failed to load analytics")}finally{m(!1)}},[n,l,b,L]);R.useEffect(()=>{T()},[T]);const W=c=>{a(c);const h=Number(c),E=new Date,O=new Date;O.setDate(E.getDate()-(h-1)),d(O.toISOString().slice(0,10)),g(E.toISOString().slice(0,10))},_="https://my-store-backend-production.up.railway.app/api",V=c=>{const h=new URLSearchParams;return n&&h.set("from",n),l&&h.set("to",l),b&&h.set("status",b),L&&h.set("paymentMethod",L),`${_}/admin/stats/orders/export/${c}?${h.toString()}`},M=async c=>{let h=null;try{h=localStorage.getItem("my_store_token")}catch{}const E={};h&&(E.Authorization=`Bearer ${h}`);const O=await fetch(V(c),{headers:E});if(!O.ok)throw new Error(`Export failed: ${O.status}`);const f=await O.blob(),z=URL.createObjectURL(f),N=document.createElement("a");N.href=z,N.download=c==="csv"?"orders_export.csv":"orders_export.xlsx",document.body.appendChild(N),N.click(),N.remove(),URL.revokeObjectURL(z)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ee,{title:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± | Reports",description:"Reports overview"}),e.jsx("h1",{className:"page-title",children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± / Reports"}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsx("div",{style:{fontSize:28,fontWeight:700},children:t?.todayOrders??0})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙŠÙˆÙ…"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsxs("div",{style:{fontSize:28,fontWeight:700},children:[(t?.todayRevenue??0).toFixed?.(2)||0," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsxs("div",{style:{fontSize:28,fontWeight:700},children:[(t?.avgOrderValueToday??0).toFixed?.(2)||0," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),s?e.jsx("div",{children:"..."}):r?e.jsx("div",{className:"error",children:String(r)}):e.jsx("div",{style:{fontSize:28,fontWeight:700},children:t?.pendingBankCount??0})]})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("strong",{children:"Ø§Ù„ÙØªØ±Ø©:"}),un.map(c=>e.jsx("button",{onClick:()=>W(c.key),className:o===c.key?"btn btn-primary":"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:o===c.key?"#111827":"#fff",color:o===c.key?"#fff":"#111"},children:c.label},c.key)),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:n,onChange:c=>d(c.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:l,onChange:c=>g(c.target.value)})]}),e.jsxs("label",{children:["Ø§Ù„Ø­Ø§Ù„Ø©:",e.jsxs("select",{value:b,onChange:c=>U(c.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"pending",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("option",{value:"processing",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}),e.jsx("option",{value:"paid",children:"Ù…Ø¯ÙÙˆØ¹"}),e.jsx("option",{value:"shipped",children:"ØªÙ… Ø§Ù„Ø´Ø­Ù†"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙŠ"})]})]}),e.jsxs("label",{children:["Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:",e.jsxs("select",{value:L,onChange:c=>v(c.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"}),e.jsx("option",{value:"cod",children:"Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("option",{value:"stc",children:"STC Pay"})]})]}),e.jsx("button",{onClick:()=>T(),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØ­Ø¯ÙŠØ«"})]}),e.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{onClick:()=>M("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV"}),e.jsx("button",{onClick:()=>M("xlsx"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± Excel"})]})]}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„ÙØªØ±Ø©)"}),u?e.jsx("div",{children:"..."}):A?e.jsx("div",{className:"error",children:String(A)}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:D.totalOrders})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (Ø§Ù„ÙØªØ±Ø©)"}),u?e.jsx("div",{children:"..."}):A?e.jsx("div",{className:"error",children:String(A)}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[D.totalRevenue.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨ (Ø§Ù„ÙØªØ±Ø©)"}),u?e.jsx("div",{children:"..."}):A?e.jsx("div",{className:"error",children:String(A)}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[D.avgOrder.toFixed(2)," SAR"]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0},children:["Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ù…Ù† ",n," Ø¥Ù„Ù‰ ",l,")"]}),u?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):A?e.jsx("span",{className:"error",children:String(A)}):null]}),e.jsxs("div",{style:{marginTop:8,display:"grid",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsx(ss,{points:k,width:560,height:100})]}),e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(ss,{points:j,width:560,height:70,stroke:"#0ea5e9",fill:"rgba(14,165,233,0.12)"})]})]}),e.jsxs("div",{className:"muted",style:{marginTop:8,display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯: ",k.reduce((c,h)=>c+h,0).toFixed(2)," SAR"]}),e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ",j.reduce((c,h)=>c+h,0)]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©"}),u?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(D.byStatus).sort((c,h)=>h[1]-c[1]).map(([c,h])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:c}),e.jsx("td",{style:{textAlign:"end"},children:h})]},c)),Object.keys(D.byStatus).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),u?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(D.byMethod).sort((c,h)=>h[1]-c[1]).map(([c,h])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:c}),e.jsx("td",{style:{textAlign:"end"},children:h})]},c)),Object.keys(D.byMethod).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),u?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("th",{children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[D.topProducts.map((c,h)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:c.name}),e.jsx("td",{style:{textAlign:"center"},children:c.qty}),e.jsxs("td",{style:{textAlign:"end"},children:[c.revenue.toFixed(2)," SAR"]})]},h)),D.topProducts.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]})]})};function mn(t,s,r){const[o,a]=R.useState({orders:[],total:0,page:1,totalPages:1}),[n,d]=R.useState(!1),[l,g]=R.useState(null);return R.useEffect(()=>{let k=!0;return(async()=>{d(!0),g(null);try{const x={status:"pending_bank_review",paymentMethod:"bank",page:r||1,pageSize:50};t&&(x.from=t),s&&(x.to=s);const j=await K.listOrdersAdmin(x);if(!k)return;a({orders:j.orders||[],total:j.total||(j.orders||[]).length,page:j.page||1,totalPages:j.totalPages||1})}catch(x){if(!k)return;g(x.message||"Failed to load")}finally{k&&d(!1)}})(),()=>{k=!1}},[t,s,r]),{...o,loading:n,error:l}}const pn=({o:t,onConfirm:s,onReject:r})=>{const a=(t.paymentMeta||{}).bank||{},n=a.receiptUrl,d=a.reference,[l,g]=R.useState("");return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontFamily:"monospace",fontSize:12},children:t.id}),e.jsx("div",{className:"muted",children:new Date(t.createdAt).toLocaleString()})]}),e.jsx("td",{children:t.userId}),e.jsxs("td",{children:[t.grandTotal?.toFixed?.(2)||t.grandTotal," ",t.currency||"SAR"]}),e.jsxs("td",{children:[n?e.jsx("a",{href:n,target:"_blank",rel:"noreferrer",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±ÙÙ‚"}):e.jsx("span",{className:"muted",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯"}),e.jsxs("div",{className:"muted",children:["Ø§Ù„Ù…Ø±Ø¬Ø¹: ",d||"â€”"]})]}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>s(t.id,d),className:"btn",style:{padding:"6px 10px",border:"1px solid #0a0",color:"#0a0",borderRadius:6},children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹"}),e.jsx("input",{type:"text",value:l,onChange:k=>g(k.target.value),placeholder:"Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",style:{minWidth:180}}),e.jsx("button",{onClick:()=>r(t.id,l),className:"btn",style:{padding:"6px 10px",border:"1px solid #a00",color:"#a00",borderRadius:6},children:"Ø±ÙØ¶"})]})})]})},He=()=>{const[t,s]=R.useState(""),[r,o]=R.useState(""),[a,n]=R.useState(1),{orders:d,loading:l,error:g,total:k,totalPages:x}=mn(t,r,a),j=R.useCallback(()=>{n(1)},[]),p=async(m,A)=>{try{await K.bankConfirm(m,A),j(),alert("ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯")}catch($){alert($.message||"ÙØ´Ù„ Ø§Ù„ØªØ£ÙƒÙŠØ¯")}},u=async(m,A)=>{if(window.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±ÙØ¶ØŸ"))try{await K.bankReject(m,A||void 0),j(),alert("ØªÙ… Ø§Ù„Ø±ÙØ¶")}catch($){alert($.message||"ÙØ´Ù„ Ø§Ù„Ø±ÙØ¶")}};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ee,{title:"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©",description:"Bank transfers review"}),e.jsx("h1",{className:"page-title",children:"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",margin:"8px 0",flexWrap:"wrap"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:t,onChange:m=>s(m.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:r,onChange:m=>o(m.target.value)})]}),e.jsx("button",{onClick:()=>n(1),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØ·Ø¨ÙŠÙ‚"})]}),e.jsxs("div",{className:"card",style:{padding:0,border:"1px solid #eee",borderRadius:8},children:[e.jsxs("div",{style:{padding:12,borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("strong",{children:["Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©: ",k]}),l?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):g?e.jsx("span",{className:"error",children:String(g)}):null]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"right",background:"#fafafa"},children:[e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ù…Ø±ÙÙ‚/Ø§Ù„Ù…Ø±Ø¬Ø¹"}),e.jsx("th",{style:{padding:8,borderBottom:"1px solid #eee"},children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡"})]})}),e.jsxs("tbody",{children:[d.map(m=>e.jsx(pn,{o:m,onConfirm:p,onReject:u},m.id)),!l&&d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{padding:16},className:"muted",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©."})})]})]})}),x>1&&e.jsxs("div",{style:{padding:12,display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid #eee"},children:[e.jsx("button",{disabled:a<=1,onClick:()=>n(m=>Math.max(1,m-1)),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsxs("span",{className:"muted",children:["ØµÙØ­Ø© ",a," Ù…Ù† ",x]}),e.jsx("button",{disabled:a>=x,onClick:()=>n(m=>Math.min(x,m+1)),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})};function rs({points:t=[],width:s=560,height:r=100,stroke:o="#111827",fill:a="rgba(17,24,39,0.08)"}){const n=R.useRef(null);return R.useEffect(()=>{const d=n.current;if(!d)return;const l=d.getContext("2d");if(l.clearRect(0,0,s,r),!t.length)return;t.map((m,A)=>A);const g=t.map(m=>m),k=Math.min(...g),x=Math.max(...g),j=6,p=m=>j+m/(t.length-1)*(s-j*2),u=m=>{const A=x-k||1;return r-j-(m-k)/A*(r-j*2)};l.beginPath(),l.moveTo(p(0),u(t[0]));for(let m=1;m<t.length;m++)l.lineTo(p(m),u(t[m]));l.strokeStyle=o,l.lineWidth=2,l.stroke(),l.lineTo(p(t.length-1),r-j),l.lineTo(p(0),r-j),l.closePath(),l.fillStyle=a,l.fill()},[t,s,r,o,a]),e.jsx("canvas",{ref:n,width:s,height:r,style:{width:s,height:r}})}const hn=[{key:"7",label:"7 Ø£ÙŠØ§Ù…"},{key:"14",label:"14 ÙŠÙˆÙ…"},{key:"30",label:"30 ÙŠÙˆÙ…"}],Je=()=>{const[t,s]=R.useState("7"),[r,o]=R.useState(()=>new Date(Date.now()-6*864e5).toISOString().slice(0,10)),[a,n]=R.useState(()=>new Date().toISOString().slice(0,10)),[d,l]=R.useState(""),[g,k]=R.useState(""),[x,j]=R.useState(!1),[p,u]=R.useState(null),[m,A]=R.useState({totalOrders:0,totalRevenue:0,avgOrder:0,uniqueCustomers:0,byStatus:{},byMethod:{},topProducts:[],topCustomers:[]}),[$,b]=R.useState([]),[U,L]=R.useState([]),[v,D]=R.useState(null),C=h=>{s(h);const E=Number(h),O=new Date,f=new Date;f.setDate(O.getDate()-(E-1)),o(f.toISOString().slice(0,10)),n(O.toISOString().slice(0,10))},T=R.useCallback(async()=>{const h={from:r,to:a,page:1,pageSize:250};d&&(h.status=d),g&&(h.paymentMethod=g);const E=[],O=await K.listOrdersAdmin(h);(O?.orders||[]).forEach(z=>E.push(z));const f=O?.totalPages||1;for(let z=2;z<=Math.min(f,8);z++)((await K.listOrdersAdmin({...h,page:z}))?.orders||[]).forEach(y=>E.push(y));return E},[r,a,d,g]),W=R.useCallback(h=>{const E=new Date(r),O=new Date(a),f=Math.max(1,Math.round((O-E)/864e5)+1),z=new Map,N=new Map;for(let X=0;X<f;X++){const Z=new Date(E);Z.setDate(E.getDate()+X);const w=Z.toISOString().slice(0,10);z.set(w,0),N.set(w,0)}let y=0;const F={},Q={},Y=new Map,ee=new Map;for(const X of h){y+=X.grandTotal||0,F[X.status]=(F[X.status]||0)+1;const Z=X.paymentMethod||"unknown";Q[Z]=(Q[Z]||0)+1;const w=new Date(X.createdAt).toISOString().slice(0,10);z.has(w)&&z.set(w,(z.get(w)||0)+(X.grandTotal||0)),N.has(w)&&N.set(w,(N.get(w)||0)+1);const B=X.userId||"guest",re=ee.get(B)||{id:B,revenue:0,orders:0};re.revenue+=X.grandTotal||0,re.orders+=1,ee.set(B,re),(X.items||[]).forEach(oe=>{const ne=oe.productId||oe.name?.ar||oe.name?.en||"Ù…Ù†ØªØ¬",fe=Y.get(ne)||{name:oe.name?.ar||oe.name?.en||ne,qty:0,revenue:0};fe.qty+=oe.quantity||0,fe.revenue+=(oe.price||0)*(oe.quantity||0),Y.set(ne,fe)})}const ie=h.length,ae=ie?y/ie:0,ye=ee.size,se=Array.from(Y.values()).sort((X,Z)=>Z.revenue-X.revenue).slice(0,10),le=Array.from(ee.values()).sort((X,Z)=>Z.revenue-X.revenue).slice(0,10);A({totalOrders:ie,totalRevenue:y,avgOrder:ae,uniqueCustomers:ye,byStatus:F,byMethod:Q,topProducts:se,topCustomers:le}),b(Array.from(z.values())),L(Array.from(N.values()))},[r,a]),_=R.useCallback(async()=>{j(!0),u(null);try{const h=await T();W(h);const E=Math.max(1,Math.round((new Date(a)-new Date(r))/864e5)+1),O=await K.adminStatsFinancials({from:r,to:a,days:E});D(O)}catch(h){u(h.message||"Failed to load analytics")}finally{j(!1)}},[T,W]);R.useEffect(()=>{_()},[_]);const V="https://my-store-backend-production.up.railway.app/api",M=h=>{const E=new URLSearchParams;return r&&E.set("from",r),a&&E.set("to",a),d&&E.set("status",d),g&&E.set("paymentMethod",g),`${V}/admin/stats/orders/export/${h}?${E.toString()}`},c=async h=>{let E=null;try{E=localStorage.getItem("my_store_token")}catch{}const O={};E&&(O.Authorization=`Bearer ${E}`);const f=await fetch(M(h),{headers:O});if(!f.ok)throw new Error(`Export failed: ${f.status}`);const z=await f.blob(),N=URL.createObjectURL(z),y=document.createElement("a");y.href=N,y.download=h==="csv"?"analytics_orders.csv":"analytics_orders.xlsx",document.body.appendChild(y),y.click(),y.remove(),URL.revokeObjectURL(N)};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ee,{title:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª | Analytics",description:"Analytics overview"}),e.jsx("h1",{className:"page-title",children:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª / Analytics"}),p&&e.jsx("div",{className:"error",style:{marginTop:8},children:String(p)}),e.jsxs("div",{style:{marginTop:16,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("strong",{children:"Ø§Ù„ÙØªØ±Ø©:"}),hn.map(h=>e.jsx("button",{onClick:()=>C(h.key),className:t===h.key?"btn btn-primary":"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:t===h.key?"#111827":"#fff",color:t===h.key?"#fff":"#111"},children:h.label},h.key)),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:r,onChange:h=>o(h.target.value)})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:a,onChange:h=>n(h.target.value)})]}),e.jsxs("label",{children:["Ø§Ù„Ø­Ø§Ù„Ø©:",e.jsxs("select",{value:d,onChange:h=>l(h.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"pending",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("option",{value:"processing",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}),e.jsx("option",{value:"paid",children:"Ù…Ø¯ÙÙˆØ¹"}),e.jsx("option",{value:"shipped",children:"ØªÙ… Ø§Ù„Ø´Ø­Ù†"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙŠ"})]})]}),e.jsxs("label",{children:["Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:",e.jsxs("select",{value:g,onChange:h=>k(h.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"}),e.jsx("option",{value:"cod",children:"Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("option",{value:"stc",children:"STC Pay"})]})]}),e.jsx("button",{onClick:_,className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:x?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦":"ØªØ­Ø¯ÙŠØ«"})]}),e.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{onClick:()=>c("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV"}),e.jsx("button",{onClick:()=>c("xlsx"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± Excel"})]})]}),e.jsxs("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„ÙØªØ±Ø©)"}),x?e.jsx("div",{children:"..."}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:m.totalOrders})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (Ø§Ù„ÙØªØ±Ø©)"}),x?e.jsx("div",{children:"..."}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[m.totalRevenue.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨"}),x?e.jsx("div",{children:"..."}):e.jsxs("div",{style:{fontSize:24,fontWeight:700},children:[m.avgOrder.toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„ÙØ±ÙŠØ¯ÙˆÙ†"}),x?e.jsx("div",{children:"..."}):e.jsx("div",{style:{fontSize:24,fontWeight:700},children:m.uniqueCustomers})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0},children:["Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ù…Ù† ",r," Ø¥Ù„Ù‰ ",a,")"]}),x?e.jsx("span",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):null]}),e.jsxs("div",{style:{marginTop:8,display:"grid",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsx(rs,{points:$,width:560,height:100})]}),e.jsxs("div",{children:[e.jsx("div",{className:"muted",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(rs,{points:U,width:560,height:70,stroke:"#0ea5e9",fill:"rgba(14,165,233,0.12)"})]})]}),e.jsxs("div",{className:"muted",style:{marginTop:8,display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯: ",$.reduce((h,E)=>h+E,0).toFixed(2)," SAR"]}),e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: ",U.reduce((h,E)=>h+E,0)]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0},children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© (ØªØ¬Ù…ÙŠØ¹ÙŠ)"}),e.jsx("div",{style:{display:"flex",gap:8},children:e.jsx("button",{onClick:()=>c("csv"),className:"btn",style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV (Ø·Ù„Ø¨Ø§Øª)"})})]}),x?e.jsx("div",{className:"muted",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"}),e.jsxs("div",{style:{fontWeight:700,fontSize:22},children:[(v?.totals?.totalRevenue||0).toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("div",{style:{fontWeight:700,fontSize:22},children:v?.totals?.totalOrders||0})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨"}),e.jsxs("div",{style:{fontWeight:700,fontSize:22},children:[(v?.totals?.overallAov||0).toFixed(2)," SAR"]})]}),e.jsxs("div",{className:"card",style:{padding:12,border:"1px solid #f0f0f0",borderRadius:8},children:[e.jsx("div",{className:"muted",children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙˆÙ† (Ø§Ù„ÙØªØ±Ø©)"}),e.jsx("div",{style:{fontWeight:700,fontSize:22},children:v?.totals?.activeCustomersWindow||0})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))",gap:16,marginTop:12},children:[e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©"}),x?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(m.byStatus).sort((h,E)=>E[1]-h[1]).map(([h,E])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:h}),e.jsx("td",{style:{textAlign:"end"},children:E})]},h)),Object.keys(m.byStatus).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),x?e.jsx("div",{children:"..."}):e.jsx("table",{style:{width:"100%",fontSize:12},children:e.jsxs("tbody",{children:[Object.entries(m.byMethod).sort((h,E)=>E[1]-h[1]).map(([h,E])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:h}),e.jsx("td",{style:{textAlign:"end"},children:E})]},h)),Object.keys(m.byMethod).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),x?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("th",{children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[m.topProducts.map((h,E)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:h.name}),e.jsx("td",{style:{textAlign:"center"},children:h.qty}),e.jsxs("td",{style:{textAlign:"end"},children:[h.revenue.toFixed(2)," SAR"]})]},E)),m.topProducts.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]}),e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8,marginTop:12},children:[e.jsx("h3",{style:{marginTop:0},children:"Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯)"}),x?e.jsx("div",{children:"..."}):e.jsxs("table",{style:{width:"100%",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"start"},children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("th",{children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("th",{children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯"})]})}),e.jsxs("tbody",{children:[m.topCustomers.map((h,E)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 0"},children:h.id==="guest"?"Ø¶ÙŠÙ":h.id}),e.jsx("td",{style:{textAlign:"center"},children:h.orders}),e.jsxs("td",{style:{textAlign:"end"},children:[h.revenue.toFixed(2)," SAR"]})]},E)),m.topCustomers.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"muted",children:"Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª"})})]})]})]})]})};function fn(...t){return t.flatMap(s=>Array.isArray(s)?s:[s]).filter(Boolean).join(" ")}function ns({className:t,...s}){return e.jsx("div",{className:fn("animate-pulse rounded-md bg-gray-200/70 dark:bg-gray-800/60",t),...s})}const gn=({rows:t=8,cols:s=6})=>e.jsx("div",{role:"status","aria-live":"polite",className:"w-full",children:e.jsxs("table",{className:"w-full",style:{borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:Array.from({length:s}).map((r,o)=>e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #eee",textAlign:"start"},children:e.jsx(ns,{className:"h-4 w-24"})},o))})}),e.jsx("tbody",{children:Array.from({length:t}).map((r,o)=>e.jsx("tr",{children:Array.from({length:s}).map((a,n)=>e.jsx("td",{style:{padding:"10px 8px",borderBottom:"1px solid #f8f8f8"},children:e.jsx(ns,{className:"h-4 w-32"})},n))},o))})]})}),Ke=()=>{const[t,s]=R.useState(""),[r,o]=R.useState("user"),[a,n]=R.useState(""),[d,l]=R.useState(""),[g,k]=R.useState(""),[x,j]=R.useState(!1),[p,u]=R.useState(null),[m,A]=R.useState([]),$=Bt?.()||{success:()=>{},error:()=>{},info:()=>{},warn:()=>{}},[b,U]=R.useState(1),[L,v]=R.useState(20),[D,C]=R.useState(0),[T,W]=R.useState(!1),[_,V]=R.useState({name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",sendInvite:!0,showPassword:!1}),[M,c]=R.useState(!1),[h,E]=R.useState(null),[O,f]=R.useState(""),z=R.useCallback(async()=>{j(!0),u(null);try{const P=await K.listUsers({page:b,pageSize:L}),J=P?.users||[];A(J),typeof P?.total=="number"&&C(P.total)}catch(P){u(P.message||"FAILED_USERS_LIST"),$.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",P.message)}finally{j(!1)}},[b,L]);R.useEffect(()=>{z()},[z]);const N=(P,J)=>V(H=>({...H,[P]:J})),y=P=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(P||"").trim()),F=()=>{const P="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$%^&*()_+";let J="";for(let H=0;H<12;H++)J+=P[Math.floor(Math.random()*P.length)];V(H=>({...H,password:J,confirmPassword:J,showPassword:!0,sendInvite:!1}))},Q=async P=>{P?.preventDefault?.(),E(null),f(""),c(!0);try{const J={email:(_.email||"").trim(),password:(_.sendInvite,_.password||""),name:(_.name||"").trim()||void 0,role:_.role,phone:(_.phone||"").trim()||void 0,sendInvite:!!_.sendInvite};if(!J.email||!y(J.email))throw new Error("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­");if(!_.sendInvite){if(!J.password||String(J.password).length<6)throw new Error("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 6 Ø£Ø­Ø±Ù");if(_.password!==_.confirmPassword)throw new Error("ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚")}const H=await K.adminUserCreate(J),te=H?.user;if(te){A(we=>[te,...we]),V({name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",sendInvite:!0,showPassword:!1}),W(!1),U(1);const Ce=H?.inviteSent?"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¯Ø¹ÙˆØ© Ø¨Ù†Ø¬Ø§Ø­":"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­";f(Ce),$.success("Ù†Ø¬Ø§Ø­",Ce),setTimeout(()=>f(""),3e3)}}catch(J){const H=String(J.message||"");let te=H;H.includes("EMAIL_EXISTS")&&(te="Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„"),H.includes("UNIQUE_CONSTRAINT")&&H.includes("phone")&&(te="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„"),E(te||"FAILED_CREATE_USER"),$.error("ÙØ´Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ©",te||"ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}finally{c(!1)}},Y=R.useMemo(()=>{let P=m;if(t){const J=t.toLowerCase();P=P.filter(H=>(H.name||"").toLowerCase().includes(J)||(H.email||"").toLowerCase().includes(J))}if(r&&(P=P.filter(J=>(J.role||"")===r)),a){const J=a==="active";P=P.filter(H=>(H.active??!0)===J)}if(d){const J=new Date(d);isNaN(J)||(P=P.filter(H=>new Date(H.createdAt)>=J))}if(g){const J=new Date(g);isNaN(J)||(J.setHours(23,59,59,999),P=P.filter(H=>new Date(H.createdAt)<=J))}return P},[m,t,r,d,g]),ee=Y.length,ie=D||ee,ae=Math.max(1,Math.ceil(ie/L)),ye=Math.min(b,ae),se=(ye-1)*L,le=(D?m:Y).slice(se,se+L),X=[{value:"user",label:"Ù…Ø³ØªØ®Ø¯Ù…",color:"#2563eb"},{value:"admin",label:"Ù…Ø¯ÙŠØ±",color:"#16a34a"},{value:"seller",label:"Ø¨Ø§Ø¦Ø¹",color:"#f59e42"}],[Z,w]=R.useState(null),[B,re]=R.useState(""),oe=async(P,J)=>{try{await K.adminUserUpdate(P,{role:J}),A(H=>H.map(te=>te.id===P?{...te,role:J}:te)),w(null)}catch(H){alert("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ±: "+H.message)}},ne=async P=>{if(window.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:
Ø§Ù„Ø§Ø³Ù…: ${P.name||"â€”"}
Ø§Ù„Ø¨Ø±ÙŠØ¯: ${P.email||""}
Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`))try{await K.adminUserDelete(P.id),A(J=>J.filter(H=>H.id!==P.id))}catch(J){alert("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: "+J.message)}},fe=()=>{const P=["id","name","email","role","createdAt"],J=Y.map(Se=>[Se.id,Se.name||"",Se.email||"",Se.role||"",Se.createdAt]),H=[P,...J].map(Se=>Se.map(Ts=>'"'+String(Ts).replace(/"/g,'""')+'"').join(",")).join(`
`),te=new Blob([H],{type:"text/csv;charset=utf-8;"}),Ce=URL.createObjectURL(te),we=document.createElement("a");we.href=Ce,we.download="customers.csv",document.body.appendChild(we),we.click(),we.remove(),URL.revokeObjectURL(Ce)};return e.jsxs("div",{className:"admin-page-wrapper",style:{direction:"rtl",padding:"1.25rem 0"},children:[e.jsx(Ee,{title:" Ø§Ø¯Ø§Ø±Ø©Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ | Customers",description:"Customers management"}),e.jsx("h1",{className:"page-title",children:"Ø§Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ / Customers"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:16},children:[e.jsx(As,{}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginTop:12,display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("input",{type:"search",placeholder:"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯â€¦",value:t,onChange:P=>{s(P.target.value),U(1)},style:{padding:"8px 10px",border:"1px solid #ddd",borderRadius:6,minWidth:240}}),e.jsxs("label",{children:["Ø§Ù„Ø¯ÙˆØ±:",e.jsxs("select",{value:r,onChange:P=>{o(P.target.value),U(1)},style:{marginInlineStart:8},children:[e.jsx("option",{value:"user",children:"Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("option",{value:"admin",children:"Ù…Ø¯ÙŠØ±"}),e.jsx("option",{value:"seller",children:"Ø¨Ø§Ø¦Ø¹"}),e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"})]})]}),e.jsxs("label",{children:["Ø§Ù„Ø­Ø§Ù„Ø©:",e.jsxs("select",{value:a,onChange:P=>{n(P.target.value),U(1)},style:{marginInlineStart:8},children:[e.jsx("option",{value:"",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"active",children:"Ù…ÙØ¹Ù„"}),e.jsx("option",{value:"inactive",children:"ØºÙŠØ± Ù…ÙØ¹Ù„"})]})]}),e.jsxs("label",{children:["Ù…Ù†: ",e.jsx("input",{type:"date",value:d,onChange:P=>{l(P.target.value),U(1)}})]}),e.jsxs("label",{children:["Ø¥Ù„Ù‰: ",e.jsx("input",{type:"date",value:g,onChange:P=>{k(P.target.value),U(1)}})]}),e.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8},children:[e.jsx("button",{className:"btn",onClick:z,disabled:x,style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:x?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«â€¦":"ØªØ­Ø¯ÙŠØ«"}),e.jsx("button",{className:"btn",onClick:fe,style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØµØ¯ÙŠØ± CSV"}),e.jsx("button",{className:"btn",onClick:()=>W(P=>!P),style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:"#2563eb",color:"#fff"},children:T?"Ø¥ØºÙ„Ø§Ù‚":"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…"})]})]}),T&&e.jsxs("form",{onSubmit:Q,className:"card",style:{padding:12,border:"1px solid #eee",borderRadius:8,marginTop:12,display:"grid",gap:12},children:[e.jsx("div",{style:{fontWeight:700},children:e.jsx("h2",{children:"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯"})}),h&&e.jsx("div",{className:"error",style:{color:"#b91c1c",background:"#fee2e2",border:"1px solid #fecaca",padding:8,borderRadius:6},children:String(h)}),O&&e.jsx("div",{className:"success",style:{color:"#065f46",background:"#d1fae5",border:"1px solid #a7f3d0",padding:8,borderRadius:6},children:String(O)}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:12},children:[e.jsxs("label",{children:["Ø§Ù„Ø§Ø³Ù…",e.jsx("input",{type:"text",value:_.name,onChange:P=>N("name",P.target.value),placeholder:"Ø§Ø®ØªÙŠØ§Ø±ÙŠ",style:{width:"100%"}})]}),e.jsxs("label",{children:["Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",e.jsx("input",{type:"email",value:_.email,onChange:P=>N("email",P.target.value),required:!0,style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:6},children:["ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("input",{type:_.showPassword?"text":"password",value:_.password,onChange:P=>N("password",P.target.value),disabled:_.sendInvite,minLength:_.sendInvite?0:6,style:{width:"100%"},placeholder:_.sendInvite?"Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±":""}),e.jsx("button",{type:"button",className:"btn",onClick:()=>N("showPassword",!_.showPassword),style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:_.showPassword?"Ø¥Ø®ÙØ§Ø¡":"Ø¥Ø¸Ù‡Ø§Ø±"}),e.jsx("button",{type:"button",className:"btn",onClick:F,disabled:_.sendInvite,style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªÙˆÙ„ÙŠØ¯"})]})]}),!_.sendInvite&&e.jsxs("label",{children:["ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",e.jsx("input",{type:_.showPassword?"text":"password",value:_.confirmPassword,onChange:P=>N("confirmPassword",P.target.value),minLength:6,style:{width:"100%"}})]}),e.jsxs("label",{children:["Ø§Ù„Ø¯ÙˆØ±",e.jsx("select",{value:_.role,onChange:P=>N("role",P.target.value),children:X.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))})]}),e.jsxs("label",{children:["Ø§Ù„Ø¬ÙˆØ§Ù„",e.jsx("input",{type:"tel",value:_.phone,onChange:P=>N("phone",P.target.value),placeholder:"Ø§Ø®ØªÙŠØ§Ø±ÙŠ"})]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:_.sendInvite,onChange:P=>N("sendInvite",P.target.checked)}),"Ø¥Ø±Ø³Ø§Ù„ Ø¯Ø¹ÙˆØ© Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù„ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"]}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn",onClick:()=>W(!1),style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{type:"submit",className:"btn",disabled:M,style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:"#16a34a",color:"#fff"},children:M?"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø¶Ø§ÙØ©â€¦":"Ø­ÙØ¸"})]})]}),e.jsx("div",{className:"cards",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16},children:[{label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",value:String(m.length)},{label:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙˆÙ†",value:"â€”"},{label:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡",value:String(m.filter(P=>P.role==="admin").length)},{label:"Ù…Ø³Ø¬Ù‘Ù„ÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±",value:String(m.filter(P=>new Date(P.createdAt).getMonth()===new Date().getMonth()&&new Date(P.createdAt).getFullYear()===new Date().getFullYear()).length)}].map((P,J)=>e.jsxs("div",{className:"card",style:{padding:16,border:"1px solid #eee",borderRadius:8},children:[e.jsx("div",{className:"muted",children:P.label}),e.jsx("div",{style:{fontSize:24,fontWeight:700},children:P.value}),e.jsx("div",{className:"muted",style:{fontSize:12},children:"Placeholder"})]},J))}),e.jsxs("div",{className:"card",style:{padding:0,border:"1px solid #eee",borderRadius:8,marginTop:16,overflow:"hidden"},"aria-busy":x?"true":"false","aria-live":"polite",children:[e.jsx("div",{style:{padding:12,borderBottom:"1px solid #eee",background:"#fafafa"},children:e.jsx("strong",{children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})}),e.jsxs("div",{style:{padding:12},children:[p&&e.jsx("div",{className:"error",style:{marginBottom:8},children:String(p)}),x?e.jsx(gn,{rows:Math.min(L,10),cols:6}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"start"},children:[e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #f0f0f0"},children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #f0f0f0"},children:"Ø§Ù„Ø¨Ø±ÙŠØ¯"}),e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #f0f0f0"},children:"Ø§Ù„Ø¯ÙˆØ±"}),e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #f0f0f0"},children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #f0f0f0"},children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…"}),e.jsx("th",{style:{padding:"8px",borderBottom:"1px solid #f0f0f0",textAlign:"end"},children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{children:le.length?le.map(P=>{const J=X.find(H=>H.value===P.role);return e.jsxs("tr",{style:{transition:"background 0.2s",cursor:"pointer"},onMouseOver:H=>H.currentTarget.style.background="#f3f4f6",onMouseOut:H=>H.currentTarget.style.background="",children:[e.jsxs("td",{style:{padding:"8px",borderBottom:"1px solid #f8f8f8",display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:P.avatarUrl||"https://ui-avatars.com/api/?name="+encodeURIComponent(P.name||"U")+"&background=eee&color=555&size=32",alt:"avatar",style:{width:32,height:32,borderRadius:"50%",border:"1px solid #ddd",objectFit:"cover"}}),P.name||"â€”"]}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #f8f8f8"},children:P.email}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #f8f8f8"},children:Z===P.id?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("select",{value:B,onChange:H=>re(H.target.value),children:X.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))}),e.jsx("button",{className:"btn",style:{padding:"2px 8px",fontSize:13},onClick:()=>oe(P.id,B),children:"Ø­ÙØ¸"}),e.jsx("button",{className:"btn",style:{padding:"2px 8px",fontSize:13},onClick:()=>w(null),children:"Ø¥Ù„ØºØ§Ø¡"})]}):e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{background:J?.color||"#ddd",color:"#fff",borderRadius:6,padding:"2px 10px",fontSize:13},children:J?.label||P.role}),e.jsx("button",{className:"btn",style:{padding:"2px 8px",fontSize:13},onClick:()=>{w(P.id),re(P.role)},children:"ØªØ¹Ø¯ÙŠÙ„"})]})}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #f8f8f8"},children:e.jsx("span",{style:{background:P.active??!0?"#dcfce7":"#fee2e2",color:P.active??!0?"#166534":"#991b1b",padding:"2px 10px",borderRadius:6,fontSize:13},children:P.active??!0?"Ù…ÙØ¹Ù„":"ØºÙŠØ± Ù…ÙØ¹Ù„"})}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #f8f8f8"},children:new Date(P.createdAt).toLocaleString("ar-EG",{dateStyle:"medium",timeStyle:"short"})}),e.jsxs("td",{style:{padding:"8px",borderBottom:"1px solid #f8f8f8",textAlign:"end",display:"flex",gap:8,justifyContent:"flex-end"},children:[P.active??!0?e.jsx("button",{className:"btn",onClick:async()=>{await K.adminUserDeactivate(P.id),A(H=>H.map(te=>te.id===P.id?{...te,active:!1}:te))},style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªØ¹Ø·ÙŠÙ„"}):e.jsx("button",{className:"btn",onClick:async()=>{await K.adminUserActivate(P.id),A(H=>H.map(te=>te.id===P.id?{...te,active:!0}:te))},style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"ØªÙØ¹ÙŠÙ„"}),e.jsx("button",{className:"btn",onClick:()=>ne(P),style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6,background:"#fff",color:"#d32f2f"},children:"Ø­Ø°Ù"})]})]},P.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"muted",style:{padding:"16px",textAlign:"center"},children:"Ù„Ø§ Ù†ØªØ§Ø¦Ø¬"})})})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",justifyContent:"space-between",marginTop:12},children:[e.jsxs("div",{className:"muted",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",ie," | Ø§Ù„ØµÙØ­Ø© ",ye," Ù…Ù† ",ae]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{className:"btn",onClick:()=>{U(P=>Math.max(1,P-1))},disabled:ye<=1,style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("button",{className:"btn",onClick:()=>{U(P=>Math.min(ae,P+1))},disabled:ye>=ae,style:{padding:"6px 10px",border:"1px solid #ddd",borderRadius:6},children:"Ø§Ù„ØªØ§Ù„ÙŠ"}),e.jsx("select",{value:L,onChange:P=>{const J=Number(P.target.value);v(J),U(1)},children:[10,20,50,100].map(P=>e.jsxs("option",{value:P,children:[P,"/ØµÙØ­Ø©"]},P))})]})]})]})]})]})]})]})},Ge=()=>{const{setting:t,loading:s,error:r,update:o,uploadLogo:a}=Ae(),[n,d]=i.useState({siteNameAr:"",siteNameEn:"",colorPrimary:"#69be3c",colorSecondary:"#2eafff",colorAccent:"#2eafff",taxNumber:"",supportPhone:"",supportMobile:"",supportWhatsapp:"",supportEmail:"",supportHours:"",footerAboutAr:"",footerAboutEn:"",linkBlog:"",linkSocial:"",linkReturns:"",linkPrivacy:"",appStoreUrl:"",playStoreUrl:""}),[l,g]=i.useState(null),[k,x]=i.useState(null),[j,p]=i.useState(!1),[u,m]=i.useState(!1),[A,$]=i.useState(""),[b,U]=i.useState({}),L=i.useRef(null);i.useEffect(()=>{t&&d(f=>({...f,siteNameAr:t.siteNameAr||"",siteNameEn:t.siteNameEn||"",colorPrimary:t.colorPrimary||f.colorPrimary,colorSecondary:t.colorSecondary||f.colorSecondary,colorAccent:t.colorAccent||f.colorAccent,taxNumber:t.taxNumber||"",supportPhone:t.supportPhone||"",supportMobile:t.supportMobile||"",supportWhatsapp:t.supportWhatsapp||"",supportEmail:t.supportEmail||"",supportHours:t.supportHours||"",footerAboutAr:t.footerAboutAr||"",footerAboutEn:t.footerAboutEn||"",linkBlog:t.linkBlog||"",linkSocial:t.linkSocial||"",linkReturns:t.linkReturns||"",linkPrivacy:t.linkPrivacy||"",appStoreUrl:t.appStoreUrl||"",playStoreUrl:t.playStoreUrl||""}))},[t]);const v=(f,z)=>d(N=>({...N,[f]:z})),D=f=>/^#([0-9a-fA-F]{6})$/.test(String(f||"")),C=f=>!f||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(f)),T=f=>{if(!f)return!0;try{return new URL(f),!0}catch{return!1}},W=f=>!f||/^[0-9+\s-]+$/.test(String(f)),_=()=>{const f={};return!n.siteNameAr&&!n.siteNameEn&&(f.siteNameEn="ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±"),D(n.colorPrimary)||(f.colorPrimary="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),D(n.colorSecondary)||(f.colorSecondary="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),D(n.colorAccent)||(f.colorAccent="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù„ÙˆÙ† Ø¨ØµÙŠØºØ© #RRGGBB"),C(n.supportEmail)||(f.supportEmail="ØµÙŠØºØ© Ø¨Ø±ÙŠØ¯ ØºÙŠØ± ØµØ­ÙŠØ­Ø©"),T(n.linkBlog)||(f.linkBlog="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),T(n.linkSocial)||(f.linkSocial="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),T(n.linkReturns)||(f.linkReturns="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),T(n.linkPrivacy)||(f.linkPrivacy="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),T(n.appStoreUrl)||(f.appStoreUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),T(n.playStoreUrl)||(f.playStoreUrl="Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­"),W(n.supportPhone)||(f.supportPhone="Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· Ù…Ø³Ù…ÙˆØ­Ø©"),W(n.supportMobile)||(f.supportMobile="Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· Ù…Ø³Ù…ÙˆØ­Ø©"),U(f),Object.keys(f).length===0},V=async f=>{f.preventDefault(),p(!0),$("");try{if(!_()){$("ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø¸Ù„Ù„Ø©"),p(!1);return}const z={};if(t?Object.keys(n).forEach(N=>{n[N]!==t[N]&&(n[N]!==""||t[N]!==void 0&&t[N]!==null&&t[N]!=="")&&(z[N]=n[N])}):Object.assign(z,n),Object.keys(z).length===0&&!l){$("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª Ù„Ù„Ø­ÙØ¸"),p(!1);return}Object.keys(z).length,Object.keys(z).length>0&&await o(z),l&&(await a(l),g(null),k&&(URL.revokeObjectURL(k),x(null))),$("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­")}catch(z){let N="";const y=z&&z.message?String(z.message):"",F=z&&z.data&&z.data.message?String(z.data.message):"";y.includes("connect ECONNREFUSED")||F.includes("connect ECONNREFUSED")?N="ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ Ø§Ù„Ù…Ù„Ù‚Ù… Ø§Ù„Ø¨Ø¹ÙŠØ¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.":y.includes("FORBIDDEN")||F.includes("Admin only")?N="Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø£Ø¯Ù…Ù†.":y.includes("UPDATE_FAILED")&&F.includes("does not exist")?N="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ù…Ø²Ø§Ù…Ù†Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.":y.includes("UNAUTHENTICATED")||F.includes("UNAUTHENTICATED")?N="ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.":y.includes("NOT_FOUND")||F.includes("NOT_FOUND")?N="Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.":y.includes("INVALID")||F.includes("INVALID")?N="ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.":y.includes("password")||F.includes("password")?N="ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.":F?N="ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: "+F:y?N="ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: "+y:N="Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸.",$(N)}finally{p(!1)}},M=i.useMemo(()=>({"--color-primary":n.colorPrimary,"--color-primary-alt":n.colorSecondary,"--color-accent":n.colorAccent}),[n.colorPrimary,n.colorSecondary,n.colorAccent]),c=async()=>{if(!l){$("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø´Ø¹Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹");return}m(!0),$("");try{await a(l),g(null),k&&(URL.revokeObjectURL(k),x(null)),$("ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­")}catch(f){const z=f?.code?` (${f.code})`:"",N=f?.data?.message||f?.message||"";$("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±"+z+": "+N)}finally{m(!1)}},h=()=>{try{const f=document.documentElement;f.style.setProperty("--color-primary",n.colorPrimary),f.style.setProperty("--color-secondary",n.colorSecondary),f.style.setProperty("--color-accent",n.colorAccent),$("ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©")}catch{}},E=()=>{try{const f=document.documentElement;f.style.setProperty("--color-primary",t?.colorPrimary||"#69be3c"),f.style.setProperty("--color-secondary",t?.colorSecondary||"#2eafff"),f.style.setProperty("--color-accent",t?.colorAccent||"#2eafff"),$("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¥Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ©")}catch{}},O=f=>{if(!f){g(null),k&&URL.revokeObjectURL(k),x(null);return}const z=/image\/(png|jpe?g|webp|svg\+xml)/.test(f.type),N=f.size<=2*1024*1024;if(!z){$("ØµÙŠØºØ© Ø§Ù„Ø´Ø¹Ø§Ø± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† PNG/JPG/WebP/SVG");return}if(!N){$("Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø± ÙŠØ¬Ø¨ Ø£Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² 2MB");return}g(f),k&&URL.revokeObjectURL(k),x(URL.createObjectURL(f))};return e.jsxs("div",{className:"admin-page-wrapper",children:[e.jsx(Ee,{title:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª | Settings",description:"Store settings"}),e.jsx("h1",{className:"page-title",children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª / Settings"}),e.jsx("div",{"aria-live":"polite",style:{minHeight:24,marginBottom:8,color:A?.startsWith("ÙØ´Ù„")?"#dc2626":"#0f766e"},children:A}),s?e.jsx("p",{children:"ÙŠØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):r?e.jsxs("p",{className:"error",children:["Ø®Ø·Ø£: ",r]}):e.jsxs("form",{onSubmit:V,className:"settings-form",style:{display:"grid",gap:12,maxWidth:880},children:[e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("label",{htmlFor:"siteNameAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± (AR)"}),e.jsx("input",{id:"siteNameAr",value:n.siteNameAr,onChange:f=>v("siteNameAr",f.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ù…ØªØ¬Ø± Ø§Ù„Ù†Ø®Ø¨Ø©"})]}),e.jsxs("label",{htmlFor:"siteNameEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Store Name (EN)"}),e.jsx("input",{id:"siteNameEn",value:n.siteNameEn,onChange:f=>v("siteNameEn",f.target.value),placeholder:"e.g., Elite Store"}),b.siteNameEn&&e.jsx("small",{style:{color:"#dc2626"},children:b.siteNameEn})]})]})]}),e.jsxs("fieldset",{style:{display:"grid",gap:8,border:"1px solid #e2e8f0",borderRadius:8,padding:12},children:[e.jsx("legend",{style:{padding:"0 6px",fontWeight:800,fontSize:".85rem"},children:"Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù‡ÙˆÙŠØ©"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("label",{htmlFor:"colorPrimary",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ"}),e.jsx("input",{id:"colorPrimary",type:"color",value:n.colorPrimary,onChange:f=>v("colorPrimary",f.target.value)}),e.jsx("input",{"aria-label":"Hex",value:n.colorPrimary,onChange:f=>v("colorPrimary",f.target.value)}),b.colorPrimary&&e.jsx("small",{style:{color:"#dc2626"},children:b.colorPrimary})]}),e.jsxs("label",{htmlFor:"colorSecondary",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ"}),e.jsx("input",{id:"colorSecondary",type:"color",value:n.colorSecondary,onChange:f=>v("colorSecondary",f.target.value)}),e.jsx("input",{"aria-label":"Hex",value:n.colorSecondary,onChange:f=>v("colorSecondary",f.target.value)}),b.colorSecondary&&e.jsx("small",{style:{color:"#dc2626"},children:b.colorSecondary})]}),e.jsxs("label",{htmlFor:"colorAccent",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù„ÙˆÙ† Ù…Ù…ÙŠØ²"}),e.jsx("input",{id:"colorAccent",type:"color",value:n.colorAccent,onChange:f=>v("colorAccent",f.target.value)}),e.jsx("input",{"aria-label":"Hex",value:n.colorAccent,onChange:f=>v("colorAccent",f.target.value)}),b.colorAccent&&e.jsx("small",{style:{color:"#dc2626"},children:b.colorAccent})]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{type:"button",onClick:h,style:{background:"#22c55e",color:"#fff",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©"}),e.jsx("button",{type:"button",onClick:E,style:{background:"#94a3b8",color:"#0b0f19",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©"})]})]}),e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø´Ø¹Ø§Ø±"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(k||t?.logoUrl||t?.logo)&&e.jsx("img",{src:k||t.logoUrl||t.logo,alt:"logo",style:{height:48,objectFit:"contain"}}),e.jsx("input",{ref:L,type:"file",accept:"image/png,image/jpeg,image/webp,image/svg+xml",onChange:f=>O(f.target.files?.[0]||null),style:{display:"none"}}),e.jsx("button",{type:"button",onClick:()=>L.current?.click(),style:{background:"#e2e8f0",color:"#0f172a",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:"Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ"}),l&&e.jsx("span",{style:{fontSize:".6rem"},children:l.name}),e.jsx("button",{type:"button",onClick:c,disabled:!l||u,style:{background:"#0ea5e9",color:"#fff",border:0,padding:"6px 10px",borderRadius:8,fontWeight:700},children:u?"ÙŠØ±ÙØ¹...":"Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±"})]})]}),e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø¨Ø§Ø´Ø±Ø©"}),e.jsxs("div",{style:{...M,display:"flex",alignItems:"center",gap:12,padding:12,border:"1px dashed #e2e8f0",borderRadius:8},children:[e.jsx("div",{style:{width:56,height:56,background:"var(--color-primary)",borderRadius:8}}),e.jsx("div",{style:{width:56,height:56,background:"var(--color-primary-alt)",borderRadius:8}}),e.jsx("div",{style:{width:56,height:56,background:"var(--color-accent)",borderRadius:8}}),e.jsx("span",{style:{fontWeight:700},children:n.siteNameAr||n.siteNameEn||"Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsx("button",{type:"button",style:{marginInlineStart:"auto",background:"var(--color-primary)",color:"#fff",border:"0",borderRadius:8,padding:"6px 10px",fontWeight:700},children:"Ø²Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ"})]})]}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("label",{htmlFor:"supportPhone",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù‡Ø§ØªÙ)"}),e.jsx("input",{id:"supportPhone",value:n.supportPhone,onChange:f=>v("supportPhone",f.target.value),placeholder:"Ù…Ø«Ø§Ù„: 920000000"}),b.supportPhone&&e.jsx("small",{style:{color:"#dc2626"},children:b.supportPhone})]}),e.jsxs("label",{htmlFor:"supportMobile",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (Mobile)"}),e.jsx("input",{id:"supportMobile",value:n.supportMobile,onChange:f=>v("supportMobile",f.target.value),placeholder:"Ù…Ø«Ø§Ù„: +9665XXXXXXXX"}),b.supportMobile&&e.jsx("small",{style:{color:"#dc2626"},children:b.supportMobile})]}),e.jsxs("label",{htmlFor:"supportWhatsapp",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"ÙˆØ§ØªØ³Ø§Ø¨ (Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)"}),e.jsx("input",{id:"supportWhatsapp",value:n.supportWhatsapp,onChange:f=>v("supportWhatsapp",f.target.value),onBlur:f=>v("supportWhatsapp",f.target.value.replace(/\D+/g,"")),placeholder:"Ù…Ø«Ø§Ù„: 9665XXXXXXXX"}),e.jsx("small",{style:{opacity:.7},children:"Ø³ÙŠØ³ØªØ®Ø¯Ù… ÙƒØ±Ø§Ø¨Ø· wa.me/Ø§Ù„Ø±Ù‚Ù…"})]}),e.jsxs("label",{htmlFor:"supportEmail",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("input",{id:"supportEmail",type:"email",value:n.supportEmail,onChange:f=>v("supportEmail",f.target.value),placeholder:"support@example.com"}),b.supportEmail&&e.jsx("small",{style:{color:"#dc2626"},children:b.supportEmail})]}),e.jsxs("label",{htmlFor:"supportHours",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"supportHours",value:n.supportHours,onChange:f=>v("supportHours",f.target.value),placeholder:"Ù…Ø«Ø§Ù„: 9Øµ - 6Ù… (Ø§Ù„Ø³Ø¨Øª-Ø§Ù„Ø®Ù…ÙŠØ³)"})]}),e.jsxs("label",{htmlFor:"taxNumber",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{id:"taxNumber",value:n.taxNumber,onChange:f=>v("taxNumber",f.target.value),placeholder:"Ù…Ø«Ø§Ù„: 311307460300003"})]})]})]}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"ÙˆØµÙ Ø§Ù„ÙÙˆØªØ±"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("label",{htmlFor:"footerAboutAr",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ù†Ø¨Ø°Ø© (AR)"}),e.jsx("textarea",{id:"footerAboutAr",rows:4,value:n.footerAboutAr,onChange:f=>v("footerAboutAr",f.target.value),placeholder:`Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¨Ø§Ù„Ø­Ø¨Ø©
ÙˆØ¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ Ù…Ù† Ù…Ù†Ø¸ÙØ§Øª Ùˆ ÙƒÙ…Ø§Ù„ÙŠØ§Øª
Ø£ÙŠØ¶Ù‹Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙ†Ø§ Ù‚Ø³Ù… Ø§Ù„Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª ÙˆØ¬Ù…ÙŠØ¹
Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø±Ù†Ø§ Ø¬Ù…Ù„Ø© ÙˆØ¬ÙˆØ¯ØªÙ†Ø§
Ø£ØµÙ„ÙŠØ©`}),e.jsx("small",{style:{opacity:.7},children:"ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø© Ø£Ø³Ø·Ø±Ø› Ø³ØªØ¸Ù‡Ø± ÙƒÙÙ‚Ø±Ø§Øª Ù…Ù†ÙØµÙ„Ø©."})]}),e.jsxs("label",{htmlFor:"footerAboutEn",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"About (EN)"}),e.jsx("textarea",{id:"footerAboutEn",rows:4,value:n.footerAboutEn,onChange:f=>v("footerAboutEn",f.target.value),placeholder:"We specialize in wholesale and retail food products and home essentials."})]})]})]}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("span",{style:{fontSize:".8rem",fontWeight:800},children:"Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("label",{htmlFor:"linkBlog",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø¯ÙˆÙ†Ø© (Blog)"}),e.jsx("input",{id:"linkBlog",type:"url",value:n.linkBlog,onChange:f=>v("linkBlog",f.target.value),placeholder:"https://example.com/blog"}),b.linkBlog&&e.jsx("small",{style:{color:"#dc2626"},children:b.linkBlog})]}),e.jsxs("label",{htmlFor:"linkSocial",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ"}),e.jsx("input",{id:"linkSocial",type:"url",value:n.linkSocial,onChange:f=>v("linkSocial",f.target.value),placeholder:"https://instagram.com/yourbrand"}),b.linkSocial&&e.jsx("small",{style:{color:"#dc2626"},children:b.linkSocial})]}),e.jsxs("label",{htmlFor:"linkReturns",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹"}),e.jsx("input",{id:"linkReturns",type:"url",value:n.linkReturns,onChange:f=>v("linkReturns",f.target.value),placeholder:"https://example.com/returns"}),b.linkReturns&&e.jsx("small",{style:{color:"#dc2626"},children:b.linkReturns})]}),e.jsxs("label",{htmlFor:"linkPrivacy",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©"}),e.jsx("input",{id:"linkPrivacy",type:"url",value:n.linkPrivacy,onChange:f=>v("linkPrivacy",f.target.value),placeholder:"https://example.com/privacy"}),b.linkPrivacy&&e.jsx("small",{style:{color:"#dc2626"},children:b.linkPrivacy})]}),e.jsxs("label",{htmlFor:"appStoreUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· ØªØ·Ø¨ÙŠÙ‚ iOS (App Store)"}),e.jsx("input",{id:"appStoreUrl",type:"url",value:n.appStoreUrl,onChange:f=>v("appStoreUrl",f.target.value),placeholder:"https://apps.apple.com/app/idXXXXXXXXX"}),e.jsx("small",{style:{opacity:.7},children:"Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· App Store Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚."}),b.appStoreUrl&&e.jsx("small",{style:{color:"#dc2626"},children:b.appStoreUrl})]}),e.jsxs("label",{htmlFor:"playStoreUrl",style:{display:"grid",gap:4},children:[e.jsx("span",{style:{fontSize:".7rem",fontWeight:700},children:"Ø±Ø§Ø¨Ø· ØªØ·Ø¨ÙŠÙ‚ Android (Google Play)"}),e.jsx("input",{id:"playStoreUrl",type:"url",value:n.playStoreUrl,onChange:f=>v("playStoreUrl",f.target.value),placeholder:"https://play.google.com/store/apps/details?id=your.app"}),e.jsx("small",{style:{opacity:.7},children:"Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· Google Play Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚."}),b.playStoreUrl&&e.jsx("small",{style:{color:"#dc2626"},children:b.playStoreUrl})]})]})]}),e.jsxs("div",{style:{position:"sticky",bottom:0,background:"rgba(255,255,255,0.7)",backdropFilter:"saturate(180%) blur(8px)",padding:"10px 0",borderTop:"1px solid #e2e8f0",display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{type:"submit",disabled:j,style:{background:"#0ea5e9",color:"#fff",border:0,padding:"8px 14px",borderRadius:8,fontWeight:700},children:j?"ÙŠØ­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"}),e.jsx("span",{style:{fontSize:".75rem",opacity:.8},children:"Ù„Ù† ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø²ÙˆØ§Ø± Ø­ØªÙ‰ ØªØ­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª."})]})]})]})};function Xe(){const[t,s]=i.useState(null),[r,o]=i.useState(!0),[a,n]=i.useState(null),[d,l]=i.useState(""),[g,k]=i.useState(""),[x,j]=i.useState("");async function p(){try{o(!0);const b=await K.request?K.request("/auth/me"):fetch("/api/auth/me").then(L=>L.json()),U=b.ok?b:await fetch("/api/auth/me").then(L=>L.json());if(!U.ok)throw new Error(U.error||"LOAD_FAILED");s(U.user),l(U.user?.phone||"")}catch(b){n(b.message||"ERR")}finally{o(!1)}}i.useEffect(()=>{p()},[]);async function u(){try{n(null),j("");const b=await fetch("/api/auth/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:d})}),U=await b.json();if(!b.ok||!U.ok)throw new Error(U.error||b.statusText);j("ØªÙ… Ø­ÙØ¸ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"),await p()}catch(b){n(b.message||"ÙØ´Ù„")}}async function m(){try{n(null),j("");const b=await fetch("/api/auth/verify-email/request",{method:"POST"}),U=await b.json();if(!b.ok||!U.ok)throw new Error(U.error||b.statusText);j("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ø¨Ø±ÙŠØ¯ (Ù…Ø­Ø§ÙƒØ§Ø©)")}catch(b){n(b.message||"ÙØ´Ù„")}}async function A(){try{n(null),j("");const b=await fetch("/api/auth/verify-phone/request",{method:"POST"}),U=await b.json();if(!b.ok||!U.ok)throw new Error(U.error||b.statusText);j("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ù‡Ø§ØªÙ (Ù…Ø­Ø§ÙƒØ§Ø©)")}catch(b){n(b.message||"ÙØ´Ù„")}}async function $(){try{n(null),j("");const b=await fetch("/api/auth/verify-phone/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:g})}),U=await b.json();if(!b.ok||!U.ok)throw new Error(U.error||b.statusText);j("ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù‡Ø§ØªÙ"),await p()}catch(b){n(b.message||"ÙØ´Ù„")}}return r?e.jsx("div",{style:Qe,children:"...ØªØ­Ù…ÙŠÙ„"}):a?e.jsx("div",{style:Qe,children:e.jsx("div",{style:cs,children:a})}):e.jsx("div",{style:Qe,children:e.jsxs("div",{style:xn,children:[e.jsx("h1",{style:{margin:0,fontSize:"1.25rem",fontWeight:700},children:"Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨"}),x&&e.jsx("div",{style:bn,children:x}),a&&e.jsx("div",{style:cs,children:a}),e.jsxs("section",{style:as,children:[e.jsx("h2",{style:os,children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsxs("p",{style:is,children:["Ø§Ù„Ø¨Ø±ÙŠØ¯: ",e.jsx("b",{children:t?.email})," â€” Ø§Ù„Ø­Ø§Ù„Ø©: ",t?.emailVerifiedAt?"Ù…ÙÙØ¹Ù„":"ØºÙŠØ± Ù…ÙÙØ¹Ù„"]}),!t?.emailVerifiedAt&&e.jsx("button",{style:Ye,onClick:m,children:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚"})]}),e.jsxs("section",{style:as,children:[e.jsx("h2",{style:os,children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsxs("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx("input",{style:ls,placeholder:"05xxxxxxxx",value:d,onChange:b=>l(b.target.value)}),e.jsx("button",{style:yn,onClick:u,children:"Ø­ÙØ¸"})]}),e.jsxs("p",{style:is,children:["Ø§Ù„Ø­Ø§Ù„Ø©: ",t?.phoneVerifiedAt?"Ù…ÙÙØ¹Ù„":"ØºÙŠØ± Ù…ÙÙØ¹Ù„"]}),!t?.phoneVerifiedAt&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:".5rem"},children:[e.jsx("button",{style:Ye,onClick:A,children:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚"}),e.jsxs("div",{style:{display:"flex",gap:".5rem"},children:[e.jsx("input",{style:ls,placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²",value:g,onChange:b=>k(b.target.value)}),e.jsx("button",{style:Ye,onClick:$,children:"ØªØ£ÙƒÙŠØ¯"})]})]})]})]})})}const Qe={direction:"rtl",display:"flex",justifyContent:"center",padding:"2rem"},xn={background:"#fff",padding:"1.5rem",border:"1px solid #e2e8f0",borderRadius:18,display:"flex",flexDirection:"column",gap:"1rem",width:"100%",maxWidth:640,boxShadow:"0 8px 34px -12px rgba(0,0,0,.15)"},as={borderTop:"1px solid #f1f5f9",paddingTop:".75rem"},os={margin:"0 0 .25rem",fontSize:"1rem"},is={margin:0,fontSize:".8rem",color:"#475569"},Ye={padding:".6rem .9rem",border:0,borderRadius:12,background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",fontSize:".8rem",fontWeight:600,cursor:"pointer"},yn={padding:".55rem .85rem",border:"1px solid #e2e8f0",borderRadius:12,background:"#fff",color:"#334155",fontSize:".8rem",fontWeight:600,cursor:"pointer"},ls={padding:".6rem .8rem",border:"1px solid #e2e8f0",borderRadius:12,fontSize:".8rem"},cs={background:"#fee2e2",color:"#b91c1c",padding:".5rem .7rem",borderRadius:12,fontSize:".75rem",lineHeight:1.5},bn={background:"#dcfce7",color:"#166534",padding:".5rem .7rem",borderRadius:12,fontSize:".75rem",lineHeight:1.5},jn={},Ze=jn?.VITE_PUBLIC_DOMAIN||typeof window<"u"&&window.__APP_CANONICAL_DOMAIN__||"https://jomlah.app";function et(t,s={}){const r=Object.entries(s).map(([a,n])=>`[${a}="${n}"]`).join("");let o=document.head.querySelector(`${t}${r}`);return o||(o=document.createElement(t),Object.entries(s).forEach(([a,n])=>o.setAttribute(a,n)),document.head.appendChild(o)),o}const vn=({alternates:t=["ar","en"]})=>{const s=pe(),r=xe();return i.useEffect(()=>{const o=s.pathname.split("/").filter(Boolean);let a=r?.locale||"ar";r?.locale||o[0]&&t.includes(o[0])&&(a=o[0]);let n;a==="ar"?n="/"+o.filter(x=>x!=="ar").join("/"):n="/"+[a,...o.slice(1)].join("/"),n==="/"&&(n="/");const d=`${Ze}${n}`.replace(/\/+$/,"/");et("link",{rel:"canonical"}).setAttribute("href",d),t.forEach(x=>{let j;x==="ar"?j="/"+o.filter(m=>m!=="ar"&&m!=="en").join("/"):j="/"+[x,...o.filter((m,A)=>!(A===0&&t.includes(m)))].join("/"),j==="/"&&(j="/");const p=`${Ze}${j}`.replace(/\/+$/,"/");et("link",{rel:"alternate",hreflang:x}).setAttribute("href",p)}),et("link",{rel:"alternate",hreflang:"x-default"}).setAttribute("href",`${Ze}/`),Array.from(document.head.querySelectorAll('meta[property="og:locale:alternate"]')).forEach(x=>x.parentNode.removeChild(x)),t.forEach(x=>{const j=document.createElement("meta");j.setAttribute("property","og:locale:alternate"),j.setAttribute("content",x==="ar"?"ar_AR":"en_US"),document.head.appendChild(j)})},[s,t,r?.locale]),null},Cs={};let ds=!1;function wn(){if(ds)return;const t=Cs?.VITE_GA_ID;if(t)try{let s=function(){window.dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||s,s("js",new Date),s("config",t,{send_page_view:!1});const r=document.createElement("script");r.async=!0,r.src=`https://www.googletagmanager.com/gtag/js?id=${encodeURIComponent(t)}`,document.head.appendChild(r),ds=!0}catch{}}function Sn(t,s){if(!(!Cs?.VITE_GA_ID||typeof window.gtag!="function"))try{window.gtag("event","page_view",{page_path:t||window.location.pathname,page_title:s||document.title,page_location:window.location.href})}catch{}}const tt=R.lazy(()=>G(()=>import("./Home-BXgQZUDN.js").then(t=>t.b),__vite__mapDeps([8,6,1,2,3,4,5,7,9,10,11,12]))),st=R.lazy(()=>G(()=>import("./Cart-Diie_lf2.js"),__vite__mapDeps([13,6,1,2,3,4,5,7,10,14]))),rt=R.lazy(()=>G(()=>import("./CheckoutPage-vEJRMeLN.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,16,17,14]))),nt=R.lazy(()=>G(()=>import("./index-B2fJ0QWL.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,19,20,21,14])).then(t=>({default:t.LoginPage}))),at=R.lazy(()=>G(()=>import("./index-B2fJ0QWL.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,19,20,21,14])).then(t=>({default:t.RegisterPage}))),ot=R.lazy(()=>G(()=>import("./index-B2fJ0QWL.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,19,20,21,14])).then(t=>({default:t.ForgotPasswordPage}))),it=R.lazy(()=>G(()=>import("./ResetPasswordPage-DpTYs6MM.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,14]))),lt=R.lazy(()=>G(()=>import("./VerifyEmailPage-BbnYflVV.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,14]))),ct=R.lazy(()=>G(()=>import("./Orders-Dtf5zzxB.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,14]))),dt=R.lazy(()=>G(()=>import("./MyOrders-BPO-ihWe.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,14]))),ut=R.lazy(()=>G(()=>import("./OrderDetails-Z6Gc7Pfa.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,17,14]))),kn=R.lazy(()=>G(()=>import("./AdminDashboard-Bq3dtn20.js"),__vite__mapDeps([27,6,1,2,3,4,5,7,28,14]))),mt=R.lazy(()=>G(()=>import("./ProductInventory-DkWokYI3.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,14]))),pt=R.lazy(()=>G(()=>import("./SellerDashboard-CjjavJx4.js"),__vite__mapDeps([30,6,1,2,3,4,5,7,31,14]))),ht=R.lazy(()=>G(()=>import("./DeliveryDashboard-BbtAu7iK.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,19,33,34,14]))),ft=R.lazy(()=>G(()=>import("./ProductDetailPage-C6IVzYYZ.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,36,14]))),gt=R.lazy(()=>G(()=>import("./StoresPage-CAHGD4Qu.js"),__vite__mapDeps([37,1,2,3,4,5,6,7]))),xt=R.lazy(()=>G(()=>import("./OffersPage-B3hdAGE8.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,39,9,10,14]))),yt=R.lazy(()=>G(()=>import("./InvoiceViewer-ClIJr0Ff.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,14]))),bt=R.lazy(()=>G(()=>import("./CatalogPage-D3sIj9dF.js"),__vite__mapDeps([41,1,2,3,4,5,6,7,14]))),jt=R.lazy(()=>G(()=>import("./Products-DQqmrBgP.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,39,9,10,14]))),vt=R.lazy(()=>G(()=>import("./Chat-ydhdr85H.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,14]))),wt=R.lazy(()=>G(()=>import("./StyleGuide-Bwi_CcBO.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,19,20,33,21,14]))),St=R.lazy(()=>G(()=>import("./Profile-BZKXQNuh.js"),__vite__mapDeps([45,1,2,3,4,5,6,7,14]))),kt=R.lazy(()=>G(()=>import("./ProductManager-B_yTteHg.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,31,14]))),At=R.lazy(()=>G(()=>import("./OrderTracker-B1pa4j1C.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,14]))),Ct=R.lazy(()=>G(()=>import("./Addresses-B9-E9BSj.js"),__vite__mapDeps([48,1,2,3,4,5,6,7,14]))),Nt=R.lazy(()=>G(()=>import("./SellerKyc-Cq5yDSZz.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,14]))),Et=R.lazy(()=>G(()=>import("./AdminKycReview-DSUL2sfQ.js"),__vite__mapDeps([50,1,2,3,4,5,6,7,14]))),Rt=R.lazy(()=>G(()=>import("./Map-Cl-B1hVp.js"),__vite__mapDeps([51,1,2,3,4,5,6,7,16,19,33,14]))),Tt=R.lazy(()=>G(()=>import("./History-C7QW6E50.js"),__vite__mapDeps([52,1,2,3,4,5,6,7,33,14]))),Pt=R.lazy(()=>G(()=>import("./Availability-jrSEXECc.js"),__vite__mapDeps([53,1,2,3,4,5,6,7,19,21,14]))),_t=R.lazy(()=>G(()=>import("./DeliverySummary-CZRigR2v.js"),__vite__mapDeps([54,1,2,3,4,5,6,7,34]))),Lt=R.lazy(()=>G(()=>import("./UIPreview-1GOpbmw_.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,19,33,21,11,14]))),An=()=>{const t=pe();return i.useEffect(()=>{try{wn()}catch{}try{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"page_view",path:t.pathname,timestamp:Date.now()}),Sn(t.pathname);const s=new CustomEvent("reinit:home",{detail:{path:t.pathname,ts:Date.now()}});requestAnimationFrame(()=>{try{document.dispatchEvent(s)}catch{}})}catch{}},[t]),null},Cn=()=>{const{pathname:t}=pe();return i.useEffect(()=>{try{window.scrollY>2e3?window.scrollTo({top:0,left:0,behavior:"auto"}):window.scrollTo({top:0,left:0,behavior:"smooth"})}catch{}},[t]),null},Nn=({children:t})=>{const r=pe().pathname.split("/").filter(Boolean);return r[0]&&r[0].length===2&&!["ar","en","fr"].includes(r[0])?e.jsx(me,{to:"/",replace:!0}):t},Ot=({prefix:t=""})=>{const{user:s}=ve()||{},r=s?.role,o=pe(),n=new URLSearchParams(o.search).get("view");return n==="users"?e.jsx(me,{to:`${t}/admin/users`,replace:!0}):n==="customers"?e.jsx(me,{to:`${t}/admin/customers`,replace:!0}):e.jsx(q,{isAuthed:!!s,userRole:r,requiredRoles:["admin"],element:e.jsx(kn,{}),redirectTo:`${t}/login`})},En=()=>{const{user:t}=ve()||{};t?.role;const s=t?.role;return e.jsx(Zr,{children:e.jsxs(Qr,{children:[e.jsx(vn,{}),e.jsxs(Nn,{children:[e.jsx(Cn,{}),e.jsx(An,{}),e.jsx(en,{children:e.jsx(i.Suspense,{fallback:e.jsx(tn,{}),children:e.jsx(De,{mode:"wait",children:e.jsx(Rn,{children:e.jsxs(Js,{children:[e.jsx(S,{path:"/",element:e.jsx(tt,{})}),e.jsx(S,{path:"/admin/inventory",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(mt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/chat",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(vt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin",element:e.jsx(Ot,{prefix:""})}),e.jsx(S,{path:"/catalog",element:e.jsx(bt,{})}),e.jsx(S,{path:"/products",element:e.jsx(jt,{})}),e.jsx(S,{path:"/product/:id",element:e.jsx(ft,{})}),e.jsx(S,{path:"/stores",element:e.jsx(gt,{})}),e.jsx(S,{path:"/offers",element:e.jsx(xt,{})}),e.jsx(S,{path:"/style-guide",element:e.jsx(wt,{})}),e.jsx(S,{path:"/ui",element:e.jsx(Lt,{})}),e.jsx(S,{path:"/cart",element:e.jsx(st,{})}),e.jsx(S,{path:"/checkout",element:e.jsx(rt,{})}),e.jsx(S,{path:"/orders",element:e.jsx(ct,{})}),e.jsx(S,{path:"/my-orders",element:e.jsx(dt,{})}),e.jsx(S,{path:"/order/:id",element:e.jsx(ut,{})}),e.jsx(S,{path:"/order/:id/track",element:e.jsx(At,{})}),e.jsx(S,{path:"/account/addresses",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Ct,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/invoice/:id",element:e.jsx(yt,{})}),e.jsx(S,{path:"/seller/kyc",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Nt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/sellers/kyc",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Et,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/seller/products",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(kt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(ht,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/map",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Rt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/history",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Tt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/availability",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Pt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/delivery/summary",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(_t,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/DeliveryDashboard",element:e.jsx(me,{to:"/delivery",replace:!0})}),e.jsx(S,{path:"/seller",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(pt,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/SellerDashboard",element:e.jsx(me,{to:"/seller",replace:!0})}),e.jsx(S,{path:"/account/security",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Xe,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/account/profile",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(St,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/users",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(qe,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/categories",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(me,{to:"/admin?view=cats",replace:!0}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/reports",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ve,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/bank-transfers",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/analytics",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/customers",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/admin/settings",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/login"})}),e.jsx(S,{path:"/login",element:e.jsx(nt,{})}),e.jsx(S,{path:"/register",element:e.jsx(at,{})}),e.jsx(S,{path:"/forgot",element:e.jsx(ot,{})}),e.jsx(S,{path:"/reset-password",element:e.jsx(it,{})}),e.jsx(S,{path:"/verify-email",element:e.jsx(lt,{})}),e.jsx(S,{path:"/en",element:e.jsx(tt,{})}),e.jsx(S,{path:"/en/admin/inventory",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(mt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/chat",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(vt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/catalog",element:e.jsx(bt,{})}),e.jsx(S,{path:"/en/products",element:e.jsx(jt,{})}),e.jsx(S,{path:"/en/product/:id",element:e.jsx(ft,{})}),e.jsx(S,{path:"/en/stores",element:e.jsx(gt,{})}),e.jsx(S,{path:"/en/offers",element:e.jsx(xt,{})}),e.jsx(S,{path:"/en/style-guide",element:e.jsx(wt,{})}),e.jsx(S,{path:"/en/ui",element:e.jsx(Lt,{})}),e.jsx(S,{path:"/en/cart",element:e.jsx(st,{})}),e.jsx(S,{path:"/en/checkout",element:e.jsx(rt,{})}),e.jsx(S,{path:"/en/orders",element:e.jsx(ct,{})}),e.jsx(S,{path:"/en/my-orders",element:e.jsx(dt,{})}),e.jsx(S,{path:"/en/order/:id",element:e.jsx(ut,{})}),e.jsx(S,{path:"/en/order/:id/track",element:e.jsx(At,{})}),e.jsx(S,{path:"/en/account/addresses",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Ct,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/invoice/:id",element:e.jsx(yt,{})}),e.jsx(S,{path:"/en/seller/kyc",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Nt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/sellers/kyc",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Et,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/seller/products",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(kt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(ht,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/map",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Rt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/history",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Tt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/availability",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Pt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/delivery/summary",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(_t,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/DeliveryDashboard",element:e.jsx(me,{to:"/en/delivery",replace:!0})}),e.jsx(S,{path:"/en/seller",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(pt,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/SellerDashboard",element:e.jsx(me,{to:"/en/seller",replace:!0})}),e.jsx(S,{path:"/en/account/security",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Xe,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/account/profile",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(St,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin",element:e.jsx(Ot,{prefix:"/en"})}),e.jsx(S,{path:"/en/admin/users",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(qe,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/categories",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(me,{to:"/en/admin?view=cats",replace:!0}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/reports",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ve,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/bank-transfers",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/analytics",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/customers",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/admin/settings",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/en/login"})}),e.jsx(S,{path:"/en/login",element:e.jsx(nt,{})}),e.jsx(S,{path:"/en/register",element:e.jsx(at,{})}),e.jsx(S,{path:"/en/forgot",element:e.jsx(ot,{})}),e.jsx(S,{path:"/en/reset-password",element:e.jsx(it,{})}),e.jsx(S,{path:"/en/verify-email",element:e.jsx(lt,{})}),e.jsx(S,{path:"/fr",element:e.jsx(tt,{})}),e.jsx(S,{path:"/fr/admin/inventory",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(mt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/chat",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(vt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/catalog",element:e.jsx(bt,{})}),e.jsx(S,{path:"/fr/products",element:e.jsx(jt,{})}),e.jsx(S,{path:"/fr/product/:id",element:e.jsx(ft,{})}),e.jsx(S,{path:"/fr/stores",element:e.jsx(gt,{})}),e.jsx(S,{path:"/fr/offers",element:e.jsx(xt,{})}),e.jsx(S,{path:"/fr/style-guide",element:e.jsx(wt,{})}),e.jsx(S,{path:"/fr/ui",element:e.jsx(Lt,{})}),e.jsx(S,{path:"/fr/cart",element:e.jsx(st,{})}),e.jsx(S,{path:"/fr/checkout",element:e.jsx(rt,{})}),e.jsx(S,{path:"/fr/orders",element:e.jsx(ct,{})}),e.jsx(S,{path:"/fr/my-orders",element:e.jsx(dt,{})}),e.jsx(S,{path:"/fr/order/:id",element:e.jsx(ut,{})}),e.jsx(S,{path:"/fr/order/:id/track",element:e.jsx(At,{})}),e.jsx(S,{path:"/fr/account/addresses",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Ct,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/invoice/:id",element:e.jsx(yt,{})}),e.jsx(S,{path:"/fr/seller/kyc",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Nt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/sellers/kyc",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Et,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/seller/products",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(kt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(ht,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/map",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Rt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/history",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Tt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/availability",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(Pt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/delivery/summary",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["delivery","admin"],element:e.jsx(_t,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/DeliveryDashboard",element:e.jsx(me,{to:"/fr/delivery",replace:!0})}),e.jsx(S,{path:"/fr/seller",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["seller","admin"],element:e.jsx(pt,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/SellerDashboard",element:e.jsx(me,{to:"/fr/seller",replace:!0})}),e.jsx(S,{path:"/fr/account/security",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(Xe,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/account/profile",element:e.jsx(q,{isAuthed:!!t,element:e.jsx(St,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin",element:e.jsx(Ot,{prefix:"/fr"})}),e.jsx(S,{path:"/fr/admin/users",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(qe,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/categories",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(me,{to:"/fr/admin?view=cats",replace:!0}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/reports",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ve,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/bank-transfers",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(He,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/analytics",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Je,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/customers",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ke,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/admin/settings",element:e.jsx(q,{isAuthed:!!t,userRole:s,requiredRoles:["admin"],element:e.jsx(Ge,{}),redirectTo:"/fr/login"})}),e.jsx(S,{path:"/fr/login",element:e.jsx(nt,{})}),e.jsx(S,{path:"/fr/register",element:e.jsx(at,{})}),e.jsx(S,{path:"/fr/forgot",element:e.jsx(ot,{})}),e.jsx(S,{path:"/fr/reset-password",element:e.jsx(it,{})}),e.jsx(S,{path:"/fr/verify-email",element:e.jsx(lt,{})})]})})})})})]})]})})};function Rn({children:t}){const s=pe();return e.jsx(je.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18,ease:"easeOut"},children:t},s.pathname)}const Ns=i.createContext(null),Tn=Array.from({length:6}).map((t,s)=>{const r=(s+1).toString();return{id:r,slug:`product-${r}`,name:{ar:`Ù…Ù†ØªØ¬ ${r}`,en:`Product ${r}`},short:{ar:"ÙˆØµÙ Ù…Ø¤Ù‚Øª",en:"Temp description"},price:25+s*2,oldPrice:s%2===0?30+s*2:null,image:"/vite.svg",rating:s%5+1,stock:5+s}}),Pn=({children:t})=>{const[s,r]=i.useState(Tn),[o,a]=i.useState(!1),[n,d]=i.useState(null);i.useEffect(()=>{let g=!0;return a(!0),d(null),K.listProducts().then(k=>{if(g&&Array.isArray(k)){const x=k.map(j=>{const p=j.name||{ar:j.nameAr,en:j.nameEn},u=p?.ar||j.nameAr||"",m=p?.en||j.nameEn||"",A=j.imageVariants||null,$=Array.isArray(j.gallery)?j.gallery:[];let b=j.image;if(A&&(b=A.thumb||A.medium||A.original||j.image),!b&&$.length){const U=$[0];U?.variants?b=U.variants.thumb||U.variants.medium||U.variants.original||U.url:b=U.url}return{...j,name:u,nameAr:u,nameEn:m,originalPrice:j.oldPrice||j.originalPrice||null,images:Array.isArray(j.images)?j.images:j.image?[j.image]:[],gallery:$,displayImage:b}});r(x)}}).catch(k=>{g&&d(k.message||"fetch_error")}).finally(()=>{g&&a(!1)}),()=>{g=!1}},[]);const l=i.useMemo(()=>({products:s,loading:o,error:n,list:()=>s,getProductById:g=>s.find(k=>k.id===g),getProductBySlug:g=>s.find(k=>k.slug===g)}),[s,o,n]);return e.jsx(Ns.Provider,{value:l,children:t})},cl=()=>i.useContext(Ns),_n=i.createContext(null),Ln=({children:t})=>{const{user:s}=ve()||{},[r,o]=i.useState(!1),[a,n]=i.useState(null),[d,l]=i.useState(()=>{try{const u=localStorage.getItem("my_store_wishlist");return u?JSON.parse(u):[]}catch{return[]}}),g=i.useRef(!1);i.useEffect(()=>{try{localStorage.setItem("my_store_wishlist",JSON.stringify(d))}catch{}},[d]),i.useEffect(()=>{(async()=>{if(!(!s||g.current)){o(!0),n(null);try{const m=await K.wishlistList(),A=Array.isArray(m)?m:m.items||[];l(A.map($=>({...$,id:$.productId||$.id}))),g.current=!0}catch(m){n(m.message)}finally{o(!1)}}})()},[s]);const p={wishlistItems:d,addToWishlist:async u=>{if(!(!u||!u.id)&&(l(m=>m.find(A=>A.id===u.id)?m:[...m,u]),s))try{await K.wishlistAdd(u.id)}catch(m){n(m.message)}},removeFromWishlist:async u=>{if(l(m=>m.filter(A=>A.id!==u)),s)try{await K.wishlistRemove(u)}catch(m){n(m.message)}},clearWishlist:async()=>{const u=d.map(m=>m.id);if(l([]),s)for(const m of u)try{await K.wishlistRemove(m)}catch{}},loading:r,error:a};return e.jsx(_n.Provider,{value:p,children:t})};function On(t,{onEvent:s,withAuthToken:r=!0}={}){const o=i.useRef(null);i.useEffect(()=>{const a=r&&localStorage.getItem("my_store_token")||"",n=a?`${t}${t.includes("?")?"&":"?"}token=${encodeURIComponent(a)}`:t,d=new EventSource(n);o.current=d;const l=g=>{const{type:k,data:x}=g;let j=null;try{j=x?JSON.parse(x):null}catch{}s&&s(k,j)};return d.addEventListener("order.created",l),d.addEventListener("order.updated",l),d.addEventListener("heartbeat",l),d.addEventListener("hello",l),()=>{try{d.close()}catch{}}},[t,s,r])}function In({onOrderEvent:t}){return On("/api/events",{onEvent:(s,r)=>{r&&(s==="order.created"||s==="order.updated")&&t&&t(s,r)}}),null}const Es=i.createContext(null),Dn=({children:t})=>{const[s,r]=i.useState([]),[o,a]=i.useState(null),[n,d]=i.useState(!0),[l,g]=i.useState(1),k=20,{user:x}=ve()||{},j=Ks(),[p,u]=i.useState(()=>{try{const c=localStorage.getItem("my_store_orders");return c?JSON.parse(c):[]}catch{return[]}});i.useEffect(()=>{try{localStorage.setItem("my_store_orders",JSON.stringify(p))}catch{}},[p]);const m=["orders",{scope:x?.role==="admin"?"all":x?.id||"guest"}],{data:A,isLoading:$,isFetching:b,isError:U,error:L,refetch:v}=Gs({queryKey:m,queryFn:async()=>{const c=await K.listOrders();return Array.isArray(c?.orders)?c.orders:[]},enabled:n,staleTime:6e4,gcTime:5*6e4,retry:1});i.useEffect(()=>{n&&Array.isArray(A)&&(r(A),a(null))},[A,n]),i.useEffect(()=>{U&&(d(!1),r(p),a(L?.message||"Failed to load orders"))},[U,L,p]),i.useEffect(()=>{n&&v()},[x?.id]);const D=async c=>{const h={createdAt:new Date().toISOString(),status:"pending",...c};if(n)try{const f=await K.createOrder(h);if(f?.order)return r(z=>[f.order,...z]),j.setQueriesData({queryKey:["orders"]},z=>Array.isArray(z)?[f.order,...z]:[f.order]),f.order}catch{d(!1)}const E=h.id||`ord_${Date.now()}`,O={...h,id:E};return u(f=>[O,...f]),r(f=>[O,...f]),j.setQueriesData({queryKey:["orders"]},f=>Array.isArray(f)?[O,...f]:[O]),O},C=async(c,h)=>{if(n)try{await K.updateOrder(c,{status:h})}catch{d(!1)}r(E=>E.map(O=>O.id===c?{...O,status:h}:O)),u(E=>E.map(O=>O.id===c?{...O,status:h}:O)),j.setQueriesData({queryKey:["orders"]},E=>Array.isArray(E)?E.map(O=>O.id===c?{...O,status:h}:O):E)},T=c=>{!c||!c.id||(r(h=>h.some(O=>O.id===c.id)?h.map(O=>O.id===c.id?{...O,...c}:O):[c,...h]),u(h=>h.some(O=>O.id===c.id)?h.map(O=>O.id===c.id?{...O,...c}:O):[c,...h]))},W=()=>s,_=c=>s.find(h=>h.id===c),V=s.slice((l-1)*k,l*k),M=Math.ceil(s.length/k)||1;return e.jsxs(Es.Provider,{value:{orders:s,addOrder:D,updateOrderStatus:C,mergeOrder:T,getOrders:W,getOrderById:_,loading:$||b,error:o,refresh:()=>n?v():null,page:l,setPage:g,totalPages:M,paged:V,useRemote:n},children:[e.jsx(In,{onOrderEvent:(c,h)=>{if(!h?.orderId)return;const{orderId:E,status:O}=h;r(f=>f.map(z=>z.id===E?{...z,status:O}:z)),u(f=>f.map(z=>z.id===E?{...z,status:O}:z)),j.setQueriesData({queryKey:["orders"]},f=>{if(!Array.isArray(f))return f;let z=!1;const N=f.map(y=>y.id===E?(z=!0,{...y,status:O}):y);return!z&&c==="order.created"?[{id:E,status:O,createdAt:new Date().toISOString(),items:[],userId:h.userId},...N]:N})}}),t]})},dl=()=>i.useContext(Es),Rs=i.createContext(null),ul=()=>i.useContext(Rs),It="adminConsoleData_v1",$n={products:[],users:[],orders:[]};function Un(t,s){switch(s.type){case"INIT":return{...t,...s.payload};case"ADD_PRODUCT":return{...t,products:[s.payload,...t.products]};case"UPDATE_PRODUCT":return{...t,products:t.products.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_PRODUCT":return{...t,products:t.products.filter(r=>r.id!==s.id)};case"ADD_USER":return{...t,users:[s.payload,...t.users]};case"UPDATE_USER":return{...t,users:t.users.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_USER":return{...t,users:t.users.filter(r=>r.id!==s.id)};case"ADD_ORDER":return{...t,orders:[s.payload,...t.orders]};case"UPDATE_ORDER":return{...t,orders:t.orders.map(r=>r.id===s.payload.id?{...r,...s.payload}:r)};case"DELETE_ORDER":return{...t,orders:t.orders.filter(r=>r.id!==s.id)};default:return t}}function zn({children:t}){const[s,r]=i.useReducer(Un,$n);i.useEffect(()=>{try{const u=localStorage.getItem(It);if(u)r({type:"INIT",payload:JSON.parse(u)});else{const m={products:[{id:"p1",name:"Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ",price:120,stock:50,status:"active"},{id:"p2",name:"Ø­Ù‚ÙŠØ¨Ø© Ø¬Ù„Ø¯",price:340,stock:8,status:"draft"}],users:[{id:"u1",name:"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…",role:"admin",active:!0},{id:"u2",name:"Ø¨Ø§Ø¦Ø¹ Ø£Ø­Ù…Ø¯",role:"seller",active:!0}],orders:[{id:"o1",total:450.75,status:"pending",customer:"Ù…Ø´ØªØ±ÙŠ 1",items:3},{id:"o2",total:90,status:"paid",customer:"Ù…Ø´ØªØ±ÙŠ 2",items:1}]};localStorage.setItem(It,JSON.stringify(m)),r({type:"INIT",payload:m})}}catch{}},[]),i.useEffect(()=>{localStorage.setItem(It,JSON.stringify(s))},[s]);const o=i.useCallback(u=>{let m;if(u&&typeof u.name=="object"&&u.name!==null&&!(u.name instanceof Date)){const $=(u.name.ar||"").toString().trim(),b=(u.name.en||"").toString().trim();m={ar:$||b||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…",en:b||$||"Product"}}else typeof u?.name=="string"?m=u.name.trim()||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…":m="Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";const A={id:"p"+Date.now(),name:m,price:+u?.price||0,stock:+u?.stock||0,status:u?.status||"active"};return r({type:"ADD_PRODUCT",payload:A}),A},[]),a=i.useCallback((u,m)=>{r({type:"UPDATE_PRODUCT",payload:{id:u,...m}})},[]),n=i.useCallback(u=>r({type:"DELETE_PRODUCT",id:u}),[]),d=i.useCallback(u=>{let m;if(u&&typeof u.name=="object"&&u.name!==null){const $=(u.name.ar||"").toString().trim(),b=(u.name.en||"").toString().trim();m=$||b||"Ù…Ø³ØªØ®Ø¯Ù…"}else typeof u?.name=="string"?m=u.name.trim()||"Ù…Ø³ØªØ®Ø¯Ù…":m="Ù…Ø³ØªØ®Ø¯Ù…";const A={id:"u"+Date.now(),name:m,role:u?.role||"user",active:u?.active??!0};return r({type:"ADD_USER",payload:A}),A},[]),l=i.useCallback((u,m)=>{r({type:"UPDATE_USER",payload:{id:u,...m}})},[]),g=i.useCallback(u=>r({type:"DELETE_USER",id:u}),[]),k=i.useCallback(u=>{const m={id:"o"+Date.now(),total:+u.total||0,status:u.status||"pending",customer:u.customer||"Ø¹Ù…ÙŠÙ„",items:+u.items||1};return r({type:"ADD_ORDER",payload:m}),m},[]),x=i.useCallback((u,m)=>{r({type:"UPDATE_ORDER",payload:{id:u,...m}})},[]),j=i.useCallback(u=>r({type:"DELETE_ORDER",id:u}),[]),p={...s,addProduct:o,updateProduct:a,deleteProduct:n,addUser:d,updateUser:l,deleteUser:g,addOrder:k,updateOrder:x,deleteOrder:j};return e.jsx(Rs.Provider,{value:p,children:t})}const Mn=new sr({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:"always",networkMode:"online"},mutations:{retry:0}}}),Fn="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",Wn={home:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",about:"Ù…Ù† Ù†Ø­Ù†",products:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",contact:"Ø§ØªØµÙ„ Ø¨Ù†Ø§",catalog:"Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",offers:"Ø§Ù„Ø¹Ø±ÙˆØ¶",account:"Ø­Ø³Ø§Ø¨ÙŠ",stores:"Ø§Ù„Ù…ØªØ§Ø¬Ø±",myOrders:"Ø·Ù„Ø¨Ø§ØªÙŠ",sellerKyc:"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¦Ø¹",admin:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",orders:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",dashboard:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"},Bn="Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",qn="Ø§Ù„Ø¹Ø±ÙˆØ¶",Vn="Ø§Ù„Ù…ØªØ§Ø¬Ø±",Hn="Ø§Ù„Ø³Ù„Ø©",Jn="Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª",Kn="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ù„Ø©",Gn="Ø§Ù„Ø¯ÙØ¹",Xn="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡",Qn="ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©",Yn="Ø§Ù„Ø«ÙŠÙ…",Zn="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…",ea="ÙØ§ØªØ­",ta="Ø¯Ø§ÙƒÙ†",sa="Ø§Ù„Ù†Ø¸Ø§Ù… (ØªÙ„Ù‚Ø§Ø¦ÙŠ)",ra="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",na="Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",aa="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...",oa="Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©",ia="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±.",la="Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©",ca="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…ÙØ¶Ù„Ø©",da="Ø§Ù„Ù…ÙØ¶Ù„Ø©",ua="Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©",ma="Ø§Ù„Ø³Ø¹Ø±",pa="ØºÙŠØ± Ù…ØªÙˆÙØ±",ha="ØªÙØ§ØµÙŠÙ„",fa="Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",ga="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",xa="Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬",ya="Ø¹Ø±Ø¶ Ø³Ø±ÙŠØ¹",ba="Ø¥ØºÙ„Ø§Ù‚",ja="Ø­Ø³Ø§Ø¨ÙŠ",va="Ù…Ø±Ø­Ø¨Ø§",wa="Ø®Ø±ÙˆØ¬",Sa="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©",ka="Ø¨Ø­Ø«",Aa="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹",Ca="Ø§Ù„Ø´Ø­Ù†",Na="Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©",Ea="Ø§Ù„Ø®ØµÙ…",Ra="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",Ta="ÙƒÙˆØ¯ Ø®ØµÙ…",Pa="ØªØ·Ø¨ÙŠÙ‚",_a="Ø¥Ø²Ø§Ù„Ø© {{code}}",La="Ø£Ø¶ÙÙ {{amount}} Ø±.Ø³ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ",Oa="Ø§Ù„ØªØ§Ù„ÙŠ",Ia="Ø§Ù„Ø³Ø§Ø¨Ù‚",Da="ØµÙØ­Ø©",$a="Ù…Ù†",Ua="Ù…Ù†ÙØ° Ø¢Ø³ÙŠØ§",za="Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø¨Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¬Ù…Ù„Ø©",Ma="Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ© Ù…Ù† Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŒ ÙƒÙˆØ±ÙŠØ§ØŒ Ø§Ù„ØµÙŠÙ† ÙˆØ§Ù„Ù…Ø²ÙŠØ¯",Fa="ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†",Wa="ØªØ¹Ø±Ù Ø¹Ù„ÙŠÙ†Ø§",Ba="ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†",qa="ØªØµÙØ­ Ø§Ù„Ø¹Ø±ÙˆØ¶",Va="Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ",Ha="Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 500 Ø±ÙŠØ§Ù„",Ja="Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©",Ka="Ù…Ù†ØªØ¬Ø§Øª Ø£ØµÙ„ÙŠØ© 100%",Ga="ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹",Xa="Ø®Ù„Ø§Ù„ 2-3 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„",Qa="Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©",Ya="Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©",Za="Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",eo="Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",to="Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",so="Ø¹Ø±ÙˆØ¶ ÙˆØ®ØµÙˆÙ…Ø§Øª",ro="Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",no="Ù…Ù† Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",ao="Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ø²ÙŠØ¯",oo="Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...",io="Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",lo="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù„Ø§Ù…Ø©",co="Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ù†ØªØ¬Ø§Øª",uo="Ø§Ù„Ø£Ù‚Ù„ Ù…Ù†ØªØ¬Ø§Øª",mo="Ø§Ù„Ø§Ø³Ù… (Ø¹Ø±Ø¨ÙŠ)",po="Ø§Ù„Ø§Ø³Ù… (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)",ho="Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",fo="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬",go="{{count}} Ù…Ù†ØªØ¬",xo="Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§ØªÙƒ",yo="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†",bo="Ø·Ù„Ø¨Ø§ØªÙŠ",jo="ØªØ­Ø¯ÙŠØ«",vo="ÙØ§ØªÙˆØ±Ø©",wo="Ø¹Ù†Ø§ØµØ± Ø¥Ø¶Ø§ÙÙŠØ©",So="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",ko="Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ",Ao={home:Fn,nav:Wn,catalog:Bn,offers:qn,stores:Vn,cart:Hn,cartTitle:Jn,cartDetails:Kn,checkout:Gn,proceedCheckout:Xn,changeLanguage:Qn,theme:Yn,toggleTheme:Zn,themeLight:ea,themeDark:ta,themeSystemAuto:sa,login:ra,register:na,searchPlaceholder:aa,addToCart:oa,noItems:ia,emptyCart:la,emptyWishlist:ca,wishlist:da,viewWishlist:ua,new:"Ø¬Ø¯ÙŠØ¯",price:ma,outOfStock:pa,details:ha,products:fa,breadcrumbHome:ga,breadcrumbCatalog:xa,quickView:ya,close:ba,account:ja,greet:va,logout:wa,sidebar:Sa,search:ka,itemsTotal:Aa,shipping:Ca,tax:Na,discount:Ea,grandTotal:Ra,coupon:Ta,apply:Pa,removeCoupon:_a,freeShippingHint:La,next:Oa,prev:Ia,page:Da,of:$a,heroTitle:Ua,heroSubtitle:za,heroLead:Ma,heroCtaShop:Fa,heroCtaAbout:Wa,shop_now:Ba,view_offers:qa,featureFreeShippingTitle:Va,featureFreeShippingDesc:Ha,featureQualityTitle:Ja,featureQualityDesc:Ka,featureFastDeliveryTitle:Ga,featureFastDeliveryDesc:Xa,featuredProducts:Qa,featuredSubtitle:Ya,viewAllProducts:Za,rating:eo,latestProducts:to,discountProducts:so,blog:ro,fromBlog:no,readMore:ao,loading:oo,brandsTitle:io,searchBrand:lo,mostProducts:co,fewestProducts:uo,nameAR:mo,nameEN:po,viewProducts:ho,noResults:fo,productsCount:go,pleaseLoginToViewOrders:xo,noOrdersYet:yo,myOrders:bo,refresh:jo,invoice:vo,additionalItems:wo,totalLabel:So,mobileNavigation:ko},Co="Home",No={home:"Home",about:"About",actions:{add:"Add",add_to_cart:"Add to cart",added:"Added",apply:"Apply",back:"Back",choose:"Choose",clear:"Clear",clear_all:"Clear all",close:"Close",open:"Open",continue_shopping:"Continue shopping",enter_password:"Enter password",log_in_html:'Have an account? <a href="{{ link }}">Log in</a> to check out faster.',log_in:"Sign in",log_out:"Sign out",open_image_in_full_screen:"Open image in full screen",remove:"Remove",remove_discount:"Remove discount {{ code }}",show_all_options:"Show all options",see_items:{one:"See {{ count }} item",other:"See {{ count }} items"},show_filters:"Filter",show_less:"Show less",show_more:"Show more",sign_in_options:"Other sign in options",view_in_your_space:"View in your space",view_all:"View all",more:"More",zoom:"Zoom",close_dialog:"Close dialog",reset:"Reset",enter_using_password:"Enter using password",sign_up:"Sign up",submit:"Submit",view_store_information:"View store information",sort:"Sort"},account:"Account",cart:"Cart"},Eo="Coupon",Ro="Apply",To="Remove {{code}}",Po="Add {{amount}} SAR for free shipping",_o="Next",Lo="Previous",Oo="Page",Io="of",Do="Asia Outlet",$o="Asian quality at wholesale prices",Uo="Discover the best carefully selected Asian products from Japan, Korea, China and more",zo="Shop Now",Mo="About Us",Fo="Shop Now",Wo="View Offers",Bo="Free Shipping",qo="For orders above 500 SAR",Vo="Quality Guarantee",Ho="100% Authentic Products",Jo="Fast Delivery",Ko="Within 2-3 business days",Go="Featured Products",Xo="Top selected Asian products",Qo="View all products",Yo="Rating",Zo="Latest Products",ei="Discounts & Offers",ti="Blog",si="From the Blog",ri="Read more",ni="Loading...",ai="Brands",oi="Search brand",ii="Most Products",li="Fewest Products",ci="Name (AR)",di="Name (EN)",ui="View products",mi="No results",pi="{{count}} products",hi="Please log in to view your orders",fi="No orders yet",gi="My Orders",xi="Refresh",yi="Invoice",bi="additional items",ji="Total",vi="Mobile navigation",wi={home:Co,nav:No,coupon:Eo,apply:Ro,removeCoupon:To,freeShippingHint:Po,next:_o,prev:Lo,page:Oo,of:Io,heroTitle:Do,heroSubtitle:$o,heroLead:Uo,heroCtaShop:zo,heroCtaAbout:Mo,shop_now:Fo,view_offers:Wo,featureFreeShippingTitle:Bo,featureFreeShippingDesc:qo,featureQualityTitle:Vo,featureQualityDesc:Ho,featureFastDeliveryTitle:Jo,featureFastDeliveryDesc:Ko,featuredProducts:Go,featuredSubtitle:Xo,viewAllProducts:Qo,rating:Yo,latestProducts:Zo,discountProducts:ei,blog:ti,fromBlog:si,readMore:ri,loading:ni,brandsTitle:ai,searchBrand:oi,mostProducts:ii,fewestProducts:li,nameAR:ci,nameEN:di,viewProducts:ui,noResults:mi,productsCount:pi,pleaseLoginToViewOrders:hi,noOrdersYet:fi,myOrders:gi,refresh:xi,invoice:yi,additionalItems:bi,totalLabel:ji,mobileNavigation:vi},Si={title:"Ma Boutique",searchPlaceholder:"Rechercher des produitsâ€¦",noResults:"Aucun rÃ©sultat",loading:"Chargementâ€¦"},ki={home:"Accueil",products:"Produits",orders:"Commandes",admin:"Admin",catalog:"Catalogue",offers:"Offres",stores:"Magasins",myOrders:"Mes commandes",sellerKyc:"KYC Vendeur",dashboard:"Tableau de bord"},Ai="Catalogue",Ci="Offres",Ni="Magasins",Ei="Panier",Ri="Panier",Ti="Panier vide",Pi="Passer au paiement",_i="Changer la langue",Li="ThÃ¨me",Oi="Basculer le thÃ¨me",Ii="Clair",Di="Sombre",$i="SystÃ¨me (Auto)",Ui="Total",zi="Navigation mobile",Mi={customers:{title:"Clients",add:"Ajouter",name:"Nom",email:"E-mail",role:"RÃ´le",status:"Statut",active:"Actif",inactive:"Inactif"}},Fi="Acheter",Wi="Voir les offres",Bi={app:Si,nav:ki,catalog:Ai,offers:Ci,stores:Ni,cart:Ei,cartTitle:Ri,emptyCart:Ti,proceedCheckout:Pi,changeLanguage:_i,theme:Li,toggleTheme:Oi,themeLight:Ii,themeDark:Di,themeSystemAuto:$i,totalLabel:Ui,mobileNavigation:zi,admin:Mi,shop_now:Fi,view_offers:Wi},qi={ar:{translation:Ao},en:{translation:wi},fr:{translation:Bi}},Vi=()=>{try{const t=localStorage.getItem("lang"),s=document?.documentElement?.lang,r=navigator?.language||navigator?.languages?.[0],o=(t||s||r||"ar").slice(0,2).toLowerCase();return["ar","en","fr"].includes(o)?o:"en"}catch{return"ar"}};ps.use(Xs).init({resources:qi,lng:Vi(),fallbackLng:"en",interpolation:{escapeValue:!1},returnNull:!1});function Hi(){const[t,s]=R.useState(!1);return R.useEffect(()=>{const r=()=>{const o=window.scrollY||document.documentElement.scrollTop;s(o>500)};return window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)},[]),t?e.jsx("button",{type:"button",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-5 inset-inline-end-5 z-50 rounded-full bg-slate-900 text-white shadow-lg hover:bg-slate-800 transition p-3","aria-label":"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰",children:"â†‘"}):null}if(typeof window<"u"&&window.AOS&&typeof window.AOS.init=="function")try{window.AOS.init({duration:600,once:!0})}catch{}const Ji=()=>{const{locale:t}=xe();return R.useEffect(()=>{const s=document.documentElement;s.setAttribute("lang",["ar","en","fr"].includes(t)?t:t==="ar"?"ar":"en"),s.setAttribute("dir",t==="ar"?"rtl":"ltr")},[t]),null},Ki=()=>{const t=Bt();return R.useEffect(()=>{const s=r=>{const{type:o="info",title:a,description:n,duration:d}=r.detail||{};(o==="success"?t.success:o==="error"?t.error:o==="warn"?t.warn:t.info)(a,n,d)};return window.addEventListener("toast:show",s),()=>window.removeEventListener("toast:show",s)},[t]),null},Gi=({children:t})=>e.jsx(tr,{i18n:ps,children:e.jsx(cr,{children:e.jsx(or,{children:e.jsx(mr,{children:e.jsx(Pn,{children:e.jsx(Ar,{children:e.jsx(Ln,{children:e.jsx(Dn,{children:e.jsx(zn,{children:e.jsx(nr,{children:e.jsxs(ur,{children:[e.jsx(Ji,{}),e.jsx(Ki,{}),e.jsx(Qi,{}),e.jsx(Hi,{}),t]})})})})})})})})})})}),Xi=Qs([{path:"*",element:e.jsx(Gi,{children:e.jsx(En,{})})}],{future:{v7_startTransition:!0,v7_relativeSplatPath:!0}});Ys.createRoot(document.getElementById("root")).render(e.jsxs(Zs,{client:Mn,children:[e.jsx(er,{router:Xi,future:{v7_startTransition:!0,v7_relativeSplatPath:!0}}),null]}));function Qi(){return R.useEffect(()=>{const t=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!(typeof navigator<"u"&&typeof navigator.vibrate=="function"))return;const r=()=>{if(!t)try{navigator.vibrate(12)}catch{}};return window.addEventListener("cart:add",r),()=>window.removeEventListener("cart:add",r)},[]),null}export{De as A,Ee as S,Vt as a,K as b,Ae as c,cl as d,Sr as e,ve as f,dl as g,gn as h,ul as i,ke as j,As as k,ol as l,je as m,ns as n,il as o,ll as p,fn as q,de as r,qt as s,xe as u};
