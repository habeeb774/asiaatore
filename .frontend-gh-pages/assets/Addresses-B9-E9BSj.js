import{r as n,j as s}from"./vendor.react-C0fmYGW5.js";import{b as d}from"./index-Df3LzoMm.js";import"./vendor-CF_-ATCh.js";import"./vendor.router-2GzHiivc.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-U7UpOlxs.js";/* empty css                     */function E(){const[u,o]=n.useState(!0),[m,x]=n.useState([]),[p,i]=n.useState(""),[t,r]=n.useState({label:"",name:"",phone:"",country:"SA",city:"",district:"",street:"",building:"",apartment:"",notes:"",isDefault:!1}),[h,l]=n.useState(!1),c=async()=>{o(!0),i("");try{const e=await d.addressesList();x(e.addresses||e.items||[])}catch(e){i(e.data?.error||e.message)}finally{o(!1)}};n.useEffect(()=>{c()},[]);const g=async e=>{e.preventDefault(),l(!0);try{await d.addressCreate(t),r({label:"",name:"",phone:"",country:"SA",city:"",district:"",street:"",building:"",apartment:"",notes:"",isDefault:!1}),await c()}catch(a){i(a.data?.error||a.message)}finally{l(!1)}},b=async e=>{l(!0);try{await d.addressUpdate(e,{isDefault:!0}),await c()}catch(a){i(a.data?.error||a.message)}finally{l(!1)}},j=async e=>{if(confirm("حذف العنوان؟")){l(!0);try{await d.addressDelete(e),await c()}catch(a){i(a.data?.error||a.message)}finally{l(!1)}}};return s.jsxs("div",{className:"container-custom p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"عناويني"}),p&&s.jsxs("div",{className:"text-sm text-red-600 mb-2",children:["خطأ: ",String(p)]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"إضافة عنوان"}),s.jsxs("form",{onSubmit:g,className:"grid gap-2",children:[s.jsx("input",{className:"border px-3 py-2",placeholder:"عنوان مختصر (منزل/عمل)",value:t.label,onChange:e=>r(a=>({...a,label:e.target.value}))}),s.jsx("input",{className:"border px-3 py-2",placeholder:"الاسم",value:t.name,onChange:e=>r(a=>({...a,name:e.target.value}))}),s.jsx("input",{className:"border px-3 py-2",placeholder:"الهاتف",value:t.phone,onChange:e=>r(a=>({...a,phone:e.target.value}))}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{className:"border px-3 py-2",placeholder:"الدولة",value:t.country,onChange:e=>r(a=>({...a,country:e.target.value}))}),s.jsx("input",{className:"border px-3 py-2",placeholder:"المدينة",value:t.city,onChange:e=>r(a=>({...a,city:e.target.value}))})]}),s.jsx("input",{className:"border px-3 py-2",placeholder:"الحي",value:t.district,onChange:e=>r(a=>({...a,district:e.target.value}))}),s.jsx("input",{className:"border px-3 py-2",placeholder:"الشارع",value:t.street,onChange:e=>r(a=>({...a,street:e.target.value}))}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{className:"border px-3 py-2",placeholder:"المبنى",value:t.building,onChange:e=>r(a=>({...a,building:e.target.value}))}),s.jsx("input",{className:"border px-3 py-2",placeholder:"الشقة",value:t.apartment,onChange:e=>r(a=>({...a,apartment:e.target.value}))})]}),s.jsx("textarea",{className:"border px-3 py-2",placeholder:"ملاحظات",value:t.notes,onChange:e=>r(a=>({...a,notes:e.target.value}))}),s.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:t.isDefault,onChange:e=>r(a=>({...a,isDefault:e.target.checked}))}),s.jsx("span",{children:"تعيين كافتراضي"})]}),s.jsx("button",{className:"btn-primary",disabled:h,type:"submit",children:"حفظ"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"العناوين المحفوظة"}),u?s.jsx("div",{children:"تحميل..."}):s.jsxs("ul",{className:"space-y-3",children:[m.map(e=>s.jsxs("li",{className:"border rounded p-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"font-semibold",children:[e.label||"—"," ",e.isDefault&&s.jsx("span",{className:"text-xs text-green-700",children:"(افتراضي)"})]}),s.jsxs("div",{className:"flex gap-2",children:[!e.isDefault&&s.jsx("button",{className:"btn-secondary btn-xs",onClick:()=>b(e.id),children:"تعيين افتراضي"}),s.jsx("button",{className:"btn-danger btn-xs",onClick:()=>j(e.id),children:"حذف"})]})]}),s.jsxs("div",{children:[e.name," — ",e.phone]}),s.jsxs("div",{children:[e.country,"، ",e.city,"، ",e.district]}),s.jsxs("div",{children:[e.street,"، ",e.building,"، ",e.apartment]}),e.notes&&s.jsxs("div",{className:"text-gray-600",children:["ملاحظات: ",e.notes]})]},e.id)),m.length===0&&s.jsx("li",{className:"text-gray-500",children:"لا توجد عناوين بعد"})]})]})]})]})}export{E as default};
