const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CategoriesSection-DnPv1ixf.js","assets/vendor.react-C0fmYGW5.js","assets/vendor-CF_-ATCh.js","assets/vendor.router-2GzHiivc.js","assets/vendor.i18next-COqwnjR1.js","assets/vendor.zustand-BuMo4m-J.js","assets/vendor.tanstack-K6OTystZ.js","assets/vendor.leaflet-U7UpOlxs.js","assets/index-B0cb22ux.js","assets/index-Cx9WY-8y.css","assets/vendor-B1-rhOTE.css","assets/vendor.motion-YCPQEdLH.js","assets/ProductSlider-CQTT9C35.js","assets/QuickViewModal-CpkSfHrV.js","assets/LazyImage-SqLtajCp.js","assets/Chip-BG3kHLZg.js","assets/HomeFeatures-C96YLf-7.js","assets/BrandsStrip-TWDkIbsZ.js","assets/Offers-97AGRwWX.js"])))=>i.map(i=>d[i]);
import{_ as R}from"./vendor.tanstack-K6OTystZ.js";import{j as e,r as a,b as Q,u as X,L as O,o as G,p as K,T as D,e as q,q as L,t as H,v as F,w as B,x as U,R as M,_ as ae,$ as se}from"./vendor.react-C0fmYGW5.js";import{u as V,a as re,r as $,b as W,c as Y,A as ie,m as I,d as ne,e as le,S as oe}from"./index-B0cb22ux.js";import{Q as ce}from"./QuickViewModal-CpkSfHrV.js";import{L as de}from"./LazyImage-SqLtajCp.js";import{C as J}from"./Chip-BG3kHLZg.js";const ue=a.memo(({product:t,hasDiscount:n,discountPercent:u,outOfStock:c,showImageBadge:r,locale:o})=>e.jsxs(e.Fragment,{children:[t.badge&&e.jsx("span",{className:"badge",children:o==="ar"?"جديد":"New"}),r&&n&&e.jsxs("span",{className:"discount-badge",children:["-",u,"%"]}),c&&e.jsx("span",{className:"gallery-indicator",style:{background:"rgba(109,1,11,.85)"},children:o==="ar"?"غير متوفر":"Out"})]})),me=a.memo(({rating:t})=>t?e.jsx("div",{className:"rating-row","aria-label":`rating ${t}`,children:[1,2,3,4,5].map(n=>e.jsx("span",{className:`star ${n<=t?"":"off"}`,children:"★"},n))}):null),he=a.memo(({price:t,baseOld:n,hasDiscount:u,discountPercent:c,savings:r,showPriceBadge:o,locale:g})=>e.jsxs("div",{className:"price-row",children:[e.jsxs("span",{className:"price",children:[t," ",g==="ar"?"ر.س":"SAR"]}),Number.isFinite(n)&&e.jsx("span",{className:"old",children:n}),o&&u&&typeof c=="number"&&e.jsxs("span",{className:"badge-soft",style:{fontSize:".62rem",padding:".15rem .4rem",borderRadius:8,marginInlineStart:6},children:["-",c,"%"]}),u&&r>0&&e.jsx("span",{className:"save-badge","aria-label":g==="ar"?`وفرت ${r} ر.س`:`Saved ${r} SAR`,children:g==="ar"?`وفّرت ${r} ر.س`:`Saved ${r} SAR`})]})),ge=a.memo(({product:t,currentQty:n,maxPerItem:u,outOfStock:c,locale:r,t:o,onAddToCart:g})=>{const[x,p]=a.useState("idle"),m=n>=(u||10);a.useEffect(()=>{m?p("max"):x==="max"&&p("idle")},[m,x]);const j=a.useCallback(()=>{if(c||m)return;const y=g(t,1);if(y?.ok){const w=n+1>=(u||10);p(w?"max":"added");const k=setTimeout(()=>{p(w?"max":"idle")},1400);return()=>clearTimeout(k)}return y},[t,n,u,c,m,g]),b=a.useCallback(()=>c?r==="ar"?"غير متوفر":"Out of stock":m?r==="ar"?"الحد الأقصى":"Max":x==="added"?r==="ar"?"✓ تمت الإضافة":"✓ Added":o("addToCart"),[c,m,x,r,o]),N=a.useCallback(()=>c?r==="ar"?"غير متوفر":"Out of stock":m?r==="ar"?"الحد الأقصى":"Max reached":o("addToCart"),[c,m,r,o]);return e.jsx("button",{className:`primary ${x==="added"?"added":""} ${x==="max"?"at-max":""}`,disabled:c||m,onClick:j,"aria-label":N(),children:b()})}),xe=({product:t,showImageBadge:n=!0,showPriceBadge:u=!0,priority:c=!1})=>{const{locale:r,t:o}=V(),{addToCart:g,cartItems:x,maxPerItem:p}=re()||{addToCart:()=>({}),cartItems:[],maxPerItem:10},m=Q(),j=X(),[b,N]=a.useState(!1),y=a.useMemo(()=>$(t?.name??t?.title,r)||(typeof t?.name=="string"?t.name:t?.title)||"",[t,r]),w=a.useMemo(()=>`${r==="ar"?"":"/"+r}/product/${t.id}`,[r,t.id]),{baseOld:k,priceNum:P,hasDiscount:i,discountPercent:f,savings:l,outOfStock:d}=a.useMemo(()=>{const S=t?.oldPrice??t?.originalPrice,_=S!=null?+S:void 0,C=t?.price!=null?+t.price:void 0,T=Number.isFinite(_)&&Number.isFinite(C)&&_>C,Z=T?Math.round((1-C/_)*100):null,ee=T?Math.max(0,_-C):0,te=t.stock!==void 0&&t.stock<=0;return{baseOld:_,priceNum:C,hasDiscount:T,discountPercent:Z,savings:ee,outOfStock:te}},[t]),h=a.useMemo(()=>x?.find(S=>S.id===t.id),[x,t.id])?.quantity||0,v=a.useCallback((S,_)=>{const C=g(S,_);if(C?.reason==="AUTH_REQUIRED"){const T=j.pathname+(j.search||"");m("/login",{state:{from:T}})}return C},[g,m,j]),E=a.useCallback(S=>{S.preventDefault(),S.stopPropagation(),N(!0)},[]),z=a.useMemo(()=>({avifSrcSet:t.imageVariants?.avif?[t.imageVariants.avif.thumb&&`${t.imageVariants.avif.thumb} 200w`,t.imageVariants.avif.medium&&`${t.imageVariants.avif.medium} 400w`,t.imageVariants.avif.large&&`${t.imageVariants.avif.large} 800w`].filter(Boolean).join(", "):void 0,webpSrcSet:t.imageVariants?.webp?[t.imageVariants.webp.thumb&&`${t.imageVariants.webp.thumb} 200w`,t.imageVariants.webp.medium&&`${t.imageVariants.webp.medium} 400w`,t.imageVariants.webp.large&&`${t.imageVariants.webp.large} 800w`].filter(Boolean).join(", "):void 0}),[t.imageVariants]);return e.jsxs("div",{className:"product-card","data-id":t.id,children:[e.jsxs(O,{to:w,className:"product-image product-media","aria-label":y,children:[e.jsx(de,{src:t.imageVariants?.thumb||t.image,alt:y,className:"w-full h-full object-cover",sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 25vw, 240px",avifSrcSet:z.avifSrcSet,webpSrcSet:z.webpSrcSet,width:400,height:400,priority:c}),e.jsx(ue,{product:t,hasDiscount:i,discountPercent:f,outOfStock:d,showImageBadge:n,locale:r}),e.jsx("div",{className:"product-overlay",children:e.jsx("button",{className:"quick-view-btn",onClick:E,children:o("quickView")})})]}),e.jsx("h3",{className:"product-title clamp-2",children:y}),e.jsx(me,{rating:t.rating}),e.jsx(he,{price:t.price,baseOld:k,hasDiscount:i,discountPercent:f,savings:l,showPriceBadge:u,locale:r}),e.jsxs("div",{className:"actions",children:[e.jsx(ge,{product:t,currentQty:h,maxPerItem:p,outOfStock:d,locale:r,t:o,onAddToCart:v}),e.jsx(O,{to:w,children:o("details")})]}),b&&e.jsx(ce,{product:t,onClose:()=>N(!1)})]})},fe=a.memo(xe),be=()=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden animate-pulse",children:[e.jsx("div",{className:"aspect-square bg-gray-300"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),e.jsx("div",{className:"h-10 bg-gray-300 rounded"})]})]}),pe='after:content-[" "] after:absolute after:top-0 after:right-0 after:w-8 after:h-full after:pointer-events-none after:bg-gradient-to-l after:from-white after:to-transparent',we=()=>{const[t,n]=a.useState([]),[u,c]=a.useState(!1),[r,o]=a.useState(null),g=X(),x=Q(),p=a.useRef(null),{locale:m}=V(),j=m==="en"?"/en/products":m==="fr"?"/fr/products":"/products",[b,N]=a.useState(!1),y=10;a.useEffect(()=>{c(!0);try{const i=localStorage.getItem("cats_cache");if(i){const f=JSON.parse(i);Array.isArray(f)&&n(f)}}catch{}W.listCategories({withCounts:1}).then(i=>{if(i?.categories){n(i.categories);try{localStorage.setItem("cats_cache",JSON.stringify(i.categories))}catch{}}}).catch(i=>o(i.message)).finally(()=>c(!1))},[]);const w=a.useMemo(()=>{const i=new Map;for(const l of t){const d=l.slug||l.id||l.name?.ar||l.name?.en||JSON.stringify(l);i.has(d)||i.set(d,l)}const f=Array.from(i.values());return f.sort((l,d)=>(d.productCount||0)-(l.productCount||0)||(l.name?.ar||"").localeCompare(d.name?.ar||"","ar")),f},[t]);if(u)return e.jsx("div",{className:"text-xs opacity-60 px-4 py-2",children:"تحميل الفئات..."});if(r)return e.jsx("div",{className:"text-xs text-red-600 px-4 py-2",children:"خطأ الفئات"});if(!w.length)return null;const k=b?w:w.slice(0,y),P=i=>{const f=p.current;if(!f)return;const l=Math.round(f.clientWidth*.8)*(i==="left"?-1:1);f.scrollBy({left:l,behavior:"smooth"})};return e.jsxs("div",{className:"relative",role:"navigation","aria-label":"تصنيفات",children:[e.jsx("button",{type:"button","aria-label":"Scroll right",onClick:()=>P("right"),className:"absolute left-1 top-1/2 -translate-y-1/2 z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden sm:inline-flex",children:e.jsx(G,{size:18})}),e.jsx("button",{type:"button","aria-label":"Scroll left",onClick:()=>P("left"),className:"absolute right-1 top-1/2 -translate-y-1/2 z-10 rounded-full bg-white/85 shadow hover:bg-white p-1 hidden sm:inline-flex",children:e.jsx(K,{size:18})}),e.jsxs("div",{ref:p,className:`flex gap-3 overflow-x-auto pb-2 px-2 snap-x snap-mandatory mobile-gutters hide-scrollbar ${pe}`,dir:"rtl",children:[k.map(i=>{const l=new URLSearchParams(g.search).get("category")===i.slug||g.pathname.includes(`/category/${i.slug}`),d=(i?.name?.ar||i?.name?.en||i?.slug||"").toLowerCase(),h=(()=>{switch((i.icon||"").toLowerCase().trim()){case"cup-soda":case"soda":case"drink":case"drinks":return U;case"coffee":case"tea":return B;case"cookie":case"cookies":case"biscuit":case"biscuits":return F;case"candy":case"sugar":return H;case"utensils":case"pasta":case"rice":return L;case"store":case"supermarket":return q;case"tag":return D}return/(ماء|مشروب|مشروبات|drinks?|beverages?|water)/.test(d)?U:/(شاي|قهوة|coffee|tea)/.test(d)?B:/(بسكويت|كوكي|كوكيز|biscuits?|cookies?)/.test(d)?F:/(سكر|sugar)/.test(d)?H:/(مكرونة|معكرونة|أرز|ارز|pasta|rice)/.test(d)?L:/(صلصات|مخللات|sauces?|pickles?)/.test(d)?L:/(سوبرماركت|supermarket)/.test(d)?q:D})(),v=i.name?.ar||i.name?.en||i.slug;return e.jsx(J,{className:"snap-start shrink-0",variant:l?"primary":"outline",size:"lg",selected:l,onClick:()=>x(`${j}?category=${encodeURIComponent(i.slug)}&page=1`),"aria-current":l?"page":void 0,children:e.jsxs("span",{"aria-hidden":"true",style:{display:"inline-flex",alignItems:"center",gap:6},children:[i.image?e.jsx("img",{src:i.image,alt:"",style:{width:20,height:20,objectFit:"contain"}}):e.jsx(h,{size:18}),e.jsx("span",{children:v}),typeof i.productCount=="number"&&i.productCount>0&&e.jsxs("span",{style:{fontSize:".72rem",opacity:.75},children:["(",i.productCount,")"]})]})},i.id||i.slug)}),w.length>y&&e.jsx(J,{type:"button",onClick:()=>N(i=>!i),className:"snap-start shrink-0",variant:b?"soft":"outline",size:"md",children:b?m==="ar"?"إخفاء":"Hide":m==="ar"?"عرض المزيد":"Show more"})]})]})},ye=M.memo(({src:t,alt:n,className:u})=>{const[c,r]=a.useState(!1);return e.jsx("div",{className:`${u} bg-gray-200 transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,children:e.jsx("img",{src:t,alt:n,loading:"lazy",decoding:"async",onLoad:()=>r(!0),className:"w-full h-full object-cover"})})}),je=M.memo(({slide:t,locale:n,t:u})=>e.jsxs(I.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.6,delay:.2},className:"space-y-6",children:[e.jsxs(I.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.4},className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm font-semibold border border-white/30",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),u("saleBadge")]}),e.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-tight",children:e.jsx("span",{className:"block bg-gradient-to-r from-white to-white/80 bg-clip-text text-transparent",children:t.title})}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-white/90 font-light max-w-2xl mx-auto leading-relaxed",children:t.subtitle}),e.jsxs(I.div,{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mt-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsx("a",{href:"/products",className:"inline-flex items-center justify-center bg-transparent text-white border-2 border-white/50 px-8 py-4 rounded-lg font-semibold text-lg backdrop-blur-sm hover:bg-white/10 hover:border-white transition-all duration-300 min-w-[200px]",children:n==="ar"?"تسوق الآن":"Shop Now"}),e.jsx("a",{href:"/about",className:"inline-flex items-center justify-center bg-transparent text-white border-2 border-white/50 px-8 py-4 rounded-lg font-semibold text-lg backdrop-blur-sm hover:bg-white/10 hover:border-white transition-all duration-300 min-w-[200px]",children:n==="ar"?"تعرف علينا":"About Us"})]})]},t.id)),ve=M.memo(({slide:t,isActive:n})=>e.jsxs(I.div,{initial:{opacity:0,scale:1.05},animate:{opacity:n?1:0,scale:n?1:1.05},exit:{opacity:0,scale:.98},transition:{duration:.7,ease:"easeInOut"},className:"absolute inset-0 w-full h-full",style:{display:n?"block":"none"},children:[e.jsx(ye,{src:t.src,alt:t.title,className:"w-full h-full"}),e.jsx("div",{className:"absolute inset-0",style:{background:t.overlay}}),e.jsx("div",{className:"absolute inset-0 bg-black/20"})]},t.id)),Ne=()=>{const{locale:t,t:n}=V(),{setting:u}=Y(),c="/products",r=a.useMemo(()=>[{id:1,src:"https://images.unsplash.com/photo-1607082350899-7e105aa886ae?auto=format&fit=crop&w=1200&q=70",title:t==="ar"?"عروض خاصة":"Special Offers",subtitle:t==="ar"?"خصومات تصل إلى 50%":"Up to 50% Discount",link:c,overlay:"linear-gradient(135deg, rgba(102,126,234,0.8) 0%, rgba(118,75,162,0.8) 100%)"},{id:2,src:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?auto=format&fit=crop&w=1200&q=70",title:t==="ar"?"أحدث المنتجات":"New Arrivals",subtitle:t==="ar"?"اكتشف مجموعتنا الجديدة":"Discover Our New Collection",link:c+"?sort=newest",overlay:"linear-gradient(135deg, rgba(239,68,68,0.8) 0%, rgba(249,115,22,0.8) 100%)"},{id:3,src:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?auto=format&fit=crop&w=1200&q=70",title:t==="ar"?"شحن مجاني":"Free Shipping",subtitle:t==="ar"?"لطلبات فوق 200 ريال":"For Orders Over 200 SAR",link:"/shipping-info",overlay:"linear-gradient(135deg, rgba(16,185,129,0.8) 0%, rgba(5,150,105,0.8) 100%)"}],[t]),[o,g]=a.useState(0),[x,p]=a.useState(!0),[m,j]=a.useState(!1),b=a.useRef(null),N=a.useRef(0);a.useEffect(()=>()=>{b.current&&clearInterval(b.current)},[]);const y=a.useCallback(l=>g(l),[]),w=a.useCallback(()=>g(l=>l===r.length-1?0:l+1),[r.length]),k=a.useCallback(()=>g(l=>l===0?r.length-1:l-1),[r.length]);a.useEffect(()=>{if(!x||m){b.current&&(clearInterval(b.current),b.current=null);return}return b.current=setInterval(w,u?.heroAutoplayInterval||5e3),()=>{b.current&&(clearInterval(b.current),b.current=null)}},[x,m,w,u]);const P=a.useCallback(l=>{N.current=l.targetTouches[0].clientX},[]),i=a.useCallback(l=>{const d=l.changedTouches[0].clientX,s=N.current-d;Math.abs(s)>50&&(s>0?w():k())},[w,k]),f=a.useRef(0);return a.useEffect(()=>{f.current+=1},[o]),e.jsxs("section",{className:"relative h-screen min-h-[520px] max-h-[800px] overflow-hidden",dir:t==="ar"?"rtl":"ltr",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onTouchStart:P,onTouchEnd:i,children:[e.jsxs("div",{className:"relative w-full h-full",children:[r.map((l,d)=>e.jsx(ve,{slide:l,isActive:d===o},l.id)),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center text-white",children:e.jsx(ie,{mode:"wait",children:e.jsx(je,{slide:r[o],locale:t,t:n})})})})}),e.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:k,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 flex items-center justify-center text-white hover:bg-white/30 transition-all duration-300 active:scale-95","aria-label":t==="ar"?"السابق":"Previous",children:e.jsx(K,{size:20})}),e.jsx("button",{onClick:()=>p(!x),className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 flex items-center justify-center text-white hover:bg-white/30 transition-all duration-300 active:scale-95","aria-label":x?t==="ar"?"إيقاف":"Pause":t==="ar"?"تشغيل":"Play",children:x?e.jsx(ae,{size:16}):e.jsx(se,{size:16})}),e.jsx("button",{onClick:w,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 flex items-center justify-center text-white hover:bg-white/30 transition-all duration-300 active:scale-95","aria-label":t==="ar"?"التالي":"Next",children:e.jsx(G,{size:20})})]}),e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 ml-2 sm:ml-4",children:r.map((l,d)=>e.jsx("button",{onClick:()=>y(d),className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-all duration-300 ${d===o?"bg-white scale-125":"bg-white/50 hover:bg-white/70"}`,"aria-label":t==="ar"?`انتقل إلى الشريحة ${d+1}`:`Go to slide ${d+1}`},d))})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-white/20",children:e.jsx(I.div,{className:"h-full bg-white",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:(u?.heroAutoplayInterval||5e3)/1e3,ease:"linear"}},f.current)})]}),e.jsx(I.div,{className:"absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer",animate:{y:[0,8,0]},transition:{duration:2,repeat:1/0},onClick:()=>window.scrollBy({top:window.innerHeight-200,behavior:"smooth"}),children:e.jsx("div",{className:"w-5 h-8 sm:w-6 sm:h-10 border-2 border-white/50 rounded-full flex justify-center",children:e.jsx(I.div,{className:"w-1 h-2 sm:h-3 bg-white/70 rounded-full mt-2",animate:{y:[0,8,0]},transition:{duration:2,repeat:1/0}})})})]})},ke=M.memo(Ne),Se=a.lazy(()=>R(()=>import("./CategoriesSection-DnPv1ixf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Ce=a.lazy(()=>R(()=>import("./ProductSlider-CQTT9C35.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,13,14,15]))),Pe=a.lazy(()=>R(()=>import("./HomeFeatures-C96YLf-7.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10]))),_e=a.lazy(()=>R(()=>import("./BrandsStrip-TWDkIbsZ.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10]))),Ie=a.lazy(()=>R(()=>import("./Offers-97AGRwWX.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,17,0,11,12,13,14,15,16])));function A({children:t,fallback:n=null,rootMargin:u="200px"}){const[c,r]=a.useState(!1),o=a.useRef(null);return a.useEffect(()=>{if(c)return;const g=o.current;if(!g)return;try{if(typeof window<"u"&&"IntersectionObserver"in window){const p=new IntersectionObserver(m=>{m[0]?.isIntersecting&&(r(!0),p.disconnect())},{rootMargin:u});return p.observe(g),()=>p.disconnect()}}catch{}const x=setTimeout(()=>r(!0),300);return()=>clearTimeout(x)},[c,u]),e.jsx("div",{ref:o,children:c?t:n})}const Te=()=>{const{t,locale:n}=V(),{setting:u}=Y()||{},{products:c,loading:r}=ne()||{products:[],loading:!1},o=a.useDeferredValue(c||[]),{features:g,byLocation:x}=le()||{byLocation:{topStrip:[]},features:[]},[p,m]=a.useState([]),[j,b]=a.useState(null),[N,y]=a.useState(!1);a.useEffect(()=>{let s=!0;if(typeof window<"u"){const h=()=>{try{a.startTransition(()=>{s&&y(!0)})}catch{s&&y(!0)}};try{if(typeof window.requestIdleCallback=="function")window.requestIdleCallback(h,{timeout:1e3});else{const v=setTimeout(h,700);return()=>clearTimeout(v)}}catch{const E=setTimeout(h,700);return()=>clearTimeout(E)}}return()=>{s=!1}},[]),a.useEffect(()=>{let s=!0;return W.listCategories({withCounts:1}).then(h=>{s&&h?.categories&&m(h.categories)}).catch(()=>{}),()=>{s=!1}},[]);const w=a.useMemo(()=>{const s=new Map;for(const h of p){const v=h.slug||h.id;s.has(v)||s.set(v,h)}return Array.from(s.values()).sort((h,v)=>(v.productCount||0)-(h.productCount||0)).slice(0,8)},[p]),k=a.useMemo(()=>(o||[]).slice(-6).reverse(),[o]),P=a.useMemo(()=>(o||[]).filter(s=>s.oldPrice&&s.oldPrice>s.price).slice(0,6),[o]),i=a.useMemo(()=>(o||[]).slice(0,12),[o]),f=n==="ar"?u?.siteNameAr||"شركة منفذ اسيا التجارية":u?.siteNameEn||"My Store",l=n==="ar"?`${t("home")} | ${f}`:`${f} | ${t("home")}`,d=a.useMemo(()=>g?.slice(0,6).map(s=>({id:s.id,icon:e.jsx("span",{className:"text-3xl","aria-hidden":"true",children:s.icon}),title:$(s.title,n)||s.title,description:$(s.body,n)||s.body}))||[],[g,n]);return e.jsxs("div",{className:"home-page-wrapper min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[e.jsx(oe,{title:l,description:t("heroLead")}),x.topStrip?.length>0&&e.jsx("div",{className:"top-strip bg-emerald-600 text-white text-sm",children:e.jsx("div",{className:"container-custom flex justify-center gap-4 py-2 overflow-x-auto",children:x.topStrip.slice(0,3).map(s=>e.jsxs("a",{href:s.linkUrl||"#",className:"inline-flex items-center gap-2 hover:opacity-90 transition truncate",children:[s.image&&e.jsx("img",{src:s.image,alt:$(s.title,n),loading:"lazy",className:"h-8 w-auto rounded-md object-cover"}),e.jsx("span",{className:"font-medium truncate max-w-xs",children:$(s.title,n)})]},s.id))})}),e.jsx(ke,{siteName:f,locale:n,t}),e.jsx("div",{className:"backdrop-blur-sm bg-white/80 dark:bg-gray-800/60 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"container-custom py-3",children:e.jsx(we,{})})}),N?e.jsxs(e.Fragment,{children:[e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"container-custom py-8",children:e.jsx("div",{className:"h-6 bg-gray-100 dark:bg-gray-800 rounded w-1/3 mb-6 animate-pulse"})}),children:e.jsx(A,{fallback:e.jsx("div",{className:"container-custom py-8",children:e.jsx("div",{className:"h-24 bg-white dark:bg-gray-800 rounded-lg shadow-sm animate-pulse"})}),children:e.jsx(Pe,{features:d})})}),e.jsxs("div",{className:"home-sections w-full overflow-hidden",children:[e.jsx("section",{className:"relative bg-gradient-to-b from-emerald-50 to-white py-12 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-4 lg:px-6",children:e.jsx("div",{className:"-mt-8 md:-mt-14",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"h-20 bg-white/60 dark:bg-gray-800/60 rounded-lg animate-pulse"}),children:e.jsx(A,{fallback:e.jsx("div",{className:"h-20 bg-white/60 dark:bg-gray-800/60 rounded-lg animate-pulse"}),children:e.jsx(Se,{categories:w,title:n==="ar"?"الاقسام":"Categories",selected:j,onSelect:s=>b(s)})})})})})}),e.jsx("section",{className:"relative py-12 md:py-16 bg-gradient-to-t from-white to-emerald-50",children:e.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-8",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:Array.from({length:6}).map((s,h)=>e.jsx("div",{className:"h-40 bg-white dark:bg-gray-800 rounded-lg shadow-sm animate-pulse"},h))}),children:e.jsx(A,{fallback:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:Array.from({length:6}).map((s,h)=>e.jsx("div",{className:"h-40 bg-white dark:bg-gray-800 rounded-lg shadow-sm animate-pulse"},h))}),children:e.jsx(Ce,{products:i,title:n==="ar"?"المنتجات المميزة":"Featured Products",limit:12})})})})})]}),e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"container-custom py-6",children:e.jsx("div",{className:"h-10 bg-white dark:bg-gray-800 rounded-lg animate-pulse"})}),children:e.jsx(A,{fallback:e.jsx("div",{className:"container-custom py-6",children:e.jsx("div",{className:"h-10 bg-white dark:bg-gray-800 rounded-lg animate-pulse"})}),children:e.jsx(_e,{})})}),e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"container-custom py-8",children:e.jsx("div",{className:"h-6 bg-gray-100 dark:bg-gray-800 rounded w-1/3 mb-6 animate-pulse"})}),children:e.jsx(A,{fallback:e.jsx("div",{className:"container-custom py-8",children:e.jsx("div",{className:"h-6 bg-gray-100 dark:bg-gray-800 rounded w-1/3 mb-6 animate-pulse"})}),children:e.jsx(Ie,{products:P})})}),e.jsx("section",{className:"home-products section-padding bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"container-fixed",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:t("latestProducts")}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r?Array.from({length:6}).map((s,h)=>e.jsx(be,{},h)):k.map(s=>e.jsx(fe,{product:s},s.id))})]})})]}):e.jsxs("div",{className:"container-custom py-8",children:[e.jsx("div",{className:"h-6 bg-gray-100 dark:bg-gray-800 rounded w-1/3 mb-6 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:Array.from({length:6}).map((s,h)=>e.jsx("div",{className:"h-40 bg-white dark:bg-gray-800 rounded-lg shadow-sm animate-pulse"},h))})]})]})},Le=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"}));export{we as C,ke as H,fe as P,be as a,Le as b};
