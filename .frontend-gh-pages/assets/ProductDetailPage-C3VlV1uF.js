import{r as n,j as e,a7 as v}from"./vendor.react-C0fmYGW5.js";import{f as N,b as S,n as i,u as w,d as z,a as k,l as R,o as P,c as C,S as T}from"./index-B0cb22ux.js";import"./vendor-CF_-ATCh.js";import"./vendor.router-2GzHiivc.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-U7UpOlxs.js";/* empty css                     */function A({productId:r}){const{user:a}=N()||{},[c,h]=n.useState([]),[m,g]=n.useState(!1),[u,t]=n.useState(null),[l,o]=n.useState({rating:5,title:"",body:""}),[p,x]=n.useState(!1),[y,f]=n.useState(!1),j=async()=>{if(r){g(!0),t(null);try{const s=await S.reviewsListForProduct(r);h(Array.isArray(s)?s:s.reviews||[])}catch(s){t(s.message)}finally{g(!1)}}};n.useEffect(()=>{j()},[r]);const b=async s=>{if(s.preventDefault(),!!a){x(!0),t(null);try{await S.reviewCreate(r,l),o({rating:5,title:"",body:""}),f(!0),setTimeout(()=>f(!1),4e3)}catch(d){t(d.message)}finally{x(!1)}}};return e.jsxs("div",{className:"product-reviews",dir:"rtl",style:{marginTop:"2rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",marginBottom:".75rem"},children:"Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"}),m&&e.jsx("div",{style:{fontSize:".7rem",color:"#64748b"},children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}),u&&e.jsx("div",{style:{fontSize:".65rem",color:"#dc2626"},children:u}),!m&&!c.length&&e.jsx("div",{style:{fontSize:".65rem",color:"#475569"},children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø¨Ø¹Ø¯."}),e.jsx("ul",{style:{listStyle:"none",margin:0,padding:5,display:"flex",flexDirection:"column",gap:10},children:c.map(s=>e.jsxs("li",{style:{background:"#f8fafc",padding:"10px 14px",borderRadius:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("strong",{style:{fontSize:".7rem"},children:s.title||"Ù…Ø±Ø§Ø¬Ø¹Ø©"}),e.jsxs("span",{style:{fontSize:".6rem",color:"#334155"},children:["â˜…".repeat(s.rating),"â˜†".repeat(Math.max(0,5-s.rating))]})]}),s.body&&e.jsx("p",{style:{margin:0,fontSize:".6rem",lineHeight:1.5},children:s.body}),e.jsx("div",{style:{fontSize:".5rem",marginTop:6,color:"#64748b"},children:new Date(s.createdAt).toLocaleDateString()})]},s.id))}),a?e.jsxs("form",{onSubmit:b,style:{marginTop:"1.25rem",display:"grid",gap:8,background:"#fff",padding:"14px 16px",border:"1px solid #e2e8f0",borderRadius:14},children:[e.jsx("h4",{style:{margin:0,fontSize:".75rem"},children:"Ø£Ø¶Ù Ù…Ø±Ø§Ø¬Ø¹Ø©"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("label",{style:{fontSize:".55rem"},children:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:"}),e.jsx("select",{value:l.rating,onChange:s=>o(d=>({...d,rating:+s.target.value})),style:{fontSize:".6rem"},children:[5,4,3,2,1].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("input",{required:!0,placeholder:"Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",value:l.title,onChange:s=>o(d=>({...d,title:s.target.value})),style:{fontSize:".6rem",padding:"8px 10px",borderRadius:10,border:"1px solid #e2e8f0"}}),e.jsx("textarea",{required:!0,placeholder:"Ù†Øµ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",value:l.body,onChange:s=>o(d=>({...d,body:s.target.value})),rows:4,style:{fontSize:".6rem",padding:"8px 10px",borderRadius:10,border:"1px solid #e2e8f0",resize:"vertical"}}),e.jsx("button",{type:"submit",disabled:p,style:{fontSize:".6rem",fontWeight:600,background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",border:0,padding:"8px 14px",borderRadius:10,cursor:"pointer"},children:p?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„"}),y&&e.jsx("div",{style:{fontSize:".55rem",color:"#16a34a"},children:"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙˆØªÙ†ØªØ¸Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ðŸ’¬"})]}):e.jsx("div",{style:{fontSize:".6rem",marginTop:"1rem",color:"#475569"},children:"Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§Ø¬Ø¹Ø©."})]})}const L=()=>e.jsxs("div",{className:"product-detail grid grid-cols-1 md:grid-cols-2 gap-6","aria-hidden":!0,children:[e.jsxs("div",{children:[e.jsx(i,{className:"w-full rounded-xl",style:{aspectRatio:"1/1"}}),e.jsx("div",{className:"mt-3 grid grid-cols-5 gap-2",children:Array.from({length:5}).map((r,a)=>e.jsx(i,{className:"w-full rounded-lg",style:{aspectRatio:"1/1"}},a))})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(i,{className:"h-7 w-3/4"}),e.jsx(i,{className:"h-4 w-2/3"}),e.jsxs("div",{className:"flex items-end gap-3 mt-2",children:[e.jsx(i,{className:"h-8 w-24"}),e.jsx(i,{className:"h-5 w-16"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[e.jsx(i,{className:"h-10 w-full rounded"}),e.jsx(i,{className:"h-10 w-full rounded"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(i,{className:"h-4 w-5/6"}),e.jsx(i,{className:"h-4 w-2/3"}),e.jsx(i,{className:"h-4 w-1/2"})]})]})]}),_=()=>{const{id:r}=v(),{locale:a}=w(),{getProductById:c}=z()||{},{addToCart:h}=k()||{addToCart:()=>{}},m=c?c(r):null,g=n.useMemo(()=>({id:r,name:a==="ar"?{ar:`Ù…Ù†ØªØ¬ Ø±Ù‚Ù… ${r}`,en:`Product #${r}`}:{ar:`Ù…Ù†ØªØ¬ Ø±Ù‚Ù… ${r}`,en:`Product #${r}`},short:{ar:"ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ù…Ù†ØªØ¬ (ØªØ¬Ø±ÙŠØ¨ÙŠ).",en:"Short experimental product description."},image:"/vite.svg",price:99,stock:5}),[r,a]),u=!m,t=m||g,l=R(t,a),o=P(t,"short",a),{setting:p}=C()||{},x=a==="ar"?p?.siteNameAr||"Ø´Ø±ÙƒØ© Ù…Ù†ÙØ° Ø§Ø³ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©":p?.siteNameEn||"My Store",y=`${l} | ${x}`,f=o,j={"@context":"https://schema.org","@type":"Product",name:l,image:[t.image],description:o,sku:t.id,offers:{"@type":"Offer",priceCurrency:"SAR",price:String(t.price||0),availability:t.stock>0?"https://schema.org/InStock":"https://schema.org/OutOfStock"}};return e.jsxs("div",{className:"product-detail","aria-busy":u?"true":"false","aria-live":"polite",children:[e.jsx(T,{title:y,description:f,image:t.image}),e.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(j)}}),u?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:l}),e.jsx("p",{children:o}),e.jsx("img",{src:t.image,alt:l,style:{maxWidth:"100%",borderRadius:8}}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[e.jsx("button",{className:"btn-primary",disabled:t.stock<=0,onClick:()=>h(t),children:t.stock<=0?a==="ar"?"ØºÙŠØ± Ù…ØªÙˆÙØ±":"Out of stock":a==="ar"?"Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©":"Add to cart"}),e.jsxs("span",{style:{fontSize:".85rem",color:"#444"},children:[a==="ar"?"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†":"Stock",": ",t.stock]})]}),e.jsx(A,{productId:t.id})]})]})};export{_ as default};
