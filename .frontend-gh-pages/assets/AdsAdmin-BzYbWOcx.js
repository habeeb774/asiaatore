import{r as i,j as e}from"./vendor.react-BIXKTxlu.js";import{g as c}from"./index-B9WgXUd4.js";import"./vendor-CKneRQof.js";import"./vendor.router-BdFOcp8q.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-Dl6I9sMh.js";/* empty css                     */const p={title:"",body:"",image:"",linkUrl:"",status:!0};function F(){const[h,u]=i.useState([]),[r,m]=i.useState(null),[t,d]=i.useState(p),[x,a]=i.useState(!1);i.useEffect(()=>{o()},[]);async function o(){a(!0);try{const s=await c.listAds();u(s||[])}catch{}a(!1)}function j(s){m(s.id),d({...s})}function n(s){const{name:l,type:g,value:f,checked:y}=s.target;d(v=>({...v,[l]:g==="checkbox"?y:f}))}async function b(s){s.preventDefault(),a(!0);try{const l={title:t.title,description:t.body,image:t.image,link:t.linkUrl,active:t.status};r?await c.updateAd(r,l):await c.createAd(l),m(null),d(p),o()}catch{}a(!1)}async function N(s){if(window.confirm("هل أنت متأكد من حذف الإعلان؟")){a(!0);try{await c.deleteAd(s),o()}catch{}a(!1)}}return e.jsxs("div",{className:"ads-admin p-6 max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"إدارة الإعلانات"}),e.jsxs("form",{onSubmit:b,className:"space-y-3 mb-6",children:[e.jsx("input",{name:"title",value:t.title,onChange:n,placeholder:"عنوان الإعلان",className:"w-full p-2 border rounded",required:!0}),e.jsx("textarea",{name:"body",value:t.body,onChange:n,placeholder:"وصف الإعلان",className:"w-full p-2 border rounded"}),e.jsx("input",{name:"image",value:t.image,onChange:n,placeholder:"رابط الصورة",className:"w-full p-2 border rounded",required:!0}),e.jsx("input",{name:"linkUrl",value:t.linkUrl,onChange:n,placeholder:"رابط إضافي (اختياري)",className:"w-full p-2 border rounded"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"status",checked:t.status,onChange:n}),e.jsx("span",{children:"مفعل"})]}),e.jsxs("button",{type:"submit",className:"btn-primary px-4 py-2",children:[r?"تعديل":"إضافة"," إعلان"]}),r&&e.jsx("button",{type:"button",className:"btn-secondary px-4 py-2 ml-2",onClick:()=>{m(null),d(p)},children:"إلغاء"})]}),e.jsxs("div",{className:"ads-list space-y-4",children:[x&&e.jsx("div",{children:"جاري التحميل..."}),e.jsxs("table",{className:"w-full border rounded mb-4 text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"الصورة"}),e.jsx("th",{className:"p-2",children:"العنوان"}),e.jsx("th",{className:"p-2",children:"الوصف"}),e.jsx("th",{className:"p-2",children:"الرابط"}),e.jsx("th",{className:"p-2",children:"الحالة"}),e.jsx("th",{className:"p-2",children:"إجراءات"})]})}),e.jsx("tbody",{children:h.map((s,l)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 text-center",children:l+1}),e.jsx("td",{className:"p-2",children:e.jsx("img",{src:s.image,alt:"",className:"w-16 h-16 object-cover rounded"})}),e.jsx("td",{className:"p-2 font-bold",children:s.title}),e.jsx("td",{className:"p-2",children:s.description}),e.jsx("td",{className:"p-2",children:s.link&&e.jsx("a",{href:s.link,className:"text-blue-600",target:"_blank",rel:"noopener noreferrer",children:"رابط"})}),e.jsxs("td",{className:"p-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.active?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:s.active?"مفعل":"غير مفعل"}),e.jsx("button",{className:"btn-secondary px-2 py-1 ml-2",onClick:async()=>{await c.updateAd(s.id,{active:!s.active}),o()},children:s.active?"تعطيل":"تفعيل"})]}),e.jsxs("td",{className:"p-2",children:[e.jsx("button",{className:"btn-secondary px-2 py-1 mr-1",onClick:()=>j({id:s.id,title:s.title,body:s.description,image:s.image,linkUrl:s.link,status:s.active}),children:"تعديل"}),e.jsx("button",{className:"btn-danger px-2 py-1",onClick:()=>N(s.id),children:"حذف"})]})]},s.id))})]}),!x&&h.length===0&&e.jsx("div",{children:"لا توجد إعلانات بعد."})]})]})}export{F as default};
