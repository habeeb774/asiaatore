const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductManager-B_yTteHg.js","assets/vendor.react-C0fmYGW5.js","assets/vendor-CF_-ATCh.js","assets/vendor.router-2GzHiivc.js","assets/vendor.i18next-COqwnjR1.js","assets/vendor.zustand-BuMo4m-J.js","assets/vendor.tanstack-K6OTystZ.js","assets/vendor.leaflet-U7UpOlxs.js","assets/index-Df3LzoMm.js","assets/index-Cx9WY-8y.css","assets/vendor-B1-rhOTE.css","assets/StoreContext-B5IXdHW_.js"])))=>i.map(i=>d[i]);
import{_ as A}from"./vendor.tanstack-K6OTystZ.js";import{r as a,j as e,L as m,R as S}from"./vendor.react-C0fmYGW5.js";import{f as C,g as L,u as k,l as I}from"./index-Df3LzoMm.js";import{u as M}from"./StoreContext-B5IXdHW_.js";import"./vendor-CF_-ATCh.js";import"./vendor.router-2GzHiivc.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.leaflet-U7UpOlxs.js";/* empty css                     */const D=S.lazy(()=>A(()=>import("./ProductManager-B_yTteHg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),B=()=>{const N=C()||{},{user:r,devLoginAs:p}=N,{orders:x}=L()||{},j=M(),u=k()?.locale||"ar",f=!r||r.role!=="seller",d=a.useMemo(()=>(j?.products||[]).filter(s=>s.sellerId===r.id),[j?.products,r?.id]),y=s=>{if(!s)return!1;if(s.productId&&d.some(i=>i.id===s.productId))return!0;const t=typeof s.name=="string"?s.name:s.name?.[u]||s.name?.ar||s.name?.en||"";if(!t)return!1;const v=String(t).trim().toLowerCase();return d.some(i=>String(I({name:i.name},u)).trim().toLowerCase()===v)},b=a.useMemo(()=>(Array.isArray(x)?x:[]).map(t=>{const i=(Array.isArray(t.items)?t.items:[]).filter(y),w=i.reduce((h,o)=>h+(Number(o.quantity)||1),0),_=i.reduce((h,o)=>h+(Number(o.price)||0)*(Number(o.quantity)||1),0);return{...t,_mineCount:i.length,_mineQty:w,_mineAmount:_}}),[x,d,u]),n=a.useMemo(()=>b.filter(s=>s.sellerId?s.sellerId===r.id:s._mineCount>0||!s.items),[b,r?.id]),l=a.useMemo(()=>({products:d.length,orders:n.length,itemsSold:n.reduce((s,t)=>s+(t._mineQty||0),0),revenue:n.reduce((s,t)=>s+(t._mineAmount||0),0)}),[d.length,n]),[c,g]=a.useState("overview");return e.jsx("div",{className:"container-custom px-4 py-12",children:f?e.jsxs("div",{children:[e.jsx("div",{children:"لا تملك صلاحية الدخول إلى لوحة البائع"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"لأغراض التجربة، يمكنك تسجيل دخول تجريبي كبائع من قائمة الحساب في الهيدر."}),typeof p=="function"&&e.jsx("button",{className:"btn-primary mt-4",onClick:()=>p("seller"),children:"تسجيل دخول تجريبي كبائع الآن"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"لوحة البائع"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{to:"/seller/products",className:"btn-primary",children:"إدارة المنتجات"}),e.jsx(m,{to:`/vendor/${r.id}`,className:"btn-secondary",children:"متجرى العام"})]})]}),e.jsxs("p",{className:"mb-6",children:["مرحباً، ",r.name]}),e.jsxs("div",{className:"mb-6 flex items-center gap-2 text-sm",children:[e.jsx("button",{className:`btn-chip ${c==="overview"?"bg-primary-red text-white":"bg-gray-100"}`,onClick:()=>g("overview"),children:"نظرة عامة"}),e.jsx("button",{className:`btn-chip ${c==="products"?"bg-primary-red text-white":"bg-gray-100"}`,onClick:()=>g("products"),children:"منتجاتي"})]}),c==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 border rounded bg-white",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"منتجاتي"}),e.jsx("div",{className:"text-2xl font-bold",children:l.products})]}),e.jsxs("div",{className:"p-4 border rounded bg-white",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"طلبات"}),e.jsx("div",{className:"text-2xl font-bold",children:l.orders})]}),e.jsxs("div",{className:"p-4 border rounded bg-white",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"قطع مباعة (تقريباً)"}),e.jsx("div",{className:"text-2xl font-bold",children:l.itemsSold})]}),e.jsxs("div",{className:"p-4 border rounded bg-white",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"إيراد تقديري"}),e.jsxs("div",{className:"text-2xl font-bold",children:[l.revenue.toFixed(2)," ر.س"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"أحدث الطلبات"}),e.jsxs("div",{className:"space-y-3",children:[n.slice(0,10).map(s=>e.jsxs("div",{className:"p-4 border rounded bg-white flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:["#",s.id," — ",s.status||"pending"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["بتاريخ: ",s.createdAt?new Date(s.createdAt).toLocaleString():"—"]})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("div",{children:["عناصر لي: ",e.jsx("strong",{children:s._mineQty||0})]}),e.jsxs("div",{children:["إجمالي تقديري: ",e.jsxs("strong",{children:[(s._mineAmount||0).toFixed(2)," ر.س"]})]})]})]},s.id)),n.length===0&&e.jsx("div",{className:"text-gray-600",children:"لا توجد طلبات مرتبطة بك حالياً"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"إجراءات سريعة"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(m,{to:"/seller/products",className:"btn-outline",children:"إضافة منتج جديد"}),e.jsx(m,{to:"/products",className:"btn-outline",children:"استعراض المتجر"}),e.jsx("a",{href:"#",className:"btn-outline",onClick:s=>s.preventDefault(),children:"إعدادات الشحن (قريباً)"})]})]})]}),c==="products"&&e.jsx("div",{className:"bg-white border rounded p-4",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"text-sm text-gray-500",children:"جاري تحميل إدارة المنتجات…"}),children:e.jsx(D,{embedded:!0})})})]})})};export{B as default};
