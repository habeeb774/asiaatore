import{r as a,j as e}from"./vendor.react-C0fmYGW5.js";import{j as c}from"./index-B0cb22ux.js";import"./vendor-CF_-ATCh.js";import"./vendor.router-2GzHiivc.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-U7UpOlxs.js";/* empty css                     */function C(){const[d,m]=a.useState([]),[i,x]=a.useState("pending"),[p,l]=a.useState(!0),[o,r]=a.useState(""),n=async()=>{l(!0),r("");try{const s=await c.listUsers({status:i});m(s.items||s.users||[])}catch(s){r(s.data?.error||s.message)}finally{l(!1)}};a.useEffect(()=>{n()},[i]);const j=async s=>{try{await c.activateUser(s),await n()}catch(t){r(t.data?.error||t.message)}},u=async s=>{prompt("سبب الرفض؟");try{await c.deactivateUser(s),await n()}catch(t){r(t.data?.error||t.message)}};return e.jsxs("div",{className:"container-custom p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"مراجعة KYC للبائعين"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm",children:[e.jsx("label",{children:"الحالة:"}),e.jsxs("select",{className:"border px-2 py-1",value:i,onChange:s=>x(s.target.value),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"none",children:"None"})]}),e.jsx("button",{className:"btn-secondary btn-xs",onClick:n,children:"تحديث"})]}),o&&e.jsxs("div",{className:"text-sm text-red-600 mb-2",children:["خطأ: ",String(o)]}),p?e.jsx("div",{children:"تحميل..."}):e.jsxs("ul",{className:"space-y-3",children:[d.map(s=>e.jsxs("li",{className:"border rounded p-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"font-semibold",children:[s.storeName," — ",s.user?.email||s.userId]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-primary btn-xs",onClick:()=>j(s.id),children:"موافقة"}),e.jsx("button",{className:"btn-danger btn-xs",onClick:()=>u(s.id),children:"رفض"})]})]}),e.jsxs("div",{children:["Company: ",s.companyName||"—"," | CR: ",s.crNumber||"—"]}),e.jsxs("div",{children:["IBAN: ",s.iban||"—"," | Bank: ",s.bankName||"—"]}),e.jsxs("div",{children:["Address: ",s.addressText||"—"]}),e.jsxs("div",{children:["Status: ",e.jsx("strong",{children:s.kycStatus||"none"})]})]},s.id)),d.length===0&&e.jsx("li",{className:"text-gray-500",children:"لا يوجد عناصر"})]})]})}export{C as default};
