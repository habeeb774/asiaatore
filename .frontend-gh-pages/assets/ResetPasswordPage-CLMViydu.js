import{a6 as v,b as C,r,j as e,L as R}from"./vendor.react-C0fmYGW5.js";import{b as z}from"./index-8VDXgoeV.js";import"./vendor-CF_-ATCh.js";import"./vendor.router-2GzHiivc.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-U7UpOlxs.js";/* empty css                     */const G=()=>{const[p]=v(),y=C(),o=p.get("email")||"",a=p.get("token")||"",[d,u]=r.useState(o),[m,f]=r.useState(a),[n,w]=r.useState(""),[g,k]=r.useState(""),[S,h]=r.useState(!1),[x,s]=r.useState(null),[c,b]=r.useState(!1);r.useEffect(()=>{o&&u(o),a&&f(a)},[o,a]);const j=async t=>{if(t.preventDefault(),!c){if(s(null),h(!1),!d.trim()||!m.trim()||!n){s("أكمل الحقول");return}if(n!==g){s("كلمتا المرور غير متطابقتين");return}try{b(!0);const i=await z.authResetWithToken(d.trim(),m.trim(),n);i.ok?(h(!0),setTimeout(()=>y("/login",{replace:!0}),1200)):s(i.error||"فشل التعيين")}catch(i){s(i.message||"خطأ")}finally{b(!1)}}};return e.jsx("div",{style:{direction:"rtl",display:"flex",justifyContent:"center",padding:"2rem"},children:e.jsxs("form",{onSubmit:j,style:E,children:[e.jsx("h1",{style:P,children:"إعادة تعيين كلمة المرور"}),e.jsx("input",{id:"reset-email",name:"email",autoComplete:"email",style:l,placeholder:"البريد",value:d,onChange:t=>u(t.target.value)}),e.jsx("input",{id:"reset-token",name:"token",style:l,placeholder:"رمز التحقق",value:m,onChange:t=>f(t.target.value)}),e.jsx("input",{id:"reset-password",name:"new-password",autoComplete:"new-password",style:l,type:"password",placeholder:"كلمة المرور الجديدة",value:n,onChange:t=>w(t.target.value)}),e.jsx("input",{id:"reset-password-confirm",name:"new-password-confirm",autoComplete:"new-password",style:l,type:"password",placeholder:"تأكيد كلمة المرور",value:g,onChange:t=>k(t.target.value)}),x&&e.jsx("div",{style:W,children:x}),S&&e.jsx("div",{style:L,children:"تم التعيين بنجاح"}),e.jsx("button",{type:"submit",style:T,disabled:c,children:c?"...تنفيذ":"تعيين"}),e.jsxs("p",{style:{fontSize:".65rem",marginTop:".5rem"},children:["تذكرت؟ ",e.jsx(R,{to:"/login",children:"الدخول"})]})]})})},E={background:"#fff",padding:"1.5rem 1.4rem 2rem",border:"1px solid #e2e8f0",borderRadius:18,display:"flex",flexDirection:"column",gap:".65rem",width:"100%",maxWidth:420,boxShadow:"0 8px 34px -12px rgba(0,0,0,.15)"},P={margin:0,fontSize:"1.25rem",fontWeight:700},l={padding:".65rem .85rem",border:"1px solid #e2e8f0",borderRadius:12,fontSize:".8rem"},T={padding:".7rem 1rem",border:0,borderRadius:12,background:"linear-gradient(90deg,#69be3c,#f6ad55)",color:"#fff",fontSize:".8rem",fontWeight:600,cursor:"pointer"},W={background:"#fee2e2",color:"#b91c1c",padding:".5rem .7rem",borderRadius:12,fontSize:".65rem",lineHeight:1.5},L={background:"#dcfce7",color:"#166534",padding:".5rem .7rem",borderRadius:12,fontSize:".65rem",lineHeight:1.5};export{G as default};
