import{r as l,j as e,L as d}from"./vendor.react-C0fmYGW5.js";import{f as E,u as L,S as C,b as v}from"./index-Df3LzoMm.js";import"./vendor-CF_-ATCh.js";import"./vendor.router-2GzHiivc.js";import"./vendor.i18next-COqwnjR1.js";import"./vendor.zustand-BuMo4m-J.js";import"./vendor.tanstack-K6OTystZ.js";import"./vendor.leaflet-U7UpOlxs.js";/* empty css                     */const x="border border-gray-300 rounded-lg px-3 py-2 w-full text-sm",u="block text-sm font-semibold mb-1",T=()=>{const{user:n,logout:S}=E()||{},{locale:s}=L(),[w,h]=l.useState(!0),[p,f]=l.useState(!1),[g,c]=l.useState(""),[b,j]=l.useState(""),[i,y]=l.useState({name:"",email:"",phone:""});l.useEffect(()=>{let a=!0;return h(!0),(async()=>{try{const r=await v.me(),o=r?.user||r||{};a&&y({name:o.name||n?.name||"",email:o.email||n?.email||"",phone:o.phone||""})}catch(r){a&&c(r.message||"فشل تحميل البيانات")}finally{a&&h(!1)}})(),()=>{a=!1}},[n]);const N=a=>{const{name:t,value:r}=a.target;y(o=>({...o,[t]:r}))},k=async a=>{a.preventDefault(),f(!0),c(""),j("");try{const t={name:i.name,phone:i.phone};await v.meUpdate(t),j(s==="ar"?"تم حفظ البيانات بنجاح":"Saved successfully")}catch(t){c(t.message||(s==="ar"?"فشل الحفظ":"Save failed"))}finally{f(!1)}},m=s==="ar"?"ملفي الشخصي":"My Profile";return e.jsxs("div",{className:"container-custom px-4 py-8",children:[e.jsx(C,{title:m,description:m}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:m}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr,320px] gap-6",children:[e.jsx("section",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:w?e.jsx("p",{className:"text-sm text-gray-600",children:s==="ar"?"جاري التحميل...":"Loading..."}):e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[g&&e.jsx("div",{className:"text-sm text-red-600",children:g}),b&&e.jsx("div",{className:"text-sm text-green-700",children:b}),e.jsxs("div",{children:[e.jsx("label",{className:u,children:s==="ar"?"الاسم":"Name"}),e.jsx("input",{name:"name",value:i.name,onChange:N,className:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:u,children:s==="ar"?"البريد الإلكتروني":"Email"}),e.jsx("input",{name:"email",value:i.email,readOnly:!0,className:`${x} bg-gray-50`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s==="ar"?"البريد غير قابل للتعديل":"Email is not editable"})]}),e.jsxs("div",{children:[e.jsx("label",{className:u,children:s==="ar"?"رقم الجوال":"Phone"}),e.jsx("input",{name:"phone",value:i.phone,onChange:N,className:x,placeholder:"05xxxxxxxx"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:p,className:"btn-primary px-5 py-2 text-sm disabled:opacity-60",children:p?s==="ar"?"جارِ الحفظ...":"Saving...":s==="ar"?"حفظ":"Save"}),e.jsx(d,{to:"/account/security",className:"btn-outline px-5 py-2 text-sm",children:s==="ar"?"الأمان وكلمة المرور":"Security & Password"})]})]})}),e.jsxs("aside",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4 h-fit",children:[e.jsx("h3",{className:"font-bold mb-3",children:s==="ar"?"روابط سريعة":"Quick links"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(d,{to:"/my-orders",className:"btn-outline text-sm",children:s==="ar"?"طلباتي":"My Orders"}),e.jsx(d,{to:"/offers",className:"btn-outline text-sm",children:s==="ar"?"العروض":"Offers"}),e.jsx("button",{onClick:S,className:"btn-outline text-sm",children:s==="ar"?"تسجيل الخروج":"Logout"})]}),n?.role&&e.jsx("div",{className:"mt-4 text-xs text-gray-600",children:e.jsxs("div",{children:[s==="ar"?"الدور:":"Role:"," ",e.jsx("strong",{children:n.role})]})})]})]})]})};export{T as default};
